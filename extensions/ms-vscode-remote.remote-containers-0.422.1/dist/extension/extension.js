/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var P9=Object.create;var vC=Object.defineProperty;var b9=Object.getOwnPropertyDescriptor;var T9=Object.getOwnPropertyNames;var R9=Object.getPrototypeOf,k9=Object.prototype.hasOwnProperty;var ne=(t,e)=>()=>(t&&(e=t(t=0)),e);var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wC=(t,e)=>{for(var n in e)vC(t,n,{get:e[n],enumerable:!0})},LO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of T9(e))!k9.call(t,o)&&o!==n&&vC(t,o,{get:()=>e[o],enumerable:!(r=b9(e,o))||r.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?P9(R9(t)):{},LO(e||!t||!t.__esModule?vC(n,"default",{value:t,enumerable:!0}):n,t)),N9=t=>LO(vC({},"__esModule",{value:!0}),t);var Or=$((Qge,UO)=>{"use strict";var k0=Object.defineProperty,L9=Object.getOwnPropertyDescriptor,A9=Object.getOwnPropertyNames,F9=Object.prototype.hasOwnProperty,O9=(t,e)=>{for(var n in e)k0(t,n,{get:e[n],enumerable:!0})},U9=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of A9(e))!F9.call(t,o)&&o!==n&&k0(t,o,{get:()=>e[o],enumerable:!(r=L9(e,o))||r.enumerable});return t},$9=t=>U9(k0({},"__esModule",{value:!0}),t),FO={};O9(FO,{config:()=>j9,t:()=>OO});UO.exports=$9(FO);var M9=require("fs"),H9=require("fs/promises");async function B9(t){if(t.protocol==="file:")return await(0,H9.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let r=`Unexpected ${e.status} response while trying to read ${t}`;try{r+=`: ${await e.text()}`}catch{}throw new Error(r)}return await e.text()}throw new Error("Unsupported protocol")}function W9(t){return(0,M9.readFileSync)(t,"utf8")}var qu;function j9(t){if("contents"in t){typeof t.contents=="string"?qu=JSON.parse(t.contents):qu=t.contents;return}if("fsPath"in t){let e=W9(t.fsPath),n=JSON.parse(e);qu=AO(n)?n.contents.bundle:n;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((n,r)=>{B9(e).then(o=>{try{let i=JSON.parse(o);qu=AO(i)?i.contents.bundle:i,n()}catch(i){r(i)}}).catch(o=>{r(o)})})}}function OO(...t){let e=t[0],n,r,o;if(typeof e=="string")n=e,r=e,t.splice(0,1),o=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return OO(a,...s)}else r=e.message,n=r,e.comment&&e.comment.length>0&&(n+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),o=e.args??{};let i=qu==null?void 0:qu[n];return i?typeof i=="string"?yC(i,o):i.comment?yC(i.message,o):yC(r,o):yC(r,o)}var V9=/{([^}]+)}/g;function yC(t,e){return Object.keys(e).length===0?t:t.replace(V9,(n,r)=>e[r]??n)}function AO(t){var e;return typeof((e=t==null?void 0:t.contents)==null?void 0:e.bundle)=="object"&&typeof(t==null?void 0:t.version)=="string"}});var s1=$((xve,i1)=>{var pm=1e3,hm=pm*60,gm=hm*60,Xu=gm*24,c7=Xu*7,l7=Xu*365.25;i1.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return u7(t);if(n==="number"&&isFinite(t))return e.long?d7(t):f7(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function u7(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l7;case"weeks":case"week":case"w":return n*c7;case"days":case"day":case"d":return n*Xu;case"hours":case"hour":case"hrs":case"hr":case"h":return n*gm;case"minutes":case"minute":case"mins":case"min":case"m":return n*hm;case"seconds":case"second":case"secs":case"sec":case"s":return n*pm;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function f7(t){var e=Math.abs(t);return e>=Xu?Math.round(t/Xu)+"d":e>=gm?Math.round(t/gm)+"h":e>=hm?Math.round(t/hm)+"m":e>=pm?Math.round(t/pm)+"s":t+"ms"}function d7(t){var e=Math.abs(t);return e>=Xu?bC(t,e,Xu,"day"):e>=gm?bC(t,e,gm,"hour"):e>=hm?bC(t,e,hm,"minute"):e>=pm?bC(t,e,pm,"second"):t+" ms"}function bC(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}});var W0=$((_ve,a1)=>{function m7(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=s1(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let f=0;for(let m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=e;function n(u){let f,m=null,d,p;function h(...g){if(!h.enabled)return;let v=h,C=Number(new Date),w=C-(f||C);v.diff=w,v.prev=f,v.curr=C,f=C,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(D,x)=>{if(D==="%%")return"%";y++;let A=n.formatters[x];if(typeof A=="function"){let F=g[y];D=A.call(v,F),g.splice(y,1),y--}return D}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return h.namespace=u,h.useColors=n.useColors(),h.color=n.selectColor(u),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(u)),p),set:g=>{m=g}}),typeof n.init=="function"&&n.init(h),h}function r(u,f){let m=n(this.namespace+(typeof f>"u"?":":f)+u);return m.log=this.log,m}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of f)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function i(u,f){let m=0,d=0,p=-1,h=0;for(;m<u.length;)if(d<f.length&&(f[d]===u[m]||f[d]==="*"))f[d]==="*"?(p=d,h=m,d++):(m++,d++);else if(p!==-1)d=p+1,h++,m=h;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function s(){let u=[...n.names,...n.skips.map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){for(let f of n.skips)if(i(u,f))return!1;for(let f of n.names)if(i(u,f))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}a1.exports=m7});var c1=$((_o,TC)=>{_o.formatArgs=h7;_o.save=g7;_o.load=v7;_o.useColors=p7;_o.storage=w7();_o.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();_o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function p7(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function h7(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+TC.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}_o.log=console.debug||console.log||(()=>{});function g7(t){try{t?_o.storage.setItem("debug",t):_o.storage.removeItem("debug")}catch{}}function v7(){let t;try{t=_o.storage.getItem("debug")||_o.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function w7(){try{return localStorage}catch{}}TC.exports=W0()(_o);var{formatters:y7}=TC.exports;y7.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var u1=$((Dve,l1)=>{"use strict";l1.exports=(t,e)=>{e=e||process.argv;let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1?!0:r<o)}});var d1=$((Ive,f1)=>{"use strict";var C7=require("os"),ts=u1(),Ur=process.env,vm;ts("no-color")||ts("no-colors")||ts("color=false")?vm=!1:(ts("color")||ts("colors")||ts("color=true")||ts("color=always"))&&(vm=!0);"FORCE_COLOR"in Ur&&(vm=Ur.FORCE_COLOR.length===0||parseInt(Ur.FORCE_COLOR,10)!==0);function E7(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function S7(t){if(vm===!1)return 0;if(ts("color=16m")||ts("color=full")||ts("color=truecolor"))return 3;if(ts("color=256"))return 2;if(t&&!t.isTTY&&vm!==!0)return 0;let e=vm?1:0;if(process.platform==="win32"){let n=C7.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Ur)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in Ur)||Ur.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Ur)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ur.TEAMCITY_VERSION)?1:0;if(Ur.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ur){let n=parseInt((Ur.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ur.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ur.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ur.TERM)||"COLORTERM"in Ur?1:(Ur.TERM==="dumb",e)}function j0(t){let e=S7(t);return E7(e)}f1.exports={supportsColor:j0,stdout:j0(process.stdout),stderr:j0(process.stderr)}});var p1=$((tr,kC)=>{var x7=require("tty"),RC=require("util");tr.init=R7;tr.log=P7;tr.formatArgs=D7;tr.save=b7;tr.load=T7;tr.useColors=_7;tr.destroy=RC.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");tr.colors=[6,2,3,4,5,1];try{let t=d1();t&&(t.stderr||t).level>=2&&(tr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}tr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function _7(){return"colors"in tr.inspectOpts?!!tr.inspectOpts.colors:x7.isatty(process.stderr.fd)}function D7(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+kC.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=I7()+e+" "+t[0]}function I7(){return tr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function P7(...t){return process.stderr.write(RC.formatWithOptions(tr.inspectOpts,...t)+`
`)}function b7(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function T7(){return process.env.DEBUG}function R7(t){t.inspectOpts={};let e=Object.keys(tr.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=tr.inspectOpts[e[n]]}kC.exports=W0()(tr);var{formatters:m1}=kC.exports;m1.o=function(t){return this.inspectOpts.colors=this.useColors,RC.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};m1.O=function(t){return this.inspectOpts.colors=this.useColors,RC.inspect(t,this.inspectOpts)}});var NC=$((Pve,V0)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?V0.exports=c1():V0.exports=p1()});var g1=$((bve,h1)=>{var bg;h1.exports=function(){if(!bg){try{bg=NC()("follow-redirects")}catch{}typeof bg!="function"&&(bg=function(){})}bg.apply(null,arguments)}});var LC=$((Tve,nP)=>{var Rg=require("url"),Tg=Rg.URL,k7=require("http"),N7=require("https"),K0=require("stream").Writable,J0=require("assert"),v1=g1();(function(){var e=typeof process<"u",n=typeof window<"u"&&typeof document<"u",r=Qu(Error.captureStackTrace);!e&&(n||!r)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var X0=!1;try{J0(new Tg(""))}catch(t){X0=t.code==="ERR_INVALID_URL"}var L7=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],Z0=["abort","aborted","connect","error","socket","timeout"],Q0=Object.create(null);Z0.forEach(function(t){Q0[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}});var q0=kg("ERR_INVALID_URL","Invalid URL",TypeError),G0=kg("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),A7=kg("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",G0),F7=kg("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),O7=kg("ERR_STREAM_WRITE_AFTER_END","write after end"),U7=K0.prototype.destroy||y1;function Do(t,e){K0.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(o){n.emit("error",o instanceof G0?o:new G0({cause:o}))}},this._performRequest()}Do.prototype=Object.create(K0.prototype);Do.prototype.abort=function(){tP(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};Do.prototype.destroy=function(t){return tP(this._currentRequest,t),U7.call(this,t),this};Do.prototype.write=function(t,e,n){if(this._ending)throw new O7;if(!Zu(t)&&!H7(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(Qu(e)&&(n=e,e=null),t.length===0){n&&n();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new F7),this.abort())};Do.prototype.end=function(t,e,n){if(Qu(t)?(n=t,t=e=null):Qu(e)&&(n=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,o=this._currentRequest;this.write(t,e,function(){r._ended=!0,o.end(null,null,n)}),this._ending=!0}};Do.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Do.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Do.prototype.setTimeout=function(t,e){var n=this;function r(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),i()},t),r(s)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),e&&n.removeListener("timeout",e),n.socket||n._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Do.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Do.prototype,t,{get:function(){return this._currentRequest[t]}})});Do.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Do.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=e.request(this._options,this._onNativeResponse);r._redirectable=this;for(var o of Z0)r.on(o,Q0[o]);if(this._currentUrl=/^\//.test(this._options.path)?Rg.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(r===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];r.finished||r.write(u.data,u.encoding,c)}else s._ended&&r.end()})()}};Do.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(!n||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(tP(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new A7;var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var i=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Y0(/^content-/i,this._options.headers));var s=Y0(/^host$/i,this._options.headers),a=eP(this._currentUrl),c=s||a.host,l=/^\w+:/.test(n)?this._currentUrl:Rg.format(Object.assign(a,{host:c})),u=$7(n,l);if(v1("redirecting to",u.href),this._isRedirect=!0,z0(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!M7(u.host,c))&&Y0(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),Qu(o)){var f={headers:t.headers,statusCode:e},m={url:l,method:i,headers:r};o(this._options,f,m),this._sanitizeOptions(this._options)}this._performRequest()};function w1(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach(function(r){var o=r+":",i=n[o]=t[r],s=e[r]=Object.create(i);function a(l,u,f){return B7(l)?l=z0(l):Zu(l)?l=z0(eP(l)):(f=u,u=C1(l),l={protocol:o}),Qu(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=n,!Zu(u.host)&&!Zu(u.hostname)&&(u.hostname="::1"),J0.equal(u.protocol,o,"protocol mismatch"),v1("options",u),new Do(u,f)}function c(l,u,f){var m=s.request(l,u,f);return m.end(),m}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function y1(){}function eP(t){var e;if(X0)e=new Tg(t);else if(e=C1(Rg.parse(t)),!Zu(e.protocol))throw new q0({input:t});return e}function $7(t,e){return X0?new Tg(t,e):eP(Rg.resolve(e,t))}function C1(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new q0({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new q0({input:t.href||t});return t}function z0(t,e){var n=e||{};for(var r of L7)n[r]=t[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function Y0(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function kg(t,e,n){function r(o){Qu(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),r}function tP(t,e){for(var n of Z0)t.removeListener(n,Q0[n]);t.on("error",y1),t.destroy(e)}function M7(t,e){J0(Zu(t)&&Zu(e));var n=t.length-e.length-1;return n>0&&t[n]==="."&&t.endsWith(e)}function Zu(t){return typeof t=="string"||t instanceof String}function Qu(t){return typeof t=="function"}function H7(t){return typeof t=="object"&&"length"in t}function B7(t){return Tg&&t instanceof Tg}nP.exports=w1({http:k7,https:N7});nP.exports.wrap=w1});var wm=$((Rve,S1)=>{"use strict";var E1=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);S1.exports=t=>t?Object.keys(t).map(e=>[E1.has(e)?E1.get(e):e,t[e]]).reduce((e,n)=>(e[n[0]]=n[1],e),Object.create(null)):{}});var HC=$(N1=>{"use strict";var x1=typeof process=="object"&&process?process:{stdout:null,stderr:null},W7=require("events"),_1=require("stream"),j7=require("string_decoder"),D1=j7.StringDecoder,$a=Symbol("EOF"),Ma=Symbol("maybeEmitEnd"),Qc=Symbol("emittedEnd"),AC=Symbol("emittingEnd"),Ng=Symbol("emittedError"),FC=Symbol("closed"),I1=Symbol("read"),OC=Symbol("flush"),P1=Symbol("flushChunk"),Io=Symbol("encoding"),Ha=Symbol("decoder"),UC=Symbol("flowing"),Lg=Symbol("paused"),ym=Symbol("resume"),yn=Symbol("buffer"),Us=Symbol("pipes"),nr=Symbol("bufferLength"),rP=Symbol("bufferPush"),oP=Symbol("bufferShift"),Cr=Symbol("objectMode"),Cn=Symbol("destroyed"),iP=Symbol("error"),sP=Symbol("emitData"),b1=Symbol("emitEnd"),aP=Symbol("emitEnd2"),Ba=Symbol("async"),cP=Symbol("abort"),$C=Symbol("aborted"),ef=Symbol("signal"),Ag=t=>Promise.resolve().then(t),k1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",T1=k1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),R1=k1&&Symbol.iterator||Symbol("iterator not implemented"),V7=t=>t==="end"||t==="finish"||t==="prefinish",Y7=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,q7=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),MC=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[ym](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},lP=class extends MC{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}},uP=class t extends _1{constructor(e){super(),this[UC]=!1,this[Lg]=!1,this[Us]=[],this[yn]=[],this[Cr]=e&&e.objectMode||!1,this[Cr]?this[Io]=null:this[Io]=e&&e.encoding||null,this[Io]==="buffer"&&(this[Io]=null),this[Ba]=e&&!!e.async||!1,this[Ha]=this[Io]?new D1(this[Io]):null,this[$a]=!1,this[Qc]=!1,this[AC]=!1,this[FC]=!1,this[Ng]=null,this.writable=!0,this.readable=!0,this[nr]=0,this[Cn]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[yn]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Us]}),this[ef]=e&&e.signal,this[$C]=!1,this[ef]&&(this[ef].addEventListener("abort",()=>this[cP]()),this[ef].aborted&&this[cP]())}get bufferLength(){return this[nr]}get encoding(){return this[Io]}set encoding(e){if(this[Cr])throw new Error("cannot set encoding in objectMode");if(this[Io]&&e!==this[Io]&&(this[Ha]&&this[Ha].lastNeed||this[nr]))throw new Error("cannot change encoding");this[Io]!==e&&(this[Ha]=e?new D1(e):null,this[yn].length&&(this[yn]=this[yn].map(n=>this[Ha].write(n)))),this[Io]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Cr]}set objectMode(e){this[Cr]=this[Cr]||!!e}get async(){return this[Ba]}set async(e){this[Ba]=this[Ba]||!!e}[cP](){this[$C]=!0,this.emit("abort",this[ef].reason),this.destroy(this[ef].reason)}get aborted(){return this[$C]}set aborted(e){}write(e,n,r){if(this[$C])return!1;if(this[$a])throw new Error("write after end");if(this[Cn])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Ba]?Ag:i=>i();return!this[Cr]&&!Buffer.isBuffer(e)&&(q7(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Y7(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Cr]?(this.flowing&&this[nr]!==0&&this[OC](!0),this.flowing?this.emit("data",e):this[rP](e),this[nr]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[Io]&&!this[Ha].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Io]&&(e=this[Ha].write(e)),this.flowing&&this[nr]!==0&&this[OC](!0),this.flowing?this.emit("data",e):this[rP](e),this[nr]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[nr]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Cn])return null;if(this[nr]===0||e===0||e>this[nr])return this[Ma](),null;this[Cr]&&(e=null),this[yn].length>1&&!this[Cr]&&(this.encoding?this[yn]=[this[yn].join("")]:this[yn]=[Buffer.concat(this[yn],this[nr])]);let n=this[I1](e||null,this[yn][0]);return this[Ma](),n}[I1](e,n){return e===n.length||e===null?this[oP]():(this[yn][0]=n.slice(e),n=n.slice(0,e),this[nr]-=e),this.emit("data",n),!this[yn].length&&!this[$a]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[$a]=!0,this.writable=!1,(this.flowing||!this[Lg])&&this[Ma](),this}[ym](){this[Cn]||(this[Lg]=!1,this[UC]=!0,this.emit("resume"),this[yn].length?this[OC]():this[$a]?this[Ma]():this.emit("drain"))}resume(){return this[ym]()}pause(){this[UC]=!1,this[Lg]=!0}get destroyed(){return this[Cn]}get flowing(){return this[UC]}get paused(){return this[Lg]}[rP](e){this[Cr]?this[nr]+=1:this[nr]+=e.length,this[yn].push(e)}[oP](){return this[Cr]?this[nr]-=1:this[nr]-=this[yn][0].length,this[yn].shift()}[OC](e){do;while(this[P1](this[oP]())&&this[yn].length);!e&&!this[yn].length&&!this[$a]&&this.emit("drain")}[P1](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[Cn])return;let r=this[Qc];return n=n||{},e===x1.stdout||e===x1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Us].push(n.proxyErrors?new lP(this,e,n):new MC(this,e,n)),this[Ba]?Ag(()=>this[ym]()):this[ym]()),e}unpipe(e){let n=this[Us].find(r=>r.dest===e);n&&(this[Us].splice(this[Us].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[Us].length&&!this.flowing?this[ym]():e==="readable"&&this[nr]!==0?super.emit("readable"):V7(e)&&this[Qc]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Ng]&&(this[Ba]?Ag(()=>n.call(this,this[Ng])):n.call(this,this[Ng])),r}get emittedEnd(){return this[Qc]}[Ma](){!this[AC]&&!this[Qc]&&!this[Cn]&&this[yn].length===0&&this[$a]&&(this[AC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[FC]&&this.emit("close"),this[AC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Cn&&this[Cn])return;if(e==="data")return!this[Cr]&&!n?!1:this[Ba]?Ag(()=>this[sP](n)):this[sP](n);if(e==="end")return this[b1]();if(e==="close"){if(this[FC]=!0,!this[Qc]&&!this[Cn])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Ng]=n,super.emit(iP,n);let i=!this[ef]||this.listeners("error").length?super.emit("error",n):!1;return this[Ma](),i}else if(e==="resume"){let i=super.emit("resume");return this[Ma](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[Ma](),o}[sP](e){for(let r of this[Us])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Ma](),n}[b1](){this[Qc]||(this[Qc]=!0,this.readable=!1,this[Ba]?Ag(()=>this[aP]()):this[aP]())}[aP](){if(this[Ha]){let n=this[Ha].end();if(n){for(let r of this[Us])r.dest.write(n);super.emit("data",n)}}for(let n of this[Us])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Cr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Cr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Cr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Cr]?Promise.reject(new Error("cannot concat in objectMode")):this[Io]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Cn,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[T1](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let o=this.read();if(o!==null)return Promise.resolve({done:!1,value:o});if(this[$a])return n();let i=null,s=null,a=f=>{this.removeListener("data",c),this.removeListener("end",l),this.removeListener(Cn,u),n(),s(f)},c=f=>{this.removeListener("error",a),this.removeListener("end",l),this.removeListener(Cn,u),this.pause(),i({value:f,done:!!this[$a]})},l=()=>{this.removeListener("error",a),this.removeListener("data",c),this.removeListener(Cn,u),n(),i({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,m)=>{s=m,i=f,this.once(Cn,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:n,return:n,[T1](){return this}}}[R1](){let e=!1,n=()=>(this.pause(),this.removeListener(iP,n),this.removeListener(Cn,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let o=this.read();return o===null?n():{value:o}};return this.once("end",n),this.once(iP,n),this.once(Cn,n),{next:r,throw:n,return:n,[R1](){return this}}}destroy(e){return this[Cn]?(e?this.emit("error",e):this.emit(Cn),this):(this[Cn]=!0,this[yn].length=0,this[nr]=0,typeof this.close=="function"&&!this[FC]&&this.close(),e?this.emit("error",e):this.emit(Cn),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof _1||e instanceof W7&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};N1.Minipass=uP});var A1=$((Nve,L1)=>{var G7=require("zlib").constants||{ZLIB_VERNUM:4736};L1.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},G7))});var V1=$((Lve,j1)=>{"use strict";var F1=typeof process=="object"&&process?process:{stdout:null,stderr:null},z7=require("events"),O1=require("stream"),U1=require("string_decoder").StringDecoder,Wa=Symbol("EOF"),ja=Symbol("maybeEmitEnd"),el=Symbol("emittedEnd"),BC=Symbol("emittingEnd"),Fg=Symbol("emittedError"),WC=Symbol("closed"),$1=Symbol("read"),jC=Symbol("flush"),M1=Symbol("flushChunk"),Po=Symbol("encoding"),Va=Symbol("decoder"),VC=Symbol("flowing"),Og=Symbol("paused"),Cm=Symbol("resume"),rr=Symbol("bufferLength"),fP=Symbol("bufferPush"),dP=Symbol("bufferShift"),$r=Symbol("objectMode"),Mr=Symbol("destroyed"),mP=Symbol("emitData"),H1=Symbol("emitEnd"),pP=Symbol("emitEnd2"),Ya=Symbol("async"),Ug=t=>Promise.resolve().then(t),B1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",K7=B1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),J7=B1&&Symbol.iterator||Symbol("iterator not implemented"),X7=t=>t==="end"||t==="finish"||t==="prefinish",Z7=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Q7=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),YC=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Cm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},hP=class extends YC{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};j1.exports=class W1 extends O1{constructor(e){super(),this[VC]=!1,this[Og]=!1,this.pipes=[],this.buffer=[],this[$r]=e&&e.objectMode||!1,this[$r]?this[Po]=null:this[Po]=e&&e.encoding||null,this[Po]==="buffer"&&(this[Po]=null),this[Ya]=e&&!!e.async||!1,this[Va]=this[Po]?new U1(this[Po]):null,this[Wa]=!1,this[el]=!1,this[BC]=!1,this[WC]=!1,this[Fg]=null,this.writable=!0,this.readable=!0,this[rr]=0,this[Mr]=!1}get bufferLength(){return this[rr]}get encoding(){return this[Po]}set encoding(e){if(this[$r])throw new Error("cannot set encoding in objectMode");if(this[Po]&&e!==this[Po]&&(this[Va]&&this[Va].lastNeed||this[rr]))throw new Error("cannot change encoding");this[Po]!==e&&(this[Va]=e?new U1(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[Va].write(n)))),this[Po]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[$r]}set objectMode(e){this[$r]=this[$r]||!!e}get async(){return this[Ya]}set async(e){this[Ya]=this[Ya]||!!e}write(e,n,r){if(this[Wa])throw new Error("write after end");if(this[Mr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Ya]?Ug:i=>i();return!this[$r]&&!Buffer.isBuffer(e)&&(Q7(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Z7(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[$r]?(this.flowing&&this[rr]!==0&&this[jC](!0),this.flowing?this.emit("data",e):this[fP](e),this[rr]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[Po]&&!this[Va].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Po]&&(e=this[Va].write(e)),this.flowing&&this[rr]!==0&&this[jC](!0),this.flowing?this.emit("data",e):this[fP](e),this[rr]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[rr]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Mr])return null;if(this[rr]===0||e===0||e>this[rr])return this[ja](),null;this[$r]&&(e=null),this.buffer.length>1&&!this[$r]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[rr])]);let n=this[$1](e||null,this.buffer[0]);return this[ja](),n}[$1](e,n){return e===n.length||e===null?this[dP]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[rr]-=e),this.emit("data",n),!this.buffer.length&&!this[Wa]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Wa]=!0,this.writable=!1,(this.flowing||!this[Og])&&this[ja](),this}[Cm](){this[Mr]||(this[Og]=!1,this[VC]=!0,this.emit("resume"),this.buffer.length?this[jC]():this[Wa]?this[ja]():this.emit("drain"))}resume(){return this[Cm]()}pause(){this[VC]=!1,this[Og]=!0}get destroyed(){return this[Mr]}get flowing(){return this[VC]}get paused(){return this[Og]}[fP](e){this[$r]?this[rr]+=1:this[rr]+=e.length,this.buffer.push(e)}[dP](){return this.buffer.length&&(this[$r]?this[rr]-=1:this[rr]-=this.buffer[0].length),this.buffer.shift()}[jC](e){do;while(this[M1](this[dP]()));!e&&!this.buffer.length&&!this[Wa]&&this.emit("drain")}[M1](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[Mr])return;let r=this[el];return n=n||{},e===F1.stdout||e===F1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new hP(this,e,n):new YC(this,e,n)),this[Ya]?Ug(()=>this[Cm]()):this[Cm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Cm]():e==="readable"&&this[rr]!==0?super.emit("readable"):X7(e)&&this[el]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Fg]&&(this[Ya]?Ug(()=>n.call(this,this[Fg])):n.call(this,this[Fg])),r}get emittedEnd(){return this[el]}[ja](){!this[BC]&&!this[el]&&!this[Mr]&&this.buffer.length===0&&this[Wa]&&(this[BC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[WC]&&this.emit("close"),this[BC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Mr&&this[Mr])return;if(e==="data")return n?this[Ya]?Ug(()=>this[mP](n)):this[mP](n):!1;if(e==="end")return this[H1]();if(e==="close"){if(this[WC]=!0,!this[el]&&!this[Mr])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Fg]=n;let i=super.emit("error",n);return this[ja](),i}else if(e==="resume"){let i=super.emit("resume");return this[ja](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[ja](),o}[mP](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[ja](),n}[H1](){this[el]||(this[el]=!0,this.readable=!1,this[Ya]?Ug(()=>this[pP]()):this[pP]())}[pP](){if(this[Va]){let n=this[Va].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[$r]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[$r]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[$r]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[$r]?Promise.reject(new Error("cannot concat in objectMode")):this[Po]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Mr,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[K7](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Wa])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[Wa]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(Mr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[J7](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[Mr]?(e?this.emit("error",e):this.emit(Mr),this):(this[Mr]=!0,this.buffer.length=0,this[rr]=0,typeof this.close=="function"&&!this[WC]&&this.close(),e?this.emit("error",e):this.emit(Mr),this)}static isStream(e){return!!e&&(e instanceof W1||e instanceof O1||e instanceof z7&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var kP=$(Xo=>{"use strict";var CP=require("assert"),tl=require("buffer").Buffer,G1=require("zlib"),tf=Xo.constants=A1(),eJ=V1(),Y1=tl.concat,nf=Symbol("_superWrite"),Sm=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},tJ=Symbol("opts"),$g=Symbol("flushFlag"),q1=Symbol("finishFlushFlag"),RP=Symbol("fullFlushFlag"),Tt=Symbol("handle"),qC=Symbol("onError"),Em=Symbol("sawError"),gP=Symbol("level"),vP=Symbol("strategy"),wP=Symbol("ended"),Ave=Symbol("_defaultFullFlush"),GC=class extends eJ{constructor(e,n){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[Em]=!1,this[wP]=!1,this[tJ]=e,this[$g]=e.flush,this[q1]=e.finishFlush;try{this[Tt]=new G1[n](e)}catch(r){throw new Sm(r)}this[qC]=r=>{this[Em]||(this[Em]=!0,this.close(),this.emit("error",r))},this[Tt].on("error",r=>this[qC](new Sm(r))),this.once("end",()=>this.close)}close(){this[Tt]&&(this[Tt].close(),this[Tt]=null,this.emit("close"))}reset(){if(!this[Em])return CP(this[Tt],"zlib binding closed"),this[Tt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[RP]),this.write(Object.assign(tl.alloc(0),{[$g]:e})))}end(e,n,r){return e&&this.write(e,n),this.flush(this[q1]),this[wP]=!0,super.end(null,null,r)}get ended(){return this[wP]}write(e,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof e=="string"&&(e=tl.from(e,n)),this[Em])return;CP(this[Tt],"zlib binding closed");let o=this[Tt]._handle,i=o.close;o.close=()=>{};let s=this[Tt].close;this[Tt].close=()=>{},tl.concat=l=>l;let a;try{let l=typeof e[$g]=="number"?e[$g]:this[$g];a=this[Tt]._processChunk(e,l),tl.concat=Y1}catch(l){tl.concat=Y1,this[qC](new Sm(l))}finally{this[Tt]&&(this[Tt]._handle=o,o.close=i,this[Tt].close=s,this[Tt].removeAllListeners("error"))}this[Tt]&&this[Tt].on("error",l=>this[qC](new Sm(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[nf](tl.from(a[0]));for(let l=1;l<a.length;l++)c=this[nf](a[l])}else c=this[nf](tl.from(a));return r&&r(),c}[nf](e){return super.write(e)}},qa=class extends GC{constructor(e,n){e=e||{},e.flush=e.flush||tf.Z_NO_FLUSH,e.finishFlush=e.finishFlush||tf.Z_FINISH,super(e,n),this[RP]=tf.Z_FULL_FLUSH,this[gP]=e.level,this[vP]=e.strategy}params(e,n){if(!this[Em]){if(!this[Tt])throw new Error("cannot switch params when binding is closed");if(!this[Tt].params)throw new Error("not supported in this implementation");if(this[gP]!==e||this[vP]!==n){this.flush(tf.Z_SYNC_FLUSH),CP(this[Tt],"zlib binding closed");let r=this[Tt].flush;this[Tt].flush=(o,i)=>{this.flush(o),i()};try{this[Tt].params(e,n)}finally{this[Tt].flush=r}this[Tt]&&(this[gP]=e,this[vP]=n)}}}},EP=class extends qa{constructor(e){super(e,"Deflate")}},SP=class extends qa{constructor(e){super(e,"Inflate")}},yP=Symbol("_portable"),xP=class extends qa{constructor(e){super(e,"Gzip"),this[yP]=e&&!!e.portable}[nf](e){return this[yP]?(this[yP]=!1,e[9]=255,super[nf](e)):super[nf](e)}},_P=class extends qa{constructor(e){super(e,"Gunzip")}},DP=class extends qa{constructor(e){super(e,"DeflateRaw")}},IP=class extends qa{constructor(e){super(e,"InflateRaw")}},PP=class extends qa{constructor(e){super(e,"Unzip")}},zC=class extends GC{constructor(e,n){e=e||{},e.flush=e.flush||tf.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||tf.BROTLI_OPERATION_FINISH,super(e,n),this[RP]=tf.BROTLI_OPERATION_FLUSH}},bP=class extends zC{constructor(e){super(e,"BrotliCompress")}},TP=class extends zC{constructor(e){super(e,"BrotliDecompress")}};Xo.Deflate=EP;Xo.Inflate=SP;Xo.Gzip=xP;Xo.Gunzip=_P;Xo.DeflateRaw=DP;Xo.InflateRaw=IP;Xo.Unzip=PP;typeof G1.BrotliCompress=="function"?(Xo.BrotliCompress=bP,Xo.BrotliDecompress=TP):Xo.BrotliCompress=Xo.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var xm=$((Uve,z1)=>{var nJ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;z1.exports=nJ!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var KC=$((Mve,K1)=>{"use strict";var{Minipass:rJ}=HC(),NP=xm(),LP=Symbol("slurp");K1.exports=class extends rJ{constructor(e,n,r){switch(super(),this.pause(),this.extended=n,this.globalExtended=r,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=NP(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=NP(e.linkpath),this.uname=e.uname,this.gname=e.gname,n&&this[LP](n),r&&this[LP](r,!0)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,o=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,o-n),this.ignore?!0:r>=n?super.write(e):super.write(e.slice(0,r))}[LP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?NP(e[r]):e[r])}}});var AP=$(JC=>{"use strict";JC.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);JC.code=new Map(Array.from(JC.name).map(t=>[t[1],t[0]]))});var Q1=$((Bve,Z1)=>{"use strict";var oJ=(t,e)=>{if(Number.isSafeInteger(t))t<0?sJ(t,e):iJ(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},iJ=(t,e)=>{e[0]=128;for(var n=e.length;n>1;n--)e[n-1]=t&255,t=Math.floor(t/256)},sJ=(t,e)=>{e[0]=255;var n=!1;t=t*-1;for(var r=e.length;r>1;r--){var o=t&255;t=Math.floor(t/256),n?e[r-1]=J1(o):o===0?e[r-1]=0:(n=!0,e[r-1]=X1(o))}},aJ=t=>{let e=t[0],n=e===128?lJ(t.slice(1,t.length)):e===255?cJ(t):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},cJ=t=>{for(var e=t.length,n=0,r=!1,o=e-1;o>-1;o--){var i=t[o],s;r?s=J1(i):i===0?s=i:(r=!0,s=X1(i)),s!==0&&(n-=s*Math.pow(256,e-o-1))}return n},lJ=t=>{for(var e=t.length,n=0,r=e-1;r>-1;r--){var o=t[r];o!==0&&(n+=o*Math.pow(256,e-r-1))}return n},J1=t=>(255^t)&255,X1=t=>(255^t)+1&255;Z1.exports={encode:oJ,parse:aJ}});var Dm=$((Wve,tU)=>{"use strict";var FP=AP(),_m=require("path").posix,eU=Q1(),OP=Symbol("slurp"),Zo=Symbol("type"),MP=class{constructor(e,n,r,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Zo]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,n||0,r,o):e&&this.set(e)}decode(e,n,r,o){if(n||(n=0),!e||!(e.length>=n+512))throw new Error("need 512 bytes for header");if(this.path=rf(e,n,100),this.mode=nl(e,n+100,8),this.uid=nl(e,n+108,8),this.gid=nl(e,n+116,8),this.size=nl(e,n+124,12),this.mtime=UP(e,n+136,12),this.cksum=nl(e,n+148,12),this[OP](r),this[OP](o,!0),this[Zo]=rf(e,n+156,1),this[Zo]===""&&(this[Zo]="0"),this[Zo]==="0"&&this.path.slice(-1)==="/"&&(this[Zo]="5"),this[Zo]==="5"&&(this.size=0),this.linkpath=rf(e,n+157,100),e.slice(n+257,n+265).toString()==="ustar\x0000")if(this.uname=rf(e,n+265,32),this.gname=rf(e,n+297,32),this.devmaj=nl(e,n+329,8),this.devmin=nl(e,n+337,8),e[n+475]!==0){let s=rf(e,n+345,155);this.path=s+"/"+this.path}else{let s=rf(e,n+345,130);s&&(this.path=s+"/"+this.path),this.atime=UP(e,n+476,12),this.ctime=UP(e,n+488,12)}let i=8*32;for(let s=n;s<n+148;s++)i+=e[s];for(let s=n+156;s<n+512;s++)i+=e[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===8*32&&(this.nullBlock=!0)}[OP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=e[r])}encode(e,n){if(e||(e=this.block=Buffer.alloc(512),n=0),n||(n=0),!(e.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,o=uJ(this.path||"",r),i=o[0],s=o[1];this.needPax=o[2],this.needPax=of(e,n,100,i)||this.needPax,this.needPax=rl(e,n+100,8,this.mode)||this.needPax,this.needPax=rl(e,n+108,8,this.uid)||this.needPax,this.needPax=rl(e,n+116,8,this.gid)||this.needPax,this.needPax=rl(e,n+124,12,this.size)||this.needPax,this.needPax=$P(e,n+136,12,this.mtime)||this.needPax,e[n+156]=this[Zo].charCodeAt(0),this.needPax=of(e,n+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",n+257,8),this.needPax=of(e,n+265,32,this.uname)||this.needPax,this.needPax=of(e,n+297,32,this.gname)||this.needPax,this.needPax=rl(e,n+329,8,this.devmaj)||this.needPax,this.needPax=rl(e,n+337,8,this.devmin)||this.needPax,this.needPax=of(e,n+345,r,s)||this.needPax,e[n+475]!==0?this.needPax=of(e,n+345,155,s)||this.needPax:(this.needPax=of(e,n+345,130,s)||this.needPax,this.needPax=$P(e,n+476,12,this.atime)||this.needPax,this.needPax=$P(e,n+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=n;c<n+148;c++)a+=e[c];for(let c=n+156;c<n+512;c++)a+=e[c];return this.cksum=a,rl(e,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let n in e)e[n]!==null&&e[n]!==void 0&&(this[n]=e[n])}get type(){return FP.name.get(this[Zo])||this[Zo]}get typeKey(){return this[Zo]}set type(e){FP.code.has(e)?this[Zo]=FP.code.get(e):this[Zo]=e}},uJ=(t,e)=>{let r=t,o="",i,s=_m.parse(t).root||".";if(Buffer.byteLength(r)<100)i=[r,o,!1];else{o=_m.dirname(r),r=_m.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(o)<=e?i=[r,o,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(o)<=e?i=[r.slice(0,99),o,!0]:(r=_m.join(_m.basename(o),r),o=_m.dirname(o));while(o!==s&&!i);i||(i=[t.slice(0,99),"",!0])}return i},rf=(t,e,n)=>t.slice(e,e+n).toString("utf8").replace(/\0.*/,""),UP=(t,e,n)=>fJ(nl(t,e,n)),fJ=t=>t===null?null:new Date(t*1e3),nl=(t,e,n)=>t[e]&128?eU.parse(t.slice(e,e+n)):mJ(t,e,n),dJ=t=>isNaN(t)?null:t,mJ=(t,e,n)=>dJ(parseInt(t.slice(e,e+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),pJ={12:8589934591,8:2097151},rl=(t,e,n,r)=>r===null?!1:r>pJ[n]||r<0?(eU.encode(r,t.slice(e,e+n)),!0):(hJ(t,e,n,r),!1),hJ=(t,e,n,r)=>t.write(gJ(r,n),e,n,"ascii"),gJ=(t,e)=>vJ(Math.floor(t).toString(8),e),vJ=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",$P=(t,e,n,r)=>r===null?!1:rl(t,e,n,r.getTime()/1e3),wJ=new Array(156).join("\0"),of=(t,e,n,r)=>r===null?!1:(t.write(r+wJ,e,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);tU.exports=MP});var XC=$((jve,nU)=>{"use strict";var yJ=Dm(),CJ=require("path"),Mg=class{constructor(e,n){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=n||!1}encode(){let e=this.encodeBody();if(e==="")return null;let n=Buffer.byteLength(e),r=512*Math.ceil(1+n/512),o=Buffer.allocUnsafe(r);for(let i=0;i<512;i++)o[i]=0;new yJ({path:("PaxHeader/"+CJ.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:n,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,n,"utf8");for(let i=n+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let n=this[e]instanceof Date?this[e].getTime()/1e3:this[e],r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,o=Buffer.byteLength(r),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+r}};Mg.parse=(t,e,n)=>new Mg(EJ(SJ(t),e),n);var EJ=(t,e)=>e?Object.keys(t).reduce((n,r)=>(n[r]=t[r],n),e):t,SJ=t=>t.replace(/\n$/,"").split(`
`).reduce(xJ,Object.create(null)),xJ=(t,e)=>{let n=parseInt(e,10);if(n!==Buffer.byteLength(e)+1)return t;e=e.slice((n+" ").length);let r=e.split("="),o=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return t;let i=r.join("=");return t[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,t};nU.exports=Mg});var Im=$((Vve,rU)=>{rU.exports=t=>{let e=t.length-1,n=-1;for(;e>-1&&t.charAt(e)==="/";)n=e,e--;return n===-1?t:t.slice(0,n)}});var ZC=$((Yve,oU)=>{"use strict";oU.exports=t=>class extends t{warn(e,n,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=n instanceof Error&&n.code||e,r.tarCode=e,!this.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),this.emit("warn",r.tarCode,n,r)):n instanceof Error?this.emit("error",Object.assign(n,r)):this.emit("error",Object.assign(new Error(`${e}: ${n}`),r))}}});var BP=$((Gve,iU)=>{"use strict";var QC=["|","<",">","?",":"],HP=QC.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),_J=new Map(QC.map((t,e)=>[t,HP[e]])),DJ=new Map(HP.map((t,e)=>[t,QC[e]]));iU.exports={encode:t=>QC.reduce((e,n)=>e.split(n).join(_J.get(n)),t),decode:t=>HP.reduce((e,n)=>e.split(n).join(DJ.get(n)),t)}});var WP=$((zve,aU)=>{var{isAbsolute:IJ,parse:sU}=require("path").win32;aU.exports=t=>{let e="",n=sU(t);for(;IJ(t)||n.root;){let r=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":n.root;t=t.slice(r.length),e+=r,n=sU(t)}return[e,t]}});var lU=$((Kve,cU)=>{"use strict";cU.exports=(t,e,n)=>(t&=4095,n&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var ZP=$((Zve,xU)=>{"use strict";var{Minipass:gU}=HC(),vU=XC(),wU=Dm(),Ms=require("fs"),uU=require("path"),$s=xm(),PJ=Im(),yU=(t,e)=>e?(t=$s(t).replace(/^\.(\/|$)/,""),PJ(e)+"/"+t):$s(t),bJ=16*1024*1024,fU=Symbol("process"),dU=Symbol("file"),mU=Symbol("directory"),VP=Symbol("symlink"),pU=Symbol("hardlink"),Hg=Symbol("header"),eE=Symbol("read"),YP=Symbol("lstat"),tE=Symbol("onlstat"),qP=Symbol("onread"),GP=Symbol("onreadlink"),zP=Symbol("openfile"),KP=Symbol("onopenfile"),ol=Symbol("close"),nE=Symbol("mode"),JP=Symbol("awaitDrain"),jP=Symbol("ondrain"),Hs=Symbol("prefix"),hU=Symbol("hadError"),CU=ZC(),TJ=BP(),EU=WP(),SU=lU(),rE=CU(class extends gU{constructor(e,n){if(n=n||{},super(n),typeof e!="string")throw new TypeError("path is required");this.path=$s(e),this.portable=!!n.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=n.maxReadSize||bJ,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=$s(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime||null,this.prefix=n.prefix?$s(n.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=EU(this.path);o&&(this.path=i,r=o)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=TJ.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=$s(n.absolute||uU.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[tE](this.statCache.get(this.absolute)):this[YP]()}emit(e,...n){return e==="error"&&(this[hU]=!0),super.emit(e,...n)}[YP](){Ms.lstat(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[tE](n)})}[tE](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=kJ(e),this.emit("stat",e),this[fU]()}[fU](){switch(this.type){case"File":return this[dU]();case"Directory":return this[mU]();case"SymbolicLink":return this[VP]();default:return this.end()}}[nE](e){return SU(e,this.type==="Directory",this.portable)}[Hs](e){return yU(e,this.prefix)}[Hg](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new wU({path:this[Hs](this.path),linkpath:this.type==="Link"?this[Hs](this.linkpath):this.linkpath,mode:this[nE](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new vU({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Hs](this.path),linkpath:this.type==="Link"?this[Hs](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[mU](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Hg](),this.end()}[VP](){Ms.readlink(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[GP](n)})}[GP](e){this.linkpath=$s(e),this[Hg](),this.end()}[pU](e){this.type="Link",this.linkpath=$s(uU.relative(this.cwd,e)),this.stat.size=0,this[Hg](),this.end()}[dU](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let n=this.linkCache.get(e);if(n.indexOf(this.cwd)===0)return this[pU](n)}this.linkCache.set(e,this.absolute)}if(this[Hg](),this.stat.size===0)return this.end();this[zP]()}[zP](){Ms.open(this.absolute,"r",(e,n)=>{if(e)return this.emit("error",e);this[KP](n)})}[KP](e){if(this.fd=e,this[hU])return this[ol]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[eE]()}[eE](){let{fd:e,buf:n,offset:r,length:o,pos:i}=this;Ms.read(e,n,r,o,i,(s,a)=>{if(s)return this[ol](()=>this.emit("error",s));this[qP](a)})}[ol](e){Ms.close(this.fd,e)}[qP](e){if(e<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[ol](()=>this.emit("error",o))}if(e>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[ol](()=>this.emit("error",o))}if(e===this.remain)for(let o=e;o<this.length&&e<this.blockRemain;o++)this.buf[o+this.offset]=0,e++,this.remain++;let n=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(n)?this[jP]():this[JP](()=>this[jP]())}[JP](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let n=new Error("writing more data than expected");return n.path=this.absolute,this.emit("error",n)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[jP](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[ol](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[eE]()}}),XP=class extends rE{[YP](){this[tE](Ms.lstatSync(this.absolute))}[VP](){this[GP](Ms.readlinkSync(this.absolute))}[zP](){this[KP](Ms.openSync(this.absolute,"r"))}[eE](){let e=!0;try{let{fd:n,buf:r,offset:o,length:i,pos:s}=this,a=Ms.readSync(n,r,o,i,s);this[qP](a),e=!1}finally{if(e)try{this[ol](()=>{})}catch{}}}[JP](e){e()}[ol](e){Ms.closeSync(this.fd),e()}},RJ=CU(class extends gU{constructor(e,n){n=n||{},super(n),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix||null,this.path=$s(e.path),this.mode=this[nE](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:n.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=$s(e.linkpath),typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=EU(this.path);o&&(this.path=i,r=o)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new wU({path:this[Hs](this.path),linkpath:this.type==="Link"?this[Hs](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new vU({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Hs](this.path),linkpath:this.type==="Link"?this[Hs](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Hs](e){return yU(e,this.prefix)}[nE](e){return SU(e,this.type==="Directory",this.portable)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});rE.Sync=XP;rE.Tar=RJ;var kJ=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";xU.exports=rE});var DU=$((Qve,_U)=>{"use strict";_U.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var QP=$((ewe,IU)=>{"use strict";IU.exports=ut;ut.Node=sf;ut.create=ut;function ut(t){var e=this;if(e instanceof ut||(e=new ut),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}ut.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ut.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ut.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ut.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)LJ(this,arguments[t]);return this.length};ut.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)AJ(this,arguments[t]);return this.length};ut.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ut.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ut.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};ut.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};ut.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};ut.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};ut.prototype.map=function(t,e){e=e||this;for(var n=new ut,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};ut.prototype.mapReverse=function(t,e){e=e||this;for(var n=new ut,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};ut.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;r!==null;o++)n=t(n,r.value,o),r=r.next;return n};ut.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;r!==null;o--)n=t(n,r.value,o),r=r.prev;return n};ut.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};ut.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};ut.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ut;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(;o!==null&&r<e;r++,o=o.next)n.push(o.value);return n};ut.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ut;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;o!==null&&r>e;r--)o=o.prev;for(;o!==null&&r>t;r--,o=o.prev)n.push(o.value);return n};ut.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(var i=[],r=0;o&&r<e;r++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var r=0;r<n.length;r++)o=NJ(this,o,n[r]);return i};ut.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function NJ(t,e,n){var r=e===t.head?new sf(n,null,e,t):new sf(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function LJ(t,e){t.tail=new sf(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function AJ(t,e){t.head=new sf(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function sf(t,e,n,r){if(!(this instanceof sf))return new sf(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{DU()(ut)}catch{}});var dE=$((nwe,AU)=>{"use strict";var uE=class{constructor(e,n){this.path=e||"./",this.absolute=n,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:FJ}=HC(),PU=kP(),OJ=KC(),lb=ZP(),UJ=lb.Sync,$J=lb.Tar,MJ=QP(),bU=Buffer.alloc(1024),sE=Symbol("onStat"),oE=Symbol("ended"),Bs=Symbol("queue"),Pm=Symbol("current"),af=Symbol("process"),iE=Symbol("processing"),TU=Symbol("processJob"),Ws=Symbol("jobs"),eb=Symbol("jobDone"),aE=Symbol("addFSEntry"),RU=Symbol("addTarEntry"),ob=Symbol("stat"),ib=Symbol("readdir"),cE=Symbol("onreaddir"),lE=Symbol("pipe"),kU=Symbol("entry"),tb=Symbol("entryOpt"),sb=Symbol("writeEntryClass"),LU=Symbol("write"),nb=Symbol("ondrain"),fE=require("fs"),NU=require("path"),HJ=ZC(),rb=xm(),ub=HJ(class extends FJ{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=rb(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[sb]=lb,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new PU.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new PU.BrotliCompress(e.brotli)),this.zip.on("data",n=>super.write(n)),this.zip.on("end",n=>super.end()),this.zip.on("drain",n=>this[nb]()),this.on("resume",n=>this.zip.resume())}else this.on("drain",this[nb]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:n=>!0,this[Bs]=new MJ,this[Ws]=0,this.jobs=+e.jobs||4,this[iE]=!1,this[oE]=!1}[LU](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[oE]=!0,this[af](),this}write(e){if(this[oE])throw new Error("write after end");return e instanceof OJ?this[RU](e):this[aE](e),this.flowing}[RU](e){let n=rb(NU.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let r=new uE(e.path,n,!1);r.entry=new $J(e,this[tb](r)),r.entry.on("end",o=>this[eb](r)),this[Ws]+=1,this[Bs].push(r)}this[af]()}[aE](e){let n=rb(NU.resolve(this.cwd,e));this[Bs].push(new uE(e,n)),this[af]()}[ob](e){e.pending=!0,this[Ws]+=1;let n=this.follow?"stat":"lstat";fE[n](e.absolute,(r,o)=>{e.pending=!1,this[Ws]-=1,r?this.emit("error",r):this[sE](e,o)})}[sE](e,n){this.statCache.set(e.absolute,n),e.stat=n,this.filter(e.path,n)||(e.ignore=!0),this[af]()}[ib](e){e.pending=!0,this[Ws]+=1,fE.readdir(e.absolute,(n,r)=>{if(e.pending=!1,this[Ws]-=1,n)return this.emit("error",n);this[cE](e,r)})}[cE](e,n){this.readdirCache.set(e.absolute,n),e.readdir=n,this[af]()}[af](){if(!this[iE]){this[iE]=!0;for(let e=this[Bs].head;e!==null&&this[Ws]<this.jobs;e=e.next)if(this[TU](e.value),e.value.ignore){let n=e.next;this[Bs].removeNode(e),e.next=n}this[iE]=!1,this[oE]&&!this[Bs].length&&this[Ws]===0&&(this.zip?this.zip.end(bU):(super.write(bU),super.end()))}}get[Pm](){return this[Bs]&&this[Bs].head&&this[Bs].head.value}[eb](e){this[Bs].shift(),this[Ws]-=1,this[af]()}[TU](e){if(!e.pending){if(e.entry){e===this[Pm]&&!e.piped&&this[lE](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[sE](e,this.statCache.get(e.absolute)):this[ob](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[cE](e,this.readdirCache.get(e.absolute)):this[ib](e),!e.readdir))){if(e.entry=this[kU](e),!e.entry){e.ignore=!0;return}e===this[Pm]&&!e.piped&&this[lE](e)}}}[tb](e){return{onwarn:(n,r,o)=>this.warn(n,r,o),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[kU](e){this[Ws]+=1;try{return new this[sb](e.path,this[tb](e)).on("end",()=>this[eb](e)).on("error",n=>this.emit("error",n))}catch(n){this.emit("error",n)}}[nb](){this[Pm]&&this[Pm].entry&&this[Pm].entry.resume()}[lE](e){e.piped=!0,e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[aE](s+o)});let n=e.entry,r=this.zip;r?n.on("data",o=>{r.write(o)||n.pause()}):n.on("data",o=>{super.write(o)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),ab=class extends ub{constructor(e){super(e),this[sb]=UJ}pause(){}resume(){}[ob](e){let n=this.follow?"statSync":"lstatSync";this[sE](e,fE[n](e.absolute))}[ib](e,n){this[cE](e,fE.readdirSync(e.absolute))}[lE](e){let n=e.entry,r=this.zip;e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[aE](s+o)}),r?n.on("data",o=>{r.write(o)}):n.on("data",o=>{super[LU](o)})}};ub.Sync=ab;AU.exports=ub});var VU=$((rwe,jU)=>{"use strict";var FU=typeof process=="object"&&process?process:{stdout:null,stderr:null},BJ=require("events"),OU=require("stream"),UU=require("string_decoder").StringDecoder,Ga=Symbol("EOF"),za=Symbol("maybeEmitEnd"),il=Symbol("emittedEnd"),mE=Symbol("emittingEnd"),Bg=Symbol("emittedError"),pE=Symbol("closed"),$U=Symbol("read"),hE=Symbol("flush"),MU=Symbol("flushChunk"),bo=Symbol("encoding"),Ka=Symbol("decoder"),gE=Symbol("flowing"),Wg=Symbol("paused"),bm=Symbol("resume"),or=Symbol("bufferLength"),fb=Symbol("bufferPush"),db=Symbol("bufferShift"),Hr=Symbol("objectMode"),Br=Symbol("destroyed"),mb=Symbol("emitData"),HU=Symbol("emitEnd"),pb=Symbol("emitEnd2"),Ja=Symbol("async"),jg=t=>Promise.resolve().then(t),BU=global._MP_NO_ITERATOR_SYMBOLS_!=="1",WJ=BU&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),jJ=BU&&Symbol.iterator||Symbol("iterator not implemented"),VJ=t=>t==="end"||t==="finish"||t==="prefinish",YJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,qJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),vE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[bm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},hb=class extends vE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};jU.exports=class WU extends OU{constructor(e){super(),this[gE]=!1,this[Wg]=!1,this.pipes=[],this.buffer=[],this[Hr]=e&&e.objectMode||!1,this[Hr]?this[bo]=null:this[bo]=e&&e.encoding||null,this[bo]==="buffer"&&(this[bo]=null),this[Ja]=e&&!!e.async||!1,this[Ka]=this[bo]?new UU(this[bo]):null,this[Ga]=!1,this[il]=!1,this[mE]=!1,this[pE]=!1,this[Bg]=null,this.writable=!0,this.readable=!0,this[or]=0,this[Br]=!1}get bufferLength(){return this[or]}get encoding(){return this[bo]}set encoding(e){if(this[Hr])throw new Error("cannot set encoding in objectMode");if(this[bo]&&e!==this[bo]&&(this[Ka]&&this[Ka].lastNeed||this[or]))throw new Error("cannot change encoding");this[bo]!==e&&(this[Ka]=e?new UU(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[Ka].write(n)))),this[bo]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Hr]}set objectMode(e){this[Hr]=this[Hr]||!!e}get async(){return this[Ja]}set async(e){this[Ja]=this[Ja]||!!e}write(e,n,r){if(this[Ga])throw new Error("write after end");if(this[Br])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Ja]?jg:i=>i();return!this[Hr]&&!Buffer.isBuffer(e)&&(qJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):YJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Hr]?(this.flowing&&this[or]!==0&&this[hE](!0),this.flowing?this.emit("data",e):this[fb](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[bo]&&!this[Ka].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[bo]&&(e=this[Ka].write(e)),this.flowing&&this[or]!==0&&this[hE](!0),this.flowing?this.emit("data",e):this[fb](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Br])return null;if(this[or]===0||e===0||e>this[or])return this[za](),null;this[Hr]&&(e=null),this.buffer.length>1&&!this[Hr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[or])]);let n=this[$U](e||null,this.buffer[0]);return this[za](),n}[$U](e,n){return e===n.length||e===null?this[db]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[or]-=e),this.emit("data",n),!this.buffer.length&&!this[Ga]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Ga]=!0,this.writable=!1,(this.flowing||!this[Wg])&&this[za](),this}[bm](){this[Br]||(this[Wg]=!1,this[gE]=!0,this.emit("resume"),this.buffer.length?this[hE]():this[Ga]?this[za]():this.emit("drain"))}resume(){return this[bm]()}pause(){this[gE]=!1,this[Wg]=!0}get destroyed(){return this[Br]}get flowing(){return this[gE]}get paused(){return this[Wg]}[fb](e){this[Hr]?this[or]+=1:this[or]+=e.length,this.buffer.push(e)}[db](){return this.buffer.length&&(this[Hr]?this[or]-=1:this[or]-=this.buffer[0].length),this.buffer.shift()}[hE](e){do;while(this[MU](this[db]()));!e&&!this.buffer.length&&!this[Ga]&&this.emit("drain")}[MU](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[Br])return;let r=this[il];return n=n||{},e===FU.stdout||e===FU.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new hb(this,e,n):new vE(this,e,n)),this[Ja]?jg(()=>this[bm]()):this[bm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[bm]():e==="readable"&&this[or]!==0?super.emit("readable"):VJ(e)&&this[il]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Bg]&&(this[Ja]?jg(()=>n.call(this,this[Bg])):n.call(this,this[Bg])),r}get emittedEnd(){return this[il]}[za](){!this[mE]&&!this[il]&&!this[Br]&&this.buffer.length===0&&this[Ga]&&(this[mE]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[pE]&&this.emit("close"),this[mE]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Br&&this[Br])return;if(e==="data")return n?this[Ja]?jg(()=>this[mb](n)):this[mb](n):!1;if(e==="end")return this[HU]();if(e==="close"){if(this[pE]=!0,!this[il]&&!this[Br])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Bg]=n;let i=super.emit("error",n);return this[za](),i}else if(e==="resume"){let i=super.emit("resume");return this[za](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[za](),o}[mb](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[za](),n}[HU](){this[il]||(this[il]=!0,this.readable=!1,this[Ja]?jg(()=>this[pb]()):this[pb]())}[pb](){if(this[Ka]){let n=this[Ka].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Hr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Hr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this[bo]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Br,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[WJ](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Ga])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[Ga]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(Br,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[jJ](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[Br]?(e?this.emit("error",e):this.emit(Br),this):(this[Br]=!0,this.buffer.length=0,this[or]=0,typeof this.close=="function"&&!this[pE]&&this.close(),e?this.emit("error",e):this.emit(Br),this)}static isStream(e){return!!e&&(e instanceof WU||e instanceof OU||e instanceof BJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Om=$(Yg=>{"use strict";var GJ=VU(),zJ=require("events").EventEmitter,To=require("fs"),wb=To.writev;if(!wb){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;wb=(n,r,o,i)=>{let s=(c,l)=>i(c,l,r),a=new e;a.oncomplete=s,t.writeBuffers(n,r,o,a)}}var Am=Symbol("_autoClose"),ns=Symbol("_close"),Vg=Symbol("_ended"),Et=Symbol("_fd"),YU=Symbol("_finished"),al=Symbol("_flags"),gb=Symbol("_flush"),yb=Symbol("_handleChunk"),Cb=Symbol("_makeBuf"),SE=Symbol("_mode"),wE=Symbol("_needDrain"),Nm=Symbol("_onerror"),Fm=Symbol("_onopen"),vb=Symbol("_onread"),Rm=Symbol("_onwrite"),cl=Symbol("_open"),Xa=Symbol("_path"),cf=Symbol("_pos"),js=Symbol("_queue"),km=Symbol("_read"),qU=Symbol("_readSize"),sl=Symbol("_reading"),yE=Symbol("_remain"),GU=Symbol("_size"),CE=Symbol("_write"),Tm=Symbol("_writing"),EE=Symbol("_defaultFlag"),Lm=Symbol("_errored"),xE=class extends GJ{constructor(e,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Lm]=!1,this[Et]=typeof n.fd=="number"?n.fd:null,this[Xa]=e,this[qU]=n.readSize||16*1024*1024,this[sl]=!1,this[GU]=typeof n.size=="number"?n.size:1/0,this[yE]=this[GU],this[Am]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[Et]=="number"?this[km]():this[cl]()}get fd(){return this[Et]}get path(){return this[Xa]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[cl](){To.open(this[Xa],"r",(e,n)=>this[Fm](e,n))}[Fm](e,n){e?this[Nm](e):(this[Et]=n,this.emit("open",n),this[km]())}[Cb](){return Buffer.allocUnsafe(Math.min(this[qU],this[yE]))}[km](){if(!this[sl]){this[sl]=!0;let e=this[Cb]();if(e.length===0)return process.nextTick(()=>this[vb](null,0,e));To.read(this[Et],e,0,e.length,null,(n,r,o)=>this[vb](n,r,o))}}[vb](e,n,r){this[sl]=!1,e?this[Nm](e):this[yb](n,r)&&this[km]()}[ns](){if(this[Am]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,To.close(e,n=>n?this.emit("error",n):this.emit("close"))}}[Nm](e){this[sl]=!0,this[ns](),this.emit("error",e)}[yb](e,n){let r=!1;return this[yE]-=e,e>0&&(r=super.write(e<n.length?n.slice(0,e):n)),(e===0||this[yE]<=0)&&(r=!1,this[ns](),super.end()),r}emit(e,n){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Et]=="number"&&this[km]();break;case"error":return this[Lm]?void 0:(this[Lm]=!0,super.emit(e,n));default:return super.emit(e,n)}}},Eb=class extends xE{[cl](){let e=!0;try{this[Fm](null,To.openSync(this[Xa],"r")),e=!1}finally{e&&this[ns]()}}[km](){let e=!0;try{if(!this[sl]){this[sl]=!0;do{let n=this[Cb](),r=n.length===0?0:To.readSync(this[Et],n,0,n.length,null);if(!this[yb](r,n))break}while(!0);this[sl]=!1}e=!1}finally{e&&this[ns]()}}[ns](){if(this[Am]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,To.closeSync(e),this.emit("close")}}},_E=class extends zJ{constructor(e,n){n=n||{},super(n),this.readable=!1,this.writable=!0,this[Lm]=!1,this[Tm]=!1,this[Vg]=!1,this[wE]=!1,this[js]=[],this[Xa]=e,this[Et]=typeof n.fd=="number"?n.fd:null,this[SE]=n.mode===void 0?438:n.mode,this[cf]=typeof n.start=="number"?n.start:null,this[Am]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[cf]!==null?"r+":"w";this[EE]=n.flags===void 0,this[al]=this[EE]?r:n.flags,this[Et]===null&&this[cl]()}emit(e,n){if(e==="error"){if(this[Lm])return;this[Lm]=!0}return super.emit(e,n)}get fd(){return this[Et]}get path(){return this[Xa]}[Nm](e){this[ns](),this[Tm]=!0,this.emit("error",e)}[cl](){To.open(this[Xa],this[al],this[SE],(e,n)=>this[Fm](e,n))}[Fm](e,n){this[EE]&&this[al]==="r+"&&e&&e.code==="ENOENT"?(this[al]="w",this[cl]()):e?this[Nm](e):(this[Et]=n,this.emit("open",n),this[gb]())}end(e,n){return e&&this.write(e,n),this[Vg]=!0,!this[Tm]&&!this[js].length&&typeof this[Et]=="number"&&this[Rm](null,0),this}write(e,n){return typeof e=="string"&&(e=Buffer.from(e,n)),this[Vg]?(this.emit("error",new Error("write() after end()")),!1):this[Et]===null||this[Tm]||this[js].length?(this[js].push(e),this[wE]=!0,!1):(this[Tm]=!0,this[CE](e),!0)}[CE](e){To.write(this[Et],e,0,e.length,this[cf],(n,r)=>this[Rm](n,r))}[Rm](e,n){e?this[Nm](e):(this[cf]!==null&&(this[cf]+=n),this[js].length?this[gb]():(this[Tm]=!1,this[Vg]&&!this[YU]?(this[YU]=!0,this[ns](),this.emit("finish")):this[wE]&&(this[wE]=!1,this.emit("drain"))))}[gb](){if(this[js].length===0)this[Vg]&&this[Rm](null,0);else if(this[js].length===1)this[CE](this[js].pop());else{let e=this[js];this[js]=[],wb(this[Et],e,this[cf],(n,r)=>this[Rm](n,r))}}[ns](){if(this[Am]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,To.close(e,n=>n?this.emit("error",n):this.emit("close"))}}},Sb=class extends _E{[cl](){let e;if(this[EE]&&this[al]==="r+")try{e=To.openSync(this[Xa],this[al],this[SE])}catch(n){if(n.code==="ENOENT")return this[al]="w",this[cl]();throw n}else e=To.openSync(this[Xa],this[al],this[SE]);this[Fm](null,e)}[ns](){if(this[Am]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,To.closeSync(e),this.emit("close")}}[CE](e){let n=!0;try{this[Rm](null,To.writeSync(this[Et],e,0,e.length,this[cf])),n=!1}finally{if(n)try{this[ns]()}catch{}}}};Yg.ReadStream=xE;Yg.ReadStreamSync=Eb;Yg.WriteStream=_E;Yg.WriteStreamSync=Sb});var kE=$((swe,r$)=>{"use strict";var KJ=ZC(),zU=Dm(),JJ=require("events"),XJ=QP(),ZJ=1024*1024,QJ=KC(),KU=XC(),JU=kP(),{nextTick:eX}=require("process"),xb=Buffer.from([31,139]),xi=Symbol("state"),lf=Symbol("writeEntry"),Za=Symbol("readEntry"),_b=Symbol("nextEntry"),XU=Symbol("processEntry"),_i=Symbol("extendedHeader"),qg=Symbol("globalExtendedHeader"),ll=Symbol("meta"),ZU=Symbol("emitMeta"),Rt=Symbol("buffer"),Qa=Symbol("queue"),ul=Symbol("ended"),QU=Symbol("emittedEnd"),uf=Symbol("emit"),ir=Symbol("unzip"),DE=Symbol("consumeChunk"),IE=Symbol("consumeChunkSub"),Db=Symbol("consumeBody"),e$=Symbol("consumeMeta"),t$=Symbol("consumeHeader"),PE=Symbol("consuming"),Ib=Symbol("bufferConcat"),Pb=Symbol("maybeEnd"),Gg=Symbol("writing"),fl=Symbol("aborted"),bE=Symbol("onDone"),ff=Symbol("sawValidEntry"),TE=Symbol("sawNullBlock"),RE=Symbol("sawEOF"),n$=Symbol("closeStream"),tX=t=>!0;r$.exports=KJ(class extends JJ{constructor(e){e=e||{},super(e),this.file=e.file||"",this[ff]=null,this.on(bE,r=>{(this[xi]==="begin"||this[ff]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(bE,e.ondone):this.on(bE,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||ZJ,this.filter=typeof e.filter=="function"?e.filter:tX;let n=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:n?void 0:!1,this.writable=!0,this.readable=!1,this[Qa]=new XJ,this[Rt]=null,this[Za]=null,this[lf]=null,this[xi]="begin",this[ll]="",this[_i]=null,this[qg]=null,this[ul]=!1,this[ir]=null,this[fl]=!1,this[TE]=!1,this[RE]=!1,this.on("end",()=>this[n$]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[t$](e,n){this[ff]===null&&(this[ff]=!1);let r;try{r=new zU(e,n,this[_i],this[qg])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(r.nullBlock)this[TE]?(this[RE]=!0,this[xi]==="begin"&&(this[xi]="header"),this[uf]("eof")):(this[TE]=!0,this[uf]("nullBlock"));else if(this[TE]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let o=r.type;if(/^(Symbolic)?Link$/.test(o)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(o)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let i=this[lf]=new QJ(r,this[_i],this[qg]);if(!this[ff])if(i.remain){let s=()=>{i.invalid||(this[ff]=!0)};i.on("end",s)}else this[ff]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[uf]("ignoredEntry",i),this[xi]="ignore",i.resume()):i.size>0&&(this[ll]="",i.on("data",s=>this[ll]+=s),this[xi]="meta"):(this[_i]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[uf]("ignoredEntry",i),this[xi]=i.remain?"ignore":"header",i.resume()):(i.remain?this[xi]="body":(this[xi]="header",i.end()),this[Za]?this[Qa].push(i):(this[Qa].push(i),this[_b]())))}}}[n$](){eX(()=>this.emit("close"))}[XU](e){let n=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Za]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",r=>this[_b]()),n=!1)):(this[Za]=null,n=!1),n}[_b](){do;while(this[XU](this[Qa].shift()));if(!this[Qa].length){let e=this[Za];!e||e.flowing||e.size===e.remain?this[Gg]||this.emit("drain"):e.once("drain",r=>this.emit("drain"))}}[Db](e,n){let r=this[lf],o=r.blockRemain,i=o>=e.length&&n===0?e:e.slice(n,n+o);return r.write(i),r.blockRemain||(this[xi]="header",this[lf]=null,r.end()),i.length}[e$](e,n){let r=this[lf],o=this[Db](e,n);return this[lf]||this[ZU](r),o}[uf](e,n,r){!this[Qa].length&&!this[Za]?this.emit(e,n,r):this[Qa].push([e,n,r])}[ZU](e){switch(this[uf]("meta",this[ll]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[_i]=KU.parse(this[ll],this[_i],!1);break;case"GlobalExtendedHeader":this[qg]=KU.parse(this[ll],this[qg],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[_i]=this[_i]||Object.create(null),this[_i].path=this[ll].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[_i]=this[_i]||Object.create(null),this[_i].linkpath=this[ll].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[fl]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[fl])return;if((this[ir]===null||this.brotli===void 0&&this[ir]===!1)&&e){if(this[Rt]&&(e=Buffer.concat([this[Rt],e]),this[Rt]=null),e.length<xb.length)return this[Rt]=e,!0;for(let i=0;this[ir]===null&&i<xb.length;i++)e[i]!==xb[i]&&(this[ir]=!1);let o=this.brotli===void 0;if(this[ir]===!1&&o)if(e.length<512)if(this[ul])this.brotli=!0;else return this[Rt]=e,!0;else try{new zU(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[ir]===null||this[ir]===!1&&this.brotli){let i=this[ul];this[ul]=!1,this[ir]=this[ir]===null?new JU.Unzip:new JU.BrotliDecompress,this[ir].on("data",a=>this[DE](a)),this[ir].on("error",a=>this.abort(a)),this[ir].on("end",a=>{this[ul]=!0,this[DE]()}),this[Gg]=!0;let s=this[ir][i?"end":"write"](e);return this[Gg]=!1,s}}this[Gg]=!0,this[ir]?this[ir].write(e):this[DE](e),this[Gg]=!1;let r=this[Qa].length?!1:this[Za]?this[Za].flowing:!0;return!r&&!this[Qa].length&&this[Za].once("drain",o=>this.emit("drain")),r}[Ib](e){e&&!this[fl]&&(this[Rt]=this[Rt]?Buffer.concat([this[Rt],e]):e)}[Pb](){if(this[ul]&&!this[QU]&&!this[fl]&&!this[PE]){this[QU]=!0;let e=this[lf];if(e&&e.blockRemain){let n=this[Rt]?this[Rt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${n} available)`,{entry:e}),this[Rt]&&e.write(this[Rt]),e.end()}this[uf](bE)}}[DE](e){if(this[PE])this[Ib](e);else if(!e&&!this[Rt])this[Pb]();else{if(this[PE]=!0,this[Rt]){this[Ib](e);let n=this[Rt];this[Rt]=null,this[IE](n)}else this[IE](e);for(;this[Rt]&&this[Rt].length>=512&&!this[fl]&&!this[RE];){let n=this[Rt];this[Rt]=null,this[IE](n)}this[PE]=!1}(!this[Rt]||this[ul])&&this[Pb]()}[IE](e){let n=0,r=e.length;for(;n+512<=r&&!this[fl]&&!this[RE];)switch(this[xi]){case"begin":case"header":this[t$](e,n),n+=512;break;case"ignore":case"body":n+=this[Db](e,n);break;case"meta":n+=this[e$](e,n);break;default:throw new Error("invalid state: "+this[xi])}n<r&&(this[Rt]?this[Rt]=Buffer.concat([e.slice(n),this[Rt]]):this[Rt]=e.slice(n))}end(e){this[fl]||(this[ir]?this[ir].end(e):(this[ul]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var NE=$((awe,a$)=>{"use strict";var nX=wm(),i$=kE(),Um=require("fs"),rX=Om(),o$=require("path"),bb=Im();a$.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=nX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&iX(r,e),r.noResume||oX(r),r.file&&r.sync?sX(r):r.file?aX(r,n):s$(r)};var oX=t=>{let e=t.onentry;t.onentry=e?n=>{e(n),n.resume()}:n=>n.resume()},iX=(t,e)=>{let n=new Map(e.map(i=>[bb(i),!0])),r=t.filter,o=(i,s)=>{let a=s||o$.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(o$.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(bb(i)):i=>o(bb(i))},sX=t=>{let e=s$(t),n=t.file,r=!0,o;try{let i=Um.statSync(n),s=t.maxReadSize||16*1024*1024;if(i.size<s)e.end(Um.readFileSync(n));else{let a=0,c=Buffer.allocUnsafe(s);for(o=Um.openSync(n,"r");a<i.size;){let l=Um.readSync(o,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}r=!1}finally{if(r&&o)try{Um.closeSync(o)}catch{}}},aX=(t,e)=>{let n=new i$(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("end",s),Um.stat(o,(c,l)=>{if(c)a(c);else{let u=new rX.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},s$=t=>new i$(t)});var m$=$((cwe,d$)=>{"use strict";var cX=wm(),LE=dE(),c$=Om(),l$=NE(),u$=require("path");d$.exports=(t,e,n)=>{if(typeof e=="function"&&(n=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let r=cX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?lX(r,e):r.file?uX(r,e,n):r.sync?fX(r,e):dX(r,e)};var lX=(t,e)=>{let n=new LE.Sync(t),r=new c$.WriteStreamSync(t.file,{mode:t.mode||438});n.pipe(r),f$(n,e)},uX=(t,e,n)=>{let r=new LE(t),o=new c$.WriteStream(t.file,{mode:t.mode||438});r.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),r.on("error",a)});return Tb(r,e),n?i.then(n,n):i},f$=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?l$({file:u$.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},Tb=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return l$({file:u$.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>Tb(t,e));t.add(n)}t.end()},fX=(t,e)=>{let n=new LE.Sync(t);return f$(n,e),n},dX=(t,e)=>{let n=new LE(t);return Tb(n,e),n}});var Rb=$((lwe,C$)=>{"use strict";var mX=wm(),p$=dE(),Qo=require("fs"),h$=Om(),g$=NE(),v$=require("path"),w$=Dm();C$.exports=(t,e,n)=>{let r=mX(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),r.sync?pX(r,e):gX(r,e,n)};var pX=(t,e)=>{let n=new p$.Sync(t),r=!0,o,i;try{try{o=Qo.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")o=Qo.openSync(t.file,"w+");else throw c}let s=Qo.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let u=0,f=0;u<512;u+=f){if(f=Qo.readSync(o,a,u,a.length-u,i+u),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new w$(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(i+l+512>s.size)break;i+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}r=!1,hX(t,n,i,o,e)}finally{if(r)try{Qo.closeSync(o)}catch{}}},hX=(t,e,n,r,o)=>{let i=new h$.WriteStreamSync(t.file,{fd:r,start:n});e.pipe(i),vX(e,o)},gX=(t,e,n)=>{e=Array.from(e);let r=new p$(t),o=(s,a,c)=>{let l=(p,h)=>{p?Qo.close(s,g=>c(p)):c(null,h)},u=0;if(a===0)return l(null,0);let f=0,m=Buffer.alloc(512),d=(p,h)=>{if(p)return l(p);if(f+=h,f<512&&h)return Qo.read(s,m,f,m.length-f,u+f,d);if(u===0&&m[0]===31&&m[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let g=new w$(m);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),f=0,Qo.read(s,m,0,512,u,d)};Qo.read(s,m,0,512,u,d)},i=new Promise((s,a)=>{r.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",Qo.open(t.file,c,l);if(u)return a(u);Qo.fstat(f,(m,d)=>{if(m)return Qo.close(f,()=>a(m));o(f,d.size,(p,h)=>{if(p)return a(p);let g=new h$.WriteStream(t.file,{fd:f,start:h});r.pipe(g),g.on("error",a),g.on("close",s),y$(r,e)})})};Qo.open(t.file,c,l)});return n?i.then(n,n):i},vX=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?g$({file:v$.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},y$=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return g$({file:v$.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>y$(t,e));t.add(n)}t.end()}});var S$=$((uwe,E$)=>{"use strict";var wX=wm(),yX=Rb();E$.exports=(t,e,n)=>{let r=wX(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),CX(r),yX(r,e,n)};var CX=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(n,r)=>e(n,r)&&!(t.mtimeCache.get(n)>r.mtime):(n,r)=>!(t.mtimeCache.get(n)>r.mtime)}});var D$=$((fwe,_$)=>{var{promisify:x$}=require("util"),dl=require("fs"),EX=t=>{if(!t)t={mode:511,fs:dl};else if(typeof t=="object")t={mode:511,fs:dl,...t};else if(typeof t=="number")t={mode:t,fs:dl};else if(typeof t=="string")t={mode:parseInt(t,8),fs:dl};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||dl.mkdir,t.mkdirAsync=x$(t.mkdir),t.stat=t.stat||t.fs.stat||dl.stat,t.statAsync=x$(t.stat),t.statSync=t.statSync||t.fs.statSync||dl.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||dl.mkdirSync,t};_$.exports=EX});var P$=$((dwe,I$)=>{var SX=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:xX,parse:_X}=require("path"),DX=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=xX(t),SX==="win32"){let e=/[*|"<>?:]/,{root:n}=_X(t);if(e.test(t.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};I$.exports=DX});var N$=$((mwe,k$)=>{var{dirname:b$}=require("path"),T$=(t,e,n=void 0)=>n===e?Promise.resolve():t.statAsync(e).then(r=>r.isDirectory()?n:void 0,r=>r.code==="ENOENT"?T$(t,b$(e),e):void 0),R$=(t,e,n=void 0)=>{if(n!==e)try{return t.statSync(e).isDirectory()?n:void 0}catch(r){return r.code==="ENOENT"?R$(t,b$(e),e):void 0}};k$.exports={findMade:T$,findMadeSync:R$}});var Lb=$((pwe,A$)=>{var{dirname:L$}=require("path"),kb=(t,e,n)=>{e.recursive=!1;let r=L$(t);return r===t?e.mkdirAsync(t,e).catch(o=>{if(o.code!=="EISDIR")throw o}):e.mkdirAsync(t,e).then(()=>n||t,o=>{if(o.code==="ENOENT")return kb(r,e).then(i=>kb(t,e,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return e.statAsync(t).then(i=>{if(i.isDirectory())return n;throw o},()=>{throw o})})},Nb=(t,e,n)=>{let r=L$(t);if(e.recursive=!1,r===t)try{return e.mkdirSync(t,e)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return e.mkdirSync(t,e),n||t}catch(o){if(o.code==="ENOENT")return Nb(t,e,Nb(r,e,n));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!e.statSync(t).isDirectory())throw o}catch{throw o}}};A$.exports={mkdirpManual:kb,mkdirpManualSync:Nb}});var U$=$((hwe,O$)=>{var{dirname:F$}=require("path"),{findMade:IX,findMadeSync:PX}=N$(),{mkdirpManual:bX,mkdirpManualSync:TX}=Lb(),RX=(t,e)=>(e.recursive=!0,F$(t)===t?e.mkdirAsync(t,e):IX(e,t).then(r=>e.mkdirAsync(t,e).then(()=>r).catch(o=>{if(o.code==="ENOENT")return bX(t,e);throw o}))),kX=(t,e)=>{if(e.recursive=!0,F$(t)===t)return e.mkdirSync(t,e);let r=PX(e,t);try{return e.mkdirSync(t,e),r}catch(o){if(o.code==="ENOENT")return TX(t,e);throw o}};O$.exports={mkdirpNative:RX,mkdirpNativeSync:kX}});var B$=$((gwe,H$)=>{var $$=require("fs"),NX=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Ab=NX.replace(/^v/,"").split("."),M$=+Ab[0]>10||+Ab[0]==10&&+Ab[1]>=12,LX=M$?t=>t.mkdir===$$.mkdir:()=>!1,AX=M$?t=>t.mkdirSync===$$.mkdirSync:()=>!1;H$.exports={useNative:LX,useNativeSync:AX}});var G$=$((vwe,q$)=>{var $m=D$(),Mm=P$(),{mkdirpNative:W$,mkdirpNativeSync:j$}=U$(),{mkdirpManual:V$,mkdirpManualSync:Y$}=Lb(),{useNative:FX,useNativeSync:OX}=B$(),Hm=(t,e)=>(t=Mm(t),e=$m(e),FX(e)?W$(t,e):V$(t,e)),UX=(t,e)=>(t=Mm(t),e=$m(e),OX(e)?j$(t,e):Y$(t,e));Hm.sync=UX;Hm.native=(t,e)=>W$(Mm(t),$m(e));Hm.manual=(t,e)=>V$(Mm(t),$m(e));Hm.nativeSync=(t,e)=>j$(Mm(t),$m(e));Hm.manualSync=(t,e)=>Y$(Mm(t),$m(e));q$.exports=Hm});var eM=$((wwe,Q$)=>{"use strict";var Di=require("fs"),df=require("path"),$X=Di.lchown?"lchown":"chown",MX=Di.lchownSync?"lchownSync":"chownSync",K$=Di.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),z$=(t,e,n)=>{try{return Di[MX](t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},HX=(t,e,n)=>{try{return Di.chownSync(t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},BX=K$?(t,e,n,r)=>o=>{!o||o.code!=="EISDIR"?r(o):Di.chown(t,e,n,r)}:(t,e,n,r)=>r,Fb=K$?(t,e,n)=>{try{return z$(t,e,n)}catch(r){if(r.code!=="EISDIR")throw r;HX(t,e,n)}}:(t,e,n)=>z$(t,e,n),WX=process.version,J$=(t,e,n)=>Di.readdir(t,e,n),jX=(t,e)=>Di.readdirSync(t,e);/^v4\./.test(WX)&&(J$=(t,e,n)=>Di.readdir(t,n));var AE=(t,e,n,r)=>{Di[$X](t,e,n,BX(t,e,n,o=>{r(o&&o.code!=="ENOENT"?o:null)}))},X$=(t,e,n,r,o)=>{if(typeof e=="string")return Di.lstat(df.resolve(t,e),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=e,X$(t,s,n,r,o)});if(e.isDirectory())Ob(df.resolve(t,e.name),n,r,i=>{if(i)return o(i);let s=df.resolve(t,e.name);AE(s,n,r,o)});else{let i=df.resolve(t,e.name);AE(i,n,r,o)}},Ob=(t,e,n,r)=>{J$(t,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return r();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return r(o)}if(o||!i.length)return AE(t,e,n,r);let s=i.length,a=null,c=l=>{if(!a){if(l)return r(a=l);if(--s===0)return AE(t,e,n,r)}};i.forEach(l=>X$(t,l,e,n,c))})},VX=(t,e,n,r)=>{if(typeof e=="string")try{let o=Di.lstatSync(df.resolve(t,e));o.name=e,e=o}catch(o){if(o.code==="ENOENT")return;throw o}e.isDirectory()&&Z$(df.resolve(t,e.name),n,r),Fb(df.resolve(t,e.name),n,r)},Z$=(t,e,n)=>{let r;try{r=jX(t,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return Fb(t,e,n);throw o}return r&&r.length&&r.forEach(o=>VX(t,o,e,n)),Fb(t,e,n)};Q$.exports=Ob;Ob.sync=Z$});var oM=$((ywe,Ub)=>{"use strict";var tM=G$(),Ii=require("fs"),FE=require("path"),nM=eM(),rs=xm(),OE=class extends Error{constructor(e,n){super("Cannot extract through symbolic link"),this.path=n,this.symlink=e}get name(){return"SylinkError"}},UE=class extends Error{constructor(e,n){super(n+": Cannot cd into '"+e+"'"),this.path=e,this.code=n}get name(){return"CwdError"}},$E=(t,e)=>t.get(rs(e)),zg=(t,e,n)=>t.set(rs(e),n),YX=(t,e)=>{Ii.stat(t,(n,r)=>{(n||!r.isDirectory())&&(n=new UE(t,n&&n.code||"ENOTDIR")),e(n)})};Ub.exports=(t,e,n)=>{t=rs(t);let r=e.umask,o=e.mode|448,i=(o&r)!==0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,m=rs(e.cwd),d=(g,v)=>{g?n(g):(zg(f,t,!0),v&&c?nM(v,s,a,C=>d(C)):i?Ii.chmod(t,o,n):n())};if(f&&$E(f,t)===!0)return d();if(t===m)return YX(t,d);if(l)return tM(t,{mode:o}).then(g=>d(null,g),d);let h=rs(FE.relative(m,t)).split("/");ME(m,h,o,f,u,m,null,d)};var ME=(t,e,n,r,o,i,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=rs(FE.resolve(t+"/"+c));if($E(r,l))return ME(l,e,n,r,o,i,s,a);Ii.mkdir(l,n,rM(l,e,n,r,o,i,s,a))},rM=(t,e,n,r,o,i,s,a)=>c=>{c?Ii.lstat(t,(l,u)=>{if(l)l.path=l.path&&rs(l.path),a(l);else if(u.isDirectory())ME(t,e,n,r,o,i,s,a);else if(o)Ii.unlink(t,f=>{if(f)return a(f);Ii.mkdir(t,n,rM(t,e,n,r,o,i,s,a))});else{if(u.isSymbolicLink())return a(new OE(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,ME(t,e,n,r,o,i,s,a))},qX=t=>{let e=!1,n="ENOTDIR";try{e=Ii.statSync(t).isDirectory()}catch(r){n=r.code}finally{if(!e)throw new UE(t,n)}};Ub.exports.sync=(t,e)=>{t=rs(t);let n=e.umask,r=e.mode|448,o=(r&n)!==0,i=e.uid,s=e.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=rs(e.cwd),m=g=>{zg(u,t,!0),g&&a&&nM.sync(g,i,s),o&&Ii.chmodSync(t,r)};if(u&&$E(u,t)===!0)return m();if(t===f)return qX(f),m();if(c)return m(tM.sync(t,r));let p=rs(FE.relative(f,t)).split("/"),h=null;for(let g=p.shift(),v=f;g&&(v+="/"+g);g=p.shift())if(v=rs(FE.resolve(v)),!$E(u,v))try{Ii.mkdirSync(v,r),h=h||v,zg(u,v,!0)}catch{let w=Ii.lstatSync(v);if(w.isDirectory()){zg(u,v,!0);continue}else if(l){Ii.unlinkSync(v),Ii.mkdirSync(v,r),h=h||v,zg(u,v,!0);continue}else if(w.isSymbolicLink())return new OE(v,v+"/"+p.join("/"))}return m(h)}});var Mb=$((Cwe,iM)=>{var $b=Object.create(null),{hasOwnProperty:GX}=Object.prototype;iM.exports=t=>(GX.call($b,t)||($b[t]=t.normalize("NFD")),$b[t])});var lM=$((Ewe,cM)=>{var sM=require("assert"),zX=Mb(),KX=Im(),{join:aM}=require("path"),JX=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,XX=JX==="win32";cM.exports=()=>{let t=new Map,e=new Map,n=l=>l.split("/").slice(0,-1).reduce((f,m)=>(f.length&&(m=aM(f[f.length-1],m)),f.push(m||"/"),f),[]),r=new Set,o=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},i=l=>{let{paths:u,dirs:f}=o(l);return u.every(m=>m[0]===l)&&f.every(m=>m[0]instanceof Set&&m[0].has(l))},s=l=>r.has(l)||!i(l)?!1:(r.add(l),l(()=>a(l)),!0),a=l=>{if(!r.has(l))return!1;let{paths:u,dirs:f}=e.get(l),m=new Set;return u.forEach(d=>{let p=t.get(d);sM.equal(p[0],l),p.length===1?t.delete(d):(p.shift(),typeof p[0]=="function"?m.add(p[0]):p[0].forEach(h=>m.add(h)))}),f.forEach(d=>{let p=t.get(d);sM(p[0]instanceof Set),p[0].size===1&&p.length===1?t.delete(d):p[0].size===1?(p.shift(),m.add(p[0])):p[0].delete(l)}),r.delete(l),m.forEach(d=>s(d)),!0};return{check:i,reserve:(l,u)=>{l=XX?["win32 parallelization disabled"]:l.map(m=>KX(aM(zX(m))).toLowerCase());let f=new Set(l.map(m=>n(m)).reduce((m,d)=>m.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(m=>{let d=t.get(m);d?d.push(u):t.set(m,[u])}),f.forEach(m=>{let d=t.get(m);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):t.set(m,[new Set([u])])}),s(u)}}}});var dM=$((Swe,fM)=>{var ZX=process.env.__FAKE_PLATFORM__||process.platform,QX=ZX==="win32",eZ=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:tZ,O_TRUNC:nZ,O_WRONLY:rZ,UV_FS_O_FILEMAP:uM=0}=eZ.constants,oZ=QX&&!!uM,iZ=512*1024,sZ=uM|nZ|tZ|rZ;fM.exports=oZ?t=>t<iZ?sZ:"w":()=>"w"});var zb=$((xwe,IM)=>{"use strict";var aZ=require("assert"),cZ=kE(),ft=require("fs"),lZ=Om(),ec=require("path"),xM=oM(),mM=BP(),uZ=lM(),fZ=WP(),Pi=xm(),dZ=Im(),mZ=Mb(),pM=Symbol("onEntry"),Wb=Symbol("checkFs"),hM=Symbol("checkFs2"),WE=Symbol("pruneCache"),jb=Symbol("isReusable"),bi=Symbol("makeFs"),Vb=Symbol("file"),Yb=Symbol("directory"),jE=Symbol("link"),gM=Symbol("symlink"),vM=Symbol("hardlink"),wM=Symbol("unsupported"),yM=Symbol("checkPath"),ml=Symbol("mkdir"),Wr=Symbol("onError"),HE=Symbol("pending"),CM=Symbol("pend"),Bm=Symbol("unpend"),Hb=Symbol("ended"),Bb=Symbol("maybeClose"),qb=Symbol("skip"),Kg=Symbol("doChown"),Jg=Symbol("uid"),Xg=Symbol("gid"),Zg=Symbol("checkedCwd"),_M=require("crypto"),DM=dM(),pZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Qg=pZ==="win32",hZ=1024,gZ=(t,e)=>{if(!Qg)return ft.unlink(t,e);let n=t+".DELETE."+_M.randomBytes(16).toString("hex");ft.rename(t,n,r=>{if(r)return e(r);ft.unlink(n,e)})},vZ=t=>{if(!Qg)return ft.unlinkSync(t);let e=t+".DELETE."+_M.randomBytes(16).toString("hex");ft.renameSync(t,e),ft.unlinkSync(e)},EM=(t,e,n)=>t===t>>>0?t:e===e>>>0?e:n,SM=t=>dZ(Pi(mZ(t))).toLowerCase(),wZ=(t,e)=>{e=SM(e);for(let n of t.keys()){let r=SM(n);(r===e||r.indexOf(e+"/")===0)&&t.delete(n)}},yZ=t=>{for(let e of t.keys())t.delete(e)},ev=class extends cZ{constructor(e){if(e||(e={}),e.ondone=n=>{this[Hb]=!0,this[Bb]()},super(e),this[Zg]=!1,this.reservations=uZ(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[HE]=0,this[Hb]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:hZ,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Qg,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Pi(ec.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",n=>this[pM](n))}warn(e,n,r={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(r.recoverable=!1),super.warn(e,n,r)}[Bb](){this[Hb]&&this[HE]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[yM](e){let n=Pi(e.path),r=n.split("/");if(this.strip){if(r.length<this.strip)return!1;if(e.type==="Link"){let o=Pi(e.linkpath).split("/");if(o.length>=this.strip)e.linkpath=o.slice(this.strip).join("/");else return!1}r.splice(0,this.strip),e.path=r.join("/")}if(isFinite(this.maxDepth)&&r.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:n,depth:r.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(r.includes("..")||Qg&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:n}),!1;let[o,i]=fZ(n);o&&(e.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:e,path:n}))}if(ec.isAbsolute(e.path)?e.absolute=Pi(ec.resolve(e.path)):e.absolute=Pi(ec.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Pi(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:o}=ec.win32.parse(e.absolute);e.absolute=o+mM.encode(e.absolute.slice(o.length));let{root:i}=ec.win32.parse(e.path);e.path=i+mM.encode(e.path.slice(i.length))}return!0}[pM](e){if(!this[yM](e))return e.resume();switch(aZ.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Wb](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[wM](e)}}[Wr](e,n){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:n}),this[Bm](),n.resume())}[ml](e,n,r){xM(Pi(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n,noChmod:this.noChmod},r)}[Kg](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Jg](e){return EM(this.uid,e.uid,this.processUid)}[Xg](e){return EM(this.gid,e.gid,this.processGid)}[Vb](e,n){let r=e.mode&4095||this.fmode,o=new lZ.WriteStream(e.absolute,{flags:DM(e.size),mode:r,autoClose:!1});o.on("error",c=>{o.fd&&ft.close(o.fd,()=>{}),o.write=()=>!0,this[Wr](c,e),n()});let i=1,s=c=>{if(c){o.fd&&ft.close(o.fd,()=>{}),this[Wr](c,e),n();return}--i===0&&ft.close(o.fd,l=>{l?this[Wr](l,e):this[Bm](),n()})};o.on("finish",c=>{let l=e.absolute,u=o.fd;if(e.mtime&&!this.noMtime){i++;let f=e.atime||new Date,m=e.mtime;ft.futimes(u,f,m,d=>d?ft.utimes(l,f,m,p=>s(p&&d)):s())}if(this[Kg](e)){i++;let f=this[Jg](e),m=this[Xg](e);ft.fchown(u,f,m,d=>d?ft.chown(l,f,m,p=>s(p&&d)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Wr](c,e),n()}),e.pipe(a)),a.pipe(o)}[Yb](e,n){let r=e.mode&4095||this.dmode;this[ml](e.absolute,r,o=>{if(o){this[Wr](o,e),n();return}let i=1,s=a=>{--i===0&&(n(),this[Bm](),e.resume())};e.mtime&&!this.noMtime&&(i++,ft.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[Kg](e)&&(i++,ft.chown(e.absolute,this[Jg](e),this[Xg](e),s)),s()})}[wM](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[gM](e,n){this[jE](e,e.linkpath,"symlink",n)}[vM](e,n){let r=Pi(ec.resolve(this.cwd,e.linkpath));this[jE](e,r,"link",n)}[CM](){this[HE]++}[Bm](){this[HE]--,this[Bb]()}[qb](e){this[Bm](),e.resume()}[jb](e,n){return e.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!Qg}[Wb](e){this[CM]();let n=[e.path];e.linkpath&&n.push(e.linkpath),this.reservations.reserve(n,r=>this[hM](e,r))}[WE](e){e.type==="SymbolicLink"?yZ(this.dirCache):e.type!=="Directory"&&wZ(this.dirCache,e.absolute)}[hM](e,n){this[WE](e);let r=a=>{this[WE](e),n(a)},o=()=>{this[ml](this.cwd,this.dmode,a=>{if(a){this[Wr](a,e),r();return}this[Zg]=!0,i()})},i=()=>{if(e.absolute!==this.cwd){let a=Pi(ec.dirname(e.absolute));if(a!==this.cwd)return this[ml](a,this.dmode,c=>{if(c){this[Wr](c,e),r();return}s()})}s()},s=()=>{ft.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[qb](e),r();return}if(a||this[jb](e,c))return this[bi](null,e,r);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[bi](f,e,r);return l?ft.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return ft.rmdir(e.absolute,l=>this[bi](l,e,r))}if(e.absolute===this.cwd)return this[bi](null,e,r);gZ(e.absolute,l=>this[bi](l,e,r))})};this[Zg]?i():o()}[bi](e,n,r){if(e){this[Wr](e,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[Vb](n,r);case"Link":return this[vM](n,r);case"SymbolicLink":return this[gM](n,r);case"Directory":case"GNUDumpDir":return this[Yb](n,r)}}[jE](e,n,r,o){ft[r](n,e.absolute,i=>{i?this[Wr](i,e):(this[Bm](),e.resume()),o()})}},BE=t=>{try{return[null,t()]}catch(e){return[e,null]}},Gb=class extends ev{[bi](e,n){return super[bi](e,n,()=>{})}[Wb](e){if(this[WE](e),!this[Zg]){let i=this[ml](this.cwd,this.dmode);if(i)return this[Wr](i,e);this[Zg]=!0}if(e.absolute!==this.cwd){let i=Pi(ec.dirname(e.absolute));if(i!==this.cwd){let s=this[ml](i,this.dmode);if(s)return this[Wr](s,e)}}let[n,r]=BE(()=>ft.lstatSync(e.absolute));if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[qb](e);if(n||this[jb](e,r))return this[bi](null,e);if(r.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(r.mode&4095)!==e.mode,[a]=s?BE(()=>{ft.chmodSync(e.absolute,e.mode)}):[];return this[bi](a,e)}let[i]=BE(()=>ft.rmdirSync(e.absolute));this[bi](i,e)}let[o]=e.absolute===this.cwd?[]:BE(()=>vZ(e.absolute));this[bi](o,e)}[Vb](e,n){let r=e.mode&4095||this.fmode,o=a=>{let c;try{ft.closeSync(i)}catch(l){c=l}(a||c)&&this[Wr](a||c,e),n()},i;try{i=ft.openSync(e.absolute,DM(e.size),r)}catch(a){return o(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[Wr](a,e)),e.pipe(s)),s.on("data",a=>{try{ft.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{ft.futimesSync(i,l,u)}catch(f){try{ft.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[Kg](e)){let l=this[Jg](e),u=this[Xg](e);try{ft.fchownSync(i,l,u)}catch(f){try{ft.chownSync(e.absolute,l,u)}catch{c=c||f}}}o(c)})}[Yb](e,n){let r=e.mode&4095||this.dmode,o=this[ml](e.absolute,r);if(o){this[Wr](o,e),n();return}if(e.mtime&&!this.noMtime)try{ft.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Kg](e))try{ft.chownSync(e.absolute,this[Jg](e),this[Xg](e))}catch{}n(),e.resume()}[ml](e,n){try{return xM.sync(Pi(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n})}catch(r){return r}}[jE](e,n,r,o){try{ft[r+"Sync"](n,e.absolute),o(),e.resume()}catch(i){return this[Wr](i,e)}}};ev.Sync=Gb;IM.exports=ev});var kM=$((_we,RM)=>{"use strict";var CZ=wm(),VE=zb(),bM=require("fs"),TM=Om(),PM=require("path"),Kb=Im();RM.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=CZ(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&EZ(r,e),r.file&&r.sync?SZ(r):r.file?xZ(r,n):r.sync?_Z(r):DZ(r)};var EZ=(t,e)=>{let n=new Map(e.map(i=>[Kb(i),!0])),r=t.filter,o=(i,s)=>{let a=s||PM.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(PM.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(Kb(i)):i=>o(Kb(i))},SZ=t=>{let e=new VE.Sync(t),n=t.file,r=bM.statSync(n),o=t.maxReadSize||16*1024*1024;new TM.ReadStreamSync(n,{readSize:o,size:r.size}).pipe(e)},xZ=(t,e)=>{let n=new VE(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("close",s),bM.stat(o,(c,l)=>{if(c)a(c);else{let u=new TM.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},_Z=t=>new VE.Sync(t),DZ=t=>new VE(t)});var YE=$(Wn=>{"use strict";Wn.c=Wn.create=m$();Wn.r=Wn.replace=Rb();Wn.t=Wn.list=NE();Wn.u=Wn.update=S$();Wn.x=Wn.extract=kM();Wn.Pack=dE();Wn.Unpack=zb();Wn.Parse=kE();Wn.ReadEntry=KC();Wn.WriteEntry=ZP();Wn.Header=Dm();Wn.Pax=XC();Wn.types=AP()});var tv=$((Iwe,NM)=>{"use strict";var IZ="2.0.0",PZ=Number.MAX_SAFE_INTEGER||9007199254740991,bZ=16,TZ=250,RZ=["major","premajor","minor","preminor","patch","prepatch","prerelease"];NM.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:bZ,MAX_SAFE_BUILD_LENGTH:TZ,MAX_SAFE_INTEGER:PZ,RELEASE_TYPES:RZ,SEMVER_SPEC_VERSION:IZ,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var nv=$((Pwe,LM)=>{"use strict";var kZ=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};LM.exports=kZ});var Wm=$((Vs,AM)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Jb,MAX_SAFE_BUILD_LENGTH:NZ,MAX_LENGTH:LZ}=tv(),AZ=nv();Vs=AM.exports={};var FZ=Vs.re=[],OZ=Vs.safeRe=[],pe=Vs.src=[],UZ=Vs.safeSrc=[],he=Vs.t={},$Z=0,Xb="[a-zA-Z0-9-]",MZ=[["\\s",1],["\\d",LZ],[Xb,NZ]],HZ=t=>{for(let[e,n]of MZ)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},je=(t,e,n)=>{let r=HZ(e),o=$Z++;AZ(t,o,e),he[t]=o,pe[o]=e,UZ[o]=r,FZ[o]=new RegExp(e,n?"g":void 0),OZ[o]=new RegExp(r,n?"g":void 0)};je("NUMERICIDENTIFIER","0|[1-9]\\d*");je("NUMERICIDENTIFIERLOOSE","\\d+");je("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Xb}*`);je("MAINVERSION",`(${pe[he.NUMERICIDENTIFIER]})\\.(${pe[he.NUMERICIDENTIFIER]})\\.(${pe[he.NUMERICIDENTIFIER]})`);je("MAINVERSIONLOOSE",`(${pe[he.NUMERICIDENTIFIERLOOSE]})\\.(${pe[he.NUMERICIDENTIFIERLOOSE]})\\.(${pe[he.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASEIDENTIFIER",`(?:${pe[he.NONNUMERICIDENTIFIER]}|${pe[he.NUMERICIDENTIFIER]})`);je("PRERELEASEIDENTIFIERLOOSE",`(?:${pe[he.NONNUMERICIDENTIFIER]}|${pe[he.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASE",`(?:-(${pe[he.PRERELEASEIDENTIFIER]}(?:\\.${pe[he.PRERELEASEIDENTIFIER]})*))`);je("PRERELEASELOOSE",`(?:-?(${pe[he.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${pe[he.PRERELEASEIDENTIFIERLOOSE]})*))`);je("BUILDIDENTIFIER",`${Xb}+`);je("BUILD",`(?:\\+(${pe[he.BUILDIDENTIFIER]}(?:\\.${pe[he.BUILDIDENTIFIER]})*))`);je("FULLPLAIN",`v?${pe[he.MAINVERSION]}${pe[he.PRERELEASE]}?${pe[he.BUILD]}?`);je("FULL",`^${pe[he.FULLPLAIN]}$`);je("LOOSEPLAIN",`[v=\\s]*${pe[he.MAINVERSIONLOOSE]}${pe[he.PRERELEASELOOSE]}?${pe[he.BUILD]}?`);je("LOOSE",`^${pe[he.LOOSEPLAIN]}$`);je("GTLT","((?:<|>)?=?)");je("XRANGEIDENTIFIERLOOSE",`${pe[he.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);je("XRANGEIDENTIFIER",`${pe[he.NUMERICIDENTIFIER]}|x|X|\\*`);je("XRANGEPLAIN",`[v=\\s]*(${pe[he.XRANGEIDENTIFIER]})(?:\\.(${pe[he.XRANGEIDENTIFIER]})(?:\\.(${pe[he.XRANGEIDENTIFIER]})(?:${pe[he.PRERELEASE]})?${pe[he.BUILD]}?)?)?`);je("XRANGEPLAINLOOSE",`[v=\\s]*(${pe[he.XRANGEIDENTIFIERLOOSE]})(?:\\.(${pe[he.XRANGEIDENTIFIERLOOSE]})(?:\\.(${pe[he.XRANGEIDENTIFIERLOOSE]})(?:${pe[he.PRERELEASELOOSE]})?${pe[he.BUILD]}?)?)?`);je("XRANGE",`^${pe[he.GTLT]}\\s*${pe[he.XRANGEPLAIN]}$`);je("XRANGELOOSE",`^${pe[he.GTLT]}\\s*${pe[he.XRANGEPLAINLOOSE]}$`);je("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Jb}})(?:\\.(\\d{1,${Jb}}))?(?:\\.(\\d{1,${Jb}}))?`);je("COERCE",`${pe[he.COERCEPLAIN]}(?:$|[^\\d])`);je("COERCEFULL",pe[he.COERCEPLAIN]+`(?:${pe[he.PRERELEASE]})?(?:${pe[he.BUILD]})?(?:$|[^\\d])`);je("COERCERTL",pe[he.COERCE],!0);je("COERCERTLFULL",pe[he.COERCEFULL],!0);je("LONETILDE","(?:~>?)");je("TILDETRIM",`(\\s*)${pe[he.LONETILDE]}\\s+`,!0);Vs.tildeTrimReplace="$1~";je("TILDE",`^${pe[he.LONETILDE]}${pe[he.XRANGEPLAIN]}$`);je("TILDELOOSE",`^${pe[he.LONETILDE]}${pe[he.XRANGEPLAINLOOSE]}$`);je("LONECARET","(?:\\^)");je("CARETTRIM",`(\\s*)${pe[he.LONECARET]}\\s+`,!0);Vs.caretTrimReplace="$1^";je("CARET",`^${pe[he.LONECARET]}${pe[he.XRANGEPLAIN]}$`);je("CARETLOOSE",`^${pe[he.LONECARET]}${pe[he.XRANGEPLAINLOOSE]}$`);je("COMPARATORLOOSE",`^${pe[he.GTLT]}\\s*(${pe[he.LOOSEPLAIN]})$|^$`);je("COMPARATOR",`^${pe[he.GTLT]}\\s*(${pe[he.FULLPLAIN]})$|^$`);je("COMPARATORTRIM",`(\\s*)${pe[he.GTLT]}\\s*(${pe[he.LOOSEPLAIN]}|${pe[he.XRANGEPLAIN]})`,!0);Vs.comparatorTrimReplace="$1$2$3";je("HYPHENRANGE",`^\\s*(${pe[he.XRANGEPLAIN]})\\s+-\\s+(${pe[he.XRANGEPLAIN]})\\s*$`);je("HYPHENRANGELOOSE",`^\\s*(${pe[he.XRANGEPLAINLOOSE]})\\s+-\\s+(${pe[he.XRANGEPLAINLOOSE]})\\s*$`);je("STAR","(<|>)?=?\\s*\\*");je("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");je("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var qE=$((bwe,FM)=>{"use strict";var BZ=Object.freeze({loose:!0}),WZ=Object.freeze({}),jZ=t=>t?typeof t!="object"?BZ:t:WZ;FM.exports=jZ});var Zb=$((Twe,$M)=>{"use strict";var OM=/^[0-9]+$/,UM=(t,e)=>{let n=OM.test(t),r=OM.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},VZ=(t,e)=>UM(e,t);$M.exports={compareIdentifiers:UM,rcompareIdentifiers:VZ}});var jr=$((Rwe,HM)=>{"use strict";var GE=nv(),{MAX_LENGTH:MM,MAX_SAFE_INTEGER:zE}=tv(),{safeRe:KE,t:JE}=Wm(),YZ=qE(),{compareIdentifiers:jm}=Zb(),Qb=class t{constructor(e,n){if(n=YZ(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>MM)throw new TypeError(`version is longer than ${MM} characters`);GE("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?KE[JE.LOOSE]:KE[JE.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>zE||this.major<0)throw new TypeError("Invalid major version");if(this.minor>zE||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>zE||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<zE)return i}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(GE("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),jm(this.major,e.major)||jm(this.minor,e.minor)||jm(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],o=e.prerelease[n];if(GE("prerelease compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return jm(r,o)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],o=e.build[n];if(GE("build compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return jm(r,o)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let o=`-${n}`.match(this.options.loose?KE[JE.PRERELEASELOOSE]:KE[JE.PRERELEASE]);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let i=[n,o];r===!1&&(i=[n]),jm(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};HM.exports=Qb});var mf=$((kwe,WM)=>{"use strict";var BM=jr(),qZ=(t,e,n=!1)=>{if(t instanceof BM)return t;try{return new BM(t,e)}catch(r){if(!n)return null;throw r}};WM.exports=qZ});var VM=$((Nwe,jM)=>{"use strict";var GZ=mf(),zZ=(t,e)=>{let n=GZ(t,e);return n?n.version:null};jM.exports=zZ});var qM=$((Lwe,YM)=>{"use strict";var KZ=mf(),JZ=(t,e)=>{let n=KZ(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};YM.exports=JZ});var KM=$((Awe,zM)=>{"use strict";var GM=jr(),XZ=(t,e,n,r,o)=>{typeof n=="string"&&(o=r,r=n,n=void 0);try{return new GM(t instanceof GM?t.version:t,n).inc(e,r,o).version}catch{return null}};zM.exports=XZ});var ZM=$((Fwe,XM)=>{"use strict";var JM=mf(),ZZ=(t,e)=>{let n=JM(t,null,!0),r=JM(e,null,!0),o=n.compare(r);if(o===0)return null;let i=o>0,s=i?n:r,a=i?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};XM.exports=ZZ});var eH=$((Owe,QM)=>{"use strict";var QZ=jr(),eQ=(t,e)=>new QZ(t,e).major;QM.exports=eQ});var nH=$((Uwe,tH)=>{"use strict";var tQ=jr(),nQ=(t,e)=>new tQ(t,e).minor;tH.exports=nQ});var oH=$(($we,rH)=>{"use strict";var rQ=jr(),oQ=(t,e)=>new rQ(t,e).patch;rH.exports=oQ});var sH=$((Mwe,iH)=>{"use strict";var iQ=mf(),sQ=(t,e)=>{let n=iQ(t,e);return n&&n.prerelease.length?n.prerelease:null};iH.exports=sQ});var Ti=$((Hwe,cH)=>{"use strict";var aH=jr(),aQ=(t,e,n)=>new aH(t,n).compare(new aH(e,n));cH.exports=aQ});var uH=$((Bwe,lH)=>{"use strict";var cQ=Ti(),lQ=(t,e,n)=>cQ(e,t,n);lH.exports=lQ});var dH=$((Wwe,fH)=>{"use strict";var uQ=Ti(),fQ=(t,e)=>uQ(t,e,!0);fH.exports=fQ});var XE=$((jwe,pH)=>{"use strict";var mH=jr(),dQ=(t,e,n)=>{let r=new mH(t,n),o=new mH(e,n);return r.compare(o)||r.compareBuild(o)};pH.exports=dQ});var gH=$((Vwe,hH)=>{"use strict";var mQ=XE(),pQ=(t,e)=>t.sort((n,r)=>mQ(n,r,e));hH.exports=pQ});var wH=$((Ywe,vH)=>{"use strict";var hQ=XE(),gQ=(t,e)=>t.sort((n,r)=>hQ(r,n,e));vH.exports=gQ});var rv=$((qwe,yH)=>{"use strict";var vQ=Ti(),wQ=(t,e,n)=>vQ(t,e,n)>0;yH.exports=wQ});var ZE=$((Gwe,CH)=>{"use strict";var yQ=Ti(),CQ=(t,e,n)=>yQ(t,e,n)<0;CH.exports=CQ});var eT=$((zwe,EH)=>{"use strict";var EQ=Ti(),SQ=(t,e,n)=>EQ(t,e,n)===0;EH.exports=SQ});var tT=$((Kwe,SH)=>{"use strict";var xQ=Ti(),_Q=(t,e,n)=>xQ(t,e,n)!==0;SH.exports=_Q});var QE=$((Jwe,xH)=>{"use strict";var DQ=Ti(),IQ=(t,e,n)=>DQ(t,e,n)>=0;xH.exports=IQ});var eS=$((Xwe,_H)=>{"use strict";var PQ=Ti(),bQ=(t,e,n)=>PQ(t,e,n)<=0;_H.exports=bQ});var nT=$((Zwe,DH)=>{"use strict";var TQ=eT(),RQ=tT(),kQ=rv(),NQ=QE(),LQ=ZE(),AQ=eS(),FQ=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return TQ(t,n,r);case"!=":return RQ(t,n,r);case">":return kQ(t,n,r);case">=":return NQ(t,n,r);case"<":return LQ(t,n,r);case"<=":return AQ(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};DH.exports=FQ});var PH=$((Qwe,IH)=>{"use strict";var OQ=jr(),UQ=mf(),{safeRe:tS,t:nS}=Wm(),$Q=(t,e)=>{if(t instanceof OQ)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?tS[nS.COERCEFULL]:tS[nS.COERCE]);else{let c=e.includePrerelease?tS[nS.COERCERTLFULL]:tS[nS.COERCERTL],l;for(;(l=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],o=n[3]||"0",i=n[4]||"0",s=e.includePrerelease&&n[5]?`-${n[5]}`:"",a=e.includePrerelease&&n[6]?`+${n[6]}`:"";return UQ(`${r}.${o}.${i}${s}${a}`,e)};IH.exports=$Q});var TH=$((eye,bH)=>{"use strict";var rT=class{constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,n)}return this}};bH.exports=rT});var Ri=$((tye,LH)=>{"use strict";var MQ=/\s+/g,oT=class t{constructor(e,n){if(n=BQ(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof iT)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(MQ," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(o=>!kH(o[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&zQ(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&qQ)|(this.options.loose&&GQ))+":"+e,o=RH.get(r);if(o)return o;let i=this.options.loose,s=i?Ro[eo.HYPHENRANGELOOSE]:Ro[eo.HYPHENRANGE];e=e.replace(s,oee(this.options.includePrerelease)),Ft("hyphen replace",e),e=e.replace(Ro[eo.COMPARATORTRIM],jQ),Ft("comparator trim",e),e=e.replace(Ro[eo.TILDETRIM],VQ),Ft("tilde trim",e),e=e.replace(Ro[eo.CARETTRIM],YQ),Ft("caret trim",e);let a=e.split(" ").map(f=>KQ(f,this.options)).join(" ").split(/\s+/).map(f=>ree(f,this.options));i&&(a=a.filter(f=>(Ft("loose invalid filter",f,this.options),!!f.match(Ro[eo.COMPARATORLOOSE])))),Ft("range list",a);let c=new Map,l=a.map(f=>new iT(f,this.options));for(let f of l){if(kH(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return RH.set(r,u),u}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>NH(r,n)&&e.set.some(o=>NH(o,n)&&r.every(i=>o.every(s=>i.intersects(s,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new WQ(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(iee(this.set[n],e,this.options))return!0;return!1}};LH.exports=oT;var HQ=TH(),RH=new HQ,BQ=qE(),iT=ov(),Ft=nv(),WQ=jr(),{safeRe:Ro,t:eo,comparatorTrimReplace:jQ,tildeTrimReplace:VQ,caretTrimReplace:YQ}=Wm(),{FLAG_INCLUDE_PRERELEASE:qQ,FLAG_LOOSE:GQ}=tv(),kH=t=>t.value==="<0.0.0-0",zQ=t=>t.value==="",NH=(t,e)=>{let n=!0,r=t.slice(),o=r.pop();for(;n&&r.length;)n=r.every(i=>o.intersects(i,e)),o=r.pop();return n},KQ=(t,e)=>(Ft("comp",t,e),t=ZQ(t,e),Ft("caret",t),t=JQ(t,e),Ft("tildes",t),t=eee(t,e),Ft("xrange",t),t=nee(t,e),Ft("stars",t),t),to=t=>!t||t.toLowerCase()==="x"||t==="*",JQ=(t,e)=>t.trim().split(/\s+/).map(n=>XQ(n,e)).join(" "),XQ=(t,e)=>{let n=e.loose?Ro[eo.TILDELOOSE]:Ro[eo.TILDE];return t.replace(n,(r,o,i,s,a)=>{Ft("tilde",t,r,o,i,s,a);let c;return to(o)?c="":to(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:to(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Ft("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Ft("tilde return",c),c})},ZQ=(t,e)=>t.trim().split(/\s+/).map(n=>QQ(n,e)).join(" "),QQ=(t,e)=>{Ft("caret",t,e);let n=e.loose?Ro[eo.CARETLOOSE]:Ro[eo.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(o,i,s,a,c)=>{Ft("caret",t,o,i,s,a,c);let l;return to(i)?l="":to(s)?l=`>=${i}.0.0${r} <${+i+1}.0.0-0`:to(a)?i==="0"?l=`>=${i}.${s}.0${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.0${r} <${+i+1}.0.0-0`:c?(Ft("replaceCaret pr",c),i==="0"?s==="0"?l=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Ft("no pr"),i==="0"?s==="0"?l=`>=${i}.${s}.${a}${r} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Ft("caret return",l),l})},eee=(t,e)=>(Ft("replaceXRanges",t,e),t.split(/\s+/).map(n=>tee(n,e)).join(" ")),tee=(t,e)=>{t=t.trim();let n=e.loose?Ro[eo.XRANGELOOSE]:Ro[eo.XRANGE];return t.replace(n,(r,o,i,s,a,c)=>{Ft("xRange",t,r,o,i,s,a,c);let l=to(i),u=l||to(s),f=u||to(a),m=f;return o==="="&&m&&(o=""),c=e.includePrerelease?"-0":"",l?o===">"||o==="<"?r="<0.0.0-0":r="*":o&&m?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),r=`${o+i}.${s}.${a}${c}`):u?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(r=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Ft("xRange return",r),r})},nee=(t,e)=>(Ft("replaceStars",t,e),t.trim().replace(Ro[eo.STAR],"")),ree=(t,e)=>(Ft("replaceGTE0",t,e),t.trim().replace(Ro[e.includePrerelease?eo.GTE0PRE:eo.GTE0],"")),oee=t=>(e,n,r,o,i,s,a,c,l,u,f,m)=>(to(r)?n="":to(o)?n=`>=${r}.0.0${t?"-0":""}`:to(i)?n=`>=${r}.${o}.0${t?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,to(l)?c="":to(u)?c=`<${+l+1}.0.0-0`:to(f)?c=`<${l}.${+u+1}.0-0`:m?c=`<=${l}.${u}.${f}-${m}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),iee=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ft(t[r].semver),t[r].semver!==iT.ANY&&t[r].semver.prerelease.length>0){let o=t[r].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var ov=$((nye,MH)=>{"use strict";var iv=Symbol("SemVer ANY"),cT=class t{static get ANY(){return iv}constructor(e,n){if(n=AH(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),aT("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===iv?this.value="":this.value=this.operator+this.semver.version,aT("comp",this)}parse(e){let n=this.options.loose?FH[OH.COMPARATORLOOSE]:FH[OH.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new UH(r[2],this.options.loose):this.semver=iv}toString(){return this.value}test(e){if(aT("Comparator.test",e,this.options.loose),this.semver===iv||e===iv)return!0;if(typeof e=="string")try{e=new UH(e,this.options)}catch{return!1}return sT(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new $H(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new $H(this.value,n).test(e.semver):(n=AH(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||sT(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||sT(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};MH.exports=cT;var AH=qE(),{safeRe:FH,t:OH}=Wm(),sT=nT(),aT=nv(),UH=jr(),$H=Ri()});var sv=$((rye,HH)=>{"use strict";var see=Ri(),aee=(t,e,n)=>{try{e=new see(e,n)}catch{return!1}return e.test(t)};HH.exports=aee});var WH=$((oye,BH)=>{"use strict";var cee=Ri(),lee=(t,e)=>new cee(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));BH.exports=lee});var VH=$((iye,jH)=>{"use strict";var uee=jr(),fee=Ri(),dee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new fee(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===-1)&&(r=s,o=new uee(r,n))}),r};jH.exports=dee});var qH=$((sye,YH)=>{"use strict";var mee=jr(),pee=Ri(),hee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new pee(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===1)&&(r=s,o=new mee(r,n))}),r};YH.exports=hee});var KH=$((aye,zH)=>{"use strict";var lT=jr(),gee=Ri(),GH=rv(),vee=(t,e)=>{t=new gee(t,e);let n=new lT("0.0.0");if(t.test(n)||(n=new lT("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let o=t.set[r],i=null;o.forEach(s=>{let a=new lT(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||GH(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!n||GH(n,i))&&(n=i)}return n&&t.test(n)?n:null};zH.exports=vee});var XH=$((cye,JH)=>{"use strict";var wee=Ri(),yee=(t,e)=>{try{return new wee(t,e).range||"*"}catch{return null}};JH.exports=yee});var rS=$((lye,t2)=>{"use strict";var Cee=jr(),e2=ov(),{ANY:Eee}=e2,See=Ri(),xee=sv(),ZH=rv(),QH=ZE(),_ee=eS(),Dee=QE(),Iee=(t,e,n,r)=>{t=new Cee(t,r),e=new See(e,r);let o,i,s,a,c;switch(n){case">":o=ZH,i=_ee,s=QH,a=">",c=">=";break;case"<":o=QH,i=Dee,s=ZH,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(xee(t,e,r))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,m=null;if(u.forEach(d=>{d.semver===Eee&&(d=new e2(">=0.0.0")),f=f||d,m=m||d,o(d.semver,f.semver,r)?f=d:s(d.semver,m.semver,r)&&(m=d)}),f.operator===a||f.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&s(t,m.semver))return!1}return!0};t2.exports=Iee});var r2=$((uye,n2)=>{"use strict";var Pee=rS(),bee=(t,e,n)=>Pee(t,e,">",n);n2.exports=bee});var i2=$((fye,o2)=>{"use strict";var Tee=rS(),Ree=(t,e,n)=>Tee(t,e,"<",n);o2.exports=Ree});var c2=$((dye,a2)=>{"use strict";var s2=Ri(),kee=(t,e,n)=>(t=new s2(t,n),e=new s2(e,n),t.intersects(e,n));a2.exports=kee});var u2=$((mye,l2)=>{"use strict";var Nee=sv(),Lee=Ti();l2.exports=(t,e,n)=>{let r=[],o=null,i=null,s=t.sort((u,f)=>Lee(u,f,n));for(let u of s)Nee(u,e,n)?(i=u,o||(o=u)):(i&&r.push([o,i]),i=null,o=null);o&&r.push([o,null]);let a=[];for(let[u,f]of r)u===f?a.push(u):!f&&u===s[0]?a.push("*"):f?u===s[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var g2=$((pye,h2)=>{"use strict";var f2=Ri(),fT=ov(),{ANY:uT}=fT,av=sv(),dT=Ti(),Aee=(t,e,n={})=>{if(t===e)return!0;t=new f2(t,n),e=new f2(e,n);let r=!1;e:for(let o of t.set){for(let i of e.set){let s=Oee(o,i,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Fee=[new fT(">=0.0.0-0")],d2=[new fT(">=0.0.0")],Oee=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===uT){if(e.length===1&&e[0].semver===uT)return!0;n.includePrerelease?t=Fee:t=d2}if(e.length===1&&e[0].semver===uT){if(n.includePrerelease)return!0;e=d2}let r=new Set,o,i;for(let d of t)d.operator===">"||d.operator===">="?o=m2(o,d,n):d.operator==="<"||d.operator==="<="?i=p2(i,d,n):r.add(d.semver);if(r.size>1)return null;let s;if(o&&i){if(s=dT(o.semver,i.semver,n),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(o&&!av(d,String(o),n)||i&&!av(d,String(i),n))return null;for(let p of e)if(!av(d,String(p),n))return!1;return!0}let a,c,l,u,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",o){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(a=m2(o,d,n),a===d&&a!==o)return!1}else if(o.operator===">="&&!av(o.semver,String(d),n))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=p2(i,d,n),c===d&&c!==i)return!1}else if(i.operator==="<="&&!av(i.semver,String(d),n))return!1}if(!d.operator&&(i||o)&&s!==0)return!1}return!(o&&l&&!i&&s!==0||i&&u&&!o&&s!==0||m||f)},m2=(t,e,n)=>{if(!t)return e;let r=dT(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},p2=(t,e,n)=>{if(!t)return e;let r=dT(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};h2.exports=Aee});var pT=$((hye,y2)=>{"use strict";var mT=Wm(),v2=tv(),Uee=jr(),w2=Zb(),$ee=mf(),Mee=VM(),Hee=qM(),Bee=KM(),Wee=ZM(),jee=eH(),Vee=nH(),Yee=oH(),qee=sH(),Gee=Ti(),zee=uH(),Kee=dH(),Jee=XE(),Xee=gH(),Zee=wH(),Qee=rv(),ete=ZE(),tte=eT(),nte=tT(),rte=QE(),ote=eS(),ite=nT(),ste=PH(),ate=ov(),cte=Ri(),lte=sv(),ute=WH(),fte=VH(),dte=qH(),mte=KH(),pte=XH(),hte=rS(),gte=r2(),vte=i2(),wte=c2(),yte=u2(),Cte=g2();y2.exports={parse:$ee,valid:Mee,clean:Hee,inc:Bee,diff:Wee,major:jee,minor:Vee,patch:Yee,prerelease:qee,compare:Gee,rcompare:zee,compareLoose:Kee,compareBuild:Jee,sort:Xee,rsort:Zee,gt:Qee,lt:ete,eq:tte,neq:nte,gte:rte,lte:ote,cmp:ite,coerce:ste,Comparator:ate,Range:cte,satisfies:lte,toComparators:ute,maxSatisfying:fte,minSatisfying:dte,minVersion:mte,validRange:pte,outside:hte,gtr:gte,ltr:vte,intersects:wte,simplifyRange:yte,subset:Cte,SemVer:Uee,re:mT.re,src:mT.src,tokens:mT.t,SEMVER_SPEC_VERSION:v2.SEMVER_SPEC_VERSION,RELEASE_TYPES:v2.RELEASE_TYPES,compareIdentifiers:w2.compareIdentifiers,rcompareIdentifiers:w2.rcompareIdentifiers}});var hT=$((gye,C2)=>{C2.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var oS=$(S2=>{var E2={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function Ete(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(E2))S2[t]=Ete(E2[t])});var P2=$((wye,I2)=>{var Ste=require("fs"),jn=require("path"),x2=hT(),xte=oS(),_te=typeof process=="object"&&process.platform==="win32",_2=t=>typeof t=="object"&&t!==null,D2=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function an(t){this.sep=jn.sep,this.fs=Ste,_2(t)&&_2(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}I2.exports=an;an.prototype.makeDir=function(t){let e=this;function n(r){let o=r.split(e.sep)[0];r.split(e.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){o+=e.sep+i;var s;try{s=e.fs.statSync(o)}catch{e.fs.mkdirSync(o)}if(s&&s.isFile())throw xte.FILE_IN_THE_WAY(`"${o}"`)}})}n(t)};an.prototype.writeFileTo=function(t,e,n,r){let o=this;if(o.fs.existsSync(t)){if(!n)return!1;var i=o.fs.statSync(t);if(i.isDirectory())return!1}var s=jn.dirname(t);o.fs.existsSync(s)||o.makeDir(s);var a;try{a=o.fs.openSync(t,"w",438)}catch{o.fs.chmodSync(t,438),a=o.fs.openSync(t,"w",438)}if(a)try{o.fs.writeSync(a,e,0,e.length,0)}finally{o.fs.closeSync(a)}return o.fs.chmodSync(t,r||438),!0};an.prototype.writeFileToAsync=function(t,e,n,r,o){typeof r=="function"&&(o=r,r=void 0);let i=this;i.fs.exists(t,function(s){if(s&&!n)return o(!1);i.fs.stat(t,function(a,c){if(s&&c.isDirectory())return o(!1);var l=jn.dirname(t);i.fs.exists(l,function(u){u||i.makeDir(l),i.fs.open(t,"w",438,function(f,m){f?i.fs.chmod(t,438,function(){i.fs.open(t,"w",438,function(d,p){i.fs.write(p,e,0,e.length,0,function(){i.fs.close(p,function(){i.fs.chmod(t,r||438,function(){o(!0)})})})})}):m?i.fs.write(m,e,0,e.length,0,function(){i.fs.close(m,function(){i.fs.chmod(t,r||438,function(){o(!0)})})}):i.fs.chmod(t,r||438,function(){o(!0)})})})})})};an.prototype.findFiles=function(t){let e=this;function n(r,o,i){typeof o=="boolean"&&(i=o,o=void 0);let s=[];return e.fs.readdirSync(r).forEach(function(a){let c=jn.join(r,a),l=e.fs.statSync(c);(!o||o.test(c))&&s.push(jn.normalize(c)+(l.isDirectory()?e.sep:"")),l.isDirectory()&&i&&(s=s.concat(n(c,o,i)))}),s}return n(t,void 0,!0)};an.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(o,i){if(o)return e(o);let s=i.length;if(!s)return e(null,r);i.forEach(function(a){a=jn.join(t,a),n.fs.stat(a,function(c,l){if(c)return e(c);l&&(r.push(jn.normalize(a)+(l.isDirectory()?n.sep:"")),l.isDirectory()?n.findFilesAsync(a,function(u,f){if(u)return e(u);r=r.concat(f),--s||e(null,r)}):--s||e(null,r))})})})};an.prototype.getAttributes=function(){};an.prototype.setAttributes=function(){};an.crc32update=function(t,e){return D2[(t^e)&255]^t>>>8};an.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=an.crc32update(n,t[r++]);return~n>>>0};an.methodToString=function(t){switch(t){case x2.STORED:return"STORED ("+t+")";case x2.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};an.canonical=function(t){if(!t)return"";let e=jn.posix.normalize("/"+t.split("\\").join("/"));return jn.join(".",e)};an.zipnamefix=function(t){if(!t)return"";let e=jn.posix.normalize("/"+t.split("\\").join("/"));return jn.posix.join(".",e)};an.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};an.sanitize=function(t,e){t=jn.resolve(jn.normalize(t));for(var n=e.split("/"),r=0,o=n.length;r<o;r++){var i=jn.normalize(jn.join(t,n.slice(r,o).join(jn.sep)));if(i.indexOf(t)===0)return i}return jn.normalize(jn.join(t,jn.basename(e)))};an.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};an.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};an.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};an.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};an.isWin=_te;an.crcTable=D2});var T2=$((yye,b2)=>{var Dte=require("path");b2.exports=function(t,{fs:e}){var n=t||"",r=i(),o=null;function i(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(o=e.statSync(n),r.directory=o.isDirectory(),r.mtime=o.mtime,r.atime=o.atime,r.executable=(73&o.mode)!==0,r.readonly=(128&o.mode)===0,r.hidden=Dte.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var k2=$((Cye,R2)=>{R2.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var Ym=$((Eye,Vm)=>{Vm.exports=P2();Vm.exports.Constants=hT();Vm.exports.Errors=oS();Vm.exports.FileAttr=T2();Vm.exports.decoder=k2()});var L2=$((Sye,N2)=>{var pl=Ym(),de=pl.Constants;N2.exports=function(){var t=20,e=10,n=0,r=0,o=0,i=0,s=0,a=0,c=0,l=0,u=0,f=0,m=0,d=0,p=0;t|=pl.isWin?2560:768,n|=de.FLG_EFS;let h={extraLen:0},g=w=>Math.max(0,w)>>>0,v=w=>Math.max(0,w)&65535,C=w=>Math.max(0,w)&255;return o=pl.fromDate2DOS(new Date),{get made(){return t},set made(w){t=w},get version(){return e},set version(w){e=w},get flags(){return n},set flags(w){n=w},get flags_efs(){return(n&de.FLG_EFS)>0},set flags_efs(w){w?n|=de.FLG_EFS:n&=~de.FLG_EFS},get flags_desc(){return(n&de.FLG_DESC)>0},set flags_desc(w){w?n|=de.FLG_DESC:n&=~de.FLG_DESC},get method(){return r},set method(w){switch(w){case de.STORED:this.version=10;case de.DEFLATED:default:this.version=20}r=w},get time(){return pl.fromDOS2Date(this.timeval)},set time(w){this.timeval=pl.fromDate2DOS(w)},get timeval(){return o},set timeval(w){o=g(w)},get timeHighByte(){return C(o>>>8)},get crc(){return i},set crc(w){i=g(w)},get compressedSize(){return s},set compressedSize(w){s=g(w)},get size(){return a},set size(w){a=g(w)},get fileNameLength(){return c},set fileNameLength(w){c=w},get extraLength(){return l},set extraLength(w){l=w},get extraLocalLength(){return h.extraLen},set extraLocalLength(w){h.extraLen=w},get commentLength(){return u},set commentLength(w){u=w},get diskNumStart(){return f},set diskNumStart(w){f=g(w)},get inAttr(){return m},set inAttr(w){m=g(w)},get attr(){return d},set attr(w){d=g(w)},get fileAttr(){return(d||0)>>16&4095},get offset(){return p},set offset(w){p=g(w)},get encrypted(){return(n&de.FLG_ENC)===de.FLG_ENC},get centralHeaderSize(){return de.CENHDR+c+l+u},get realDataOffset(){return p+de.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(w){var y=w.slice(p,p+de.LOCHDR);if(y.readUInt32LE(0)!==de.LOCSIG)throw pl.Errors.INVALID_LOC();h.version=y.readUInt16LE(de.LOCVER),h.flags=y.readUInt16LE(de.LOCFLG),h.method=y.readUInt16LE(de.LOCHOW),h.time=y.readUInt32LE(de.LOCTIM),h.crc=y.readUInt32LE(de.LOCCRC),h.compressedSize=y.readUInt32LE(de.LOCSIZ),h.size=y.readUInt32LE(de.LOCLEN),h.fnameLen=y.readUInt16LE(de.LOCNAM),h.extraLen=y.readUInt16LE(de.LOCEXT);let S=p+de.LOCHDR+h.fnameLen,D=S+h.extraLen;return w.slice(S,D)},loadFromBinary:function(w){if(w.length!==de.CENHDR||w.readUInt32LE(0)!==de.CENSIG)throw pl.Errors.INVALID_CEN();t=w.readUInt16LE(de.CENVEM),e=w.readUInt16LE(de.CENVER),n=w.readUInt16LE(de.CENFLG),r=w.readUInt16LE(de.CENHOW),o=w.readUInt32LE(de.CENTIM),i=w.readUInt32LE(de.CENCRC),s=w.readUInt32LE(de.CENSIZ),a=w.readUInt32LE(de.CENLEN),c=w.readUInt16LE(de.CENNAM),l=w.readUInt16LE(de.CENEXT),u=w.readUInt16LE(de.CENCOM),f=w.readUInt16LE(de.CENDSK),m=w.readUInt16LE(de.CENATT),d=w.readUInt32LE(de.CENATX),p=w.readUInt32LE(de.CENOFF)},localHeaderToBinary:function(){var w=Buffer.alloc(de.LOCHDR);return w.writeUInt32LE(de.LOCSIG,0),w.writeUInt16LE(e,de.LOCVER),w.writeUInt16LE(n,de.LOCFLG),w.writeUInt16LE(r,de.LOCHOW),w.writeUInt32LE(o,de.LOCTIM),w.writeUInt32LE(i,de.LOCCRC),w.writeUInt32LE(s,de.LOCSIZ),w.writeUInt32LE(a,de.LOCLEN),w.writeUInt16LE(c,de.LOCNAM),w.writeUInt16LE(h.extraLen,de.LOCEXT),w},centralHeaderToBinary:function(){var w=Buffer.alloc(de.CENHDR+c+l+u);return w.writeUInt32LE(de.CENSIG,0),w.writeUInt16LE(t,de.CENVEM),w.writeUInt16LE(e,de.CENVER),w.writeUInt16LE(n,de.CENFLG),w.writeUInt16LE(r,de.CENHOW),w.writeUInt32LE(o,de.CENTIM),w.writeUInt32LE(i,de.CENCRC),w.writeUInt32LE(s,de.CENSIZ),w.writeUInt32LE(a,de.CENLEN),w.writeUInt16LE(c,de.CENNAM),w.writeUInt16LE(l,de.CENEXT),w.writeUInt16LE(u,de.CENCOM),w.writeUInt16LE(f,de.CENDSK),w.writeUInt16LE(m,de.CENATT),w.writeUInt32LE(d,de.CENATX),w.writeUInt32LE(p,de.CENOFF),w},toJSON:function(){let w=function(y){return y+" bytes"};return{made:t,version:e,flags:n,method:pl.methodToString(r),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:w(s),size:w(a),fileNameLength:w(c),extraLength:w(l),commentLength:w(u),diskNumStart:f,inAttr:m,attr:d,offset:p,centralHeaderSize:w(de.CENHDR+c+l+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var F2=$((xye,A2)=>{var qm=Ym(),Zt=qm.Constants;A2.exports=function(){var t=0,e=0,n=0,r=0,o=0;return{get diskEntries(){return t},set diskEntries(i){t=e=i},get totalEntries(){return e},set totalEntries(i){e=t=i},get size(){return n},set size(i){n=i},get offset(){return r},set offset(i){r=i},get commentLength(){return o},set commentLength(i){o=i},get mainHeaderSize(){return Zt.ENDHDR+o},loadFromBinary:function(i){if((i.length!==Zt.ENDHDR||i.readUInt32LE(0)!==Zt.ENDSIG)&&(i.length<Zt.ZIP64HDR||i.readUInt32LE(0)!==Zt.ZIP64SIG))throw qm.Errors.INVALID_END();i.readUInt32LE(0)===Zt.ENDSIG?(t=i.readUInt16LE(Zt.ENDSUB),e=i.readUInt16LE(Zt.ENDTOT),n=i.readUInt32LE(Zt.ENDSIZ),r=i.readUInt32LE(Zt.ENDOFF),o=i.readUInt16LE(Zt.ENDCOM)):(t=qm.readBigUInt64LE(i,Zt.ZIP64SUB),e=qm.readBigUInt64LE(i,Zt.ZIP64TOT),n=qm.readBigUInt64LE(i,Zt.ZIP64SIZE),r=qm.readBigUInt64LE(i,Zt.ZIP64OFF),o=0)},toBinary:function(){var i=Buffer.alloc(Zt.ENDHDR+o);return i.writeUInt32LE(Zt.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(t,Zt.ENDSUB),i.writeUInt16LE(e,Zt.ENDTOT),i.writeUInt32LE(n,Zt.ENDSIZ),i.writeUInt32LE(r,Zt.ENDOFF),i.writeUInt16LE(o,Zt.ENDCOM),i.fill(" ",Zt.ENDHDR),i},toJSON:function(){let i=function(s,a){let c=s.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:i(r,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var vT=$(gT=>{gT.EntryHeader=L2();gT.MainHeader=F2()});var U2=$((Dye,O2)=>{O2.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var o=e.createDeflateRaw(n),i=[],s=0;o.on("data",function(a){i.push(a),s+=a.length}),o.on("end",function(){var a=Buffer.alloc(s),c=0;a.fill(0);for(var l=0;l<i.length;l++){var u=i[l];u.copy(a,c),c+=u.length}r&&r(a)}),o.end(t)}}}});var M2=$((Iye,$2)=>{var Ite=+(process.versions?process.versions.node:"").split(".")[0]||0;$2.exports=function(t,e){var n=require("zlib");let r=Ite>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(o){var i=n.createInflateRaw(r),s=[],a=0;i.on("data",function(c){s.push(c),a+=c.length}),i.on("end",function(){var c=Buffer.alloc(a),l=0;c.fill(0);for(var u=0;u<s.length;u++){var f=s[u];f.copy(c,l),l+=f.length}o&&o(c)}),i.end(t)}}}});var V2=$((Pye,j2)=>{"use strict";var{randomFillSync:H2}=require("crypto"),Pte=oS(),bte=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),W2=(t,e)=>Math.imul(t,e)>>>0,B2=(t,e)=>bte[(t^e)&255]^t>>>8,cv=()=>typeof H2=="function"?H2(Buffer.alloc(12)):cv.node();cv.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var iS={genSalt:cv};function sS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}sS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=B2(e[0],t),e[1]+=e[0]&255,e[1]=W2(e[1],134775813)+1,e[2]=B2(e[2],e[1]>>>24),t};sS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return W2(t,t^1)>>8&255};function Tte(t){let e=new sS(t);return function(n){let r=Buffer.alloc(n.length),o=0;for(let i of n)r[o++]=e.updateKeys(i^e.next());return r}}function Rte(t){let e=new sS(t);return function(n,r,o=0){r||(r=Buffer.alloc(n.length));for(let i of n){let s=e.next();r[o++]=i^s,e.updateKeys(i)}return r}}function kte(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=Tte(n),o=r(t.slice(0,12)),i=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(o[11]!==i)throw Pte.WRONG_PASSWORD();return r(t.slice(12))}function Nte(t){Buffer.isBuffer(t)&&t.length>=12?iS.genSalt=function(){return t.slice(0,12)}:t==="node"?iS.genSalt=cv.node:iS.genSalt=cv}function Lte(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let o=Rte(n),i=iS.genSalt();i[11]=e.crc>>>24&255,r&&(i[10]=e.crc>>>16&255);let s=Buffer.alloc(t.length+12);return o(i,s),o(t,s,12)}j2.exports={decrypt:kte,encrypt:Lte,_salter:Nte}});var Y2=$(aS=>{aS.Deflater=U2();aS.Inflater=M2();aS.ZipCrypto=V2()});var yT=$((Tye,q2)=>{var Ct=Ym(),Ate=vT(),cn=Ct.Constants,wT=Y2();q2.exports=function(t,e){var n=new Ate.EntryHeader,r=Buffer.alloc(0),o=Buffer.alloc(0),i=!1,s=null,a=Buffer.alloc(0),c=Buffer.alloc(0),l=!0;let u=t,f=typeof u.decoder=="object"?u.decoder:Ct.decoder;l=f.hasOwnProperty("efs")?f.efs:!1;function m(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(c=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function d(w){if(n.flags_desc){let y={},S=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(S)==cn.LOCSIG||e.readUInt32LE(S)==cn.CENSIG)throw Ct.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(S)==cn.EXTSIG)y.crc=e.readUInt32LE(S+cn.EXTCRC),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ),y.size=e.readUInt32LE(S+cn.EXTLEN);else if(e.readUInt16LE(S+12)===19280)y.crc=e.readUInt32LE(S+cn.EXTCRC-4),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ-4),y.size=e.readUInt32LE(S+cn.EXTLEN-4);else throw Ct.Errors.DESCRIPTOR_UNKNOWN();if(y.compressedSize!==n.compressedSize||y.size!==n.size||y.crc!==n.crc)throw Ct.Errors.DESCRIPTOR_FAULTY();if(Ct.crc32(w)!==y.crc)return!1}else if(Ct.crc32(w)!==n.localHeader.crc)return!1;return!0}function p(w,y,S){if(typeof y>"u"&&typeof w=="string"&&(S=w,w=void 0),i)return w&&y&&y(Buffer.alloc(0),Ct.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var D=m();if(D.length===0)return w&&y&&y(D),D;if(n.encrypted){if(typeof S!="string"&&!Buffer.isBuffer(S))throw Ct.Errors.INVALID_PASS_PARAM();D=wT.ZipCrypto.decrypt(D,n,S)}var x=Buffer.alloc(n.size);switch(n.method){case Ct.Constants.STORED:if(D.copy(x),d(x))return w&&y&&y(x),x;throw w&&y&&y(x,Ct.Errors.BAD_CRC()),Ct.Errors.BAD_CRC();case Ct.Constants.DEFLATED:var A=new wT.Inflater(D,n.size);if(w)A.inflateAsync(function(F){F.copy(F,0),y&&(d(F)?y(F):y(F,Ct.Errors.BAD_CRC()))});else{if(A.inflate(x).copy(x,0),!d(x))throw Ct.Errors.BAD_CRC(`"${f.decode(r)}"`);return x}break;default:throw w&&y&&y(Buffer.alloc(0),Ct.Errors.UNKNOWN_METHOD()),Ct.Errors.UNKNOWN_METHOD()}}function h(w,y){if((!s||!s.length)&&Buffer.isBuffer(e))return w&&y&&y(m()),m();if(s.length&&!i){var S;switch(n.method){case Ct.Constants.STORED:return n.compressedSize=n.size,S=Buffer.alloc(s.length),s.copy(S),w&&y&&y(S),S;default:case Ct.Constants.DEFLATED:var D=new wT.Deflater(s);if(w)D.deflateAsync(function(A){S=Buffer.alloc(A.length),n.compressedSize=A.length,A.copy(S),y&&y(S)});else{var x=D.deflate();return n.compressedSize=x.length,x}D=null;break}}else if(w&&y)y(Buffer.alloc(0));else return Buffer.alloc(0)}function g(w,y){return(w.readUInt32LE(y+4)<<4)+w.readUInt32LE(y)}function v(w){try{for(var y=0,S,D,x;y+4<w.length;)S=w.readUInt16LE(y),y+=2,D=w.readUInt16LE(y),y+=2,x=w.slice(y,y+D),y+=D,cn.ID_ZIP64===S&&C(x)}catch{throw Ct.Errors.EXTRA_FIELD_PARSE_ERROR()}}function C(w){var y,S,D,x;w.length>=cn.EF_ZIP64_SCOMP&&(y=g(w,cn.EF_ZIP64_SUNCOMP),n.size===cn.EF_ZIP64_OR_32&&(n.size=y)),w.length>=cn.EF_ZIP64_RHO&&(S=g(w,cn.EF_ZIP64_SCOMP),n.compressedSize===cn.EF_ZIP64_OR_32&&(n.compressedSize=S)),w.length>=cn.EF_ZIP64_DSN&&(D=g(w,cn.EF_ZIP64_RHO),n.offset===cn.EF_ZIP64_OR_32&&(n.offset=D)),w.length>=cn.EF_ZIP64_DSN+4&&(x=w.readUInt32LE(cn.EF_ZIP64_DSN),n.diskNumStart===cn.EF_ZIP64_OR_16&&(n.diskNumStart=x))}return{get entryName(){return f.decode(r)},get rawEntryName(){return r},set entryName(w){r=Ct.toBuffer(w,f.encode);var y=r[r.length-1];i=y===47||y===92,n.fileNameLength=r.length},get efs(){return typeof l=="function"?l(this.entryName):l},get extra(){return a},set extra(w){a=w,n.extraLength=w.length,v(w)},get comment(){return f.decode(o)},set comment(w){if(o=Ct.toBuffer(w,f.encode),n.commentLength=o.length,o.length>65535)throw Ct.Errors.COMMENT_TOO_LONG()},get name(){var w=f.decode(r);return i?w.substr(w.length-1).split("/").pop():w.split("/").pop()},get isDirectory(){return i},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(w){h(!0,w)},setData:function(w){s=Ct.toBuffer(w,Ct.decoder.encode),!i&&s.length?(n.size=s.length,n.method=Ct.Constants.DEFLATED,n.crc=Ct.crc32(w),n.changed=!0):n.method=Ct.Constants.STORED},getData:function(w){return n.changed?s:p(!1,null,w)},getDataAsync:function(w,y){n.changed?w(s):p(!0,w,y)},set attr(w){n.attr=w},get attr(){return n.attr},set header(w){n.loadFromBinary(w)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var w=n.centralHeaderToBinary(),y=Ct.Constants.CENHDR;return r.copy(w,y),y+=r.length,a.copy(w,y),y+=n.extraLength,o.copy(w,y),w},packLocalHeader:function(){let w=0;n.flags_efs=this.efs,n.extraLocalLength=c.length;let y=n.localHeaderToBinary(),S=Buffer.alloc(y.length+r.length+n.extraLocalLength);return y.copy(S,w),w+=y.length,r.copy(S,w),w+=r.length,c.copy(S,w),w+=c.length,S},toJSON:function(){let w=function(y){return"<"+(y&&y.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:w(e),data:w(s)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var K2=$((Rye,z2)=>{var G2=yT(),Fte=vT(),Er=Ym();z2.exports=function(t,e){var n=[],r={},o=Buffer.alloc(0),i=new Fte.MainHeader,s=!1,a=null;let c=new Set,l=e,{noSort:u,decoder:f}=l;t?p(l.readEntries):s=!0;function m(){let g=new Set;for(let v of Object.keys(r)){let C=v.split("/");if(C.pop(),!!C.length)for(let w=0;w<C.length;w++){let y=C.slice(0,w+1).join("/")+"/";g.add(y)}}for(let v of g)if(!(v in r)){let C=new G2(l);C.entryName=v,C.attr=16,C.temporary=!0,n.push(C),r[C.entryName]=C,c.add(C)}}function d(){if(s=!0,r={},i.diskEntries>(t.length-i.offset)/Er.Constants.CENHDR)throw Er.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(i.diskEntries);for(var g=i.offset,v=0;v<n.length;v++){var C=g,w=new G2(l,t);w.header=t.slice(C,C+=Er.Constants.CENHDR),w.entryName=t.slice(C,C+=w.header.fileNameLength),w.header.extraLength&&(w.extra=t.slice(C,C+=w.header.extraLength)),w.header.commentLength&&(w.comment=t.slice(C,C+w.header.commentLength)),g+=w.header.centralHeaderSize,n[v]=w,r[w.entryName]=w}c.clear(),m()}function p(g){var v=t.length-Er.Constants.ENDHDR,C=Math.max(0,v-65535),w=C,y=t.length,S=-1,D=0;for((typeof l.trailingSpace=="boolean"?l.trailingSpace:!1)&&(C=0),v;v>=w;v--)if(t[v]===80){if(t.readUInt32LE(v)===Er.Constants.ENDSIG){S=v,D=v,y=v+Er.Constants.ENDHDR,w=v-Er.Constants.END64HDR;continue}if(t.readUInt32LE(v)===Er.Constants.END64SIG){w=C;continue}if(t.readUInt32LE(v)===Er.Constants.ZIP64SIG){S=v,y=v+Er.readBigUInt64LE(t,v+Er.Constants.ZIP64SIZE)+Er.Constants.ZIP64LEAD;break}}if(S==-1)throw Er.Errors.INVALID_FORMAT();i.loadFromBinary(t.slice(S,y)),i.commentLength&&(o=t.slice(D+Er.Constants.ENDHDR)),g&&d()}function h(){n.length>1&&!u&&n.sort((g,v)=>g.entryName.toLowerCase().localeCompare(v.entryName.toLowerCase()))}return{get entries(){return s||d(),n.filter(g=>!c.has(g))},get comment(){return f.decode(o)},set comment(g){o=Er.toBuffer(g,f.encode),i.commentLength=o.length},getEntryCount:function(){return s?n.length:i.diskEntries},forEach:function(g){this.entries.forEach(g)},getEntry:function(g){return s||d(),r[g]||null},setEntry:function(g){s||d(),n.push(g),r[g.entryName]=g,i.totalEntries=n.length},deleteFile:function(g,v=!0){s||d();let C=r[g];this.getEntryChildren(C,v).map(y=>y.entryName).forEach(this.deleteEntry)},deleteEntry:function(g){s||d();let v=r[g],C=n.indexOf(v);C>=0&&(n.splice(C,1),delete r[g],i.totalEntries=n.length)},getEntryChildren:function(g,v=!0){if(s||d(),typeof g=="object")if(g.isDirectory&&v){let C=[],w=g.entryName;for(let y of n)y.entryName.startsWith(w)&&C.push(y);return C}else return[g];return[]},getChildCount:function(g){if(g&&g.isDirectory){let v=this.getEntryChildren(g);return v.includes(g)?v.length-1:v.length}return 0},compressToBuffer:function(){s||d(),h();let g=[],v=[],C=0,w=0;i.size=0,i.offset=0;let y=0;for(let x of this.entries){let A=x.getCompressedData();x.header.offset=w;let F=x.packLocalHeader(),k=F.length+A.length;w+=k,g.push(F),g.push(A);let E=x.packCentralHeader();v.push(E),i.size+=E.length,C+=k+E.length,y++}C+=i.mainHeaderSize,i.offset=w,i.totalEntries=y,w=0;let S=Buffer.alloc(C);for(let x of g)x.copy(S,w),w+=x.length;for(let x of v)x.copy(S,w),w+=x.length;let D=i.toBinary();return o&&o.copy(D,Er.Constants.ENDHDR),D.copy(S,w),t=S,s=!1,S},toAsyncBuffer:function(g,v,C,w){try{s||d(),h();let y=[],S=[],D=0,x=0,A=0;i.size=0,i.offset=0;let F=function(k){if(k.length>0){let E=k.shift(),_=E.entryName+E.extra.toString();C&&C(_),E.getCompressedDataAsync(function(T){w&&w(_),E.header.offset=x;let I=E.packLocalHeader(),b=I.length+T.length;x+=b,y.push(I),y.push(T);let R=E.packCentralHeader();S.push(R),i.size+=R.length,D+=b+R.length,A++,F(k)})}else{D+=i.mainHeaderSize,i.offset=x,i.totalEntries=A,x=0;let E=Buffer.alloc(D);y.forEach(function(T){T.copy(E,x),x+=T.length}),S.forEach(function(T){T.copy(E,x),x+=T.length});let _=i.toBinary();o&&o.copy(_,Er.Constants.ENDHDR),_.copy(E,x),t=E,s=!1,g(E)}};F(Array.from(this.entries))}catch(y){v(y)}}}}});var Z2=$((kye,X2)=>{var Qt=Ym(),ln=require("path"),Ote=yT(),Ute=K2(),pf=(...t)=>Qt.findLast(t,e=>typeof e=="boolean"),J2=(...t)=>Qt.findLast(t,e=>typeof e=="string"),$te=(...t)=>Qt.findLast(t,e=>typeof e=="function"),Mte={noSort:!1,readEntries:!1,method:Qt.Constants.NONE,fs:null};X2.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),Mte);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=Qt.Constants.BUFFER,t=void 0)),Object.assign(r,e);let o=new Qt(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=Qt.decoder),t&&typeof t=="string")if(o.fs.existsSync(t))r.method=Qt.Constants.FILE,r.filename=t,n=o.fs.readFileSync(t);else throw Qt.Errors.INVALID_FILENAME();let i=new Ute(n,r),{canonical:s,sanitize:a,zipnamefix:c}=Qt;function l(d){if(d&&i){var p;if(typeof d=="string"&&(p=i.getEntry(ln.posix.normalize(d))),typeof d=="object"&&typeof d.entryName<"u"&&typeof d.header<"u"&&(p=i.getEntry(d.entryName)),p)return p}return null}function u(d){let{join:p,normalize:h,sep:g}=ln.posix;return p(".",h(g+d.split("\\").join(g)+g))}function f(d){return d instanceof RegExp?function(p){return function(h){return p.test(h)}}(d):typeof d!="function"?()=>!0:d}let m=(d,p)=>{let h=p.slice(-1);return h=h===o.sep?o.sep:"",ln.relative(d,p)+h};return{readFile:function(d,p){var h=l(d);return h&&h.getData(p)||null},childCount:function(d){let p=l(d);if(p)return i.getChildCount(p)},readFileAsync:function(d,p){var h=l(d);h?h.getDataAsync(p):p(null,"getEntry failed for:"+d)},readAsText:function(d,p){var h=l(d);if(h){var g=h.getData();if(g&&g.length)return g.toString(p||"utf8")}return""},readAsTextAsync:function(d,p,h){var g=l(d);g?g.getDataAsync(function(v,C){if(C){p(v,C);return}v&&v.length?p(v.toString(h||"utf8")):p("")}):p("")},deleteFile:function(d,p=!0){var h=l(d);h&&i.deleteFile(h.entryName,p)},deleteEntry:function(d){var p=l(d);p&&i.deleteEntry(p.entryName)},addZipComment:function(d){i.comment=d},getZipComment:function(){return i.comment||""},addZipEntryComment:function(d,p){var h=l(d);h&&(h.comment=p)},getZipEntryComment:function(d){var p=l(d);return p&&p.comment||""},updateFile:function(d,p){var h=l(d);h&&h.setData(p)},addLocalFile:function(d,p,h,g){if(o.fs.existsSync(d)){p=p?u(p):"";let v=ln.win32.basename(ln.win32.normalize(d));p+=h||v;let C=o.fs.statSync(d),w=C.isFile()?o.fs.readFileSync(d):Buffer.alloc(0);C.isDirectory()&&(p+=o.sep),this.addFile(p,w,g,C)}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFileAsync:function(d,p){d=typeof d=="object"?d:{localPath:d};let h=ln.resolve(d.localPath),{comment:g}=d,{zipPath:v,zipName:C}=d,w=this;o.fs.stat(h,function(y,S){if(y)return p(y,!1);v=v?u(v):"";let D=ln.win32.basename(ln.win32.normalize(h));if(v+=C||D,S.isFile())o.fs.readFile(h,function(x,A){return x?p(x,!1):(w.addFile(v,A,g,S),setImmediate(p,void 0,!0))});else if(S.isDirectory())return v+=o.sep,w.addFile(v,Buffer.alloc(0),g,S),setImmediate(p,void 0,!0)})},addLocalFolder:function(d,p,h){if(h=f(h),p=p?u(p):"",d=ln.normalize(d),o.fs.existsSync(d)){let g=o.findFiles(d),v=this;if(g.length)for(let C of g){let w=ln.join(p,m(d,C));h(w)&&v.addLocalFile(C,ln.dirname(w))}}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFolderAsync:function(d,p,h,g){g=f(g),h=h?u(h):"",d=ln.normalize(d);var v=this;o.fs.open(d,"r",function(C){if(C&&C.code==="ENOENT")p(void 0,Qt.Errors.FILE_NOT_FOUND(d));else if(C)p(void 0,C);else{var w=o.findFiles(d),y=-1,S=function(){if(y+=1,y<w.length){var D=w[y],x=m(d,D).split("\\").join("/");x=x.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),g(x)?o.fs.stat(D,function(A,F){A&&p(void 0,A),F.isFile()?o.fs.readFile(D,function(k,E){k?p(void 0,k):(v.addFile(h+x,E,"",F),S())}):(v.addFile(h+x+"/",Buffer.alloc(0),"",F),S())}):process.nextTick(()=>{S()})}else p(!0,void 0)};S()}})},addLocalFolderAsync2:function(d,p){let h=this;d=typeof d=="object"?d:{localPath:d},localPath=ln.resolve(u(d.localPath));let{zipPath:g,filter:v,namefix:C}=d;v instanceof RegExp?v=function(S){return function(D){return S.test(D)}}(v):typeof v!="function"&&(v=function(){return!0}),g=g?u(g):"",C=="latin1"&&(C=S=>S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof C!="function"&&(C=S=>S);let w=S=>ln.join(g,C(m(localPath,S))),y=S=>ln.win32.basename(ln.win32.normalize(C(S)));o.fs.open(localPath,"r",function(S){S&&S.code==="ENOENT"?p(void 0,Qt.Errors.FILE_NOT_FOUND(localPath)):S?p(void 0,S):o.findFilesAsync(localPath,function(D,x){if(D)return p(D);x=x.filter(A=>v(w(A))),x.length||p(void 0,!1),setImmediate(x.reverse().reduce(function(A,F){return function(k,E){if(k||E===!1)return setImmediate(A,k,!1);h.addLocalFileAsync({localPath:F,zipPath:ln.dirname(w(F)),zipName:y(F)},A)}},p))})})},addLocalFolderPromise:function(d,p){return new Promise((h,g)=>{this.addLocalFolderAsync2(Object.assign({localPath:d},p),(v,C)=>{v&&g(v),C&&h(this)})})},addFile:function(d,p,h,g){d=c(d);let v=l(d),C=v!=null;C||(v=new Ote(r),v.entryName=d),v.comment=h||"";let w=typeof g=="object"&&g instanceof o.fs.Stats;w&&(v.header.time=g.mtime);var y=v.isDirectory?16:0;let S=v.isDirectory?16384:32768;return w?S|=4095&g.mode:typeof g=="number"?S|=4095&g:S|=v.isDirectory?493:420,y=(y|S<<16)>>>0,v.attr=y,v.setData(p),C||i.setEntry(v),v},getEntries:function(d){return i.password=d,i?i.entries:[]},getEntry:function(d){return l(d)},getEntryCount:function(){return i.getEntryCount()},forEach:function(d){return i.forEach(d)},extractEntryTo:function(d,p,h,g,v,C){g=pf(!1,g),v=pf(!1,v),h=pf(!0,h),C=J2(v,C);var w=l(d);if(!w)throw Qt.Errors.NO_ENTRY();var y=s(w.entryName),S=a(p,C&&!w.isDirectory?C:h?y:ln.basename(y));if(w.isDirectory){var D=i.getEntryChildren(w);return D.forEach(function(F){if(F.isDirectory)return;var k=F.getData();if(!k)throw Qt.Errors.CANT_EXTRACT_FILE();var E=s(F.entryName),_=a(p,h?E:ln.basename(E));let T=v?F.header.fileAttr:void 0;o.writeFileTo(_,k,g,T)}),!0}var x=w.getData(i.password);if(!x)throw Qt.Errors.CANT_EXTRACT_FILE();if(o.fs.existsSync(S)&&!g)throw Qt.Errors.CANT_OVERRIDE();let A=v?d.header.fileAttr:void 0;return o.writeFileTo(S,x,g,A),!0},test:function(d){if(!i)return!1;for(var p in i.entries)try{if(p.isDirectory)continue;var h=i.entries[p].getData(d);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(d,p,h,g){if(h=pf(!1,h),g=J2(h,g),p=pf(!1,p),!i)throw Qt.Errors.NO_ZIP();i.entries.forEach(function(v){var C=a(d,s(v.entryName));if(v.isDirectory){o.makeDir(C);return}var w=v.getData(g);if(!w)throw Qt.Errors.CANT_EXTRACT_FILE();let y=h?v.header.fileAttr:void 0;o.writeFileTo(C,w,p,y);try{o.fs.utimesSync(C,v.header.time,v.header.time)}catch{throw Qt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(d,p,h,g){if(g=$te(p,h,g),h=pf(!1,h),p=pf(!1,p),!g)return new Promise((S,D)=>{this.extractAllToAsync(d,p,h,function(x){x?D(x):S(this)})});if(!i){g(Qt.Errors.NO_ZIP());return}d=ln.resolve(d);let v=S=>a(d,ln.normalize(s(S.entryName))),C=(S,D)=>new Error(S+': "'+D+'"'),w=[],y=[];i.entries.forEach(S=>{S.isDirectory?w.push(S):y.push(S)});for(let S of w){let D=v(S),x=h?S.header.fileAttr:void 0;try{o.makeDir(D),x&&o.fs.chmodSync(D,x),o.fs.utimesSync(D,S.header.time,S.header.time)}catch{g(C("Unable to create folder",D))}}y.reverse().reduce(function(S,D){return function(x){if(x)S(x);else{let A=ln.normalize(s(D.entryName)),F=a(d,A);D.getDataAsync(function(k,E){if(E)S(E);else if(!k)S(Qt.Errors.CANT_EXTRACT_FILE());else{let _=h?D.header.fileAttr:void 0;o.writeFileToAsync(F,k,p,_,function(T){T||S(C("Unable to write file",F)),o.fs.utimes(F,D.header.time,D.header.time,function(I){I?S(C("Unable to set times",F)):S()})})}})}}},g)()},writeZip:function(d,p){if(arguments.length===1&&typeof d=="function"&&(p=d,d=""),!d&&r.filename&&(d=r.filename),!!d){var h=i.compressToBuffer();if(h){var g=o.writeFileTo(d,h,!0);typeof p=="function"&&p(g?null:new Error("failed"),"")}}},writeZipPromise:function(d,p){let{overwrite:h,perm:g}=Object.assign({overwrite:!0},p);return new Promise((v,C)=>{!d&&r.filename&&(d=r.filename),d||C("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(w=>{let y=S=>S?v(S):C("ADM-ZIP: Wasn't able to write zip file");o.writeFileToAsync(d,w,h,g,y)},C)})},toBufferPromise:function(){return new Promise((d,p)=>{i.toAsyncBuffer(d,p)})},toBuffer:function(d,p,h,g){return typeof d=="function"?(i.toAsyncBuffer(d,p,h,g),null):i.compressToBuffer()}}}});var eB=$((Lye,Q2)=>{Q2.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var CT=$((Fye,nB)=>{var tB=eB();nB.exports=class{constructor(e){this.hwm=e||16,this.head=new tB(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new tB(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var Gm=$((Oye,rB)=>{function Hte(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Bte(t){return Buffer.isEncoding(t)}function Wte(t,e,n){return Buffer.alloc(t,e,n)}function jte(t){return Buffer.allocUnsafe(t)}function Vte(t){return Buffer.allocUnsafeSlow(t)}function Yte(t,e){return Buffer.byteLength(t,e)}function qte(t,e){return Buffer.compare(t,e)}function Gte(t,e){return Buffer.concat(t,e)}function zte(t,e,n,r,o){return St(t).copy(e,n,r,o)}function Kte(t,e){return St(t).equals(e)}function Jte(t,e,n,r,o){return St(t).fill(e,n,r,o)}function Xte(t,e,n){return Buffer.from(t,e,n)}function Zte(t,e,n,r){return St(t).includes(e,n,r)}function Qte(t,e,n,r){return St(t).indexOf(e,n,r)}function ene(t,e,n,r){return St(t).lastIndexOf(e,n,r)}function tne(t){return St(t).swap16()}function nne(t){return St(t).swap32()}function rne(t){return St(t).swap64()}function St(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function one(t,e,n,r){return St(t).toString(e,n,r)}function ine(t,e,n,r,o){return St(t).write(e,n,r,o)}function sne(t,e,n){return St(t).writeDoubleLE(e,n)}function ane(t,e,n){return St(t).writeFloatLE(e,n)}function cne(t,e,n){return St(t).writeUInt32LE(e,n)}function lne(t,e,n){return St(t).writeInt32LE(e,n)}function une(t,e){return St(t).readDoubleLE(e)}function fne(t,e){return St(t).readFloatLE(e)}function dne(t,e){return St(t).readUInt32LE(e)}function mne(t,e){return St(t).readInt32LE(e)}function pne(t,e,n){return St(t).writeDoubleBE(e,n)}function hne(t,e,n){return St(t).writeFloatBE(e,n)}function gne(t,e,n){return St(t).writeUInt32BE(e,n)}function vne(t,e,n){return St(t).writeInt32BE(e,n)}function wne(t,e){return St(t).readDoubleBE(e)}function yne(t,e){return St(t).readFloatBE(e)}function Cne(t,e){return St(t).readUInt32BE(e)}function Ene(t,e){return St(t).readInt32BE(e)}rB.exports={isBuffer:Hte,isEncoding:Bte,alloc:Wte,allocUnsafe:jte,allocUnsafeSlow:Vte,byteLength:Yte,compare:qte,concat:Gte,copy:zte,equals:Kte,fill:Jte,from:Xte,includes:Zte,indexOf:Qte,lastIndexOf:ene,swap16:tne,swap32:nne,swap64:rne,toBuffer:St,toString:one,write:ine,writeDoubleLE:sne,writeFloatLE:ane,writeUInt32LE:cne,writeInt32LE:lne,readDoubleLE:une,readFloatLE:fne,readUInt32LE:dne,readInt32LE:mne,writeDoubleBE:pne,writeFloatBE:hne,writeUInt32BE:gne,writeInt32BE:vne,readDoubleBE:wne,readFloatBE:yne,readUInt32BE:Cne,readInt32BE:Ene}});var iB=$(($ye,oB)=>{var Sne=Gm();oB.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Sne.toString(e,this.encoding)}flush(){return""}}});var aB=$((Hye,sB)=>{var xne=Gm();sB.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let o=Math.max(0,e.byteLength-4),i=e.byteLength;o<i&&r;o++)r=e[o]<=127;if(r)return xne.toString(e,"utf8")}let n="";for(let r=0,o=e.byteLength;r<o;r++){let i=e[r];if(this.bytesNeeded===0){i<=127?n+=String.fromCharCode(i):(this.bytesSeen=1,i>=194&&i<=223?(this.bytesNeeded=2,this.codePoint=i&31):i>=224&&i<=239?(i===224?this.lowerBoundary=160:i===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=i&15):i>=240&&i<=244?(i===240&&(this.lowerBoundary=144),i===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=i&7):n+="\uFFFD");continue}if(i<this.lowerBoundary||i>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|i&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var lB=$((Wye,cB)=>{var _ne=iB(),Dne=aB();cB.exports=class{constructor(e="utf8"){switch(this.encoding=Ine(e),this.encoding){case"utf8":this.decoder=new Dne;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new _ne(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function Ine(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var FT=$((jye,NB)=>{var{EventEmitter:Pne}=require("events"),mS=new Error("Stream was destroyed"),ET=new Error("Premature close"),hB=CT(),bne=lB(),en=(1<<29)-1,Ys=1,bT=2,hf=4,lv=8,gB=en^Ys,Tne=en^bT,pv=16,zm=32,Xm=64,gl=128,hv=256,TT=512,gf=1024,ST=2048,RT=4096,kT=8192,os=16384,hl=32768,pS=65536,vf=131072,vB=hv|TT,Rne=pv|pS,kne=Xm|pv,Nne=RT|gl,NT=hv|vf,Lne=en^pv,Ane=en^Xm,Fne=en^(Xm|pS),uB=en^pS,One=en^hv,Une=en^(gl|kT),$ne=en^gf,fB=en^vB,wB=en^hl,Mne=en^zm,yB=en^vf,Hne=en^NT,tc=1<<18,Jm=2<<18,gv=4<<18,wf=8<<18,vv=16<<18,vl=32<<18,xT=64<<18,Km=128<<18,LT=256<<18,yf=512<<18,hS=1024<<18,Bne=en^(tc|LT),CB=en^gv,Wne=en^(tc|yf),jne=en^vv,Vne=en^wf,EB=en^Km,Yne=en^Jm,SB=en^hS,uv=pv|tc,xB=en^uv,AT=os|vl,qs=hf|lv|bT,ei=qs|Ys,_B=qs|AT,qne=CB&Ane,gS=Km|hl,Gne=gS&xB,DB=ei|Gne,zne=ei|gf|os,dB=ei|os|gl,Kne=ei|gf|gl,Jne=ei|RT|gl|kT,Xne=ei|pv|gf|os|pS|vf,Zne=qs|gf|os,Qne=zm|ei|hl|Xm,ere=hl|Ys,tre=ei|yf|vl,nre=wf|vv,IB=wf|tc,rre=wf|vv|ei|tc,mB=ei|tc|wf|hS,ore=gv|tc,ire=tc|LT,sre=ei|yf|IB|vl,are=vv|qs|yf|vl,cre=Jm|ei|Km|gv,lre=yf|vl|qs,cS=Symbol.asyncIterator||Symbol("asyncIterator"),lS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:o,byteLength:i,byteLengthWritable:s}={}){this.stream=e,this.queue=new hB,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||kB,this.map=o||r,this.afterWrite=dre.bind(this),this.afterUpdateNextTick=hre.bind(this)}get ended(){return(this.stream._duplexState&vl)!==0}push(e){return(this.stream._duplexState&lre)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=wf,!0):(this.stream._duplexState|=nre,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Vne),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|yf)&CB}autoBatch(e,n){let r=[],o=this.stream;for(r.push(e);(o._duplexState&mB)===IB;)r.push(o._writableState.shift());if((o._duplexState&ei)!==0)return n(null);o._writev(r,n)}update(){let e=this.stream;e._duplexState|=Jm;do{for(;(e._duplexState&mB)===wf;){let n=this.shift();e._duplexState|=ire,e._write(n,this.afterWrite)}(e._duplexState&ore)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Yne}updateNonPrimary(){let e=this.stream;if((e._duplexState&sre)===yf){e._duplexState=e._duplexState|tc,e._final(fre.bind(this));return}if((e._duplexState&qs)===hf){(e._duplexState&gS)===0&&(e._duplexState|=uv,e._destroy(PB.bind(this)));return}(e._duplexState&DB)===Ys&&(e._duplexState=(e._duplexState|uv)&gB,e._open(bB.bind(this)))}continueUpdate(){return(this.stream._duplexState&Km)===0?!1:(this.stream._duplexState&=EB,!0)}updateCallback(){(this.stream._duplexState&cre)===gv?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&Km)===0&&(this.stream._duplexState|=Km,(this.stream._duplexState&Jm)===0&&queueMicrotask(this.afterUpdateNextTick))}},_T=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:o,byteLength:i,byteLengthReadable:s}={}){this.stream=e,this.queue=new hB,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=s||i||kB,this.map=o||r,this.pipeTo=null,this.afterRead=mre.bind(this),this.afterUpdateNextTick=pre.bind(this)}get ended(){return(this.stream._duplexState&os)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=TT,this.pipeTo=e,this.pipeline=new IT(this.stream,e,n),n&&this.stream.on("error",pB),mv(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",pB),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),o=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",o),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",ure.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|gf)&Fne,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=uB,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|gl)&uB,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Une),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let o=n[r];this.buffered+=this.byteLength(o),this.queue.push(o)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&dB)===gl){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=fB),(e._duplexState&ST)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=vf,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&dB)===gl&&(e._duplexState&vB)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=fB),(e._duplexState&ST)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=zm;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&Xne)===vf;)e._duplexState|=Rne,e._read(this.afterRead),this.drain();(e._duplexState&Jne)===Nne&&(e._duplexState|=kT,e.emit("readable")),(e._duplexState&kne)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Mne}updateNonPrimary(){let e=this.stream;if((e._duplexState&Kne)===gf&&(e._duplexState=(e._duplexState|os)&$ne,e.emit("end"),(e._duplexState&_B)===AT&&(e._duplexState|=hf),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&qs)===hf){(e._duplexState&gS)===0&&(e._duplexState|=uv,e._destroy(PB.bind(this)));return}(e._duplexState&DB)===Ys&&(e._duplexState=(e._duplexState|uv)&gB,e._open(bB.bind(this)))}continueUpdate(){return(this.stream._duplexState&hl)===0?!1:(this.stream._duplexState&=wB,!0)}updateCallback(){(this.stream._duplexState&Qne)===Xm?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&ere)===0&&(this.stream._duplexState|=hl,(this.stream._duplexState&zm)===0&&queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&hl)===0&&(this.stream._duplexState|=hl,(this.stream._duplexState&zm)===0&&queueMicrotask(this.afterUpdateNextTick))}},DT=class{constructor(e){this.data=null,this.afterTransform=vre.bind(e),this.afterFinal=null}},IT=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&os)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&os)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function ure(){this.stream._duplexState|=TT,this.updateCallback()}function fre(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&qs)===0&&(e._duplexState|=vl,e.emit("finish")),(e._duplexState&_B)===AT&&(e._duplexState|=hf),e._duplexState&=Wne,(e._duplexState&Jm)===0?this.update():this.updateNextTick()}function PB(t){let e=this.stream;!t&&this.error!==mS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=lv,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function dre(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Bne,this.drains!==null&&gre(this.drains),(e._duplexState&rre)===vv&&(e._duplexState&=jne,(e._duplexState&xT)===xT&&e.emit("drain")),this.updateCallback()}function mre(t){t&&this.stream.destroy(t),this.stream._duplexState&=Lne,this.readAhead===!1&&(this.stream._duplexState&hv)===0&&(this.stream._duplexState&=yB),this.updateCallback()}function pre(){(this.stream._duplexState&zm)===0&&(this.stream._duplexState&=wB,this.update())}function hre(){(this.stream._duplexState&Jm)===0&&(this.stream._duplexState&=EB,this.update())}function gre(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function bB(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&hf)===0&&((e._duplexState&zne)===0&&(e._duplexState|=Xm),(e._duplexState&tre)===0&&(e._duplexState|=gv),e.emit("open")),e._duplexState&=xB,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function vre(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function wre(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=ST|NT,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=RT,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=xT,this._writableState.updateNextTick())}var fv=class extends Pne{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",bre.bind(this))),this.on("newListener",wre)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&lv)!==0}get destroying(){return(this._duplexState&qs)!==0}destroy(e){(this._duplexState&qs)===0&&(e||(e=mS),this._duplexState=(this._duplexState|hf)&qne,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=bT,this._predestroy(),this._duplexState&=Tne,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},uS=class t extends fv{constructor(e){super(e),this._duplexState|=Ys|vl|vf,this._readableState=new _T(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=yB),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new bne(e),r=this._readableState.map||Ere;return this._readableState.map=o,this;function o(i){let s=n.push(i);return s===""&&(i.byteLength!==0||n.remaining>0)?null:r(s)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=NT,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Hne:One,this}static _fromAsyncIterator(e,n){let r,o=new t({...n,read(s){e.next().then(i).then(s.bind(null,null)).catch(s)},predestroy(){r=e.return()},destroy(s){if(!r)return s(null);r.then(s.bind(null,null)).catch(s)}});return o;function i(s){s.done?o.push(null):o.push(s.value)}}static from(e,n){if(Dre(e))return e;if(e[cS])return this._fromAsyncIterator(e[cS](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(o){this.push(r===e.length?null:e[r++]),o(null)}})}static isBackpressured(e){return(e._duplexState&Zne)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&hv)===0}[cS](){let e=this,n=null,r=null,o=null;return this.on("error",l=>{n=l}),this.on("readable",i),this.on("close",s),{[cS](){return this},next(){return new Promise(function(l,u){r=l,o=u;let f=e.read();f!==null?a(f):(e._duplexState&lv)!==0&&a(null)})},return(){return c(null)},throw(l){return c(l)}};function i(){r!==null&&a(e.read())}function s(){r!==null&&a(null)}function a(l){o!==null&&(n?o(n):l===null&&(e._duplexState&os)===0?o(mS):r({value:l,done:l===null}),o=r=null)}function c(l){return e.destroy(l),new Promise((u,f)=>{if(e._duplexState&lv)return u({value:void 0,done:!0});e.once("close",function(){l?f(l):u({value:void 0,done:!0})})})}}},fS=class extends fv{constructor(e){super(e),this._duplexState|=Ys|os,this._writableState=new lS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=hS}uncork(){this._duplexState&=SB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&are)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,o=(Tre(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&LT?1:0);return o===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(i=>{n.drains.push({writes:o,resolve:i})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},dv=class extends uS{constructor(e){super(e),this._duplexState=Ys|this._duplexState&vf,this._writableState=new lS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=hS}uncork(){this._duplexState&=SB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},dS=class extends dv{constructor(e){super(e),this._transformState=new DT(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(yre.bind(this))}},PT=class extends dS{};function yre(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function Cre(...t){return new Promise((e,n)=>TB(...t,r=>{if(r)return n(r);e()}))}function TB(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let o=n[0],i=null,s=null;for(let l=1;l<n.length;l++)i=n[l],mv(o)?o.pipe(i,c):(a(o,!0,l>1,c),o.pipe(i)),o=i;if(r){let l=!1,u=mv(i)||!!(i._writableState&&i._writableState.autoDestroy);i.on("error",f=>{s===null&&(s=f)}),i.on("finish",()=>{l=!0,u||r(s)}),u&&i.on("close",()=>r(s||(l?null:ET)))}return i;function a(l,u,f,m){l.on("error",m),l.on("close",d);function d(){if(u&&l._readableState&&!l._readableState.ended||f&&l._writableState&&!l._writableState.ended)return m(ET)}}function c(l){if(!(!l||s)){s=l;for(let u of n)u.destroy(l)}}}function Ere(t){return t}function RB(t){return!!t._readableState||!!t._writableState}function mv(t){return typeof t._duplexState=="number"&&RB(t)}function Sre(t){return!!t._readableState&&t._readableState.ended}function xre(t){return!!t._writableState&&t._writableState.ended}function _re(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===mS?null:n}function Dre(t){return mv(t)&&t.readable}function Ire(t){return(t._duplexState&Ys)!==Ys||(t._duplexState&gS)!==0}function Pre(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function kB(t){return Pre(t)?t.byteLength:1024}function pB(){}function bre(){this.destroy(new Error("Stream aborted."))}function Tre(t){return t._writev!==fS.prototype._writev&&t._writev!==dv.prototype._writev}NB.exports={pipeline:TB,pipelinePromise:Cre,isStream:RB,isStreamx:mv,isEnded:Sre,isFinished:xre,isDisturbed:Ire,getStreamError:_re,Stream:fv,Writable:fS,Readable:uS,Duplex:dv,Transform:dS,PassThrough:PT}});var $T=$(Qm=>{var at=Gm(),Rre="0000000000000000000",kre="7777777777777777777",vS=48,LB=at.from([117,115,116,97,114,0]),Nre=at.from([vS,vS]),Lre=at.from([117,115,116,97,114,32]),Are=at.from([32,0]),Fre=4095,wv=257,UT=263;Qm.decodeLongPath=function(e,n){return Zm(e,0,e.length,n)};Qm.encodePax=function(e){let n="";e.name&&(n+=OT(" path="+e.name+`
`)),e.linkname&&(n+=OT(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let o in r)n+=OT(" "+o+"="+r[o]+`
`);return at.from(n)};Qm.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let o=parseInt(at.toString(e.subarray(0,r)),10);if(!o)return n;let i=at.toString(e.subarray(r+1,o-1)),s=i.indexOf("=");if(s===-1)return n;n[i.slice(0,s)]=i.slice(s+1),e=e.subarray(o)}return n};Qm.encode=function(e){let n=at.alloc(512),r=e.name,o="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),at.byteLength(r)!==r.length)return null;for(;at.byteLength(r)>100;){let i=r.indexOf("/");if(i===-1)return null;o+=o?"/"+r.slice(0,i):r.slice(0,i),r=r.slice(i+1)}return at.byteLength(r)>100||at.byteLength(o)>155||e.linkname&&at.byteLength(e.linkname)>100?null:(at.write(n,r),at.write(n,yl(e.mode&Fre,6),100),at.write(n,yl(e.uid,6),108),at.write(n,yl(e.gid,6),116),Wre(e.size,n,124),at.write(n,yl(e.mtime.getTime()/1e3|0,11),136),n[156]=vS+Hre(e.type),e.linkname&&at.write(n,e.linkname,157),at.copy(LB,n,wv),at.copy(Nre,n,UT),e.uname&&at.write(n,e.uname,265),e.gname&&at.write(n,e.gname,297),at.write(n,yl(e.devmajor||0,6),329),at.write(n,yl(e.devminor||0,6),337),o&&at.write(n,o,345),at.write(n,yl(FB(n),6),148),n)};Qm.decode=function(e,n,r){let o=e[156]===0?0:e[156]-vS,i=Zm(e,0,100,n),s=wl(e,100,8),a=wl(e,108,8),c=wl(e,116,8),l=wl(e,124,12),u=wl(e,136,12),f=Mre(o),m=e[157]===0?null:Zm(e,157,100,n),d=Zm(e,265,32),p=Zm(e,297,32),h=wl(e,329,8),g=wl(e,337,8),v=FB(e);if(v===8*32)return null;if(v!==wl(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Ore(e))e[345]&&(i=Zm(e,345,155,n)+"/"+i);else if(!Ure(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return o===0&&i&&i[i.length-1]==="/"&&(o=5),{name:i,mode:s,uid:a,gid:c,size:l,mtime:new Date(1e3*u),type:f,linkname:m,uname:d,gname:p,devmajor:h,devminor:g,pax:null}};function Ore(t){return at.equals(LB,t.subarray(wv,wv+6))}function Ure(t){return at.equals(Lre,t.subarray(wv,wv+6))&&at.equals(Are,t.subarray(UT,UT+2))}function $re(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Mre(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Hre(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function AB(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function FB(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function yl(t,e){return t=t.toString(8),t.length>e?kre.slice(0,e)+" ":Rre.slice(0,e-t.length)+t+" "}function Bre(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function Wre(t,e,n){t.toString(8).length>11?Bre(t,e,n):at.write(e,yl(t,11),n)}function jre(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let s=t[r];e?n.push(s):n.push(255-s)}let o=0,i=n.length;for(r=0;r<i;r++)o+=n[r]*Math.pow(256,r);return e?o:-1*o}function wl(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return jre(t);{for(;e<t.length&&t[e]===32;)e++;let r=$re(AB(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(at.toString(t.subarray(e,r)),8)}}function Zm(t,e,n,r){return at.toString(t.subarray(e,AB(t,0,e,e+n)),r)}function OT(t){let e=at.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var HB=$((Yye,MB)=>{var{Writable:Vre,Readable:Yre,getStreamError:OB}=FT(),qre=CT(),UB=Gm(),ep=$T(),Gre=UB.alloc(0),HT=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new qre,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return Gre;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return UB.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let o=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,o}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},BT=class extends Yre{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(OB(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=$B(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},WT=class extends Vre{constructor(e){super(e),e||(e={}),this._buffer=new HT,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=MT,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=ep.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=ep.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=ep.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=ep.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?ep.decodePax(e):Object.assign({},this._paxGlobal,ep.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=$B(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new BT(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=MT,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(OB(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,o=null,i=null,s=this;return this.on("entry",l),this.on("error",m=>{e=m}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(c)},return(){return f(null)},throw(m){return f(m)}};function a(m){if(!i)return;let d=i;i=null,d(m)}function c(m,d){if(e)return d(e);if(o){m({value:o,done:!1}),o=null;return}n=m,r=d,a(null),s._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function l(m,d,p){i=p,d.on("error",MT),n?(n({value:d,done:!1}),n=r=null):o=d}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function f(m){return s.destroy(m),a(m),new Promise((d,p)=>{if(s.destroyed)return d({value:void 0,done:!0});s.once("close",function(){m?p(m):d({value:void 0,done:!0})})})}}};MB.exports=function(e){return new WT(e)};function MT(){}function $B(t){return t&=511,t&&512-t}});var WB=$((qye,jT)=>{var BB={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{jT.exports=require("fs").constants||BB}catch{jT.exports=BB}});var GB=$((Gye,qB)=>{var{Readable:zre,Writable:Kre,getStreamError:jB}=FT(),Cf=Gm(),tp=WB(),wS=$T(),Jre=493,Xre=420,VB=Cf.alloc(1024),YT=class extends Kre{constructor(e,n,r){super({mapWritable:Qre,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?Cf.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Cf.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),YB(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return jB(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},qT=class extends zre{constructor(e){super(e),this._drain=VT,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=VT),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=Zre(e.mode)),e.mode||(e.mode=e.type==="directory"?Jre:Xre),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=Cf.from(n));let o=new YT(this,e,r);return Cf.isBuffer(n)?(e.size=n.byteLength,o.write(n),o.end(),o):(o._isVoid,o)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(VB),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=wS.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=wS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(wS.encode(r)),this.push(n),YB(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(wS.encode(r))}_doDrain(){let e=this._drain;this._drain=VT,e()}_predestroy(){let e=jB(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};qB.exports=function(e){return new qT(e)};function Zre(t){switch(t&tp.S_IFMT){case tp.S_IFBLK:return"block-device";case tp.S_IFCHR:return"character-device";case tp.S_IFDIR:return"directory";case tp.S_IFIFO:return"fifo";case tp.S_IFLNK:return"symlink"}return"file"}function VT(){}function YB(t,e){e&=511,e&&t.push(VB.subarray(0,512-e))}function Qre(t){return Cf.isBuffer(t)?t:Cf.from(t)}});var zB=$(GT=>{GT.extract=HB();GT.pack=GB()});var zT=$((Qye,XB)=>{XB.exports=function(e,n,r){e(n),r&&r(n===!0?null:n)}});var CS=$((eCe,QB)=>{"use strict";var ZB=zT();QB.exports=function(e,n){if(!e)return function(o,i){return o?ZB(i,o,n):i(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(o){return e[o]}));var r=0;return function(o,i){if(o)return ZB(i,o,n);r>=e.length?i(!0):i(null,e[r++])}}});var tW=$((tCe,eW)=>{"use strict";var noe=CS();eW.exports=function(t){return noe(Object.keys(t))}});var KT=$((nCe,nW)=>{"use strict";var roe=zT();nW.exports=function(e,n){return function(r,o){if(r)return roe(o,r,n);if(e!=null){var i=e;e=null,o(null,i)}else o(!0)}}});var oW=$((rCe,rW)=>{"use strict";rW.exports=function(e){var n=0;return e=e||1/0,function(r,o){if(r)return o&&o(r);if(n>e)return o(!0);o(null,n++)}}});var sW=$((oCe,iW)=>{"use strict";iW.exports=function(e){return e=e||Math.random,function(n,r){return n?r&&r(n):r(null,e())}}});var cW=$((iCe,aW)=>{"use strict";aW.exports=function(){return function(e,n){n(!0)}}});var uW=$((sCe,lW)=>{"use strict";lW.exports=function(e){return function(n,r){r(e)}}});var dW=$((aCe,fW)=>{"use strict";fW.exports={keys:tW(),once:KT(),values:CS(),count:oW(),infinite:sW(),empty:cW(),error:uW()}});var np=$((cCe,mW)=>{"use strict";mW.exports=function(e,n){var r,o,i;n||(i=new Error("no done callback supplied"));function s(a){if(r=a,o)return s.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,r(null,function(f,m){if(u=!0,f=f||o){if(l=!1,n)n(f===!0?null:f);else if(f&&f!==!0)throw console.warn(i),f}else e&&e(m)===!1||o?(l=!1,r(o||!0,n||function(){})):l||c()}),!u){l=!1;return}})()}return s.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),o=a||!0,r)return r(o,c||function(){})},s}});var hW=$((lCe,pW)=>{"use strict";var ooe=np();pW.exports=function(e){return ooe(null,e)}});var vW=$((uCe,gW)=>{"use strict";var ioe=np();gW.exports=function(e){return ioe(function(n){console.log(n)},e)}});var rp=$((fCe,wW)=>{wW.exports=function(e){return e&&(typeof e=="string"?function(n){return n[e]}:typeof e=="object"&&typeof e.exec=="function"?function(n){var r=e.exec(n);return r&&r[0]}:e)}});var EW=$((dCe,CW)=>{"use strict";function yW(t){return t}var soe=rp(),aoe=np();CW.exports=function(e,n){var r=!1;return n?e=soe(e)||yW:(n=e,e=yW),aoe(function(o){if(e(o))return r=!0,n(null,o),!1},function(o){r||n(o===!0?null:o,null)})}});var ES=$((mCe,SW)=>{"use strict";var coe=np();SW.exports=function(e,n,r){r||(r=n,n=null);var o=coe(function(i){n=e(n,i)},function(i){r(i,n)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return r(s===!0?null:s);n=a,o(i)})}:o}});var JT=$((pCe,xW)=>{"use strict";var loe=ES();xW.exports=function(e){return loe(function(n,r){return n.push(r),n},[],e)}});var DW=$((hCe,_W)=>{"use strict";var uoe=JT();_W.exports=function(){return e=>{let n,r,o=new Promise((i,s)=>{n=i,r=s});return uoe((i,s)=>{i?r(i):n(s)})(e),o}}});var PW=$((gCe,IW)=>{"use strict";var foe=ES();IW.exports=function(e){return foe(function(n,r){return n+r},"",e)}});var TW=$((vCe,bW)=>{"use strict";bW.exports={drain:np(),onEnd:hW(),log:vW(),find:EW(),reduce:ES(),collect:JT(),collectAsPromise:DW(),concat:PW()}});var kW=$((wCe,RW)=>{"use strict";function doe(t){return t}var moe=rp();RW.exports=function(e){return e?(e=moe(e),function(n){return function(r,o){n(r,function(i,s){try{s=i?null:e(s)}catch(a){return n(a,function(){return o(a)})}o(i,s)})}}):doe}});var LW=$((yCe,NW)=>{"use strict";function poe(t){return t}var hoe=rp();NW.exports=function(e){if(!e)return poe;e=hoe(e);var n=!1,r,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,n?i(a,function(l){n?r=c:c(a)}):i(a,function(l){c(a)})):i(null,function(l,u){l?c(l):o?c(o):(n=!0,e(u,function(f,m){n=!1,o?(c(o),r&&r(o)):f?s(f,c):c(null,m)}))})}}}});var XT=$((CCe,AW)=>{var goe=rp();function voe(t){return t}AW.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(n){return e.test(n)}:goe(e)||voe}});var SS=$((ECe,FW)=>{"use strict";var woe=XT();FW.exports=function(e){return e=woe(e),function(n){return function r(o,i){for(var s,a=!0;a;)a=!1,s=!0,n(o,function(c,l){if(!c&&!e(l))return s?a=!0:r(c,i);i(c,l)}),s=!1}}}});var UW=$((SCe,OW)=>{"use strict";var yoe=XT(),Coe=SS();OW.exports=function(e){return e=yoe(e),Coe(function(n){return!e(n)})}});var MW=$((xCe,$W)=>{"use strict";$W.exports=function(e,n){var r=!1;function o(i){r||!n||(r=!0,n(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):e&&e(l),a(c,l)})}}}});var BW=$((_Ce,HW)=>{"use strict";HW.exports=function(e,n){n=n||{};var r=n.last||!1,o=!1;if(typeof e=="number"){r=!0;var i=e;e=function(){return--i}}return function(s){function a(c){s(!0,function(l){r=!1,c(l||!0)})}return function(c,l){o&&!c?r?a(l):l(o):(o=c)?s(o,l):s(null,function(u,f){(o=o||u)?l(o):e(f)?l(null,f):(o=!0,r?l(null,f):a(l))})}}}});var ZT=$((DCe,WW)=>{"use strict";function Eoe(t){return t}var Soe=rp(),xoe=SS();WW.exports=function(e,n){e=Soe(e)||Eoe;var r={};return xoe(function(o){var i=e(o);return r[i]?!!n:(r[i]=!0,!n)})}});var VW=$((ICe,jW)=>{"use strict";var _oe=ZT();jW.exports=function(e){return _oe(e,!0)}});var qW=$((PCe,YW)=>{"use strict";var Doe=CS(),Ioe=KT();YW.exports=function(){return function(e){var n;return function(r,o){r?n?n(r,function(a){e(a||r,o)}):e(r,o):n?i():s();function i(){n(null,function(a,c){a?a===!0?s():e(!0,function(l){o(a)}):o(null,c)})}function s(){n=null,e(null,function(a,c){if(a)return o(a);c&&typeof c=="object"?c=Doe(c):typeof c!="function"&&(c=Ioe(c)),n=c,i()})}}}}});var zW=$((bCe,GW)=>{"use strict";GW.exports={map:kW(),asyncMap:LW(),filter:SS(),filterNot:UW(),through:MW(),take:BW(),unique:ZT(),nonUnique:VW(),flatten:qW()}});var QT=$((TCe,KW)=>{"use strict";KW.exports=function t(e){var n=arguments.length;if(typeof e=="function"&&e.length===1){for(var r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var c=r;switch(r=null,n){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var i=e;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<n;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var Cv=$((Ef,QW)=>{"use strict";var JW=dW(),XW=TW(),ZW=zW();Ef=QW.exports=QT();Ef.pull=Ef;for(is in JW)Ef[is]=JW[is];var is;for(is in ZW)Ef[is]=ZW[is];var is;for(is in XW)Ef[is]=XW[is];var is});var uR=$((oEe,Ej)=>{var rEe=Ej.exports=function(t){(function e(){var n=!0,r=!1,o=!1;do o=!0,n=!1,t.call(this,function(){o?n=!0:e()}),o=!1;while(n)})()}});var xj=$((iEe,Sj)=>{var joe=uR();Sj.exports=function(t,e){return function(n){var r=[],o,i;function s(l){r.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(o=!0,s(null)),l=="error"&&(i=u)},queue:s},c;return function(l,u){if(o=o||l,l)return n(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,joe(function f(m){if(c)if(u=c,i)c=null,u(i);else if(r.length){var d=r.shift();c=null,u(d===null,d)}else n(o,function(p,h){if(p&&p!==!0)return i=p,m();if(o=o||p)e.call(a);else if(h!==null&&(t.call(a,h),i||o))return n(i||o,function(){c=null,u(i||o)});m(f)})})}}}});var Dj=$((sEe,_j)=>{_j.exports=function(){var t=[],e=0;function n(){return t.reduce(function(r,o){return r+o.length},0)}return{length:e,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=e=e+r.length,t.push(r),this},has:function(r){return r==null?e>0:e>=r},get:function(r){var o;if(r==null||r===e){e=0;var i=t;return t=[],i.length==1?i[0]:Buffer.concat(i)}else if(t.length>1&&r<=(o=t[0].length)){var s=t[0].slice(0,r);return r===o?t.shift():t[0]=t[0].slice(r,o),e-=r,s}else if(r<e){for(var a=[],c=0;c+t[0].length<r;){var l=t.shift();c+=l.length,a.push(l)}return c<r&&(a.push(t[0].slice(0,r-c)),t[0]=t[0].slice(r-c,t[0].length),this.length=e=e-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var Tj=$((aEe,bj)=>{"use strict";var Voe=Dj();function Yoe(t){return Number.isFinite(t)}function Ij(t){return typeof t=="function"}function Pj(t,e){return e?function(n,r){var o=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),r)},e);t(n,function(i,s){clearTimeout(o),r(i,s)})}:t}bj.exports=function(t){var e=[],n,r,o=!1,i=Voe(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&i.has(1))e.shift().cb(null,i.get());else if(i.has(e[0].length)){var m=e.shift();m.cb(null,i.get(m.length))}else if(s==!0&&e[0].length&&i.length<e[0].length){var d="stream ended with:"+i.length+" but wanted:"+e[0].length;e.shift().cb(new Error(d))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!i.has(1)||c}function u(){var m=l();m&&!o&&n&&!o&&!a&&(o=!0,r(null,function(d,p){if(o=!1,d)return s=d,l();i.add(p),u()}))}function f(m){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}r=Pj(m,t),n=m,u()}return f.abort=function(m,d){c=m||!0,n?(o=!0,n(c,function(){for(;e.length;)e.shift().cb(c);d&&d(c)})):d()},f.read=function(m,d,p){if(Ij(d)&&(p=d,d=t),Ij(p))e.push({length:Yoe(m)?m:null,cb:p}),u();else return a=!0,function(h,g){if(o||i.has(1)){if(h)return n(h,g);e.push({length:null,cb:g}),u()}else Pj(n,d)(h,function(v,C){g(v,C)})}},f}});var Bj=$((xf,Hj)=>{var qoe=xj(),Goe=Tj(),Rj=NC(),kj=0,Nj=1,Lj=2,Aj="GOODBYE";function Fj(t){let e=Buffer.alloc(9),n=0,r=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===Aj?(e.fill(0),[e,null]):(typeof r=="string"?(n=Nj,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=kj:(n=Lj,r=Buffer.from(JSON.stringify(r),"utf-8")),n=t.stream<<3|t.end<<2|n,e[0]=n,e.writeUInt32BE(r.length,1),e.writeInt32BE(t.req||0,5),[e,r])}function Oj(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],n=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:n,type:e&3}}function Uj(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===kj)e.value=t;else if(e.type===Nj)e.value=t.toString();else if(e.type===Lj)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function $j(t){return qoe(function(n){t&&t("encoded: %o",n);let[r,o]=Fj(n);this.queue(r),o!==null&&this.queue(o)})}function Mj(t){let e=Goe(),n=!1;return function(o){return e(o),function(s,a){if(n)return a(!0);if(s)return e.abort(s,a);e.read(9,function(l,u){if(l)return a(l);let f=Oj(u);if(f.length===0)return n=!0,a(null,Aj);e.read(f.length,function(d,p){if(d)return a(d);try{Uj(p,f)}catch(h){return a(h)}t&&t("decoded: %o",f),a(null,f)})})}}}xf=Hj.exports=function(e,n){let r=n===!0?Rj("packet-stream-codec"):typeof n=="string"?Rj(n):null;return{source:$j(r)(e.source),sink(o){return e.sink(Mj(r)(o))}}};xf.encodePair=Fj;xf.decodeHead=Oj;xf.decodeBody=Uj;xf.encode=$j;xf.decode=Mj});var fR=$((cEe,Wj)=>{function zoe(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function Koe(t){console.error("packet-stream asked to read after closed",t)}Wj.exports={flat:zoe,closedread:Koe}});var Yj=$((lEe,Vj)=>{var{flat:jj,closedread:Joe}=fR();function IS(t,e,n){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=n}IS.prototype.write=function(t,e){let n=this._ps;e?(this.writeEnd=e,n&&(n.read({req:this.id,stream:!0,end:!0,value:jj(e)}),this.readEnd&&this.destroy(e),n._maybedone(e))):n&&n.read({req:this.id,stream:!0,end:!1,value:t})};IS.prototype.end=function(t){this.write(null,jj(t||!0))};IS.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=Joe,this._ps=null)};Vj.exports=IS});var zj=$((uEe,Gj)=>{var qj=Yj(),{flat:dR,closedread:Xoe}=fR();function Ai(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}Ai.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};Ai.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,o)=>{this._requests.delete(n),e(r,o),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:t})};Ai.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new qj(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};Ai.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};Ai.prototype.destroy=function(t){t=t||dR(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,n=0;this._requests.forEach(r=>{n++,r(e)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),n===0&&t===!0&&(e=null),this._maybedone(e)};Ai.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=Xoe,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};Ai.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};Ai.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};Ai.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};Ai.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(t.value,(r,o)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:dR(r),end:!0,req:e}):this.read({value:o,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:dR(n),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};Ai.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,n=this._outstreams.get(e);if(!n)return console.error("no stream for incoming msg",t);t.end?(n.writeEnd&&this._outstreams.delete(e),n.readEnd=!0,n.read(null,t.value),this._maybedone()):n.read(t.value)}else{let e=t.req,n=this._instreams.get(e);n||(n=new qj(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),t.end?(n.writeEnd&&this._instreams.delete(e),n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};Gj.exports=t=>new Ai(t)});var Jj=$((fEe,_v)=>{"use strict";var Zoe=Cv();function Qoe(t){let e=!1;return(n,r)=>{e||(e=!0,t(n,r))}}function mR(t,e){let n=[],r=!1,o=!1,i,s,a=Qoe((c,l)=>{e&&e(c,l),t=null,e=null,i=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(r=r||l,i){let u=i;i=null,u(r,c)}else!r&&!o&&n.push(c);r&&a(r!==!0?r:null)},{source(c,l){c?(t&&t.write(null,c),l(c),n.length=0,o=!0,a(c!==!0?c:null)):n.length?l(null,n.shift()):r?l(r):i=l},sink(c){if(r)return s=null,c(r,()=>{});s=c,Zoe.drain(l=>{if(r)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function Kj(t,e){return mR(t,n=>{t.writeEnd||t.write(null,n||!0),e&&e(n)})}function eie(t){return Kj(t).source}function tie(t,e){return Kj(t,e).sink}_v.exports=mR;_v.exports.source=eie;_v.exports.sink=tie;_v.exports.duplex=mR});var Zj=$((dEe,Xj)=>{Xj.exports=function(e){var n,r,o;function i(s){return function(a,c){s(a,function(l,u){if(l&&!o)return o=!0,c(null,e);l&&n?c(l):l?r=c:c(null,u)})}}return i.end=function(){return n=!0,r&&r(n),i},i}});var eV=$((mEe,Qj)=>{var nie=Zj(),pR=Cv();Qj.exports=function(t,e){e=e||"GOODBYE";var n=nie(e);return{source:pR(t.source,n),sink:pR(pR.filter(function(r){if(r!==e)return!0;n.end()}),t.sink)}}});var Dv=$(as=>{"use strict";var PS=Cv();function rie(t){return t?Object.keys(t).length===0:!0}as.set=function(e,n,r){let o,i;for(let s=0;s<n.length;s++){let a=n[s];e[a]=e[a]||{},o=e,i=a,e=e[a]}o[i]=r};as.get=function(e,n){if(typeof n=="string")return e[n];let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],e==null)return e}return r};as.prefix=function(e,n){let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],typeof e!="object")return e}return typeof r!="object"?!!r:!1};function oie(t,e){for(let n in e){let r=e[n];t[r]||(t[r]={}),t=t[r]}return t}function iie(t,e){(function n(r,o){let i=e[o];if(r)e.length-1===o?delete r[i]:o<e.length&&n(r[i],o+1);else return;rie(r[i])&&delete r[i]})(t,0)}function sie(t,e){for(let n in e)t[n]=e[n];return t}as.mount=function(e,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return sie(oie(e,n),r)};as.unmount=function(e,n){return iie(e,n)};var bS=t=>t==="source",TS=t=>t==="sink",hR=t=>t==="duplex",aie=t=>t==="sync",cie=t=>t==="async",tV=t=>aie(t)||cie(t),lie=t=>bS(t)||TS(t)||hR(t);as.isRequest=tV;as.isStream=lie;function gR(t){return function(e){e(t||!0,()=>{})}}function nV(t){return{source:PS.error(t),sink:gR(t)}}as.errorAsStream=function(e,n){return bS(e)?PS.error(n):TS(e)?gR(n):nV(n)};as.errorAsStreamOrCb=function(e,n,r){return tV(e)?r(n):hR(e)?nV(n):bS(e)?PS.error(n):TS(e)?gR(n):r(n)};as.pipeToStream=function(e,n,r){bS(e)?n(r):TS(e)?r(n):hR(e)&&PS(n,r,n)}});var vR=$((hEe,rV)=>{"use strict";function uie(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}rV.exports=function(e,n){let r=new Error(n),o=r.stack.split(`
`);o.splice(1,1);let i=uie(e);i[0]="  "+i[0];for(let s=1;s<o.length;s++)if(i.includes(o[s])){o.splice(s);break}return r.stack=o.concat(i).join(`
`),r}});var aV=$((gEe,sV)=>{"use strict";var fie=zj(),wR=Jj(),die=eV(),sp=Dv(),oV=vR(),iV=NC()("muxrpc:psc");sV.exports=function(e,n,r){let o=fie({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,f=!1;l.push((m,d)=>{f=!0,u=!0,a(m,d)});try{e("async",c,l)}catch(m){if(u||f)throw oV(m,"no callback provided to muxrpc async funtion");a(m)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:f,args:m}=c,d,p;if(s.read=null,!sp.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{p=e(f,u,m)}catch(v){d=v}let g=wR[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return sp.pipeToStream(f,g,d?sp.errorAsStream(f,d):p)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,r)){let a=r;r=null,a(s)}}}),i=die(wR(o,()=>{}));return i=n?n(i,iV.enabled?iV.namespace:!1):i,i.remoteCall=function(s,a,c,l){if(a==="emit")return o.message(c);if(!(sp.isRequest(s)||sp.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(sp.isRequest(s))return o.request({name:a,args:c},l);let u=o.stream(),f=wR[s](u,l);return u.write({name:a,args:c,type:s}),f},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw oV(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var lV=$((vEe,cV)=>{"use strict";var mie=vR(),pie=Dv();function yR(t,e,n,r){for(let o in e){let i=e[o],s=n?n.concat(o):[o];if(i&&typeof i=="object"){let a=i;t[o]=yR({},a,s,r)}else{let a=i;t[o]=(...c)=>r(a,s,c)}}return t}function hie(t){if(t)throw mie(t,"callback not provided")}function gie(t,e,n,r){t=t||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:hie;if(typeof c=="function"){let l;try{l=n(i,s,a,c)}catch(u){return pie.errorAsStreamOrCb(i,u,c)}return l}else return new Promise((l,u)=>{n(i,s,a,(f,m)=>{f?u(f):l(m)})})}return r?o("async","manifest",[function(i,s){if(i)return r(i);yR(t,s,null,o),r(null,s,t)}]):yR(t,e,null,o),t}cV.exports=gie});var dV=$((wEe,fV)=>{"use strict";var RS=Dv();function uV(t){return Array.isArray(t)?t:t.split(".")}function vie(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}fV.exports=function(e){if(vie(e))return e;if(typeof e=="function")return{pre:e};let n=null,r={};function o(i){if(i.allow){n={};for(let s of i.allow)RS.set(n,uV(s),!0)}else n=null;if(i.deny)for(let s of i.deny)RS.set(r,uV(s),!0);else r={};return this}return e&&o(e),o.pre=i=>{if(i=Array.isArray(i)?i:[i],n&&!RS.prefix(n,i))return new Error(`method:${i} is not in list of allowed methods`);if(r&&RS.prefix(r,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:n,deny:r}),o}});var pV=$((yEe,mV)=>{"use strict";var wie=dV(),CR=Dv();mV.exports=function(e,n,r){r=wie(r);function o(s,a){return s===CR.get(n,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let l=c.pop(),u;try{u=CR.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return CR.get(e,a).apply(this,c)}return function(a,c,l){let u=r.pre(c,l);if(u)throw u;return i.call(this,a,c,l)}}});var vV=$((CEe,gV)=>{"use strict";var yie=Bj(),Cie=require("events").EventEmitter,Eie=aV(),Sie=lV(),xie=pV();function hV(t,e,n,r,o,i,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new Cie;i||(i=yie);let l,u={_emit(m,d){return c&&c._emit(m,d),u},id:r},f=Eie(xie(n,e,o).bind(u),i,m=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let d=l;l=null,d(m)}});if(Sie(c,t,(m,d,p,h)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(m,d,p,h)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",d=>{u.id=d});let m=!0;c.createStream=d=>{if(l=d,m)return m=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(m,d){return f.close(m,d),this},c}gV.exports=function(t,e,n){return arguments.length>3?hV.apply(this,arguments):function(r,o,i){return hV(t,e,r,i,o,n,!0)}}});var AS=$((nc,CV)=>{var EEe=QT(),_ie=uR();function wV(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function yV(t,e,n){var r,o=!1,i;function s(){i||(i=!0,n&&n(r===!0?null:r))}function a(){o||(o=!0,l(),r?s():t(r=!0,s))}function c(u){l(),r||t(r=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){_ie(function(u){t(null,function(f,m){if(r=r||f,f===!0)return e._isStdio?s():e.end();if(r=r||f)return wV(e),s(r);if(e._isStdio)e.write(m,function(){u()});else{var d=e.write(m);d===!1?e.once("drain",u):u()}})})})}function Die(t){var e=!1,n=!1,r;function o(){var i=t.read();if(i!==null&&r){var s=r;r=null,s(null,i)}}return t.on("readable",function(){n=!0,r&&o()}).on("end",function(){e=!0,r&&r(e)}).on("error",function(i){e=i,r&&r(e)}),function(i,s){r=s,e?s(e):n&&o()}}function kS(t){var e=[],n=[],r,o=!1,i;function s(){for(;(e.length||r)&&n.length;)n.shift()(e.length?null:r,e.shift());!e.length&&o&&(o=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(o=!0,t.pause())}),t.on("end",function(){r=!0,s()}),t.on("close",function(){r=!0,s()}),t.on("error",function(a){r=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;n.length;)n.shift()(a);c(a)};var l=u;if(r)return u();t.once("close",u),wV(t)}else n.push(c),s()}}var Iie=kS,NS=function(t,e){return function(n){return yV(n,t,e)}},LS=function(t){return kS(t)};nc=CV.exports=function(t,e){return t.writable&&t.write?t.readable?function(n){return yV(n,t,e),kS(t)}:NS(t,e):LS(t)};nc.sink=NS;nc.source=LS;nc.read=Iie;nc.read1=kS;nc.read2=Die;nc.duplex=function(t,e){return{source:LS(t),sink:NS(t,e)}};nc.transform=function(t){return function(e){var n=LS(t);return NS(t)(e),n}}});var SV=$((SEe,FS)=>{var Pie=require("stream");FS.exports=ER;FS.exports.source=function(t){return ER(null,t)};FS.exports.sink=function(t){return ER(t,null)};var EV=typeof setImmediate>"u"?process.nextTick:setImmediate;function ER(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var n=[],r=[],o,i,s=new Pie;s.writable=s.readable=!0,s.write=function(g){return n.length?n.shift()(null,g):r.push(g),n.length||(i=!0),!!n.length},s.end=function(){e?r.length?h():e(o=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},s.source=function(g,v){r.length?(v(null,r.shift()),r.length||s.emit("drain")):((o=o||g)?v(o):n.push(v),i&&(i=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,m=!1;if(s.sink=function(g){e=g,EV(h)},e){s.sink(e),s.paused=!0;var d=s.on.bind(s);s.on=(g,v)=>{var C=d(g,v);return g==="data"&&s.paused&&EV(s.resume.bind(s)),C};var p=s.pipe.bind(s);s.pipe=function(g,v){var C=p(g,v);return s.paused&&s.resume(),C}}function h(){if(f=!1,!(!e||m)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");m=!0,e(null,function g(v,C){m=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(C),f=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",C),m=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,h(),s},s.destroy=function(){!o&&e&&e(o=!0,function(){}),o=!0,n.length&&n.shift()(!0),s.emit("close")},s}});var _V=$((xEe,xV)=>{xV.exports=bie;function bie(t,e){typeof t=="function"&&(e=t,t=!1);var n=[],r,o;function i(f,m){f&&(r=f,o&&u(r)),o=m,l()}var s;function a(f){s=s||f||!0,l()}function c(f){if(!s){if(o){u(r,f);return}n.push(f)}}if(t)return{push:c,end:a,source:i,buffer:n};return i.push=c,i.end=a,i.buffer=n,i;function l(){o&&(r?u(r):!n.length&&s?u(s):n.length&&u(null,n.shift()))}function u(f,m){var d=o;if(f&&e){var p=e;e=null,p(f===!0?null:f)}o=null,d(f,m)}}});var $R=$((pxe,nY)=>{"use strict";var eY=require("child_process"),cse=1024*1024,tY={exec(t,e){eY.exec(t,{maxBuffer:2*cse,windowsHide:!0},e)},spawn(t,e,n){return eY.spawn(t,e,n)},stripLine(t,e){let n=0;for(;e-- >0;){let r=t.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?t.substring(n):t},split(t,e){let n=t.trim().split(/\s+/);return n.length>e&&(n[e-1]=n.slice(e-1).join(" ")),n},extractColumns(t,e,n){let r=t.split(/(\r\n|\n|\r)/),o=[];return n||(n=Math.max.apply(null,e)+1),r.forEach(i=>{let s=tY.split(i,n),a=[];e.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n|\n\n)/).filter(n=>n&&n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return e.forEach(n=>{for(let r=0;n[r];){let o=n[r];o.startsWith(" ")?(n[r-1]+=o.trimLeft(),n.splice(r,1)):r+=1}}),e.map(n=>{let r={};return n.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();r[s]=o.slice(i+1).trim()}),r})}};nY.exports=tY});var oY=$((rY,ox)=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof ox=="object"&&ox.exports?ox.exports=e():t.log=e()})(rY,function(){"use strict";var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(p,h){var g=p[h];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===e?!1:p==="trace"&&n?a:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):t}function l(){for(var p=this.getLevel(),h=0;h<r.length;h++){var g=r[h];this[g]=h<p?t:this.methodFactory(g,p,this.name)}if(this.log=this.debug,typeof console===e&&p<this.levels.SILENT)return"No console available for logging"}function u(p){return function(){typeof console!==e&&(l.call(this),this[p].apply(this,arguments))}}function f(p,h,g){return c(p)||u.apply(this,arguments)}function m(p,h){var g=this,v,C,w,y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function S(k){var E=(r[k]||"silent").toUpperCase();if(!(typeof window===e||!y)){try{window.localStorage[y]=E;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+E+";"}catch{}}}function D(){var k;if(!(typeof window===e||!y)){try{k=window.localStorage[y]}catch{}if(typeof k===e)try{var E=window.document.cookie,_=encodeURIComponent(y),T=E.indexOf(_+"=");T!==-1&&(k=/^([^;]+)/.exec(E.slice(T+_.length+1))[1])}catch{}return g.levels[k]===void 0&&(k=void 0),k}}function x(){if(!(typeof window===e||!y)){try{window.localStorage.removeItem(y)}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function A(k){var E=k;if(typeof E=="string"&&g.levels[E.toUpperCase()]!==void 0&&(E=g.levels[E.toUpperCase()]),typeof E=="number"&&E>=0&&E<=g.levels.SILENT)return E;throw new TypeError("log.setLevel() called with invalid level: "+k)}g.name=p,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=h||f,g.getLevel=function(){return w??C??v},g.setLevel=function(k,E){return w=A(k),E!==!1&&S(w),l.call(g)},g.setDefaultLevel=function(k){C=A(k),D()||g.setLevel(k,!1)},g.resetLevel=function(){w=null,x(),l.call(g)},g.enableAll=function(k){g.setLevel(g.levels.TRACE,k)},g.disableAll=function(k){g.setLevel(g.levels.SILENT,k)},g.rebuild=function(){if(i!==g&&(v=A(i.getLevel())),l.call(g),i===g)for(var k in o)o[k].rebuild()},v=A(i?i.getLevel():"WARN");var F=D();F!=null&&(w=A(F)),l.call(g)}i=new m,i.getLogger=function(h){if(typeof h!="symbol"&&typeof h!="string"||h==="")throw new TypeError("You must supply a name when creating a logger.");var g=o[h];return g||(g=o[h]=new m(h,i.methodFactory)),g};var d=typeof window!==e?window.log:void 0;return i.noConflict=function(){return typeof window!==e&&window.log===i&&(window.log=d),i},i.getLoggers=function(){return o},i.default=i,i})});var MR=$((hxe,iY)=>{"use strict";var lse=oY();iY.exports=lse});var aY=$((gxe,sY)=>{"use strict";var use=require("os"),ix=require("fs"),Fi=$R(),fse=MR(),dse=t=>new Promise((e,n)=>{ix.existsSync(t)?e():ix.mkdir(t,r=>{r?n(r):e()})}),HR={darwin(t){return new Promise((e,n)=>{Fi.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,o,i){if(r)n(r);else{if(r=i.toString().trim(),r){n(r);return}let s=Fi.stripLine(o.toString(),2),a=Fi.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);return!!(l&&l[1]===String(t))});a&&a[2].length?e(parseInt(a[2],10)):n(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,n)=>{Fi.exec("netstat -tunlp",function(o,i,s){if(o)n(o);else{let a=s.toString().trim();a&&fse.warn(a);let c=Fi.stripLine(i.toString(),2),l=Fi.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);return!!(f&&f[1]===String(t))});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,n)=>{Fi.exec("netstat -ano",function(r,o,i){if(r)n(r);else{if(r=i.toString().trim(),r){n(r);return}let s=Fi.stripLine(o.toString(),4),a=Fi.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);return!!(l&&l[1]===String(t))});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):n(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,n)=>{let r=use.tmpdir()+"/.find-process",o=r+"/"+process.pid,i='netstat -tunp >> "'+o+'"';dse(r).then(()=>{Fi.exec(i,()=>{ix.readFile(o,"utf8",(s,a)=>{if(ix.unlink(o,()=>{}),s)n(s);else{a=Fi.stripLine(a,2);let c=Fi.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})})})}};function mse(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in HR))return r(new Error(`platform ${e} is unsupported`));let o=HR[e];typeof o=="string"&&(o=HR[o]),o(t).then(n,r)})}sY.exports=mse});var fY=$((vxe,uY)=>{"use strict";var sx=require("path"),Tl=$R();function BR(t,e){return e?t&&t.match?t.match(e):!1:!0}function cY(t){let e=t.split(sx.sep),n=e[e.length-1];n&&(e[e.length-1]=n.split(" ")[0]);let r=[];for(let o of e){let i=o.indexOf(" -");if(i>=0){r.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){r.push(o.trim());break}r.push(o)}return r.join(sx.sep)}function lY(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return sx.basename(t.substring(0,e))}return sx.basename(t)}var WR={darwin(t){return new Promise((e,n)=>{let r;"pid"in t?r=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",Tl.exec(r,function(o,i,s){if(o)"pid"in t?e([]):n(o);else{if(o=s.toString().trim(),o){n(o);return}let a=Tl.stripLine(i.toString(),1),l=Tl.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?BR(u[4],t.name):!!u[0]).map(u=>{let f=String(u[4]),m=cY(f);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:lY(m),bin:m,cmd:u[4]}});t.config.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,n)=>{let r="[Console]::OutputEncoding = [System.Text.Encoding]::UTF8; Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=Tl.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("error",s=>{n(new Error("Command '"+r+"' failed with reason: "+s.toString()))}),i.on("close",s=>{if(s!==0)return n(new Error("Command '"+r+"' terminated with code: "+s));let a=Tl.parseTable(o.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.config.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:BR(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,n)=>{Tl.exec("ps",function(o,i,s){if(o)"pid"in t?e([]):n(o);else{if(o=s.toString().trim(),o){n(o);return}let a=Tl.stripLine(i.toString(),1),l=Tl.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?BR(u[1],t.name):!!u[0]).map(u=>{let f=String(u[1]),m=cY(f);return{pid:parseInt(u[0],10),name:lY(m),bin:m,cmd:f}});t.config.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function pse(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in WR))return r(new Error(`platform ${e} is unsupported`));let o=WR[e];typeof o=="string"&&(o=WR[o]),o(t).then(i=>{if(t.skipSelf){let s=i.filter(a=>a.pid!==process.pid);n(s)}else n(i)},r)})}uY.exports=pse});var pY=$((wxe,mY)=>{"use strict";var hse=aY(),dY=fY(),gse=MR(),jR={port(t,e){return hse(t).then(n=>jR.pid(n,e),()=>[])},pid(t,e){return dY({pid:t,config:e})},name(t,e){return dY({name:t,config:e,skipSelf:!0})}};function vse(t,e,n){let r=Object.assign({logLevel:"warn",strict:typeof n=="boolean"?n:!1},n);return gse.setLevel(r.logLevel),new Promise((o,i)=>{if(!(t in jR))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(e);t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):jR[t](e,r).then(o,i)}})}mY.exports=vse});var gY=$((yxe,hY)=>{"use strict";hY.exports=pY()});var Ap,fc,Zs,hs,Fp,aw,Yk=ne(()=>{Ap="function",fc="object",Zs="undefined",hs="prototype",Fp=Object,aw=Fp[hs]});function Qs(t,e){return t||e}function Nn(t,e){return t[e]}function qn(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function Iue(t,e){var n=qn(t);return n.e?e:n.v}function c_(t){return function(e){return typeof e===t}}function Q3(t){var e="[object "+t+"]";return function(n){return!!(n&&l_(n)===e)}}function l_(t){return cN[a_].call(t)}function lN(t,e){return typeof t===e}function Ve(t){return typeof t===jf||t===jf}function Pue(t){return!u_(t)}function ae(t){return t===Rn||Ve(t)}function bue(t){return t===Rn||!u_(t)}function u_(t){return!!t||t!==Uo}function Tue(t){return!qk&&(qk=["string","number","boolean",jf,"symbol","bigint"]),t!==lw&&qk.indexOf(t)!==-1}function tn(t){return!t&&ae(t)?!1:!!t&&typeof t===lw}function co(t){return!!(t&&t.then&&Re(t.then))}function uN(t){return!t||!gs(t)}function gs(t){return!(!t||Iue(function(){return!(t&&0+t)},!t))}function fr(t,e){return!!t&&cN.hasOwnProperty[xr](t,e)}function Rue(t,e){return fr(t,e)||!!d_(t,e)}function Ie(t,e,n){if(t&&tn(t)){for(var r in t)if(vs(t,r)&&e[xr](n||t,r,t[r])===-1)break}}function eG(t){var e={};if(e[Qx.c]=!0,e[Qx.e]=!0,t.l){e.get=function(){return t.l.v};var n=d_(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return Ie(t,function(r,o){e[Qx[r]]=Pue(o)?e[Qx[r]]:o}),e}function fN(t,e,n,r,o,i){var s={e:i,c:o};return n&&(s.g=n),r&&(s.s=r),$o(t,e,eG(s))}function ht(t,e,n){return $o(t,e,eG(n))}function nG(t,e,n,r,o){var i={};return Ie(t,function(s,a){o_(i,s,e?a:s),o_(i,a,n?a:s)}),r?r(i):i}function o_(t,e,n,r){$o(t,e,{value:n,enumerable:!0,writable:!1})}function Ce(t,e){var n=sN,r=cN[a_][xr](t);r===kue&&(t={stack:En(t.stack),message:En(t.message),name:En(t.name)});try{n=JSON.stringify(t,Rn,e?typeof e=="number"?e:4:Uo),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):Rn)||En(t)}catch(o){n=" - "+Ce(o,e)}return r+": "+n}function Ln(t){throw new Error(t)}function Dr(t){throw new TypeError(t)}function oG(t){return t}function Nue(t){return t[oN]||Rn}function ws(t){return rG&&Ie(t,function(e,n){(ve(n)||tn(n))&&ws(n)}),lo(t)}function iG(t){return nG(t,1,0,lo)}function Lue(t){return nG(t,0,0,lo)}function Aue(t){var e={};return Ie(t,function(n,r){o_(e,n,r[1]),o_(e,r[0],r[1])}),lo(e)}function sG(t){return Aue(t)}function cG(){var t;return typeof globalThis!==jf&&(t=globalThis),!t&&typeof self!==jf&&(t=self),!t&&typeof window!==jf&&(t=window),!t&&typeof global!==jf&&(t=global),t}function lG(){if(!Gk){var t=qn(cG).v||{};Gk=t[q3]=t[q3]||{}}return Gk}function Hp(t,e,n){var r=e?e[t]:Rn;return function(o){var i=(o?o[t]:Rn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?mc[xr](s,1):s)}Dr('"'+En(t)+'" not defined for '+Ce(o))}}function Fue(t){return function(e){return e[t]}}function Oue(t,e,n){return ae(t)&&Dr("Invalid "+Ce(t)),n<0?sN:(e=e||0,e<0&&(e=ta(e+t[Vf],0)),Ve(n)?G3(t,e):G3(t,e,e+n))}function Gf(t,e){return Gn(t,0,e)}function Uue(){if(!zk){var t=lG();zk=t.gblSym=t.gblSym||{k:{},s:{}}}return zk}function mN(t){var e={description:En(t),toString:function(){return aN+"("+t+")"}};return e[Due]=!0,e}function $ue(t){var e=Uue();if(!vs(e.k,t)){var n=mN(t),r=Ir(e.s).length;n[z3]=function(){return r+"_"+n[a_]()},e.k[t]=n,e.s[n[z3]()]=En(t)}return e.k[t]}function Mue(t){!e_&&(e_={});var e,n=aG[t];return n&&(e=e_[n]=e_[n]||mN(aN+"."+n)),e}function Kl(){kn=lG()}function uG(t){var e={};return!kn&&Kl(),e.b=kn.lzy,$o(e,"v",{configurable:!0,get:function(){var n=t();return kn.lzy||$o(e,"v",{value:n}),e.b=kn.lzy,n}}),e}function li(t){return $o({toJSON:function(){return t}},"v",{value:t})}function dw(t,e){var n;return function(){return!kn&&Kl(),(!n||kn.lzy)&&(n=li(qn(t,e).v)),n.v}}function uo(t){return!kn&&Kl(),(!cw||t===!1||kn.lzy)&&(cw=li(qn(cG).v||Rn)),cw.v}function gt(t,e){var n;if(!cw||e===!1?n=uo(e):n=cw.v,n&&n[t])return n[t];if(t===fG)try{return window}catch{}return Rn}function zf(){return!!An()}function Bp(){return!!Fn()}function mw(){return!!zn()}function pN(){return!!m_()}function p_(){return Up=li(qn(gt,[aN]).v),Up}function Hue(t){var e=(kn.lzy?0:Up)||p_();return e.v?e.v[t]:Uo}function mG(){return!!Bue()}function Bue(){return!kn&&Kl(),((kn.lzy?0:Up)||p_()).v}function pw(t,e){var n=aG[t];!kn&&Kl();var r=(kn.lzy?0:Up)||p_();return r.v?r.v[n||t]:e?Uo:Mue(t)}function Wp(t,e){!kn&&Kl();var n=(kn.lzy?0:Up)||p_();return n.v?n.v(t):e?Rn:mN(t)}function h_(t){return!kn&&Kl(),Kk=(kn.lzy?0:Kk)||li(qn(Hue,["for"]).v),(Kk.v||$ue)(t)}function i_(t){return!!t&&Re(t.next)}function hN(t){return!bue(t)&&Re(t[pw(3)])}function g_(t,e,n){if(t&&(i_(t)||(!t_&&(t_=li(pw(3))),t=t[t_.v]?t[t_.v]():Rn),i_(t))){var r=Uo,o=Uo;try{for(var i=0;!(o=t.next()).done&&e[xr](n||t,o.value,i,t)!==-1;)i++}catch(s){r={e:s},t.throw&&(o=Rn,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function Op(t,e,n){return t.apply(e,n)}function ys(t,e){return!Ve(e)&&t&&(ve(e)?Op(t.push,t,e):i_(e)||hN(e)?g_(e,function(n){t.push(n)}):t.push(e)),t}function Q(t,e,n){if(t)for(var r=t[Vf]>>>0,o=0;o<r&&!(o in t&&e[xr](n||t,t[o],o,t)===-1);o++);}function jp(t,e,n){return((t?t.slice:Rn)||mc).apply(t,mc[xr](arguments,1))}function Wue(t,e,n){return vt(t,e,n)!==-1}function jue(t){if(!t)return{};var e=typeof t;e!==lw&&e!==s_&&Dr("Prototype must be an Object or function: "+Ce(t));function n(){}return n[dc]=t,new n}function pG(t,e){var n=ci.setPrototypeOf||function(r,o){var i;!Jk&&(Jk=li((i={},i[oN]=[],i instanceof Array))),Jk.v?r[oN]=o:Ie(o,function(s,a){return r[s]=a})};return n(t,e)}function Vue(t,e,n){qn(ht,[e,r_,{v:t,c:!0,e:!1}]),e=pG(e,n);function r(){this[n_]=e,qn(ht,[this,r_,{v:t,c:!0,e:!1}])}return e[dc]=n===Rn?ra(n):(r[dc]=n[dc],new r),e}function K3(t,e){e&&(t[r_]=e)}function vN(t,e,n){var r=n||Error,o=r[dc][r_],i=Error.captureStackTrace;return Vue(t,function(){var s=this,a=arguments;try{qn(K3,[r,t]);var c=Op(r,s,mc[xr](a))||s;if(c!==s){var l=iN(s);l!==iN(c)&&pG(c,l)}return i&&i(c,s[n_]),e&&e(c,a),c}finally{qn(K3,[r,o])}},r)}function Sn(){return(Date.now||Yue)()}function Yue(){return new Date().getTime()}function que(t){return function(n){return ae(n)&&Dr("strTrim called ["+Ce(n)+"]"),n&&n.replace&&(n=n.replace(t,sN)),n}}function Pr(t){if(!t||typeof t!==lw)return!1;Qk||(Qk=Bp()?Fn():!0);var e=!1;if(t!==Qk){Zk||(Xk=Function[dc][a_],Zk=Xk[xr](ci));try{var n=iN(t);e=!n,e||(fr(n,n_)&&(n=n[n_]),e=!!(n&&typeof n===s_&&Xk[xr](n)===Zk))}catch{}}return e}function zue(t){return t.value&&vG(t),!0}function Kue(t,e,n,r){var o;return Q(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function wN(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof e,c=!1,l=e===Rn;l||(e&&a===lw?c=Pr(e):l=Tue(a));var u={type:a,isPrim:l,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(f,m){return wN(t,f,m?s:n,m)},copyTo:function(f,m){return gG(t,f,m,s)}};return u.isPrim?o&&o[xr](n,u)?u.result:e:Kue(t,e,i,function(f){ht(u,"result",{g:function(){return f.v},s:function(p){f.v=p}});for(var m=0,d=o;!(d||(m<J3.length?J3[m++]:zue))[xr](n,u);)d=Rn})}function gG(t,e,n,r){if(!ae(n))for(var o in n)e[o]=wN(t,n[o],r,o);return e}function Jue(t,e,n){var r={handler:n,src:e,path:[]};return gG([],t,e,r)}function Xue(t,e){var n={handler:e,src:t};return wN([],t,n)}function Zue(t){var e=t.value;if(ve(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function Que(t){var e=t.value;return f_(e)?(t.result=new Date(e.getTime()),!0):!1}function efe(t){return t.type===s_}function vG(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function tfe(t,e){return Q(e,function(n){Jue(t,n)}),t}function yN(t,e,n,r,o,i,s){return tfe(Xue(t)||{},mc[xr](arguments))}function Kf(){return!kn&&Kl(),(!eN||kn.lzy)&&(eN=li(qn(gt,["performance"]).v)),eN.v}function gw(){var t=Kf();return t&&t.now?t.now():Sn()}function nfe(t,e,n){ke(t)||Dr("'"+Ce(t)+"' is not a string");var r=ke(e)?e:En(e),o=!Ve(n)&&n<t[Vf]?n:t[Vf];return Gn(t,o-r[Vf],o)===r}function rfe(t,e,n){ke(t)||Dr("'"+Ce(t)+"' is not a string");var r=ke(e)?e:En(e),o=n>0?n:0;return Gn(t,o,o+r[Vf])===r}function ife(t,e,n){var r=!0,o=t?e(Rn):Rn,i;function s(){return r=!1,o&&o[nN]&&o[nN](),i}function a(){o&&n(o),o=Rn}function c(){return o=e(o),r||s(),i}function l(u){!u&&o&&a(),u&&!o&&c()}return i={cancel:a,refresh:c},i[rN]=function(){return o&&o[rN]?o[rN]():r},i[tN]=function(){return r=!0,o&&o[tN]&&o[tN](),i},i[nN]=s,i=$o(i,ofe,{get:function(){return!!o},set:l}),{h:i,dn:function(){o=Rn}}}function CN(t,e,n){var r=ve(e),o=r?e.length:0,i=(o>0?e[0]:r?Uo:e)||setTimeout,s=(o>1?e[1]:Uo)||clearTimeout,a=n[0];n[0]=function(){c.dn(),Op(a,Uo,mc[xr](arguments))};var c=ife(t,function(l){if(l){if(l.refresh)return l.refresh(),l;Op(s,Uo,[l])}return Op(i,Uo,n)},function(l){Op(s,Uo,[l])});return c.h}function ui(t,e){return CN(!0,Uo,mc[xr](arguments))}function yG(t,e,n){return CN(!0,t,mc[xr](arguments,1))}function CG(t,e){return CN(!1,Uo,mc[xr](arguments))}var Uo,Rn,sN,s_,lw,dc,oN,jf,n_,aN,Due,Vf,r_,xr,a_,ci,cN,X3,Yf,uw,Z3,fw,mc,qk,ke,Re,ve,f_,_r,ea,qf,d_,vs,Qx,$o,tG,En,kue,rG,$p,Ir,lo,dN,iN,aG,q3,Gk,Mp,zl,ta,G3,Gn,na,z3,zk,e_,kn,fG,cw,An,Fn,zn,m_,dG,Up,Kk,t_,vt,pc,gN,hw,ra,Jk,Gue,et,Bi,hG,Xk,Zk,Qk,J3,Vp,eN,wG,Jf,Wi,Yp,tN,nN,rN,ofe,Ne=ne(()=>{Uo=void 0,Rn=null,sN="",s_="function",lw="object",dc="prototype",oN="__proto__",jf="undefined",n_="constructor",aN="Symbol",Due="_polyfill",Vf="length",r_="name",xr="call",a_="toString",ci=Qs(Object),cN=Nn(ci,dc),X3=Qs(String),Yf=Nn(X3,dc),uw=Qs(Math),Z3=Qs(Array),fw=Nn(Z3,dc),mc=Nn(fw,"slice");ke=c_("string"),Re=c_(s_);ve=Nn(Z3,"isArray"),f_=Q3("Date"),_r=c_("number"),ea=c_("boolean"),qf=Q3("Error");d_=Nn(ci,"getOwnPropertyDescriptor");vs=Qs(Nn(ci,"hasOwn"),Rue);Qx={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};$o=Nn(ci,"defineProperty"),tG=Nn(ci,"defineProperties");En=Qs(X3),kue="[object Error]";rG=Nn(ci,"freeze");$p=Nn(ci,"assign"),Ir=Nn(ci,"keys");lo=Qs(rG,oG),dN=Qs(Nn(ci,"seal"),oG),iN=Qs(Nn(ci,"getPrototypeOf"),Nue);aG=Lue({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),q3="__tsUtils$gblCfg";Mp=Hp;zl=Nn(uw,"min"),ta=Nn(uw,"max"),G3=Mp("slice",Yf),Gn=Mp("substring",Yf),na=Hp("substr",Yf,Oue);z3="_urid";fG="window";An=dw(gt,["document"]);Fn=dw(gt,[fG]);zn=dw(gt,["navigator"]);m_=dw(gt,["history"]),dG=dw(function(){return!!qn(function(){return process&&(process.versions||{}).node}).v});vt=Mp("indexOf",fw),pc=Mp("map",fw);gN=Hp("includes",fw,Wue),hw=Mp("reduce",fw),ra=Qs(Nn(ci,"create"),jue);Gue=que(/^\s+|(?=\s)\s+$/g),et=Hp("trim",Yf,Gue),Bi=Nn(uw,"floor"),hG=Nn(uw,"ceil");J3=[Zue,vG,efe,Que];Vp=Fue(Vf);wG=Nn(uw,"round"),Jf=Hp("endsWith",Yf,nfe);Wi=Mp("indexOf",Yf),Yp=Hp("startsWith",Yf,rfe);tN="ref",nN="unref",rN="hasRef",ofe="enabled"});function Mo(t,e){typeof e!==Ap&&e!==null&&Dr("Class extends value "+String(e)+" is not a constructor or null"),EN(t,e);function n(){this.constructor=t}t[hs]=e===null?ra(e):(n[hs]=e[hs],new n)}function v_(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var BPe,WPe,EG,afe,ji,EN,SG=ne(()=>{Ne();Yk();BPe=(uo()||{}).Symbol,WPe=(uo()||{}).Reflect,EG="hasOwnProperty",afe=function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)aw[EG].call(e,o)&&(t[o]=e[o])}return t},ji=$p||afe,EN=function(t,e){return EN=Fp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[EG](o)&&(n[o]=r[o])},EN(t,e)}});var xG=ne(()=>{});var Ho=ne(()=>{Yk();SG();xG();Ne()});function E_(t){return t&&(t===TN[hc]||t===Array[hc])}function RN(t){return E_(t)||t===Function[hc]}function Xf(t){var e;if(t){if(ww)return ww(t);var n=t[bN]||t[hc]||(t[S_]?t[S_][hc]:null);e=t[y_]||n,fr(t,y_)||(delete t[SN],e=t[y_]=t[SN]||t[y_],t[SN]=n)}return e}function D_(t,e){var n=[];if(IG)n=IG(t);else for(var r in t)typeof r=="string"&&fr(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function kN(t,e,n){return e!==S_&&typeof t[e]===x_&&(n||fr(t,e))&&e!==bN&&e!==hc}function I_(t){Dr("DynamicProto: "+t)}function lfe(t){var e=ra(null);return D_(t,function(n){!e[n]&&kN(t,n,!1)&&(e[n]=t[n])}),e}function NN(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function ufe(t,e,n,r){function o(c,l,u){var f=l[u];if(f[_N]&&r){var m=c[__]||{};m[vw]!==!1&&(f=(m[l[qp]]||{})[u]||f)}return function(){return f.apply(c,arguments)}}var i=ra(null);D_(n,function(c){i[c]=o(e,n,c)});for(var s=Xf(t),a=[];s&&!RN(s)&&!NN(a,s);)D_(s,function(c){!i[c]&&kN(s,c,!ww)&&(i[c]=o(e,s,c))}),a.push(s),s=Xf(s);return i}function ffe(t,e,n,r){var o=null;if(t&&fr(n,qp)){var i=t[__]||ra(null);if(o=(i[n[qp]]||ra(null))[e],o||I_("Missing ["+e+"] "+x_),!o[DN]&&i[vw]!==!1){for(var s=!fr(t,e),a=Xf(t),c=[];s&&a&&!RN(a)&&!NN(c,a);){var l=a[e];if(l){s=l===r;break}c.push(a),a=Xf(a)}try{s&&(t[e]=o),o[DN]=1}catch{i[vw]=!1}}}return o}function dfe(t,e,n){var r=e[t];return r===n&&(r=Xf(e)[t]),typeof r!==x_&&I_("["+t+"] is not a "+x_),r}function mfe(t,e,n,r,o){function i(c,l){var u=function(){var f=ffe(this,l,c,u)||dfe(l,c,u);return f.apply(this,arguments)};return u[_N]=1,u}if(!E_(t)){var s=n[__]=n[__]||ra(null);if(!E_(s)){var a=s[e]=s[e]||ra(null);s[vw]!==!1&&(s[vw]=!!o),E_(a)||D_(n,function(c){kN(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!fr(t,c)||t[c]&&!t[c][_N])&&(t[c]=i(t,c)))})}}}function pfe(t,e){if(ww){for(var n=[],r=Xf(e);r&&!RN(r)&&!NN(n,r);){if(r===t)return!0;n.push(r),r=Xf(r)}return!1}return!0}function xN(t,e){return fr(t,hc)?t.name||e||_G:((t||{})[S_]||{}).name||e||_G}function Je(t,e,n,r){fr(t,hc)||I_("theClass is an invalid class definition.");var o=t[hc];pfe(o,e)||I_("["+xN(t)+"] not in hierarchy of ["+xN(e)+"]");var i=null;fr(o,qp)?i=o[qp]:(i=cfe+xN(t,"_")+"$"+PN.n,PN.n++,o[qp]=i);var s=Je[bG],a=!!s[C_];a&&r&&r[C_]!==void 0&&(a=!!r[C_]);var c=lfe(e),l=ufe(o,e,c,a);n(e,l);var u=!!ww&&!!s[IN];u&&r&&(u=!!r[IN]),mfe(o,i,e,c,u!==!1)}var w_,S_,hc,x_,__,_N,qp,cfe,DN,vw,bG,_G,bN,y_,DG,SN,C_,IN,TN,ww,IG,PG,PN,dr=ne(()=>{Ne();S_="constructor",hc="prototype",x_="function",__="_dynInstFuncs",_N="_isDynProxy",qp="_dynClass",cfe="_dynCls$",DN="_dynInstChk",vw=DN,bG="_dfOpts",_G="_unknown_",bN="__proto__",y_="_dyn"+bN,DG="__dynProto$Gbl",SN="_dynInstProto",C_="useBaseInst",IN="setInstFuncs",TN=Object,ww=TN.getPrototypeOf,IG=TN.getOwnPropertyNames,PG=uo(),PN=PG[DG]||(PG[DG]={o:(w_={},w_[IN]=!0,w_[C_]=!0,w_),n:1e3});Je[bG]=PN.o});var LN,TG=ne(()=>{LN=100});var fn,AN,yw=ne(()=>{Ne();fn=iG,AN=sG});var Cs,hfe,RG=ne(()=>{yw();Cs=fn({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),hfe=fn({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var fi,FN=ne(()=>{yw();fi=fn({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})});var Bo,me,Gp,gc,oa,Jl,Ge,ia,kt,vc,wc,sa,zp,Kp,Wo,Zf,Cw,Xl,fo,Kn,P_,Zl,ON,Vi,Ew,Jp,b_,aa,di,Xp,ca,jo,Ql,Qf,mi,eu,Sw,Yi,Es,pi,Zp,ed,UN,xw,tu,td,Ss,$N,Qp,T_,nd,rd,xt=ne(()=>{Bo="toLowerCase",me="length",Gp="warnToConsole",gc="throwInternal",oa="watch",Jl="apply",Ge="push",ia="splice",kt="logger",vc="cancel",wc="initialize",sa="identifier",zp="removeNotificationListener",Kp="addNotificationListener",Wo="isInitialized",Zf="value",Cw="getNotifyMgr",Xl="getPlugin",fo="name",Kn="processNext",P_="getProcessTelContext",Zl="enabled",ON="stopPollingInternalLogs",Vi="unload",Ew="onComplete",Jp="version",b_="loggingLevelConsole",aa="createNew",di="teardown",Xp="messageId",ca="message",jo="diagLog",Ql="_doTeardown",Qf="update",mi="getNext",eu="setNextPlugin",Sw="userAgent",Yi="split",Es="replace",pi="type",Zp="evtName",ed="status",UN="getAllResponseHeaders",xw="isChildEvt",tu="data",td="getCtx",Ss="setCtx",$N="itemsReceived",Qp="urlString",T_="headers",nd="timeout",rd="traceFlags"});function kG(t,e){MN||(MN=vN("AggregationError",function(r,o){o[me]>1&&(r.errors=o[1])}));var n=t||"One or more errors occurred.";throw Q(e,function(r,o){n+=`
`.concat(o," > ").concat(Ce(r))}),new MN(n,e||[])}var MN,NG=ne(()=>{Ne();xt()});function hi(t,e){return OG(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:GN,rejected:!0,reason:n}):n})}function OG(t,e,n,r){var o=t;try{if(co(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{r&&gfe(o,r)}return o}function gfe(t,e){var n=t;return e&&(co(t)?t.finally?n=t.finally(e):n=t.then(function(r){return e(),r},function(r){throw e(),r}):e()),n}function vfe(t,e,n,r){HN=HN||{toString:function(){return"[[PromiseState]]"}},BN=BN||{toString:function(){return"[[PromiseResult]]"}},WN=WN||{toString:function(){return"[[PromiseIsHandled]]"}};var o={};o[HN]={get:e},o[BN]={get:n},o[WN]={get:r},tG(t,o)}function wfe(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function yfe(t,e,n,r){var o=An();!R_&&(R_=li(!!qn(wfe,[o]).v));var i=R_.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),R_.v&&i.initEvent(e,!1,!0),i&&t[AG])t[AG](i);else{var s=t["on"+e];if(s)s(i);else{var a=gt("console");a&&(a.error||a.log)(e,Ce(i))}}}function FG(t){return Re(t)?t.toString():Ce(t)}function MG(t,e,n){var r=jp(arguments,3),o=0,i=!1,s,a=[],c=Efe++,l=_w.length>0?_w[_w.length-1]:void 0,u=!1,f=null,m;function d(S,D){try{_w.push(c),u=!0,f&&f.cancel(),f=null;var x=t(function(A,F){a.push(function(){try{var k=o===2?S:D,E=Ve(k)?s:Re(k)?k(s):k;co(E)?E.then(A,F):k?A(E):o===3?F(E):A(E)}catch(_){F(_)}}),i&&v()},r);return x}finally{_w.pop()}}function p(S){return d(void 0,S)}function h(S){var D=S,x=S;return Re(S)&&(D=function(A){return S&&S(),A},x=function(A){throw S&&S(),A}),d(D,x)}function g(){return UG[o]}function v(){if(a.length>0){var S=a.slice();a=[],u=!0,f&&f.cancel(),f=null,e(S)}}function C(S,D){return function(x){if(o===D){if(S===2&&co(x)){o=1,x.then(C(2,1),C(3,1));return}o=S,i=!0,s=x,v(),!u&&S===3&&!f&&(f=ui(w,Sfe))}}}function w(){if(!u)if(u=!0,dG())process.emit($G,s,m);else{var S=Fn()||uo();!jN&&(jN=li(qn(gt,[k_+"RejectionEvent"]).v)),yfe(S,Cfe,function(D){return ht(D,"promise",{g:function(){return m}}),D.reason=s,D},!!jN.v)}}m={then:d,catch:p,finally:h},$o(m,"state",{get:g}),LG&&vfe(m,g,function(){return l_(s)},function(){return u}),mG()&&(m[pw(11)]="IPromise");function y(){return"IPromise"+(LG?"["+c+(Ve(l)?"":":"+l)+"]":"")+" "+g()+(i?" - "+FG(s):"")}return m.toString=y,function(){Re(n)||Dr(k_+": executor is not a function - "+FG(n));var D=C(3,0);try{n.call(m,C(2,0),D)}catch(x){D(x)}}(),m}function xfe(t){return function(e){var n=jp(arguments,1);return t(function(r,o){try{var i=[],s=1;g_(e,function(a,c){a&&(s++,OG(a,function(l){i[c]=l,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function _fe(t){return li(function(e){var n=jp(arguments,1);return t(function(r,o){var i=[],s=1;function a(c,l){s++,hi(c,function(u){u.rejected?i[l]={status:GN,reason:u.reason}:i[l]={status:"fulfilled",value:u.value},--s===0&&r(i)})}try{ve(e)?Q(e,a):hN(e)?g_(e,a):Dr("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function HG(t){Q(t,function(e){try{e()}catch{}})}function Dfe(t){var e=_r(t)?t:0;return function(n){ui(function(){HG(n)},e)}}function BG(t,e){return MG(BG,Dfe(e),t,e)}function Ife(t,e){!VN&&(VN=li(qn(gt,[k_]).v||null));var n=VN.v;if(!n)return BG(t);Re(t)||Dr(k_+": executor is not a function - "+Ce(t));var r=0;function o(){return UG[r]}var i=new n(function(s,a){function c(u){r=2,s(u)}function l(u){r=3,a(u)}t(c,l)});return $o(i,"state",{get:o}),i}function Dw(t){return MG(Dw,HG,t)}function WG(t,e){return!YN&&(YN=_fe(Dw)),YN.v(t,e)}function qi(t,e){return!qN&&(qN=li(Ife)),qN.v.call(this,t,e)}var k_,GN,HN,BN,WN,LG,UG,AG,R_,$G,Cfe,_w,Efe,Sfe,jN,VN,YN,qN,jG,Dbe,od=ne(()=>{Ne();k_="Promise",GN="rejected";LG=!1;UG=["pending","resolving","resolved",GN],AG="dispatchEvent";$G="unhandledRejection",Cfe=$G.toLowerCase(),_w=[],Efe=0,Sfe=10;jG=xfe(qi),Dbe=pw(11)});var gi,Le,id,dn,N_,Iw,yc,sd,Vo,ad,eh,nu,th,la,L_,A_,F_,nh,O_,U_,VG,On=ne(()=>{gi=void 0,Le="",id="channels",dn="core",N_="createPerfMgr",Iw="disabled",yc="extensionConfig",sd="extensions",Vo="processTelemetry",ad="priority",eh="eventsSent",nu="eventsDiscarded",th="eventsSendRequest",la="perfEvent",L_="offlineEventsStored",A_="offlineBatchSent",F_="offlineBatchDrop",nh="getPerfMgr",O_="domain",U_="path",VG="Not dynamic - "});function ru(t){return!ae(t)}function cd(t){var e=t;return e&&ke(e)&&(e=e[Es](bfe,function(n,r){return r.toUpperCase()}),e=e[Es](Tfe,"_"),e=e[Es](Rfe,function(n,r){return"_"+r})),e}function xn(t,e){return t&&e?Wi(t,e)!==-1:!1}function xs(t){return t&&t.toISOString()||""}function nn(t){return qf(t)?t[fo]:Le}function Gi(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function Pw(t,e,n){var r;return t?(r=t[e],!r&&ae(r)&&(r=Ve(n)?{}:n,t[e]=r)):r=Ve(n)?{}:n,r}function qG(t,e){var n=null,r=null;return Re(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][Jl](r,o)}}function zN(t,e,n){if(t&&e&&tn(t)&&tn(e)){var r=function(i){if(ke(i)){var s=e[i];Re(s)?(!n||n(i,!0,e,t))&&(t[i]=qG(e,i)):(!n||n(i,!1,e,t))&&(vs(t,i)&&delete t[i],ht(t,i,{g:function(){return e[i]},s:function(a){e[i]=a}}))}};for(var o in e)r(o)}return t}function Cc(t,e,n,r,o){t&&e&&n&&(o!==!1||Ve(t[e]))&&(t[e]=qG(n,r))}function vi(t,e,n,r){return t&&e&&tn(t)&&ve(n)&&Q(n,function(o){ke(o)&&Cc(t,o,e,o,r)}),t}function KN(t){return function(){function e(){var n=this;t&&Ie(t,function(r,o){n[r]=o})}return e}()}function Yo(t){return t&&$p&&(t=Fp($p({},t))),t}function $_(t,e,n,r,o,i){var s=arguments,a=s[0]||{},c=s[me],l=!1,u=1;for(c>0&&ea(a)&&(l=a,a=s[u]||{},u++),tn(a)||(a={});u<c;u++){var f=s[u],m=ve(f),d=tn(f);for(var p in f){var h=m&&p in f||d&&vs(f,p);if(h){var g=f[p],v=void 0;if(l&&g&&((v=ve(g))||Pr(g))){var C=a[p];v?ve(C)||(C=[]):Pr(C)||(C={}),g=$_(l,C,g)}g!==void 0&&(a[p]=g)}}}return a}function _s(t){try{return t.responseText}catch{}return null}function ld(t,e){return t?"XDomainRequest,Response:"+_s(t)||"":e}function Ec(t,e){return t?"XMLHttpRequest,Status:"+t[ed]+",Response:"+_s(t)||t.response||"":e}function Sc(t,e){return e&&(_r(e)?t=[e].concat(t):ve(e)&&(t=e.concat(t))),t}function JN(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,kfe,r),n&&s(a,YG,n),a.open(t,e,!o),n&&s(a,YG,n),!o&&i&&s(a,Nfe,i),a}function M_(t){var e={};if(ke(t)){var n=et(t)[Yi](/[\r\n]+/);Q(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=et(r.substring(0,o))[Bo](),s=et(r.substring(o+1));e[i]=s}else e[et(r)]=1}})}return e}function rh(t,e,n){if(!t[n]&&e&&e.getResponseHeader){var r=e.getResponseHeader(n);r&&(t[n]=et(r))}return t}function xc(t,e){var n={};return t[UN]?n=M_(t[UN]()):e&&(n=rh(n,t,Ffe),n=rh(n,t,Lfe),n=rh(n,t,Afe)),n}var Pfe,bfe,Tfe,Rfe,Nbe,kfe,YG,Nfe,Lfe,Afe,Ffe,ua=ne(()=>{Ho();Ne();xt();On();Pfe="getPrototypeOf",bfe=/-([a-z])/g,Tfe=/([^\w\d_$])/g,Rfe=/^(\d+[\w\d_$])/,Nbe=Object[Pfe];kfe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",YG="withCredentials",Nfe="timeout";Lfe="kill-duration",Afe="kill-duration-seconds",Ffe="time-delta-millis"});function JG(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[hs];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!Ve(o[e])}catch{}}return n}function nL(t){KG=t}function ud(t){if(t&&KG){var e=gt("__mockLocation");if(e)return e}return typeof location===fc&&location?location:gt(Ufe)}function bw(){return typeof console!==Zs?console:gt($fe)}function fa(){return!!(typeof JSON===fc&&JSON||gt(GG)!==null)}function br(){return fa()?JSON||gt(GG):null}function Tw(){return gt(Mfe)}function Rw(){return gt(Hfe)}function ou(){var t=zn();return t&&t.product?t.product===Bfe:!1}function iu(){var t=zn();if(t&&(t[Sw]!==ZN||XN===null)){ZN=t[Sw];var e=(ZN||Le)[Bo]();XN=xn(e,eL)||xn(e,tL)}return XN}function kw(t){if(t===void 0&&(t=null),!t){var e=zn()||{};t=e?(e.userAgent||Le)[Bo]():Le}var n=(t||Le)[Bo]();if(xn(n,eL)){var r=An()||{};return ta(parseInt(n[Yi](eL)[1]),r[Ofe]||0)}else if(xn(n,tL)){var o=parseInt(n[Yi](tL)[1]);if(o)return o+4}return null}function zi(t){return(QN===null||t===!1)&&(QN=mw()&&!!zn().sendBeacon),QN}function _c(t){var e=!1;try{e=!!gt("fetch");var n=gt("Request");e&&t&&n&&(e=JG(n,"keepalive"))}catch{}return e}function Nw(){return oh===null&&(oh=typeof XDomainRequest!==Zs,oh&&ih()&&(oh=oh&&!JG(gt(zG),"withCredentials"))),oh}function ih(){var t=!1;try{var e=gt(zG);t=!!e}catch{}return t}function XG(t,e){if(t)for(var n=0;n<t[me];n++){var r=t[n];if(r[fo]&&r[fo]===e)return r}return{}}function rL(t){var e=An();return e&&t?XG(e.querySelectorAll("meta"),t).content:null}function oL(t){var e,n=Kf();if(n){var r=n.getEntriesByType("navigation")||[];e=XG((r[me]>0?r[0]:{}).serverTiming,t).description}return e}var Ofe,Ufe,$fe,GG,Mfe,Hfe,Bfe,eL,tL,zG,XN,ZN,KG,oh,QN,su=ne(()=>{"use strict";Ho();Ne();xt();ua();On();Ofe="documentMode",Ufe="location",$fe="console",GG="JSON",Mfe="crypto",Hfe="msCrypto",Bfe="ReactNative",eL="msie",tL="trident/",zG="XMLHttpRequest",XN=null,ZN=null,KG=!1,oh=null,QN=null});function Wfe(t){t<0&&(t>>>=0),Lw=QG+t&au,Aw=ez-t&au,tz=!0}function jfe(){try{var t=Sn()&2147483647;Wfe((Math.random()*ZG^t)+t)}catch{}}function iL(t){return t>0?Bi(Dc()/au*(t+1))>>>0:0}function Dc(t){var e=0,n=Tw()||Rw();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&au),e===0&&iu()&&(tz||jfe(),e=nz()&au),e===0&&(e=Bi(ZG*Math.random()|0)),t||(e>>>=0),e}function nz(t){Aw=36969*(Aw&65535)+(Aw>>16)&au,Lw=18e3*(Lw&65535)+(Lw>>16)&au;var e=(Aw<<16)+(Lw&65535)>>>0&au|0;return t||(e>>>=0),e}function Fw(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Dc()>>>0,r=0,o=Le;o[me]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(Dc()<<2&4294967295|n&3)>>>0,r=0);return o}var ZG,au,QG,ez,tz,Lw,Aw,H_=ne(()=>{Ne();xt();su();On();ZG=4294967296,au=4294967295,QG=123456789,ez=987654321,tz=!1,Lw=QG,Aw=ez});function oz(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType}function qfe(t,e){var n=e[t.id];if(!n){n={};try{oz(e)&&ht(e,t.id,{e:!1,v:n})}catch{}}return n}function Tr(t,e){return e===void 0&&(e=!1),cd(t+Yfe+++(e?"."+rz:Le)+Vfe)}function B_(t){var e={id:Tr("_aiData-"+(t||Le)+"."+rz),accept:function(n){return oz(n)},get:function(n,r,o,i){var s=n[e.id];return s?s[cd(r)]:(i&&(s=qfe(e,n),s[cd(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}var rz,Vfe,Yfe,sh=ne(()=>{Ne();ua();On();H_();rz="3.3.6",Vfe="."+Fw(6),Yfe=0});function W_(t){return t&&tn(t)&&(t.isVal||t.fb||vs(t,"v")||vs(t,"mrg")||vs(t,"ref")||t.set)}function iz(t,e,n){var r,o=n.dfVal||u_;if(e&&n.fb){var i=n.fb;ve(i)||(i=[i]);for(var s=0;s<i[me];s++){var a=i[s],c=e[a];if(o(c)?r=c:t&&(c=t.cfg[a],o(c)&&(r=c),t.set(t.cfg,En(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function sL(t,e,n){var r=n;if(n&&W_(n)&&(r=iz(t,e,n)),r){W_(r)&&(r=sL(t,e,r));var o;ve(r)?(o=[],o[me]=r[me]):Pr(r)&&(o={}),o&&(Ie(r,function(i,s){s&&W_(s)&&(s=sL(t,e,s)),o[i]=s}),r=o)}return r}function Ow(t,e,n,r){var o,i,s,a=r,c,l,u,f;W_(a)?(o=a.isVal,i=a.set,u=a.rdOnly,f=a.blkVal,c=a.mrg,l=a.ref,!l&&Ve(l)&&(l=!!c),s=iz(t,e,a)):s=r,f&&t.blkVal(e,n);var m,d=!0,p=e[n];(p||!ae(p))&&(m=p,d=!1,o&&m!==s&&!o(m)&&(m=s,d=!0),i&&(m=i(m,s,e),d=m===s)),d?s?m=sL(t,e,s):m=s:(Pr(m)||ve(s))&&c&&s&&(Pr(s)||ve(s))&&Ie(s,function(h,g){Ow(t,m,h,g)}),t.set(e,n,m),l&&t.ref(e,n),u&&t.rdOnly(e,n)}var aL=ne(()=>{Ne();xt()});function cL(t){if(t){var e;if(ve(t)?(e=[],e[me]=t[me]):Pr(t)&&(e={}),e)return Ie(t,function(n,r){e[n]=cL(r)}),e}return t}function Uw(t){if(t){var e=t[da]||t;if(e.cfg&&(e.cfg===t||e.cfg[da]===e))return e}return null}function $w(t){if(t&&(Pr(t)||ve(t)))try{t[sz]=!0}catch{}return t}function lL(t){if(t)try{t[az]=!0}catch{}return t}function j_(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[az],!r&&!n[sz]&&(r=Pr(n)||ve(n))),r}function V_(t){Dr("InvalidAccess:"+t)}var da,sz,az,Y_=ne(()=>{Ne();xt();da=h_("[[ai_dynCfg_1]]"),sz=h_("[[ai_blkDynCfg_1]]"),az=h_("[[ai_frcDynCfg_1]]")});function zfe(t,e,n){ve(e)&&Q(Gfe,function(r){var o=e[r];e[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[Jl](this,i);return Mw(t,e,n,"Patching"),a}})}function q_(t,e){var n=d_(t,e);return n&&n.get}function Kfe(t,e,n,r){var o={n,h:[],trk:function(l){l&&l.fn&&(vt(o.h,l)===-1&&o.h[Ge](l),t.trk(l,o))},clr:function(l){var u=vt(o.h,l);u!==-1&&o.h[ia](u,1)}},i=!0,s=!1;function a(){i&&(s=s||j_(a,t,r),r&&!r[da]&&s&&(r=Mw(t,r,n,"Converting")),i=!1);var l=t.act;return l&&o.trk(l),r}a[t.prop]={chng:function(){t.add(o)}};function c(l){if(r!==l){a[t.ro]&&!t.upd&&V_("["+n+"] is read-only:"+Ce(e)),i&&(s=s||j_(a,t,r),i=!1);var u=s&&a[t.rf];if(s)if(u){Ie(r,function(m){r[m]=l?l[m]:gi});try{Ie(l,function(m,d){Hw(t,r,m,d)}),l=r}catch(m){ah((t.hdlr||{})[kt],n,"Assigning",m),s=!1}}else r&&r[da]&&Ie(r,function(m){var d=q_(r,m);if(d){var p=d[t.prop];p&&p.chng()}});if(l!==r){var f=l&&j_(a,t,l);!u&&f&&(l=Mw(t,l,n,"Converting")),r=l,s=f}t.add(o)}}ht(e,o.n,{g:a,s:c})}function Hw(t,e,n,r){if(e){var o=q_(e,n),i=o&&!!o[t.prop];i?e[n]=r:Kfe(t,e,n,r)}return e}function G_(t,e,n,r){if(e){var o=q_(e,n),i=o&&!!o[t.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{$w(e)}catch(l){ah((t.hdlr||{})[kt],n,"Blocking",l)}try{Hw(t,e,n,e[n]),o=q_(e,n)}catch(l){ah((t.hdlr||{})[kt],n,"State",l)}}s&&(o[t.rf]=s),a&&(o[t.ro]=a),c&&(o[t.blkVal]=!0)}return e}function Mw(t,e,n,r){try{Ie(e,function(o,i){Hw(t,e,o,i)}),e[da]||($o(e,da,{get:function(){return t.hdlr}}),zfe(t,e,n))}catch(o){ah((t.hdlr||{})[kt],n,r,o)}return e}var Gfe,ah,cz=ne(()=>{Ne();On();xt();Y_();Gfe=["push","pop","shift","unshift","splice"],ah=function(t,e,n,r){t&&t[gc](3,108,"".concat(n," [").concat(e,"] failed - ")+Ce(r))}});function lz(t){var e=Wp(Bw+"get"+t.uid+Ww),n=Wp(Bw+"ro"+t.uid+Ww),r=Wp(Bw+"rf"+t.uid+Ww),o=Wp(Bw+"blkVal"+t.uid+Ww),i=Wp(Bw+"dtl"+t.uid+Ww),s=null,a=null,c;function l(d,p){var h=c.act;try{c.act=d,d&&d[i]&&(Q(d[i],function(v){v.clr(d)}),d[i]=[]),p({cfg:t.cfg,set:t.set.bind(t),setDf:t.setDf.bind(t),ref:t.ref.bind(t),rdOnly:t.rdOnly.bind(t)})}catch(v){var g=t[kt];throw g&&g[gc](1,107,Ce(v)),v}finally{c.act=h||null}}function u(){if(s){var d=s;s=null,a&&a[vc](),a=null;var p=[];if(Q(d,function(h){if(h&&(h[i]&&(Q(h[i],function(g){g.clr(h)}),h[i]=null),h.fn))try{l(h,h.fn)}catch(g){p[Ge](g)}}),s)try{u()}catch(h){p[Ge](h)}p[me]>0&&kG("Watcher error(s): ",p)}}function f(d){if(d&&d.h[me]>0){s||(s=[]),a||(a=ui(function(){a=null,u()},0));for(var p=0;p<d.h[me];p++){var h=d.h[p];h&&vt(s,h)===-1&&s[Ge](h)}}}function m(d,p){if(d){var h=d[i]=d[i]||[];vt(h,p)===-1&&h[Ge](p)}}return c={prop:e,ro:n,rf:r,blkVal:o,hdlr:t,add:f,notify:u,use:l,trk:m},c}var Bw,Ww,uz=ne(()=>{Ne();NG();xt();Bw="[[ai_",Ww="]]"});function Jfe(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return ht(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function Xfe(t,e,n){var r=Uw(e);if(r)return r;var o=Tr("dyncfg",!0),i=e&&n!==!1?e:cL(e),s;function a(){s.notify()}function c(g,v,C){try{g=Hw(s,g,v,C)}catch(w){ah(t,v,"Setting value",w)}return g[v]}function l(g){return Jfe(s,g)}function u(g,v){s.use(null,function(C){var w=s.upd;try{Ve(v)||(s.upd=v),g(C)}finally{s.upd=w}})}function f(g,v){var C;return G_(s,g,v,(C={},C[0]=!0,C))[v]}function m(g,v){var C;return G_(s,g,v,(C={},C[1]=!0,C))[v]}function d(g,v){var C;return G_(s,g,v,(C={},C[2]=!0,C))[v]}function p(g,v){return v&&Ie(v,function(C,w){Ow(h,g,C,w)}),g}var h={uid:null,cfg:i,logger:t,notify:a,set:c,setDf:p,watch:l,ref:f,rdOnly:m,blkVal:d,_block:u};return ht(h,"uid",{c:!1,e:!1,w:!1,v:o}),s=lz(h),Mw(s,i,"config","Creating"),h}function Zfe(t,e){t?(t[Gp](e),t[gc](2,108,e)):V_(e)}function jt(t,e,n,r){var o=Xfe(n,t||{},r);return e&&o.setDf(o.cfg,e),o}function mr(t,e,n){var r=t[da]||t;return r.cfg&&(r.cfg===t||r.cfg[da]===r)?r[oa](e):(Zfe(n,VG+Ce(t)),jt(t,null,n)[oa](e))}var cu=ne(()=>{Ne();sh();On();xt();aL();cz();uz();Y_()});function Ic(t,e){if(t&&t[Vi])return t[Vi](e)}function z_(t,e,n){var r;return n||(r=qi(function(o){n=o})),t&&Vp(t)>0?hi(Ic(t[0],e),function(){z_(jp(t,1),e,n)}):n(),r}var uL=ne(()=>{od();Ne();xt()});var fz,fL,dL=ne(()=>{fz=500,fL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function Qfe(t,e,n){return!t&&ae(t)?e:ea(t)?t:En(t)[Bo]()==="true"}function mL(t){return{mrg:!0,v:t}}function ch(t,e,n){return{fb:n,isVal:t,v:e}}function Ki(t,e){return{fb:e,set:Qfe,v:!!t}}var pL=ne(()=>{Ne();xt()});function ede(t,e){return function(){var n=arguments,r=gL(e);if(r){var o=r.listener;o&&o[t]&&o[t][Jl](o,n)}}}function tde(){var t=gt("Microsoft");return t&&(J_=t.ApplicationInsights),J_}function gL(t){var e=J_;return!e&&t.disableDbgExt!==!0&&(e=J_||tde()),e?e.ChromeDbgExt:null}function dz(t){if(!K_){K_={};for(var e=0;e<hL[me];e++)K_[hL[e]]=ede(hL[e],t)}return K_}var hL,J_,K_,vL=ne(()=>{Ne();xt();On();hL=[eh,nu,th,la],J_=null});function mz(t){return t?'"'+t[Es](/\"/g,Le)+'"':Le}function wL(t,e){var n=bw();if(n){var r="log";n[t]&&(r=t),Re(n[r])&&n[r](e)}}function Pc(t,e){return(t||{})[kt]||new lu(e)}function yL(t){return t||new lu}function se(t,e,n,r,o,i){i===void 0&&(i=!1),yL(t)[gc](e,n,r,o,i)}function mo(t,e){yL(t)[Gp](e)}function CL(t,e,n){yL(t).logInternalMessage(e,n)}var lh,pz,nde,rde,ode,ide,sde,fd,lu,Ds=ne(()=>{"use strict";dr();Ne();cu();xt();vL();su();On();pz="warnToConsole",nde="AI (Internal): ",rde="AI: ",ode="AITR_",ide={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},sde=(lh={},lh[0]=null,lh[1]="errorToConsole",lh[2]=pz,lh[3]="debugToConsole",lh);fd=function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[Xp]=e,i[ca]=(r?rde:nde)+e;var s=Le;fa()&&(s=br().stringify(o));var a=(n?" message:"+mz(n):Le)+(o?" props:"+mz(s):Le);i[ca]+=a}return t.dataType="MessageData",t}();lu=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;Je(t,this,function(l){c=f(e||{}),l.consoleLoggingLevel=function(){return o},l[gc]=function(p,h,g,v,C){C===void 0&&(C=!1);var w=new fd(h,g,C,v);if(a)throw Ce(w);var y=sde[p]||pz;if(Ve(w[ca]))d("throw"+(p===1?"Critical":"Warning"),w);else{if(C){var S=+w[Xp];!r[S]&&o>=p&&(l[y](w[ca]),r[S]=!0)}else o>=p&&l[y](w[ca]);u(p,w)}},l.debugToConsole=function(p){wL("debug",p),d("warning",p)},l[Gp]=function(p){wL("warn",p),d("warning",p)},l.errorToConsole=function(p){wL("error",p),d("error",p)},l.resetInternalMessageCount=function(){n=0,r={}},l.logInternalMessage=u,l[Vi]=function(p){c&&c.rm(),c=null};function u(p,h){if(!m()){var g=!0,v=ode+h[Xp];if(r[v]?g=!1:r[v]=!0,g&&(p<=i&&(l.queue[Ge](h),n++,d(p===1?"error":"warn",h)),n===s)){var C="Internal events throttle limit per PageView reached for this app.",w=new fd(23,C,!1);l.queue[Ge](w),p===1?l.errorToConsole(C):l[Gp](C)}}}function f(p){return mr(jt(p,ide,l).cfg,function(h){var g=h.cfg;o=g[b_],i=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function m(){return n>=s}function d(p,h){var g=gL(e||{});g&&g[jo]&&g[jo](p,h)}})}return t.__ieDyn=1,t}()});function IL(){!ma&&(ma=uG(function(){return An()}))}function cde(t,e){var n=bc[uu]||Q_[uu];return n||(n=bc[uu]=bc(t,e),Q_[uu]=n),n}function Z_(t){return t?t.isEnabled():!0}function _z(t,e){return e&&t&&ve(t.ignoreCookies)?vt(t.ignoreCookies,e)!==-1:!1}function lde(t,e){return e&&t&&ve(t.blockedCookies)&&vt(t.blockedCookies,e)!==-1?!0:_z(t,e)}function Cz(t,e){var n=e[Zl];if(ae(n)){var r=void 0;Ve(t[vz])||(r=!t[vz]),Ve(t[_L])||(r=!t[_L]),n=r}return n}function PL(t,e){var n;if(t)n=t.getCookieMgr();else if(e){var r=e.cookieCfg;r&&r[uu]?n=r[uu]:n=bc(e)}return n||(n=cde(e,(t||{})[kt])),n}function bc(t,e){var n,r,o,i,s,a,c,l;t=jt(t||Q_,null,e).cfg,i=mr(t,function(f){f.setDf(f.cfg,ade),n=f.ref(f.cfg,"cookieCfg"),r=n[U_]||"/",o=n[O_],s=Cz(t,n)!==!1,a=n.getCookie||ude,c=n.setCookie||xz,l=n.delCookie||xz},e);var u={isEnabled:function(){var f=Cz(t,n)!==!1&&s&&uh(e),m=Q_[uu];return f&&m&&u!==m&&(f=Z_(m)),f},setEnabled:function(f){s=f!==!1,n[Zl]=f},set:function(f,m,d,p,h){var g=!1;if(Z_(u)&&!lde(n,f)){var v={},C=et(m||Le),w=Wi(C,";");if(w!==-1&&(C=et(Gf(m,w)),v=Dz(Gn(m,w+1))),Gi(v,O_,p||o,gs,Ve),!ae(d)){var y=iu();if(Ve(v[SL])){var S=Sn(),D=S+d*1e3;if(D>0){var x=new Date;x.setTime(D),Gi(v,SL,Ez(x,y?hz:gz)||Ez(x,y?hz:gz)||Le,gs)}}y||Gi(v,"max-age",Le+d,null,Ve)}var A=ud();A&&A.protocol==="https:"&&(Gi(v,"secure",null,null,Ve),xL===null&&(xL=!eD((zn()||{})[Sw])),xL&&Gi(v,"SameSite","None",null,Ve)),Gi(v,U_,h||r,null,Ve),c(f,Sz(C,v)),g=!0}return g},get:function(f){var m=Le;return Z_(u)&&!_z(n,f)&&(m=a(f)),m},del:function(f,m){var d=!1;return Z_(u)&&(d=u.purge(f,m)),d},purge:function(f,m){var d,p=!1;if(uh(e)){var h=(d={},d[U_]=m||"/",d[SL]="Thu, 01 Jan 1970 00:00:01 GMT",d);iu()||(h["max-age"]="0"),l(f,Sz(Le,h)),p=!0}return p},unload:function(f){i&&i.rm(),i=null}};return u[uu]=u,u}function uh(t){if(X_===null){X_=!1,!ma&&IL();try{var e=ma.v||{};X_=e[DL]!==void 0}catch(n){se(t,2,68,"Cannot access document.cookie - "+nn(n),{exception:Ce(n)})}}return X_}function Dz(t){var e={};if(t&&t[me]){var n=et(t)[Yi](";");Q(n,function(r){if(r=et(r||Le),r){var o=Wi(r,"=");o===-1?e[r]=null:e[et(Gf(r,o))]=et(Gn(r,o+1))}})}return e}function Ez(t,e){return Re(t[e])?t[e]():null}function Sz(t,e){var n=t||Le;return Ie(e,function(r,o){n+="; "+r+(ae(o)?Le:"="+o)}),n}function ude(t){var e=Le;if(!ma&&IL(),ma.v){var n=ma.v[DL]||Le;wz!==n&&(yz=Dz(n),wz=n),e=et(yz[t]||Le)}return e}function xz(t,e){!ma&&IL(),ma.v&&(ma.v[DL]=t+"="+e)}function eD(t){return ke(t)?!!(xn(t,"CPU iPhone OS 12")||xn(t,"iPad; CPU OS 12")||xn(t,"Macintosh; Intel Mac OS X 10_14")&&xn(t,"Version/")&&xn(t,"Safari")||xn(t,"Macintosh; Intel Mac OS X 10_14")&&Jf(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||xn(t,"Chrome/5")||xn(t,"Chrome/6")||xn(t,"UnrealEngine")&&!xn(t,"Chrome")||xn(t,"UCBrowser/12")||xn(t,"UCBrowser/11")):!1}var EL,dd,hz,gz,DL,SL,vz,_L,uu,X_,xL,wz,ma,yz,Q_,ade,bL=ne(()=>{Ne();pL();cu();xt();Ds();su();ua();On();hz="toGMTString",gz="toUTCString",DL="cookie",SL="expires",vz="isCookieUseDisabled",_L="disableCookiesUsage",uu="_ckMgr",X_=null,xL=null,wz=null,yz={},Q_={},ade=(EL={cookieCfg:mL((dd={},dd[O_]={fb:"cookieDomain",dfVal:ru},dd.path={fb:"cookiePath",dfVal:ru},dd.enabled=gi,dd.ignoreCookies=gi,dd.blockedCookies=gi,dd)),cookieDomain:gi,cookiePath:gi},EL[_L]=gi,EL)});function dde(t){t.h=null;var e=t.cb;t.cb=[],Q(e,function(n){qn(n.fn,[n.arg])})}function fu(t,e,n,r){Q(t,function(o){o&&o[e]&&(n?(n.cb[Ge]({fn:r,arg:o}),n.h=n.h||ui(dde,0,n)):qn(r,[o]))})}var fde,jw,TL=ne(()=>{dr();od();Ne();cu();xt();On();fde={perfEvtsSendAll:!1};jw=function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=jt(e,fde);r=s[oa](function(a){n=!!a.cfg.perfEvtsSendAll}),Je(t,this,function(a){ht(a,"listeners",{g:function(){return o}}),a[Kp]=function(c){o[Ge](c)},a[zp]=function(c){for(var l=vt(o,c);l>-1;)o[ia](l,1),l=vt(o,c)},a[eh]=function(c){fu(o,eh,i,function(l){l[eh](c)})},a[nu]=function(c,l){fu(o,nu,i,function(u){u[nu](c,l)})},a[th]=function(c,l){fu(o,th,l?i:null,function(u){u[th](c,l)})},a[la]=function(c){c&&(n||!c[xw]())&&fu(o,la,null,function(l){c.isAsync?ui(function(){return l[la](c)},0):l[la](c)})},a[L_]=function(c){c&&c[me]&&fu(o,L_,i,function(l){l[L_](c)})},a[A_]=function(c){c&&c[tu]&&fu(o,A_,i,function(l){l[A_](c)})},a[F_]=function(c,l){if(c>0){var u=l||0;fu(o,F_,i,function(f){f[F_](c,u)})}},a[Vi]=function(c){var l=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[vc](),i.h=null,i.cb=[]},u;if(fu(o,"unload",null,function(f){var m=f[Vi](c);m&&(u||(u=[]),u[Ge](m))}),u)return qi(function(f){return hi(jG(u),function(){l(),f()})});l()}})}return t.__ieDyn=1,t}()});function mn(t,e,n,r,o){if(t){var i=t;if(i[nh]&&(i=i[nh]()),i){var s=void 0,a=i[td](RL);try{if(s=i.create(e(),r,o),s){if(a&&s[Ss]&&(s[Ss](md[kL],a),a[td]&&a[Ss])){var c=a[td](md[Vw]);c||(c=[],a[Ss](md[Vw],c)),c[Ge](s)}return i[Ss](RL,s),n(s)}}catch(l){s&&s[Ss]&&s[Ss]("exception",l)}finally{s&&i.fire(s),i[Ss](RL,a)}}}return n()}function NL(){return mde}var fh,kL,Vw,mde,md,Yw,RL,tD=ne(()=>{dr();Ne();xt();On();fh="ctx",kL="ParentContextKey",Vw="ChildrenContextKey",mde=null,md=function(){function t(e,n,r){var o=this;if(o.start=Sn(),o[fo]=e,o.isAsync=r,o[xw]=function(){return!1},Re(n)){var i;ht(o,"payload",{g:function(){return!i&&Re(n)&&(i=n(),n=null),i}})}o[td]=function(s){return s?s===t[kL]||s===t[Vw]?o[s]:(o[fh]||{})[s]:null},o[Ss]=function(s,a){if(s)if(s===t[kL])o[s]||(o[xw]=function(){return!0}),o[s]=a;else if(s===t[Vw])o[s]=a;else{var c=o[fh]=o[fh]||{};c[s]=a}},o.complete=function(){var s=0,a=o[td](t[Vw]);if(ve(a))for(var c=0;c<a[me];c++){var l=a[c];l&&(s+=l.time)}o.time=Sn()-o.start,o.exTime=o.time-s,o.complete=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),Yw=function(){function t(e){this.ctx={},Je(t,this,function(n){n.create=function(r,o,i){return new md(r,o,i)},n.fire=function(r){r&&(r.complete(),e&&Re(e[la])&&e[la](r))},n[Ss]=function(r,o){if(r){var i=n[fh]=n[fh]||{};i[r]=o}},n[td]=function(r){return(n[fh]||{})[r]}})}return t.__ieDyn=1,t}(),RL="CoreUtils.doPerf"});function qw(){var t=pd();return Gn(t,0,8)+"-"+Gn(t,8,12)+"-"+Gn(t,12,16)+"-"+Gn(t,16,20)+"-"+Gn(t,20)}function pd(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Le,n,r=0;r<4;r++)n=Dc(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(Dc()&3)|0];return na(e,0,8)+na(e,9,4)+"4"+na(e,13,3)+o+na(e,16,3)+na(e,19,12)}var LL=ne(()=>{"use strict";Ne();On();H_()});function Tc(t,e,n){return t&&t[me]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function Pz(t,e,n){return Tc(t,e)?t:n}function bz(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[me]<2;)e="0"+e;return e}function OL(t,e,n,r){return{version:Tc(r,2,FL)?r:AL,traceId:hd(t)?t:pd(),spanId:gd(e)?e:Gf(pd(),16),traceFlags:n>=0&&n<=255?n:1}}function Gw(t,e){if(!t||(ve(t)&&(t=t[0]||""),!t||!ke(t)||t[me]>8192))return null;if(t.indexOf(",")!==-1){var n=t[Yi](",");t=n[e>0&&n[me]>e?e:0]}var r=pde.exec(et(t));return!r||r[1]===FL||r[2]===nD||r[3]===rD?null:{version:(r[1]||Le)[Bo](),traceId:(r[2]||Le)[Bo](),spanId:(r[3]||Le)[Bo](),traceFlags:parseInt(r[4],16)}}function hd(t){return Tc(t,32,nD)}function gd(t){return Tc(t,16,rD)}function oD(t){return!(!t||!Tc(t[Jp],2,FL)||!Tc(t.traceId,32,nD)||!Tc(t.spanId,16,rD)||!Tc(bz(t[rd]),2))}function UL(t){return oD(t)?(t[rd]&Iz)===Iz:!1}function $L(t){if(t){var e=bz(t[rd]);Tc(e,2)||(e="01");var n=t[Jp]||AL;return n!=="00"&&n!=="ff"&&(n=AL),"".concat(n.toLowerCase(),"-").concat(Pz(t.traceId,32,nD).toLowerCase(),"-").concat(Pz(t.spanId,16,rD).toLowerCase(),"-").concat(e.toLowerCase())}return""}function ML(t){var e="traceparent",n=Gw(rL(e),t);return n||(n=Gw(oL(e),t)),n}var pde,AL,FL,nD,rD,Iz,HL=ne(()=>{Ne();xt();LL();su();On();pde=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,AL="00",FL="ff",nD="00000000000000000000000000000000",rD="0000000000000000",Iz=1});function Rc(t){return hde.get(t,"state",{},!0)}function BL(t,e){for(var n=[],r=null,o=t[mi](),i;o;){var s=o[Xl]();if(s){r&&r[eu]&&s[Vo]&&r[eu](s),i=Rc(s);var a=!!i[Wo];s[Wo]&&(a=s[Wo]()),a||n[Ge](s),r=s,o=o[mi]()}}Q(n,function(c){var l=t[dn]();c[wc](t.getCfg(),l,e,t[mi]()),i=Rc(c),!c[dn]&&!i[dn]&&(i[dn]=l),i[Wo]=!0,delete i[di]})}function iD(t){return t.sort(function(e,n){var r=0;if(n){var o=n[Vo];e[Vo]?r=o?e[ad]-n[ad]:1:o&&(r=-1)}else r=e?1:-1;return r})}function Tz(t){var e={};return{getName:function(){return e[fo]},setName:function(n){t&&t.setName(n),e[fo]=n},getTraceId:function(){return e.traceId},setTraceId:function(n){t&&t.setTraceId(n),hd(n)&&(e.traceId=n)},getSpanId:function(){return e.spanId},setSpanId:function(n){t&&t.setSpanId(n),gd(n)&&(e.spanId=n)},getTraceFlags:function(){return e[rd]},setTraceFlags:function(n){t&&t.setTraceFlags(n),e[rd]=n}}}var hde,WL=ne(()=>{"use strict";Ne();xt();sh();On();HL();hde=B_("plugin")});function vde(t,e,n){for(;t;){if(t[Xl]()===n)return t;t=t[mi]()}return du([n],e.config||{},e)}function jL(t,e,n,r){var o=null,i=[];e||(e=jt({},null,n[kt])),r!==null&&(o=r?vde(t,n,r):t);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return Pc(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:u,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(d){o=d},iterate:m,onComplete:a}};function a(d,p){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];d&&i[Ge]({func:d,self:Ve(p)?s.ctx:p,args:h})}function c(){var d=o;if(o=d?d[mi]():null,!d){var p=i;p&&p[me]>0&&(Q(p,function(h){try{h.func.call(h.self,h.args)}catch(g){se(n[kt],2,73,"Unexpected Exception during onComplete - "+Ce(g))}}),i=[])}return d}function l(d,p){var h=null,g=e.cfg;if(g&&d){var v=g[yc];!v&&p&&(v={}),g[yc]=v,v=e.ref(g,yc),v&&(h=v[d],!h&&p&&(h={}),v[d]=h,h=e.ref(v,d))}return h}function u(d,p){var h=l(d,!0);return p&&Ie(p,function(g,v){if(ae(h[g])){var C=e.cfg[g];(C||!ae(C))&&(h[g]=C)}Ow(e,h,g,v)}),e.setDf(h,p)}function f(d,p,h){h===void 0&&(h=!1);var g,v=l(d,!1),C=e.cfg;return v&&(v[p]||!ae(v[p]))?g=v[p]:(C[p]||!ae(C[p]))&&(g=C[p]),g||!ae(g)?g:h}function m(d){for(var p;p=s._next();){var h=p[Xl]();h&&d(h)}}return s}function po(t,e,n,r){var o=jt(e),i=jL(t,o,n,r),s=i.ctx;function a(l){var u=i._next();return u&&u[Vo](l,s),!u}function c(l,u){return l===void 0&&(l=null),ve(l)&&(l=du(l,o.cfg,n,u)),po(l||s[mi](),o.cfg,n,u)}return s[Kn]=a,s[aa]=c,s}function dh(t,e,n){var r=jt(e.config),o=jL(t,r,e,n),i=o.ctx;function s(c){var l=o._next();return l&&l[Vi](i,c),!l}function a(c,l){return c===void 0&&(c=null),ve(c)&&(c=du(c,r.cfg,e,l)),dh(c||i[mi](),e,l)}return i[Kn]=s,i[aa]=a,i}function zw(t,e,n){var r=jt(e.config),o=jL(t,r,e,n),i=o.ctx;function s(c){return i.iterate(function(l){Re(l[Qf])&&l[Qf](i,c)})}function a(c,l){return c===void 0&&(c=null),ve(c)&&(c=du(c,r.cfg,e,l)),zw(c||i[mi](),e,l)}return i[Kn]=s,i[aa]=a,i}function du(t,e,n,r){var o=null,i=!r;if(ve(t)&&t[me]>0){var s=null;Q(t,function(a){if(!i&&r===a&&(i=!0),i&&a&&Re(a[Vo])){var c=wde(a,e,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?du([r],e,n):o}function wde(t,e,n){var r=null,o=Re(t[Vo]),i=Re(t[eu]),s;t?s=t[sa]+"-"+t[ad]+"-"+Nz++:s="Unknown-0-"+Nz++;var a={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:u,unload:f,update:m,_id:s,_setNext:function(d){r=d}};function c(){var d;return t&&Re(t[kz])&&(d=t[kz]()),d||(d=po(a,e,n)),d}function l(d,p,h,g,v){var C=!1,w=t?t[sa]:gde,y=d[Rz];return y||(y=d[Rz]={}),d.setNext(r),t&&mn(d[dn](),function(){return w+":"+h},function(){y[s]=!0;try{var S=r?r._id:Le;S&&(y[S]=!1),C=p(d)}catch(x){var D=r?y[r._id]:!0;D&&(C=!0),(!r||!D)&&se(d[jo](),1,73,"Plugin ["+w+"] failed during "+h+" - "+Ce(x)+", run flags: "+Ce(y))}},g,v),C}function u(d,p){p=p||c();function h(g){if(!t||!o)return!1;var v=Rc(t);return v[di]||v[Iw]?!1:(i&&t[eu](r),t[Vo](d,g),!0)}l(p,h,"processTelemetry",function(){return{item:d}},!d.sync)||p[Kn](d)}function f(d,p){function h(){var g=!1;if(t){var v=Rc(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[di]&&(v[dn]=null,v[di]=!0,v[Wo]=!1,t[di]&&t[di](d,p)===!0&&(g=!0))}return g}l(d,h,"unload",function(){},p.isAsync)||d[Kn](p)}function m(d,p){function h(){var g=!1;if(t){var v=Rc(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[di]&&t[Qf]&&t[Qf](d,p)===!0&&(g=!0)}return g}l(d,h,"update",function(){},!1)||d[Kn](p)}return lo(a)}var gde,Rz,kz,Nz,VL,sD=ne(()=>{"use strict";Ne();aL();cu();xt();Ds();ua();On();tD();WL();gde="TelemetryPluginChain",Rz="_hasRun",kz="_getTelCtx",Nz=0;VL=function(){function t(e,n,r,o){var i=this,s=po(e,n,r,o);vi(i,s,Ir(s))}return t}()});function vd(){var t=[];function e(r){r&&t[Ge](r)}function n(r,o){Q(t,function(i){try{i(r,o)}catch(s){se(r[jo](),2,73,"Unexpected error calling unload handler - "+Ce(s))}}),t=[]}return{add:e,run:n}}var aD=ne(()=>{Ne();xt();Ds()});function YL(t,e){Kw=t,Jw=e}function Xw(){var t=[];function e(r){var o=t;t=[],Q(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){se(r,2,73,"Unloading:"+Ce(s))}}),Kw&&o[me]>Kw&&(Jw?Jw("doUnload",o):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function n(r){r&&(ys(t,r),Kw&&t[me]>Kw&&(Jw?Jw("Add",t):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:e,add:n}}var Kw,Jw,cD=ne(()=>{Ne();xt();Ds()});var qL,mu,yde,kc,GL=ne(()=>{"use strict";dr();Ne();cu();xt();Ds();ua();On();sD();aD();cD();mu="getPlugin",yde=(qL={},qL[yc]={isVal:ru,v:{}},qL),kc=function(){function t(){var e=this,n,r,o,i,s;l(),Je(t,e,function(u){u[wc]=function(f,m,d,p){c(f,m,p),n=!0},u[di]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,h=!1,g=f||dh(null,d,o&&o[mu]?o[mu]():o),v=m||{reason:0,isAsync:!1};function C(){h||(h=!0,i.run(g,m),s.run(g[jo]()),p===!0&&g[Kn](v),l())}return!u[Ql]||u[Ql](g,v,C)!==!0?C():p=!0,p},u[Qf]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,h=!1,g=f||zw(null,d,o&&o[mu]?o[mu]():o),v=m||{reason:0};function C(){h||(h=!0,c(g.getCfg(),g.core(),g[mi]()))}return!u._doUpdate||u._doUpdate(g,v,C)!==!0?C():p=!0,p},Cc(u,"_addUnloadCb",function(){return i},"add"),Cc(u,"_addHook",function(){return s},"add"),ht(u,"_unloadHooks",{g:function(){return s}})}),e[jo]=function(u){return a(u)[jo]()},e[Wo]=function(){return n},e.setInitialized=function(u){n=u},e[eu]=function(u){o=u},e[Kn]=function(u,f){f?f[Kn](u):o&&Re(o[Vo])&&o[Vo](u,null)},e._getTelCtx=a;function a(u){u===void 0&&(u=null);var f=u;if(!f){var m=r||po(null,{},e[dn]);o&&o[mu]?f=m[aa](null,o[mu]):f=m[aa](null,o)}return f}function c(u,f,m){jt(u,yde,Pc(f)),!m&&f&&(m=f[P_]()[mi]());var d=o;o&&o[mu]&&(d=o[mu]()),e[dn]=f,r=po(m,u,f,d)}function l(){n=!1,e[dn]=null,r=null,o=null,s=Xw(),i=vd()}}return t.__ieDyn=1,t}()});function Cde(t,e,n){var r={id:e,fn:n};ys(t,r);var o={remove:function(){Q(t,function(i,s){if(i.id===r.id)return t[ia](s,1),-1})}};return o}function Ede(t,e,n){for(var r=!1,o=t[me],i=0;i<o;++i){var s=t[i];if(s)try{if(s.fn[Jl](null,[e])===!1){r=!0;break}}catch(a){se(n,2,64,"Telemetry initializer failed: "+nn(a),{exception:Ce(a)},!0)}}return!r}var Lz,Az=ne(()=>{Ho();dr();Ne();xt();GL();Ds();ua();On();Lz=function(t){Mo(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),Je(e,n,function(s,a){s.addTelemetryInitializer=function(c){return Cde(o,r++,c)},s[Vo]=function(c,l){Ede(o,c,l?l[jo]():s[jo]())&&s[Kn](c,l)},s[Ql]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e}(kc)});function Ide(t,e){return new Yw(e)}function Pde(t,e,n){var r=[],o=[],i={};return Q(n,function(s){(ae(s)||ae(s[wc]))&&Ln($z);var a=s[ad],c=s[sa];s&&a&&(ae(i[a])?i[a]=c:mo(t,"Two extensions have same priority #"+a+" - "+i[a]+", "+c)),!a||a<e?r[Ge](s):o[Ge](s)}),{core:r,channels:o}}function Oz(t,e){var n=!1;return Q(e,function(r){if(r===t)return n=!0,-1}),n}function KL(t,e,n,r){n&&Ie(n,function(o,i){r&&Pr(i)&&Pr(e[o])&&KL(t,e[o],i,r),r&&Pr(i)&&Pr(e[o])?KL(t,e[o],i,r):t.set(e,o,i)})}function Uz(t,e){var n=null,r=-1;return Q(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function bde(t,e){var n=Uz(t,e).l;return n||(n={w:e,rm:function(){var r=Uz(t,e);r.i!==-1&&t[ia](r.i,1)}},t[Ge](n)),n}function Tde(t,e,n){Q(e,function(r){var o=mr(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function Rde(t,e,n,r){return e.add(t[oa](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[zp](r),r=null),n&&!r&&i!==!0&&(r=dz(o.cfg),n[Kp](r))})),r}function kde(t){return ht({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var pu,$z,Sde,Fz,xde,_de,Dde,zL,Nc,Mz=ne(()=>{"use strict";Ho();dr();od();Ne();cu();FN();xt();uL();dL();bL();sh();vL();Ds();ua();On();TL();tD();sD();WL();Az();aD();cD();$z="Plugins must provide initialize method",Sde="_notificationManager",Fz="SDK is still unloading...",xde="SDK is not initialized",_de=100,Dde=5e4,zL=ws((pu={cookieCfg:{}},pu[sd]={rdOnly:!0,ref:!0,v:[]},pu[id]={rdOnly:!0,ref:!0,v:[]},pu[yc]={ref:!0,v:{}},pu[N_]=gi,pu.loggingLevelConsole=0,pu.diagnosticLogInterval=gi,pu));Nc=function(){function t(){var e,n,r,o,i,s,a,c,l,u,f,m,d,p,h,g,v,C,w,y,S,D,x,A,F,k,E,_,T,I,b,R,L;Je(t,this,function(N){q(),N._getDbgPlgTargets=function(){return[x,o]},N[Wo]=function(){return n},N.activeStatus=function(){return k},N._setPendingStatus=function(){k=3},N[wc]=function(j,oe,xe,le){d&&Ln(Fz),N[Wo]()&&Ln("Core cannot be initialized more than once"),e=jt(j,zL,xe||N[kt],!1),j=e.cfg,yt(e[oa](function(rt){var pt=rt.cfg,vn=k===3;if(!vn){_=pt.initInMemoMaxSize||_de;var Bn=pt.instrumentationKey,Ar=pt.endpointUrl;if(ae(Bn)){S=null,k=fi.INACTIVE;var Fr="Please provide instrumentation key";n?(se(r,1,100,Fr),W()):Ln(Fr);return}var Si=[];if(co(Bn)?(Si[Ge](Bn),S=null):S=Bn,co(Ar)?(Si[Ge](Ar),E=null):E=Ar,Si[me]){T=!1,k=3;var Qn=ru(pt.initTimeOut)?pt.initTimeOut:Dde,Oa=WG(Si);I=ui(function(){I=null,T||B()},Qn),hi(Oa,function(Z){try{if(T)return;if(!Z.rejected){var ie=Z[Zf];if(ie&&ie[me]){var ge=ie[0];if(S=ge&&ge[Zf],ie[me]>1){var be=ie[1];E=be&&be[Zf]}}S&&(j.instrumentationKey=S,j.endpointUrl=E)}B()}catch{T||B()}})}else B();var M=rt.ref(rt.cfg,yc);Ie(M,function(Z){rt.ref(M,Z)})}})),i=le,w=Rde(e,C,i&&N[Cw](),w),Xt(),N[kt]=xe;var De=j[sd];if(u=[],u[Ge].apply(u,v_(v_([],oe,!1),De,!1)),f=j[id],Be(null),(!m||m[me]===0)&&Ln("No "+id+" available"),f&&f[me]>1){var Ze=N[Xl]("TeeChannelController");(!Ze||!Ze.plugin)&&se(r,1,28,"TeeChannel required")}Tde(j,D,r),D=null,n=!0,k===fi.ACTIVE&&W()},N.getChannels=function(){var j=[];return m&&Q(m,function(oe){j[Ge](oe)}),lo(j)},N.track=function(j){mn(N[nh](),function(){return"AppInsightsCore:track"},function(){j===null&&(Dt(j),Ln("Invalid telemetry item")),!j[fo]&&ae(j[fo])&&(Dt(j),Ln("telemetry name required")),j.iKey=j.iKey||S,j.time=j.time||xs(new Date),j.ver=j.ver||"4.0",!d&&N[Wo]()&&k===fi.ACTIVE?ce()[Kn](j):k!==fi.INACTIVE&&o[me]<=_&&o[Ge](j)},function(){return{item:j}},!j.sync)},N[P_]=ce,N[Cw]=function(){return i||(i=new jw(e.cfg),N[Sde]=i),i},N[Kp]=function(j){N.getNotifyMgr()[Kp](j)},N[zp]=function(j){i&&i[zp](j)},N.getCookieMgr=function(){return c||(c=bc(e.cfg,N[kt])),c},N.setCookieMgr=function(j){c!==j&&(Ic(c,!1),c=j)},N[nh]=function(){return s||a||NL()},N.setPerfMgr=function(j){s=j},N.eventCnt=function(){return o[me]},N.releaseQueue=function(){if(n&&o[me]>0){var j=o;o=[],k===2?Q(j,function(oe){oe.iKey=oe.iKey||S,ce()[Kn](oe)}):se(r,2,20,"core init status is not active")}},N.pollInternalLogs=function(j){return h=j||null,L=!1,b&&b[vc](),z(!0)};function B(){T=!0,ae(S)?(k=fi.INACTIVE,se(r,1,112,"ikey can't be resolved from promises")):k=fi.ACTIVE,W()}function W(){n&&(N.releaseQueue(),N.pollInternalLogs())}function z(j){if((!b||!b[Zl])&&!L){var oe=j||r&&r.queue[me]>0;oe&&(R||(R=!0,yt(e[oa](function(xe){var le=xe.cfg.diagnosticLogInterval;(!le||!(le>0))&&(le=1e4);var De=!1;b&&(De=b[Zl],b[vc]()),b=CG(In,le),b.unref(),b[Zl]=De}))),b[Zl]=!0)}return b}N[ON]=function(){L=!0,b&&b[vc](),In()},vi(N,function(){return p},["addTelemetryInitializer"]),N[Vi]=function(j,oe,xe){j===void 0&&(j=!0),n||Ln(xde),d&&Ln(Fz);var le={reason:50,isAsync:j,flushComplete:!1},De;j&&!oe&&(De=qi(function(pt){oe=pt}));var Ze=dh(Mt(),N);Ze[Ew](function(){C.run(N[kt]),z_([c,i,r],j,function(){q(),oe&&oe(le)})},N);function rt(pt){le.flushComplete=pt,d=!0,v.run(Ze,le),N[ON](),Ze[Kn](le)}return In(),gn(j,rt,6,xe)||rt(!1),De},N[Xl]=dt,N.addPlugin=function(j,oe,xe,le){if(!j){le&&le(!1),nt($z);return}var De=dt(j[sa]);if(De&&!oe){le&&le(!1),nt("Plugin ["+j[sa]+"] is already loaded!");return}var Ze={reason:16};function rt(Bn){u[Ge](j),Ze.added=[j],Be(Ze),le&&le(!0)}if(De){var pt=[De.plugin],vn={reason:2,isAsync:!!xe};Co(pt,vn,function(Bn){Bn?(Ze.removed=pt,Ze.reason|=32,rt(!0)):le&&le(!1)})}else rt(!1)},N.updateCfg=function(j,oe){oe===void 0&&(oe=!0);var xe;if(N[Wo]()){xe={reason:1,cfg:e.cfg,oldCfg:yN({},e.cfg),newConfig:yN({},j),merge:oe},j=xe.newConfig;var le=e.cfg;j[sd]=le[sd],j[id]=le[id]}e._block(function(De){var Ze=De.cfg;KL(De,Ze,j,oe),oe||Ie(Ze,function(rt){vs(j,rt)||De.set(Ze,rt,gi)}),De.setDf(Ze,zL)},!0),e.notify(),xe&&mt(xe)},N.evtNamespace=function(){return g},N.flush=gn,N.getTraceCtx=function(j){return y||(y=Tz()),y},N.setTraceCtx=function(j){y=j||null},N.addUnloadHook=yt,Cc(N,"addUnloadCb",function(){return v},"add"),N.onCfgChange=function(j){var oe;return n?oe=mr(e.cfg,j,N[kt]):oe=bde(D,j),kde(oe)},N.getWParam=function(){return zf()||e.cfg.enableWParam?0:-1};function V(){var j={};A=[];var oe=function(xe){xe&&Q(xe,function(le){if(le[sa]&&le[Jp]&&!j[le.identifier]){var De=le[sa]+"="+le[Jp];A[Ge](De),j[le.identifier]=le}})};oe(m),f&&Q(f,function(xe){oe(xe)}),oe(u)}function q(){n=!1,e=jt({},zL,N[kt]),e.cfg[b_]=1,ht(N,"config",{g:function(){return e.cfg},s:function(oe){N.updateCfg(oe,!1)}}),ht(N,"pluginVersionStringArr",{g:function(){return A||V(),A}}),ht(N,"pluginVersionString",{g:function(){return F||(A||V(),F=A.join(";")),F||Le}}),ht(N,"logger",{g:function(){return r||(r=new lu(e.cfg),e[kt]=r),r},s:function(oe){e[kt]=oe,r!==oe&&(Ic(r,!1),r=oe)}}),N[kt]=new lu(e.cfg),x=[];var j=N.config[sd]||[];j.splice(0,j[me]),ys(j,x),p=new Lz,o=[],Ic(i,!1),i=null,s=null,a=null,Ic(c,!1),c=null,l=null,u=[],f=null,m=null,d=!1,h=null,g=Tr("AIBaseCore",!0),v=vd(),y=null,S=null,C=Xw(),D=[],F=null,A=null,L=!1,b=null,R=!1,k=0,E=null,_=null,T=!1,I=null}function ce(){var j=po(Mt(),e.cfg,N);return j[Ew](z),j}function Be(j){var oe=Pde(N[kt],fz,u);l=null,F=null,A=null,m=(f||[])[0]||[],m=iD(ys(m,oe[id]));var xe=ys(iD(oe[dn]),m);x=lo(xe);var le=N.config[sd]||[];le.splice(0,le[me]),ys(le,x);var De=ce();m&&m[me]>0&&BL(De[aa](m),xe),BL(De,xe),j&&mt(j)}function dt(j){var oe=null,xe=null,le=[];return Q(x,function(De){if(De[sa]===j&&De!==p)return xe=De,-1;De.getChannel&&le[Ge](De)}),!xe&&le[me]>0&&Q(le,function(De){if(xe=De.getChannel(j),!xe)return-1}),xe&&(oe={plugin:xe,setEnabled:function(De){Rc(xe)[Iw]=!De},isEnabled:function(){var De=Rc(xe);return!De[di]&&!De[Iw]},remove:function(De,Ze){De===void 0&&(De=!0);var rt=[xe],pt={reason:1,isAsync:De};Co(rt,pt,function(vn){vn&&Be({reason:32,removed:rt}),Ze&&Ze(vn)})}}),oe}function Mt(){if(!l){var j=(x||[]).slice();vt(j,p)===-1&&j[Ge](p),l=du(iD(j),e.cfg,N)}return l}function Co(j,oe,xe){if(j&&j[me]>0){var le=du(j,e.cfg,N),De=dh(le,N);De[Ew](function(){var Ze=!1,rt=[];Q(u,function(vn,Bn){Oz(vn,j)?Ze=!0:rt[Ge](vn)}),u=rt,F=null,A=null;var pt=[];f&&(Q(f,function(vn,Bn){var Ar=[];Q(vn,function(Fr){Oz(Fr,j)?Ze=!0:Ar[Ge](Fr)}),pt[Ge](Ar)}),f=pt),xe&&xe(Ze),z()}),De[Kn](oe)}else xe(!1)}function In(){if(r&&r.queue){var j=r.queue.slice(0);r.queue[me]=0,Q(j,function(oe){var xe={name:h||"InternalMessageId: "+oe[Xp],iKey:S,time:xs(new Date),baseType:fd.dataType,baseData:{message:oe[ca]}};N.track(xe)})}}function gn(j,oe,xe,le){var De=1,Ze=!1,rt=null;le=le||5e3;function pt(){De--,Ze&&De===0&&(rt&&rt[vc](),rt=null,oe&&oe(Ze),oe=null)}if(m&&m[me]>0){var vn=ce()[aa](m);vn.iterate(function(Bn){if(Bn.flush){De++;var Ar=!1;Bn.flush(j,function(){Ar=!0,pt()},xe)||Ar||(j&&rt==null?rt=ui(function(){rt=null,pt()},le):pt())}})}return Ze=!0,pt(),!0}function Xt(){var j;yt(e[oa](function(oe){var xe=oe.cfg.enablePerfMgr;if(xe){var le=oe.cfg[N_];(j!==le||!j)&&(le||(le=Ide),Pw(oe.cfg,N_,le),j=le,a=null),!s&&!a&&Re(le)&&(a=le(N,N[Cw]()))}else a=null,j=null}))}function mt(j){var oe=zw(Mt(),N);oe[Ew](z),(!N._updateHook||N._updateHook(oe,j)!==!0)&&oe[Kn](j)}function nt(j){var oe=N[kt];oe?(se(oe,2,73,j),z()):Ln(j)}function Dt(j){var oe=N[Cw]();oe&&oe[nu]([j],2)}function yt(j){C.add(j)}})}return t.__ieDyn=1,t}()});function wd(t,e){try{if(t&&t!==""){var n=br().parse(t);if(n&&n[$N]&&n[$N]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[me])return n}}catch(r){se(e,1,43,"Cannot parse the response. "+(r[fo]||Ce(r)),{response:t})}return null}var Hz=ne(()=>{Ne();xt();Ds();su()});var pa,Nde,Bz,JL,yd,Wz=ne(()=>{dr();od();Ne();xt();dL();Ds();su();ua();pa="",Nde="NoResponseBody",Bz="&"+Nde+"=true",JL="POST",yd=function(){function t(){var e=0,n,r,o,i,s,a,c,l,u,f,m,d,p,h;Je(t,this,function(g,v){var C=!0;T(),g[wc]=function(I,b){o=b,r&&se(o,1,28,"Sender is already initialized"),g.SetConfig(I),r=!0},g._getDbgPlgTargets=function(){return[r,i,a,n]},g.SetConfig=function(I){try{if(s=I.senderOnCompleteCallBack||{},a=!!I.disableCredentials,c=I.fetchCredentials,i=!!I.isOneDs,n=!!I.enableSendPromise,u=!!I.disableXhr,f=!!I.disableBeacon,m=!!I.disableBeaconSync,h=I.timeWrapper,p=!!I.addNoResponse,d=!!I.disableFetchKeepAlive,l={sendPOST:k},i||(C=!1),a){var b=ud();b&&b.protocol&&b.protocol[Bo]()==="file:"&&(C=!1)}return!0}catch{}return!1},g.getSyncFetchPayload=function(){return e},g.getSenderInst=function(I,b){return I&&I[me]?D(I,b):null},g.getFallbackInst=function(){return l},g[Ql]=function(I,b){T()};function w(I,b){x(b,200,{},I)}function y(I,b){se(o,2,26,"Failed to send telemetry.",{message:I}),x(b,400,{})}function S(I){y("No endpoint url is provided for the batch",I)}function D(I,b){for(var R=0,L=null,N=0;L==null&&N<I[me];)R=I[N],!u&&R===1?Nw()?L=_:ih()&&(L=k):R===2&&_c(b)&&(!b||!d)?L=E:R===3&&zi()&&(b?!m:!f)&&(L=F),N++;return L?{_transport:R,_isSync:b,sendPOST:L}:null}function x(I,b,R,L){try{I&&I(b,R,L)}catch{}}function A(I,b){var R=zn(),L=I[Qp];if(!L)return S(b),!0;L=I[Qp]+(p?Bz:pa);var N=I[tu],B=i?N:new Blob([N],{type:"text/plain;charset=UTF-8"}),W=R.sendBeacon(L,B);return W}function F(I,b,R){var L=I[tu];try{if(L)if(A(I,b))w(pa,b);else{var N=s&&s.beaconOnRetry;N&&Re(N)?N(I,b,A):(l&&l.sendPOST(I,b,!0),se(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(B){i&&mo(o,"Failed to send telemetry using sendBeacon API. Ex:"+Ce(B)),x(b,i?0:400,{},pa)}}function k(I,b,R){var L,N,B,W=I[T_]||{};!R&&n&&(L=qi(function(ce,Be){N=ce,B=Be})),i&&R&&I.disableXhrSync&&(R=!1);var z=I[Qp];if(!z){S(b),N&&N(!1);return}var V=JN(JL,z,C,!0,R,I[nd]);i||V.setRequestHeader("Content-type","application/json"),Q(Ir(W),function(ce){V.setRequestHeader(ce,W[ce])}),V.onreadystatechange=function(){i||(q(V),V.readyState===4&&N&&N(!0))},V.onload=function(){i&&q(V)};function q(ce){var Be=s&&s.xhrOnComplete,dt=Be&&Re(Be);if(dt)Be(ce,b,I);else{var Mt=_s(ce);x(b,ce[ed],xc(ce,i),Mt)}}return V.onerror=function(ce){x(b,i?V[ed]:400,xc(V,i),i?pa:Ec(V)),B&&B(ce)},V.ontimeout=function(){x(b,i?V[ed]:500,xc(V,i),i?pa:Ec(V)),N&&N(!1)},V.send(I[tu]),L}function E(I,b,R){var L,N=I[Qp],B=I[tu],W=i?B:new Blob([B],{type:"application/json"}),z,V,q,ce=new Headers,Be=B[me],dt=!1,Mt=!1,Co=I[T_]||{},In=(L={method:JL,body:W},L[fL]=!0,L);I.headers&&Ir(I.headers)[me]>0&&(Q(Ir(Co),function(nt){ce.append(nt,Co[nt])}),In[T_]=ce),c?In.credentials=c:C&&i&&(In.credentials="include"),R&&(In.keepalive=!0,e+=Be,i?I._sendReason===2&&(dt=!0,p&&(N+=Bz)):dt=!0);var gn=new Request(N,In);try{gn[fL]=!0}catch{}if(!R&&n&&(z=qi(function(nt,Dt){V=nt,q=Dt})),!N){S(b),V&&V(!1);return}function Xt(nt){x(b,i?0:400,{},i?pa:nt)}function mt(nt,Dt,yt){var j=nt[ed],oe=s.fetchOnComplete;oe&&Re(oe)?oe(nt,b,yt||pa,Dt):x(b,j,{},yt||pa)}try{hi(fetch(i?N:gn,i?In:null),function(nt){if(R&&(e-=Be,Be=0),!Mt)if(Mt=!0,nt.rejected)Xt(nt.reason&&nt.reason[ca]),q&&q(nt.reason);else{var Dt=nt[Zf];try{!i&&!Dt.ok?(Xt(Dt.statusText),V&&V(!1)):i&&!Dt.body?(mt(Dt,null,pa),V&&V(!0)):hi(Dt.text(),function(yt){mt(Dt,I,yt[Zf]),V&&V(!0)})}catch(yt){Xt(Ce(yt)),q&&q(yt)}}})}catch(nt){Mt||(Xt(Ce(nt)),q&&q(nt))}return dt&&!Mt&&(Mt=!0,x(b,200,{}),V&&V(!0)),i&&!Mt&&I[nd]>0&&h&&h.set(function(){Mt||(Mt=!0,x(b,500,{}),V&&V(!0))},I[nd]),z}function _(I,b,R){var L=Fn(),N=new XDomainRequest,B=I[tu];N.onload=function(){var ce=_s(N),Be=s&&s.xdrOnComplete;Be&&Re(Be)?Be(N,b,I):x(b,200,{},ce)},N.onerror=function(){x(b,400,{},i?pa:ld(N))},N.ontimeout=function(){x(b,500,{})},N.onprogress=function(){};var W=L&&L.location&&L.location.protocol||"",z=I[Qp];if(!z){S(b);return}if(!i&&z.lastIndexOf(W,0)!==0){var V="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";se(o,2,40,". "+V),y(V,b);return}var q=i?z:z[Es](/^(https?:)/,"");N.open(JL,q),I[nd]&&(N[nd]=I[nd]),N.send(B),i&&R?h&&h.set(function(){N.send(B)},0):N.send(B)}function T(){e=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,l=null,u=!1,f=!1,m=!1,d=!1,p=!1,h=null}})}return t.__ieDyn=1,t}()});function Gz(t){return t&&t[Es]?t[Es](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Le):t}function fD(t,e){if(e){var n=Le;ve(e)?(n=Le,Q(e,function(o){o=Gz(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=Gz(e),n&&(n[0]!=="."&&(n="."+n),t=(t||Le)+n)}var r=Ode.exec(t||Le)||[];return{type:r[1],ns:(r[2]||Le).replace(Lde,".").replace(Ade,Le)[Yi](".").sort().join(".")}}function XL(t,e,n){var r=[],o=Qw.get(t,lD,{},!1),i=fD(e,n);return Ie(o,function(s,a){Q(a,function(c){(!i[pi]||i[pi]===c[Zp][pi])&&(!i.ns||i.ns===i.ns)&&r[Ge]({name:c.evtName[pi]+(c[Zp].ns?"."+c[Zp].ns:Le),handler:c.handler})})}),r}function t6(t,e,n){n===void 0&&(n=!0);var r=Qw.get(t,lD,{},n),o=r[e];return o||(o=r[e]=[]),o}function n6(t,e,n,r){t&&e&&e[pi]&&(t[qz]?t[qz](e[pi],n,r):t[Yz]&&t[Yz](Kz+e[pi],n))}function Ude(t,e,n,r){var o=!1;return t&&e&&e[pi]&&n&&(t[Vz]?(t[Vz](e[pi],n,r),o=!0):t[jz]&&(t[jz](Kz+e[pi],n),o=!0)),o}function zz(t,e,n,r){for(var o=e[me];o--;){var i=e[o];i&&(!n.ns||n.ns===i[Zp].ns)&&(!r||r(i))&&(n6(t,i[Zp],i.handler,i.capture),e[ia](o,1))}}function $de(t,e,n){if(e[pi])zz(t,t6(t,e[pi]),e,n);else{var r=Qw.get(t,lD,{});Ie(r,function(o,i){zz(t,i,e,n)}),Ir(r)[me]===0&&Qw.kill(t,lD)}}function wi(t,e){var n;return e?(ve(e)?n=[t].concat(e):n=[t,e],n=fD("xx",n).ns[Yi](".")):n=t,n}function ha(t,e,n,r,o){o===void 0&&(o=!1);var i=!1;if(t)try{var s=fD(e,r);if(i=Ude(t,s,n,o),i&&Qw.accept(t)){var a={guid:Fde++,evtName:s,handler:n,capture:o};t6(t,s.type)[Ge](a)}}catch{}return i}function Lc(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=fD(e,r),s=!1;$de(t,i,function(a){return i.ns&&!n||a.handler===n?(s=!0,!0):!1}),s||n6(t,i,n,o)}catch{}}function ZL(t,e,n,r){return r===void 0&&(r=!1),ha(t,e,n,null,r)}function QL(t,e,n,r){r===void 0&&(r=!1),Lc(t,e,n,null,r)}function dD(t,e,n){var r=!1,o=Fn();o&&(r=ha(o,t,e,n),r=ha(o.body,t,e,n)||r);var i=An();return i&&(r=ha(i,t,e,n)||r),r}function mD(t,e,n){var r=Fn();r&&(Lc(r,t,e,n),Lc(r.body,t,e,n));var o=An();o&&Lc(o,t,e,n)}function mh(t,e,n,r){var o=!1;return e&&t&&t[me]>0&&Q(t,function(i){i&&(!n||vt(n,i)===-1)&&(o=dD(i,e,r)||o)}),o}function pD(t,e,n,r){var o=!1;return e&&t&&ve(t)&&(o=mh(t,e,n,r),!o&&n&&n[me]>0&&(o=mh(t,e,null,r))),o}function hu(t,e,n){t&&ve(t)&&Q(t,function(r){r&&mD(r,e,n)})}function ey(t,e,n){return pD([Zz,Xz,uD],t,e,n)}function ty(t,e){hu([Zz,Xz,uD],t,e)}function ph(t,e,n){function r(s){var a=An();t&&a&&a.visibilityState==="hidden"&&t(s)}var o=wi(Qz,n),i=mh([uD],t,e,o);return(!e||vt(e,Zw)===-1)&&(i=mh([Zw],r,e,o)||i),!i&&e&&(i=ph(t,null,n)),i}function ny(t,e){var n=wi(Qz,e);hu([uD],t,n),hu([Zw],null,n)}function hh(t,e,n){function r(s){var a=An();t&&a&&a.visibilityState==="visible"&&t(s)}var o=wi(e6,n),i=mh([Jz],t,e,o);return i=mh([Zw],r,e,o)||i,!i&&e&&(i=hh(t,null,n)),i}function ry(t,e){var n=wi(e6,e);hu([Jz],t,n),hu([Zw],null,n)}var Kz,jz,Vz,Yz,qz,lD,Zw,uD,Jz,Xz,Zz,Qz,e6,Lde,Ade,Fde,Qw,Ode,r6=ne(()=>{Ne();xt();sh();On();Kz="on",jz="attachEvent",Vz="addEventListener",Yz="detachEvent",qz="removeEventListener",lD="events",Zw="visibilitychange",uD="pagehide",Jz="pageshow",Xz="unload",Zz="beforeunload",Qz=Tr("aiEvtPageHide"),e6=Tr("aiEvtPageShow"),Lde=/\.[\.]+/g,Ade=/[\.]+$/,Fde=1,Qw=B_("events"),Ode=/^([^.]*)(?:\.(.+)|)/});var eA,o6=ne(()=>{yw();eA=fn({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var Ot=ne(()=>{TG();RG();FN();Mz();GL();H_();LL();uL();ua();Hz();Wz();Ne();yw();r6();su();Ho();TL();tD();Ds();sD();o6();bL();sh();aD();cD();HL();cu();Y_();pL()});var ga,i6,tA,hD,gD=ne(()=>{ga="",i6="https://browser.events.data.microsoft.com/OneCollector/1.0/",tA="version",hD="properties"});var nA,gh,va,rA,Vt,Ac,vD,wD,yD,CD,oy,ED=ne(()=>{nA="initialize",gh="indexOf",va="timings",rA="pollInternalLogs",Vt="value",Ac="length",vD="processTelemetryStart",wD="handleField",yD="rmSanitizer",CD="rmFieldSanitizer",oy="canHandle"});function pr(t){return!(t===ga||ae(t))}function SD(t){if(t){var e=Wi(t,"-");if(e>-1)return Gf(t,e)}return ga}function u6(){return oA===null&&(oA=!Ve(Uint8Array)&&!jde()&&!ou()),oA}function xD(t){return!!(t&&_r(t)&&t>=1&&t<=4)}function _D(t,e,n){if(!e&&!pr(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||ve(e))e={value:e};else if(r==="object"&&!a6.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(ae(e[Vt])||e[Vt]===ga||!ke(e[Vt])&&!_r(e[Vt])&&!ea(e[Vt])&&!ve(e[Vt]))return null;if(ve(e[Vt])&&!sA(e[Vt]))return null;if(!ae(e.kind)){if(ve(e[Vt])||!iy(e.kind))return null;e[Vt]=e[Vt].toString()}return e}function wh(t,e,n){var r=-1;if(!Ve(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),Wde(n))r===-1&&(r=0),r|=n;else{var o=Bde[wa(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function f6(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||ga}function d6(t){t===void 0&&(t="D");var e=qw();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,ga)),e}function Cd(t,e,n,r,o){var i={},s=!1,a=0,c=arguments[Ac],l=arguments;for(ea(l[0])&&(s=l[0],a++);a<c;a++){var t=l[a];Ie(t,function(f,m){s&&m&&tn(m)?ve(m)?(i[f]=i[f]||[],Q(m,function(d,p){d&&tn(d)?i[f][p]=Cd(!0,i[f][p],d):i[f][p]=d})):i[f]=Cd(!0,i[f],m):i[f]=m})}return i}function iy(t){return t===0||t>0&&t<=13||t===32}function Wde(t){return t>=0&&t<=9}function jde(){var t=zn();if(!Ve(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[gh]("safari")>=0||e[gh]("firefox")>=0)&&e[gh]("chrome")<0)return!0}return!1}function sA(t){return t[Ac]>0}function sy(t,e){var n=t;n[va]=n[va]||{},n[va][vD]=n[va][vD]||{},n[va][vD][e]=qo()}function wa(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===fc&&(e=4,ve(t)?(e=4096,t[Ac]>0&&(e|=wa(t[0]))):a6.call(t,"value")&&(e=8192|wa(t[Vt])))}return e}function DD(){return!!gt("chrome")}function m6(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,Mde,r),n&&s(a,s6,n),a.open(t,e,!o),n&&s(a,s6,n),!o&&i&&s(a,Hde,i),a}function gu(t){return t>0}var Fc,iA,vh,a6,Mde,s6,Hde,Bde,oA,c6,l6,qo,ID=ne(()=>{Ot();Ho();Ne();gD();ED();iA="4.3.6",vh="1DS-Web-JS-"+iA,a6=aw.hasOwnProperty,Mde="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",s6="withCredentials",Hde="timeout",Bde=(Fc={},Fc[0]=0,Fc[2]=6,Fc[1]=1,Fc[3]=7,Fc[4098]=6,Fc[4097]=1,Fc[4099]=7,Fc),oA=null,c6=zf(),l6=Bp();qo=gw});function Yde(t){return t&&(!t.getProperty||!t.setProperty)&&Ln("Invalid property storage override passed."),!0}var Vde,p6,h6=ne(()=>{Ho();dr();Ot();Ne();gD();ID();ED();Vde=ws({endpointUrl:i6,propertyStorageOverride:{isVal:Yde}});p6=function(t){Mo(e,t);function e(){var n=t.call(this)||this;return Je(e,n,function(r,o){r[nA]=function(i,s,a,c){mn(r,function(){return"AppInsightsCore.initialize"},function(){try{o[nA](jt(i,Vde,a||r.logger,!1).cfg,s,a,c)}catch(f){var l=r.logger,u=Ce(f);u[gh]("channels")!==-1&&(u+=`
 - Channels must be provided through config.channels only!`),se(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){mn(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[va]=s[va]||{},s[va].trackStart=qo(),xD(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=vh;var c=s.baseData=s.baseData||{};c[hD]=c[hD]||{};var l=c[hD];l[tA]=l[tA]||r.pluginVersionString||ga}o.track(s)},function(){return{item:i}},!i.sync)},r[rA]=function(i){return o[rA](i||"InternalLog")}}),n}return e.__ieDyn=1,e}(Nc)});var g6,v6,w6,y6,C6,E6=ne(()=>{Ot();g6=fn({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),v6=fn({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),w6=fn({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),y6=fn({Normal:1,Critical:2}),C6=fn({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});function S6(t){return t=="__proto__"||t=="constructor"||t=="prototype"}var x6,_6=ne(()=>{Ot();Ne();gD();ID();ED();x6=function(){function t(e){var n=this,r={},o=[],i=[];e&&i.push(e);function s(u,f){var m,d=r[u];if(d&&(m=d[f]),!m&&m!==null){if(ke(u)&&ke(f))if(i[Ac]>0){for(var p=0;p<i[Ac];p++)if(i[p][wD](u,f)){m={canHandle:!0,fieldHandler:i[p]};break}}else o[Ac]===0&&(m={canHandle:!0});if(!m&&m!==null){m=null;for(var p=0;p<o[Ac];p++)if(o[p][wD](u,f)){m={canHandle:!0,handler:o[p],fieldHandler:null};break}}if(!d){if(S6(u))return null;d=r[u]={}}if(S6(f))return null;d[f]=m}return m}n.clearCache=function(){r={}},n.addSanitizer=function(u){u&&(gN(o,u)||o.push(u),r={})},n.addFieldSanitizer=function(u){u&&(gN(i,u)||i.push(u),r={})},n[yD]=function(u){if(u){var f=vt(o,u);f!==-1&&(o.splice(f,1),r={}),Q(o,function(m){m&&m[yD]&&m[yD](u)})}},n[CD]=function(u){if(u){var f=vt(i,u);f!==-1&&(i.splice(f,1),r={}),Q(o,function(m){m&&m[CD]&&m[CD](u)})}},n.isEmpty=function(){return Vp(o)+Vp(i)===0},n[wD]=function(u,f){var m=s(u,f);return m?m[oy]:!1},n[Vt]=function(u,f,m,d){var p=s(u,f);if(p&&p[oy]){if(!p[oy])return null;if(p.handler)return p.handler[Vt](u,f,m,d);if(!ke(f)||ae(m)||m===ga)return null;var h=null,g=wa(m);if((g&8192)===8192){var v=g&-8193;if(h=m,!pr(h[Vt])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=c(u,f,m):g===4&&(h=c(u,f,d?JSON.stringify(m):m));if(h)return a(p,u,f,g,h,d)}return null},n.property=function(u,f,m,d){var p=s(u,f);if(!p||!p[oy]||!ke(f)||ae(m)||!pr(m[Vt]))return null;var h=wa(m[Vt]);return h===0?null:a(p,u,f,h,m,d)};function a(u,f,m,d,p,h){if(u.handler)return u.handler.property(f,m,p,h);if(!ae(p.kind)){if((d&4096)===4096||!iy(p.kind))return null;p[Vt]=p[Vt].toString()}return l(u.fieldHandler,f,m,d,p)}function c(u,f,m){return pr(m)?{value:m}:null}function l(u,f,m,d,p){if(p&&u){var h=u.getSanitizer(f,m,d,p.kind,p.propertyType);if(h)if(d===4){var g={},v=p[Vt];Ie(v,function(w,y){var S=f+"."+m;if(pr(y)){var D=c(S,w,y);D=l(u,S,w,wa(y),D),D&&(g[w]=D[Vt])}}),p[Vt]=g}else{var C={path:f,name:m,type:d,prop:p,sanitizer:n};p=h.call(n,C)}}return p}}return t.getFieldType=wa,t}()});var D6={};wC(D6,{ActiveStatus:()=>fi,AppInsightsCore:()=>p6,BaseTelemetryPlugin:()=>kc,DiagnosticLogger:()=>lu,EventLatency:()=>v6,EventPersistence:()=>y6,EventPropertyType:()=>w6,EventsDiscardedReason:()=>Cs,FullVersionString:()=>vh,InternalAppInsightsCore:()=>Nc,LoggingSeverity:()=>eA,MinChannelPriorty:()=>LN,NotificationManager:()=>jw,PerfEvent:()=>md,PerfManager:()=>Yw,ProcessTelemetryContext:()=>VL,SenderPostManager:()=>yd,TraceLevel:()=>C6,Undefined:()=>Zs,ValueKind:()=>g6,ValueSanitizer:()=>x6,Version:()=>iA,_InternalLogMessage:()=>fd,__getRegisteredEvents:()=>XL,_appendHeader:()=>rh,_getAllResponseHeaders:()=>xc,_logInternalMessage:()=>CL,_testHookMaxUnloadHooksCb:()=>YL,_throwInternal:()=>se,_warnToConsole:()=>mo,addEventHandler:()=>dD,addEventListeners:()=>pD,addPageHideEventListener:()=>ph,addPageShowEventListener:()=>hh,addPageUnloadEventListener:()=>ey,areCookiesSupported:()=>uh,arrForEach:()=>Q,arrIndexOf:()=>vt,arrMap:()=>pc,arrReduce:()=>hw,attachEvent:()=>ZL,blockDynamicConversion:()=>$w,convertAllHeadersToMap:()=>M_,cookieAvailable:()=>uh,createCookieMgr:()=>bc,createDynamicConfig:()=>jt,createEnumStyle:()=>fn,createGuid:()=>d6,createProcessTelemetryContext:()=>po,createTraceParent:()=>OL,createUniqueNamespace:()=>Tr,createUnloadHandlerContainer:()=>vd,dateNow:()=>Sn,detachEvent:()=>QL,disallowsSameSiteNone:()=>eD,doPerf:()=>mn,dumpObj:()=>Ce,eventOff:()=>Lc,eventOn:()=>ha,extend:()=>Cd,findW3cTraceParent:()=>ML,forceDynamicConversion:()=>lL,formatErrorMessageXdr:()=>ld,formatErrorMessageXhr:()=>Ec,formatTraceParent:()=>$L,generateW3CId:()=>pd,getCommonSchemaMetaData:()=>wh,getConsole:()=>bw,getCookieValue:()=>f6,getCrypto:()=>Tw,getDocument:()=>An,getDynamicConfigHandler:()=>Uw,getExceptionName:()=>nn,getFieldValueType:()=>wa,getGlobal:()=>uo,getGlobalInst:()=>gt,getHistory:()=>m_,getIEVersion:()=>kw,getISOString:()=>xs,getJSON:()=>br,getLocation:()=>ud,getMsCrypto:()=>Rw,getNavigator:()=>zn,getPerformance:()=>Kf,getResponseText:()=>_s,getSetValue:()=>Pw,getTenantId:()=>SD,getTime:()=>qo,getWindow:()=>Fn,hasDocument:()=>zf,hasHistory:()=>pN,hasJSON:()=>fa,hasNavigator:()=>mw,hasOwnProperty:()=>fr,hasWindow:()=>Bp,isArray:()=>ve,isArrayValid:()=>sA,isBeaconsSupported:()=>zi,isBoolean:()=>ea,isChromium:()=>DD,isDate:()=>f_,isDocumentObjectAvailable:()=>c6,isError:()=>qf,isFetchSupported:()=>_c,isFunction:()=>Re,isGreaterThanZero:()=>gu,isIE:()=>iu,isLatency:()=>xD,isNotTruthy:()=>uN,isNullOrUndefined:()=>ae,isNumber:()=>_r,isObject:()=>tn,isReactNative:()=>ou,isSampledFlag:()=>UL,isString:()=>ke,isTruthy:()=>gs,isTypeof:()=>lN,isUint8ArrayAvailable:()=>u6,isUndefined:()=>Ve,isValidSpanId:()=>gd,isValidTraceId:()=>hd,isValidTraceParent:()=>oD,isValueAssigned:()=>pr,isValueKind:()=>iy,isWindowObjectAvailable:()=>l6,isXhrSupported:()=>ih,mergeEvtNamespace:()=>wi,newGuid:()=>qw,newId:()=>Fw,normalizeJsName:()=>cd,objDefineAccessors:()=>fN,objForEachKey:()=>Ie,objFreeze:()=>lo,objKeys:()=>Ir,objSeal:()=>dN,onConfigChange:()=>mr,openXhr:()=>m6,optimizeObject:()=>Yo,parseResponse:()=>wd,parseTraceParent:()=>Gw,perfNow:()=>gw,prependTransports:()=>Sc,proxyAssign:()=>zN,proxyFunctionAs:()=>Cc,proxyFunctions:()=>vi,random32:()=>Dc,randomValue:()=>iL,removeEventHandler:()=>mD,removeEventListeners:()=>hu,removePageHideEventListener:()=>ny,removePageShowEventListener:()=>ry,removePageUnloadEventListener:()=>ty,safeGetCookieMgr:()=>PL,safeGetLogger:()=>Pc,sanitizeProperty:()=>_D,setEnableEnvMocks:()=>nL,setProcessTelemetryTimings:()=>sy,setValue:()=>Gi,strContains:()=>xn,strEndsWith:()=>Jf,strFunction:()=>Ap,strObject:()=>fc,strPrototype:()=>hs,strStartsWith:()=>Yp,strTrim:()=>et,strUndefined:()=>Zs,throwError:()=>Ln,toISOString:()=>xs,useXDomainRequest:()=>Nw});var Ed=ne(()=>{h6();E6();_6();Ot();ID()});var Sd,PD,bD,aA=ne(()=>{Sd="REAL_TIME",PD="NEAR_REAL_TIME",bD="BEST_EFFORT"});var Is,TD,I6,cA,P6,b6,lA,RD,ay,yh,T6,R6,k6,kD,uA,ND,LD,AD,cy,fA,dA,N6,Ch,mA,FD,ly=ne(()=>{Is="",TD="drop",I6="send",cA="requeue",P6="rspFail",b6="oth",lA="no-cache, no-store",RD="application/x-json-stream",ay="cache-control",yh="content-type",T6="kill-tokens",R6="kill-duration",k6="time-delta-millis",kD="client-version",uA="client-id",ND="time-delta-to-apply-millis",LD="upload-time",AD="apikey",cy="AuthMsaDeviceTicket",fA="WebAuthToken",dA="AuthXToken",N6="NoResponseBody",Ch="msfpc",mA="trace",FD="user"});var uy,OD,UD,fy,ze,ya,yi,pn,Ca,Jn,Ea,$D,xd,MD,_d,HD,BD,L6,pA,hA,A6,WD,gA,vA,F6,wA,yA,CA,jD,VD,YD,dy,EA,Ps,Eh,zr,Go,my,Sh,py,O6,qD,GD,xh,SA,hy,zD,KD,JD,XD,gy,U6,xA,$6,M6,vy,vu,Dd,_h=ne(()=>{uy="allowRequestSending",OD="shouldAddClockSkewHeaders",UD="getClockSkewHeaderValue",fy="setClockSkew",ze="length",ya="concat",yi="iKey",pn="count",Ca="events",Jn="push",Ea="split",$D="toLowerCase",xd="hdrs",MD="useHdrs",_d="initialize",HD="setTimeoutOverride",BD="clearTimeoutOverride",L6="payloadPreprocessor",pA="overrideEndpointUrl",hA="avoidOptions",A6="disableEventTimings",WD="enableCompoundKey",gA="disableXhrSync",vA="disableFetchKeepAlive",F6="addNoResponse",wA="useSendBeacon",yA="fetchCredentials",CA="alwaysUseXhrOverride",jD="serializeOfflineEvt",VD="getOfflineRequestDetails",YD="createPayload",dy="createOneDSPayload",EA="payloadBlob",Ps="headers",Eh="_thePayload",zr="batches",Go="sendType",my="canSendRequest",Sh="sendQueuedRequests",py="setUnloading",O6="isTenantKilled",qD="sendSynchronousBatch",GD="_transport",xh="getWParam",SA="isBeacon",hy="timings",zD="isTeardown",KD="_sendReason",JD="setKillSwitchTenants",XD="_backOffTransmission",gy="identifier",U6="ignoreMc1Ms0CookieProcessing",xA="autoFlushEventsLimit",$6="disableAutoBatchFlushLimit",M6="overrideInstrumentationKey",vy="sendAttempt",vu="latency",Dd="sync"});function B6(t){var e=(t.ext||{}).intweb;return e&&pr(e[Ch])?e[Ch]:null}function H6(t){for(var e=null,n=0;e===null&&n<t[ze];n++)e=B6(t[n]);return e}var wu,ZD=ne(()=>{Ed();ly();_h();wu=function(){function t(e,n){var r=n?[][ya](n):[],o=this,i=H6(r);o[yi]=function(){return e},o.Msfpc=function(){return i||Is},o[pn]=function(){return r[ze]},o[Ca]=function(){return r},o.addEvent=function(s){return s?(r[Jn](s),i||(i=B6(s)),!0):!1},o[Ea]=function(s,a){var c;if(s<r[ze]){var l=r[ze]-s;ae(a)||(l=a<l?a:l),c=r.splice(s,l),i=H6(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t}()});var W6,j6=ne(()=>{dr();_h();W6=function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;Je(t,this,function(s){s[uy]=function(){return e},s.firstRequestSent=function(){r&&(r=!1,i||(e=!1))},s[OD]=function(){return n},s[UD]=function(){return o},s[fy]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t}()});var qde,V6,Y6=ne(()=>{dr();Ed();_h();qde=1e3,V6=function(){function t(){var e={};function n(r){var o=[];return r&&Q(r,function(i){o[Jn](et(i))}),o}Je(t,this,function(r){r[JD]=function(o,i){if(o&&i)try{var s=n(o[Ea](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*qde,c=0;c<s[ze];++c)e[s[c]]=Sn()+a}catch{return[]}return[]},r[O6]=function(o){var i=e,s=et(o);return i[s]!==void 0&&i[s]>Sn()?!0:(delete i[s],!1)}})}return t.__ieDyn=1,t}()});function G6(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function QD(t){var e=0,n=q6*Gde,r=q6*zde,o=Bi(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,zl(e,Kde)}var Gde,zde,q6,Kde,_A=ne(()=>{Ne();Gde=.8,zde=1.2,q6=3e3,Kde=6e5});function eme(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var s=e[z6];s||(s=e[z6]={f:{}});var a=s[eI];if(a||(a=s[eI]={}),n)for(var c=0;c<n.length;c++){var l=n[c];a[l]||(a[l]={f:{}});var u=a[l][eI];u||(u=a[l][eI]={}),a=u}a=a[r]={},ve(o.value)?a.a={t:i}:a.t=i}}}var Jde,Xde,K6,J6,Zde,z6,eI,Qde,X6,Z6=ne(()=>{dr();Ed();ZD();ly();Ne();Jde=20,Xde=3984588,K6=65e3,J6=2e6,Zde=zl(J6,K6),z6="metadata",eI="f",Qde=/\./,X6=function(){function t(e,n,r,o,i,s){var a="data",c="baseData",l="ext",u=!!o,f=!0,m=n,d={},p=!!s,h=i||wh;Je(t,this,function(g){g.createPayload=function(w,y,S,D,x,A){return{apiKeys:[],payloadBlob:Is,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:y,isSync:S,isBeacon:D,sendType:A,sendReason:x}},g.appendPayload=function(w,y,S){var D=w&&y&&!w.overflow;return D&&mn(e,function(){return"Serializer:appendPayload"},function(){for(var x=y.events(),A=w.payloadBlob,F=w.numEvents,k=!1,E=[],_=[],T=w.isBeacon,I=T?K6:Xde,b=T?Zde:J6,R=0,L=0;R<x.length;){var N=x[R];if(N){if(F>=S){w.overflow=y.split(R);break}var B=g.getEventBlob(N);if(B&&B.length<=b){var W=B.length,z=A.length;if(z+W>I){w.overflow=y.split(R);break}A&&(A+=`
`),A+=B,L++,L>Jde&&(na(A,0,1),L=0),k=!0,F++}else B?E.push(N):_.push(N),x.splice(R,1),R--}R++}if(E.length>0&&w.sizeExceed.push(wu.create(y.iKey(),E)),_.length>0&&w.failedEvts.push(wu.create(y.iKey(),_)),k){w.batches.push(y),w.payloadBlob=A,w.numEvents=F;var V=y.iKey();vt(w.apiKeys,V)===-1&&w.apiKeys.push(V)}},function(){return{payload:w,theBatch:{iKey:y.iKey(),evts:y.events()},max:S}}),D},g.getEventBlob=function(w){try{return mn(e,function(){return"Serializer.getEventBlob"},function(){var y={};y.name=w.name,y.time=w.time,y.ver=w.ver,y.iKey="o:"+SD(w.iKey);var S={},D;p||(D=function(k,E,_){eme(h,S,k,E,_)});var x=w[l];x&&(y[l]=S,Ie(x,function(k,E){var _=S[k]={};C(E,_,"ext."+k,!0,null,null,!0)}));var A=y[a]={};A.baseType=w.baseType;var F=A[c]={};return C(w.baseData,F,c,!1,[c],D,f),C(w.data,A,a,!1,[],D,f),JSON.stringify(y)},function(){return{item:w}})}catch{return null}};function v(w,y){var S=d[w];return S===void 0&&(w.length>=7&&(S=Yp(w,"ext.metadata")||Yp(w,"ext.web")),d[w]=S),S}function C(w,y,S,D,x,A,F){Ie(w,function(k,E){var _=null;if(E||pr(E)){var T=S,I=k,b=x,R=y;if(u&&!D&&Qde.test(k)){var L=k.split("."),N=L.length;if(N>1){b&&(b=b.slice());for(var B=0;B<N-1;B++){var W=L[B];R=R[W]=R[W]||{},T+="."+W,b&&b.push(W)}I=L[N-1]}}var z=D&&v(T,I);if(!z&&m&&m.handleField(T,I)?_=m.value(T,I,E,r):_=_D(I,E,r),_){var V=_.value;if(R[I]=V,A&&A(b,I,_),F&&typeof V=="object"&&!ve(V)){var q=b;q&&(q=q.slice(),q.push(I)),C(E,V,T+"."+I,D,q,A,F)}}}})}})}return t.__ieDyn=1,t}()});function Dh(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return yG([t,e],n,r,o)}}}var DA=ne(()=>{Ne()});function Pd(t,e,n){PA[t]=e,n!==!1&&(bA[e]=t)}function tI(t,e){var n=!1;if(t&&e){var r=Ir(t);if(r&&r[ze]>0)for(var o=e[$D](),i=0;i<r[ze];i++){var s=r[i];if(s&&fr(e,s)&&s[$D]()===o){n=!0;break}}}return n}function Ih(t,e,n,r){e&&n&&n[ze]>0&&(r&&PA[e]?(t[xd][PA[e]]=n,t[MD]=!0):t.url+="&"+e+"="+n)}function ome(t,e,n){for(var r=0;r<t[ze];r++)if(t[r].name===e){t[r].value=n;return}t[Jn]({name:e,value:n})}function ime(t,e){for(var n=0;n<t[ze];n++)if(t[n].name===e){t.splice(n,1);return}}var Id,IA,tme,nme,rme,PA,bA,Q6,e4=ne(()=>{dr();Ed();Ne();j6();ZD();ly();Y6();_A();Z6();DA();_h();IA="sendAttempt",tme="&"+N6+"=true",nme="?cors=true&"+yh[$D]()+"="+RD,rme=(Id={},Id[1]=cA,Id[100]=cA,Id[200]="sent",Id[8004]=TD,Id[8003]=TD,Id),PA={},bA={};Pd(cy,cy,!1);Pd(kD,kD);Pd(uA,"Client-Id");Pd(AD,AD);Pd(ND,ND);Pd(LD,LD);Pd(dA,dA);Q6=function(){function t(e,n,r,o){var i,s,a,c,l=!1,u,f,m,d,p,h,g,v,C,w,y,S,D,x,A,F,k,E,_,T,I,b,R,L,N,B,W,z;Je(t,this,function(V){Mt();var q=!0;V[_d]=function(M,Z,ie){L||(p=Z,S=Z.getCookieMgr(),f=ie,m=f.diagLog(),ys(T,mr(M,function(ge){var be,qe=ge.cfg,we=ge.cfg.extensionConfig[ie.identifier];N=Dh(we[HD],we[BD]),pr(qe.anonCookieName)?ome(g,"anoncknm",qe.anonCookieName):ime(g,"anoncknm"),I=we[L6],b=we.payloadListener;var P=we.httpXHROverride,O=we[pA]?we[pA]:qe.endpointUrl;i=O+nme,x=Ve(we[hA])?!0:!we[hA],y=!we[A6];var H=we.valueSanitizer,G=we.stringifyObjects,J=!!qe[WD];Ve(we[WD])||(J=!!we[WD]),A=we.xhrTimeout,F=!!we[gA],k=!!we[vA],_=we[F6]!==!1,B=!!we.excludeCsMetaData,Z.getPlugin("LocalStorage")&&(k=!0),l=!ou(),w=new X6(p,H,G,J,wh,B),ae(we[wA])||(l=!!we[wA]),we[yA]&&(z=we[yA]);var te=Be();W?W.SetConfig(te):(W=new yd,W[_d](te,m));var ue=P,Oe=we[CA]?P:null,Xe=we[CA]?P:null,Te=[3,2];if(!P){h=!1;var Eo=[];ou()?(Eo=[2,1],Te=[2,1,3]):Eo=[1,2,3],Eo=Sc(Eo,we.transports),P=ce(Eo,!1),P||mo(m,"No available transport to send events"),ue=ce(Eo,!0)}Oe||(Te=Sc(Te,we.unloadTransports),Oe=ce(Te,!0)),E=!h&&(l&&zi()||!k&&_c(!0)),d=(be={},be[0]=P,be[1]=ue||ce([1,2,3],!0),be[2]=Oe||ue||ce([1],!0),be[3]=Xe||ce([2,3],!0)||ue||ce([1],!0),be)})),L=!0)},V.addResponseHandler=function(M){return R[Jn](M),{rm:function(){var Z=R.indexOf(M);Z>=0&&R.splice(Z,1)}}},V[jD]=function(M){try{if(w)return w.getEventBlob(M)}catch{}return Is},V[VD]=function(){try{var M=w&&w[YD](0,!1,!1,!1,1,0);return le(M,x)}catch{}return null},V[dy]=function(M,Z){try{var ie=[];Q(M,function(P){Z&&(P=Yo(P));var O=wu.create(P[yi],[P]);ie[Jn](O)});for(var ge=null;ie[ze]>0&&w;){var be=ie.shift();be&&be[pn]()>0&&(ge=ge||w[YD](0,!1,!1,!1,1,0),w.appendPayload(ge,be,e))}var qe=le(ge,x),we={data:ge[EA],urlString:qe.url,headers:qe[xd],timeout:A,disableXhrSync:F,disableFetchKeepAlive:k};return x&&(tI(we[Ps],ay)||(we[Ps][ay]=lA),tI(we[Ps],yh)||(we[Ps][yh]=RD)),we}catch{}return null};function ce(M,Z){try{return W&&W.getSenderInst(M,Z)}catch{}return null}V._getDbgPlgTargets=function(){return[d[0],s,w,d,Be(),i]};function Be(){try{var M={xdrOnComplete:dt,fetchOnComplete:Co,xhrOnComplete:In,beaconOnRetry:Xt},Z={enableSendPromise:!1,isOneDs:!0,disableCredentials:!q,fetchCredentials:z,disableXhr:!1,disableBeacon:!l,disableBeaconSync:!l,disableFetchKeepAlive:k,timeWrapper:N,addNoResponse:_,senderOnCompleteCallBack:M};return Z}catch{}return null}function dt(M,Z,ie){var ge=_s(M);gn(Z,200,{},ge),Si(ge)}function Mt(){var M;i=null,s=new V6,a=!1,c=new W6,l=!1,u=0,f=null,m=null,d=null,p=null,h=!0,g=[],v={},C=[],w=null,y=!1,S=null,D=!1,x=!1,A=M,F=M,k=M,E=M,_=M,T=[],I=M,b=M,R=[],L=!1,N=Dh(),B=!1,W=null}function Co(M,Z,ie,ge){var be=function(P,O,H){gn(Z,P,O,H),Si(H)},qe={},we=M[Ps];we&&we.forEach(function(P,O){qe[O]=P}),be(M.status,qe,ie||Is)}function In(M,Z,ie){var ge=_s(M);gn(Z,M.status,xc(M,!0),ge),Si(ge)}function gn(M,Z,ie,ge){try{M(Z,ie,ge)}catch(be){se(m,2,518,Ce(be))}}function Xt(M,Z,ie){var ge=M,be=200,qe=ge[Eh],we=M.urlString+(_?tme:Is);try{var P=zn();if(qe){var O=!!p.getPlugin("LocalStorage"),H=[],G=[];Q(qe[zr],function(J){if(H&&J&&J[pn]()>0)for(var te=J[Ca](),ue=0;ue<te[ze];ue++)if(P.sendBeacon(we,w.getEventBlob(te[ue])))G[Jn](J[ue]);else{H[Jn](J[Ea](ue));break}else H[Jn](J[Ea](0))}),G[ze]>0&&(qe.sentEvts=G),O||Qn(H,8003,qe[Go],!0)}else be=0}catch(J){mo(m,"Failed to send telemetry using sendBeacon API. Ex:"+Ce(J)),be=0}finally{gn(Z,be,{},Is)}}function mt(M){return M===2||M===3}function nt(M){return D&&mt(M)&&(M=2),M}V.addHeader=function(M,Z){v[M]=Z},V.removeHeader=function(M){delete v[M]},V[my]=function(){return Dt()&&c[uy]()},V[Sh]=function(M,Z){Ve(M)&&(M=0),D&&(M=nt(M),Z=2),j(C,M,0)&&xe(yt(),0,!1,M,Z||0)},V.isCompletelyIdle=function(){return!a&&u===0&&C[ze]===0},V[py]=function(M){D=M},V.addBatch=function(M){if(M&&M[pn]()>0){if(s.isTenantKilled(M[yi]()))return!1;C[Jn](M)}return!0},V.teardown=function(){C[ze]>0&&xe(yt(),0,!0,2,2),Q(T,function(M){M&&M.rm&&M.rm()}),T=[]},V.pause=function(){a=!0},V.resume=function(){a=!1,V[Sh](0,4)},V[qD]=function(M,Z,ie){M&&M[pn]()>0&&(ae(Z)&&(Z=1),D&&(Z=nt(Z),ie=2),xe([M],0,!1,Z,ie||0))};function Dt(){return!a&&u<n}function yt(){var M=C;return C=[],M}function j(M,Z,ie){var ge=!1;return M&&M[ze]>0&&!a&&d[Z]&&w&&(ge=Z!==0||Dt()&&(ie>0||c[uy]())),ge}function oe(M){var Z={};return M&&Q(M,function(ie,ge){Z[ge]={iKey:ie[yi](),evts:ie[Ca]()}}),Z}function xe(M,Z,ie,ge,be){if(!(!M||M[ze]===0)){if(a){Qn(M,1,ge);return}ge=nt(ge);try{var qe=M,we=ge!==0;mn(p,function(){return"HttpManager:_sendBatches"},function(P){P&&(M=M.slice(0));for(var O=[],H=null,G=qo(),J=d[ge]||(we?d[1]:d[0]),te=J&&J[GD],ue=E&&(D||mt(ge)||te===3||J._isSync&&te===2);j(M,ge,Z);){var Oe=M.shift();Oe&&Oe[pn]()>0&&(s.isTenantKilled(Oe[yi]())?O[Jn](Oe):(H=H||w[YD](Z,ie,we,ue,be,ge),w.appendPayload(H,Oe,e)?H.overflow!==null&&(M=[H.overflow][ya](M),H.overflow=null,Ze(H,G,qo(),be),G=qo(),H=null):(Ze(H,G,qo(),be),G=qo(),M=[Oe][ya](M),H=null)))}H&&Ze(H,G,qo(),be),M[ze]>0&&(C=M[ya](C)),Qn(O,8004,ge)},function(){return{batches:oe(qe),retryCount:Z,isTeardown:ie,isSynchronous:we,sendReason:be,useSendBeacon:mt(ge),sendType:ge}},!we)}catch(P){se(m,2,48,"Unexpected Exception sending batch: "+Ce(P))}}}function le(M,Z){var ie={url:i,hdrs:{},useHdrs:!1};Z?(ie[xd]=Cd(ie[xd],v),ie.useHdrs=Ir(ie.hdrs)[ze]>0):Ie(v,function(P,O){bA[P]?Ih(ie,bA[P],O,!1):(ie[xd][P]=O,ie[MD]=!0)}),Ih(ie,uA,"NO_AUTH",Z),Ih(ie,kD,vh,Z);var ge=Is;Q(M.apiKeys,function(P){ge[ze]>0&&(ge+=","),ge+=P}),Ih(ie,AD,ge,Z),Ih(ie,LD,Sn().toString(),Z);var be=Fr(M);if(pr(be)&&(ie.url+="&ext.intweb.msfpc="+be),c[OD]()&&Ih(ie,ND,c[UD](),Z),p[xh]){var qe=p[xh]();qe>=0&&(ie.url+="&w="+qe)}for(var we=0;we<g[ze];we++)ie.url+="&"+g[we].name+"="+g[we].value;return ie}function De(M,Z,ie){M[Z]=M[Z]||{},M[Z][f.identifier]=ie}function Ze(M,Z,ie,ge){if(M&&M.payloadBlob&&M.payloadBlob[ze]>0){var be=!!I,qe=d[M.sendType];!mt(M[Go])&&M[SA]&&M.sendReason===2&&(qe=d[2]||d[3]||qe);var we=x;(M.isBeacon||qe[GD]===3)&&(we=!1);var P=le(M,we);we=we||P[MD];var O=qo();mn(p,function(){return"HttpManager:_doPayloadSend"},function(){for(var H=0;H<M.batches[ze];H++)for(var G=M[zr][H],J=G[Ca](),te=0;te<J[ze];te++){var ue=J[te];if(y){var Oe=ue[hy]=ue[hy]||{};De(Oe,"sendEventStart",O),De(Oe,"serializationStart",Z),De(Oe,"serializationCompleted",ie)}ue[IA]>0?ue[IA]++:ue[IA]=1}Qn(M[zr],1e3+(ge||0),M[Go],!0);var Xe={data:M[EA],urlString:P.url,headers:P[xd],_thePayload:M,_sendReason:ge,timeout:A,disableXhrSync:F,disableFetchKeepAlive:k};we&&(tI(Xe[Ps],ay)||(Xe[Ps][ay]=lA),tI(Xe[Ps],yh)||(Xe[Ps][yh]=RD));var Te=null;qe&&(Te=function(Eo){c.firstRequestSent();var Ua=function(Ls,pC){pt(Ls,pC,M,ge)},So=M[zD]||M.isSync;try{qe.sendPOST(Eo,Ua,So),b&&b(Xe,Eo,So,M[SA])}catch(Ls){mo(m,"Unexpected exception sending payload. Ex:"+Ce(Ls)),gn(Ua,0,{})}}),mn(p,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Te)if(M[Go]===0&&u++,be&&!M.isBeacon&&qe[GD]!==3){var Eo={data:Xe.data,urlString:Xe.urlString,headers:Cd({},Xe[Ps]),timeout:Xe.timeout,disableXhrSync:Xe[gA],disableFetchKeepAlive:Xe[vA]},Ua=!1;mn(p,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{I(Eo,function(So){Ua=!0,!h&&!So[Eh]&&(So[Eh]=So[Eh]||Xe[Eh],So[KD]=So[KD]||Xe[KD]),Te(So)},M.isSync||M[zD])}catch{Ua||Te(Xe)}})}else Te(Xe)})},function(){return{thePayload:M,serializationStart:Z,serializationCompleted:ie,sendReason:ge}},M.isSync)}M.sizeExceed&&M.sizeExceed[ze]>0&&Qn(M.sizeExceed,8003,M[Go]),M.failedEvts&&M.failedEvts[ze]>0&&Qn(M.failedEvts,8002,M[Go])}function rt(M,Z){y&&Q(M,function(ie){var ge=ie[hy]=ie[hy]||{};De(ge,"sendEventCompleted",Z)})}function pt(M,Z,ie,ge){var be=9e3,qe=null,we=!1,P=!1;try{var O=!0;if(typeof M!==Zs){if(Z){c[fy](Z[k6]);var H=Z[R6]||Z["kill-duration-seconds"];Q(s[JD](Z[T6],H),function(J){Q(ie[zr],function(te){if(te[yi]()===J){qe=qe||[];var ue=te[Ea](0);ie.numEvents-=ue[pn](),qe[Jn](ue)}})})}if(M==200||M==204){be=200;return}(!G6(M)||ie.numEvents<=0)&&(O=!1),be=9e3+M%1e3}if(O){be=100;var G=ie.retryCnt;ie[Go]===0&&(G<r?(we=!0,Ar(function(){ie[Go]===0&&u--,xe(ie[zr],G+1,ie[zD],D?2:ie[Go],5)},D,QD(G))):(P=!0,D&&(be=8001)))}}finally{we||(c[fy](),vn(ie,be,ge,P)),Qn(qe,8004,ie[Go])}}function vn(M,Z,ie,ge){try{ge&&f[XD]();var be=M[zr];Z===200&&(be=M.sentEvts||M[zr],!ge&&!M.isSync&&f._clearBackOff(),Bn(be)),Qn(be,Z,M[Go],!0)}finally{M[Go]===0&&(u--,ie!==5&&V.sendQueuedRequests(M[Go],ie))}}function Bn(M){if(y){var Z=qo();Q(M,function(ie){ie&&ie[pn]()>0&&rt(ie[Ca](),Z)})}}function Ar(M,Z,ie){Z?M():N.set(M,ie)}function Fr(M){for(var Z=0;Z<M.batches[ze];Z++){var ie=M[zr][Z].Msfpc();if(ie)return encodeURIComponent(ie)}return Is}function Si(M){var Z=R;try{for(var ie=0;ie<Z[ze];ie++)try{Z[ie](M)}catch(be){se(m,1,519,"Response handler failed: "+be)}if(M){var ge=JSON.parse(M);pr(ge.webResult)&&pr(ge.webResult[Ch])&&S.set("MSFPC",ge.webResult[Ch],365*86400)}}catch{}}function Qn(M,Z,ie,ge){if(M&&M[ze]>0&&o){var be=o[Oa(Z)];if(be){var qe=ie!==0;mn(p,function(){return"HttpManager:_sendBatchesNotification"},function(){Ar(function(){try{be.call(o,M,Z,qe,ie)}catch(we){se(m,1,74,"send request notification failed: "+we)}},ge||qe,0)},function(){return{batches:oe(M),reason:Z,isSync:qe,sendSync:ge,sendType:ie}},!qe)}}}function Oa(M){var Z=rme[M];return pr(Z)||(Z=b6,M>=9e3&&M<=9999?Z=P6:M>=8e3&&M<=8999?Z=TD:M>=1e3&&M<=1999&&(Z=I6)),Z}})}return t.__ieDyn=1,t}()});function fme(t){return t&&t.sendPOST}var sme,t4,ame,o4,i4,cme,n4,lme,TA,bd,r4,Un,ume,s4,a4=ne(()=>{Ho();dr();Ed();od();Ne();aA();ZD();e4();ly();_A();DA();_h();sme=.25,t4=500,ame=20,o4=6,i4=2,cme=4,n4=2,lme=1,TA=1e4,bd="eventsDiscarded",r4="",Un=void 0,ume=ws({eventsLimitInMem:{isVal:gu,v:TA},immediateEventLimit:{isVal:gu,v:500},autoFlushEventsLimit:{isVal:gu,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:fme,v:Un},overrideInstrumentationKey:Un,overrideEndpointUrl:Un,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Un,clearTimeoutOverride:Un,payloadPreprocessor:Un,payloadListener:Un,disableEventTimings:Un,valueSanitizer:Un,stringifyObjects:Un,enableCompoundKey:Un,disableOptimizeObj:!1,fetchCredentials:Un,transports:Un,unloadTransports:Un,useSendBeacon:Un,disableFetchKeepAlive:Un,avoidOptions:!1,xhrTimeout:Un,disableXhrSync:Un,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:_r,v:o4},maxUnloadEventRetryAttempts:{isVal:_r,v:i4},addNoResponse:Un,excludeCsMetaData:Un});s4=function(t){Mo(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.6";var r,o=!1,i=[],s,a=!1,c=0,l,u=0,f,m={},d=Sd,p,h,g,v,C,w,y,S,D,x,A,F,k,E,_,T,I,b,R,L,N,B;return Je(e,n,function(W,z){nt(),W._getDbgPlgTargets=function(){return[C,r]},W[_d]=function(P,O,H){mn(O,function(){return"PostChannel:initialize"},function(){z[_d](P,O,H),R=O.getNotifyMgr();try{_=wi(Tr(W[gy]),O.evtNamespace&&O.evtNamespace()),W._addHook(mr(P,function(G){var J=G.cfg,te=po(null,J,O);r=te.getExtCfg(W[gy],ume),T=Dh(r[HD],r[BD]),A=!r.disableOptimizeObj&&DD(),I=r[U6],q(O),f=r.eventsLimitInMem,l=r.immediateEventLimit,y=r[xA],k=r.maxEventRetryAttempts,E=r.maxUnloadEventRetryAttempts,b=r[$6],co(J.endpointUrl)?W.pause():a&&W.resume(),we(),N=r[M6],B=!!r.disableTelemetry,L&&V();var ue=J.disablePageUnloadEvents||[];L=ey(dt,ue,_),L=ph(dt,ue,_)||L,L=hh(Mt,J.disablePageShowEvents,_)||L})),C[_d](P,W.core,W)}catch(G){throw W.setInitialized(!1),G}},function(){return{theConfig:P,core:O,extensions:H}})},W.processTelemetry=function(P,O){sy(P,W[gy]),O=O||W._getTelCtx(O);var H=P;!B&&!o&&(N&&(H[yi]=N),In(H,!0),F?j(2,2):mt()),W.processNext(H,O)},W.getOfflineSupport=function(){try{var P=C&&C[VD]();if(C)return{getUrl:function(){return P?P.url:null},serialize:Be,batch:ce,shouldProcess:function(O){return!B},createPayload:function(O){return null},createOneDSPayload:function(O){if(C[dy])return C[dy](O,A)}}}catch{}return null},W._doTeardown=function(P,O){j(2,2),o=!0,C.teardown(),V(),nt()};function V(){ty(null,_),ny(null,_),ry(null,_)}function q(P){var O=P[xh];P[xh]=function(){var H=0;return I&&(H=H|2),H|O.call(P)}}function ce(P){var O=r4;return P&&P[ze]&&Q(P,function(H){O&&(O+=`
`),O+=H}),O}function Be(P){var O=r4;try{Co(P),O=C[jD](P)}catch{}return O}function dt(P){var O=P||Fn().event;O.type!=="beforeunload"&&(F=!0,C[py](F)),j(2,2)}function Mt(P){F=!1,C[py](F)}function Co(P){P.ext&&P.ext[mA]&&delete P.ext[mA],P.ext&&P.ext[FD]&&P.ext[FD].id&&delete P.ext[FD].id,A&&(P.ext=Yo(P.ext),P.baseData&&(P.baseData=Yo(P.baseData)),P.data&&(P.data=Yo(P.data)))}function In(P,O){if(P[vy]||(P[vy]=0),P[vu]||(P[vu]=1),Co(P),P[Dd]){if(g||a)P[vu]=3,P[Dd]=!1;else if(C){A&&(P=Yo(P)),C[qD](wu.create(P[yi],[P]),P[Dd]===!0?1:P[Dd],3);return}}var H=P[vu],G=u,J=f;H===4&&(G=c,J=l);var te=!1;if(G<J)te=!De(P,O);else{var ue=1,Oe=ame;H===4&&(ue=4,Oe=1),te=!0,Ze(P[yi],P[vu],ue,Oe)&&(te=!De(P,O))}te&&Oa(bd,[P],Cs.QueueFull)}W.setEventQueueLimits=function(P,O){r.eventsLimitInMem=f=gu(P)?P:TA,r[xA]=y=gu(O)?O:0,we();var H=u>P;if(!H&&S>0)for(var G=1;!H&&G<=3;G++){var J=w[G];J&&J[zr]&&Q(J[zr],function(te){te&&te[pn]()>=S&&(H=!0)})}le(!0,H)},W.pause=function(){yt(),a=!0,C&&C.pause()},W.resume=function(){a=!1,C&&C.resume(),mt()},W._loadTransmitProfiles=function(P){Ar(),Ie(P,function(O,H){var G=H[ze];if(G>=2){var J=G>2?H[2]:0;if(H.splice(0,G-2),H[1]<0&&(H[0]=-1),H[1]>0&&H[0]>0){var te=H[0]/H[1];H[0]=hG(te)*H[1]}J>=0&&H[1]>=0&&J>H[1]&&(J=H[1]),H[Jn](J),m[O]=H}})},W.flush=function(P,O,H){P===void 0&&(P=!0);var G;if(!a)if(H=H||1,P)O||(G=qi(function(te){O=te})),s==null?(yt(),pt(1,0,H),s=Dt(function(){s=null,vn(O,H)},0)):i[Jn](O);else{var J=yt();gn(1,1,H),O&&O(),J&&mt()}return G},W.setMsaAuthTicket=function(P){C.addHeader(cy,P)},W.setAuthPluginHeader=function(P){C.addHeader(fA,P)},W.removeAuthPluginHeader=function(){C.removeHeader(fA)},W.hasEvents=Xt,W._setTransmitProfile=function(P){d!==P&&m[P]!==void 0&&(yt(),d=P,mt())},vi(W,function(){return C},["addResponseHandler"]);function gn(P,O,H){var G=pt(P,O,H);return C[Sh](O,H),G}function Xt(){return u>0}function mt(){if(D>=0&&pt(D,0,x)&&C[Sh](0,x),c>0&&!h&&!a){var P=m[d][2];P>=0&&(h=Dt(function(){h=null,gn(4,0,1),mt()},P))}var O=m[d][1];!p&&!s&&O>=0&&!a&&(Xt()?p=Dt(function(){p=null,gn(v===0?3:1,0,1),v++,v%=2,mt()},O):v=0)}W[XD]=function(){g<cme&&(g++,yt(),mt())},W._clearBackOff=function(){g&&(g=0,yt(),mt())};function nt(){r=null,o=!1,i=[],s=null,a=!1,c=0,l=500,u=0,f=TA,m={},d=Sd,p=null,h=null,g=0,v=0,w={},y=0,L=!1,S=0,D=-1,x=null,A=!0,F=!1,k=o4,E=i4,_=null,N=null,B=!1,T=Dh(),C=new Q6(t4,n4,lme,{requeue:Si,send:Z,sent:ie,drop:ge,rspFail:be,oth:qe}),Fr(),oe(),we()}function Dt(P,O){O===0&&g&&(O=1);var H=1e3;return g&&(H=QD(g-1)),T.set(P,O*H)}function yt(){return p!==null?(p.cancel(),p=null,v=0,!0):!1}function j(P,O){yt(),s&&(s.cancel(),s=null),a||gn(1,P,O)}function oe(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function xe(P,O,H){var G=w[O];G||(O=1,G=w[O]);var J=G.iKeyMap[P];return!J&&H&&(J=wu.create(P),G.batches[Jn](J),G.iKeyMap[P]=J),J}function le(P,O){C[my]()&&!g&&(y>0&&u>y&&(O=!0),O&&s==null&&W.flush(P,function(){},20))}function De(P,O){A&&(P=Yo(P));var H=P[vu],G=xe(P[yi],H,!0);return G.addEvent(P)?(H!==4?(u++,O&&P[vy]===0&&le(!P.sync,S>0&&G[pn]()>=S)):c++,!0):!1}function Ze(P,O,H,G){for(;H<=O;){var J=xe(P,O,!0);if(J&&J[pn]()>0){var te=J[Ea](0,G),ue=te[pn]();if(ue>0)return H===4?c-=ue:u-=ue,M(bd,[te],Cs.QueueFull),!0}H++}return rt(),!1}function rt(){for(var P=0,O=0,H=function(J){var te=w[J];te&&te[zr]&&Q(te[zr],function(ue){J===4?P+=ue[pn]():O+=ue[pn]()})},G=1;G<=4;G++)H(G);u=O,c=P}function pt(P,O,H){var G=!1,J=O===0;return!J||C[my]()?mn(W.core,function(){return"PostChannel._queueBatches"},function(){for(var te=[],ue=4;ue>=P;){var Oe=w[ue];Oe&&Oe.batches&&Oe.batches[ze]>0&&(Q(Oe[zr],function(Xe){C.addBatch(Xe)?G=G||Xe&&Xe[pn]()>0:te=te[ya](Xe[Ca]()),ue===4?c-=Xe[pn]():u-=Xe[pn]()}),Oe[zr]=[],Oe.iKeyMap={}),ue--}te[ze]>0&&Oa(bd,te,Cs.KillSwitch),G&&D>=P&&(D=-1,x=0)},function(){return{latency:P,sendType:O,sendReason:H}},!J):(D=D>=0?zl(D,P):P,x=ta(x,H)),G}function vn(P,O){gn(1,0,O),rt(),Bn(function(){P&&P(),i[ze]>0?s=Dt(function(){s=null,vn(i.shift(),O)},0):(s=null,mt())})}function Bn(P){C.isCompletelyIdle()?P():s=Dt(function(){s=null,Bn(P)},sme)}function Ar(){yt(),Fr(),d=Sd,mt()}function Fr(){m={},m[Sd]=[2,1,0],m[PD]=[6,3,0],m[bD]=[18,9,0]}function Si(P,O){var H=[],G=k;F&&(G=E),Q(P,function(J){J&&J[pn]()>0&&Q(J[Ca](),function(te){te&&(te[Dd]&&(te[vu]=4,te[Dd]=!1),te[vy]<G?(sy(te,W[gy]),In(te,!1)):H[Jn](te))})}),H[ze]>0&&Oa(bd,H,Cs.NonRetryableStatus),F&&j(2,2)}function Qn(P,O){var H=R||{},G=H[P];if(G)try{G.apply(H,O)}catch(J){se(W.diagLog(),1,74,P+" notification failed: "+J)}}function Oa(P,O){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];O&&O[ze]>0&&Qn(P,[O][ya](H))}function M(P,O){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];O&&O[ze]>0&&Q(O,function(J){J&&J[pn]()>0&&Qn(P,[J.events()][ya](H))})}function Z(P,O,H){P&&P[ze]>0&&Qn("eventsSendRequest",[O>=1e3&&O<=1999?O-1e3:0,H!==!0])}function ie(P,O){M("eventsSent",P,O),mt()}function ge(P,O){M(bd,P,O>=8e3&&O<=8999?O-8e3:Cs.Unknown)}function be(P){M(bd,P,Cs.NonRetryableStatus),mt()}function qe(P,O){M(bd,P,Cs.Unknown),mt()}function we(){b?S=0:S=ta(t4*(n4+1),f/6)}}),n}return e.__ieDyn=1,e}(kc)});var c4={};wC(c4,{BE_PROFILE:()=>bD,NRT_PROFILE:()=>PD,PostChannel:()=>s4,RT_PROFILE:()=>Sd});var l4=ne(()=>{aA();a4()});var wy,yy,nI,Td,Sa,Kr,bs=ne(()=>{wy="sampleRate",yy="ProcessLegacy",nI="http.method",Td="https://dc.services.visualstudio.com",Sa="/v2/track",Kr="not_specified"});var rI,f4=ne(()=>{Ot();rI=AN({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Rd,Me,kd,yu,Cu,RA,Ph,d4,Cy,Ey,Nd,Jr,Rr,Xr,Sy,xy,bh,Ld,oI,Ad,_y,Dy,xa,Fd,Th,Od,ho=ne(()=>{Rd="split",Me="length",kd="toLowerCase",yu="ingestionendpoint",Cu="toString",RA="removeItem",Ph="message",d4="count",Cy="stringify",Ey="pathname",Nd="match",Jr="name",Rr="properties",Xr="measurements",Sy="sizeInBytes",xy="typeName",bh="exceptions",Ld="severityLevel",oI="problemGroup",Ad="parsedStack",_y="hasFullStack",Dy="assembly",xa="fileName",Fd="line",Th="aiDataContract",Od="duration"});function kA(t,e,n){var r=e[Me],o=m4(t,e);if(o[Me]!==r){for(var i=0,s=o;n[s]!==void 0;)i++,s=Gn(o,0,147)+p4(i);o=s}return o}function m4(t,e){var n;return e&&(e=et(En(e)),e[Me]>150&&(n=Gn(e,0,150),se(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),n||e}function Nt(t,e,n){n===void 0&&(n=1024);var r;return e&&(n=n||1024,e=et(En(e)),e[Me]>n&&(r=Gn(e,0,n),se(t,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:e},!0))),r||e}function Ud(t,e){return AA(t,e,2048,66)}function Iy(t,e){var n;return e&&e[Me]>32768&&(n=Gn(e,0,32768),se(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),n||e}function NA(t,e){var n;if(e){var r=""+e;r[Me]>32768&&(n=Gn(r,0,32768),se(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return n||e}function go(t,e){if(e){var n={};Ie(e,function(r,o){if(tn(o)&&fa())try{o=br()[Cy](o)}catch(i){se(t,2,49,"custom property is not valid",{exception:i},!0)}o=Nt(t,o,8192),r=kA(t,r,n),n[r]=o}),e=n}return e}function vo(t,e){if(e){var n={};Ie(e,function(r,o){r=kA(t,r,n),n[r]=o}),e=n}return e}function LA(t,e){return e&&AA(t,e,128,69)[Cu]()}function AA(t,e,n,r){var o;return e&&(e=et(En(e)),e[Me]>n&&(o=Gn(e,0,n),se(t,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:e},!0))),o||e}function p4(t){var e="00"+t;return na(e,e[Me]-3)}var Ts=ne(()=>{Ot();Ne();ho()});function v4(t){var e=g4,n=mme,r=n[e];return h4.createElement?n[e]||(r=n[e]=h4.createElement("a")):r={host:pme(t,!0)},r.href=t,e++,e>=n[Me]&&(e=0),g4=e,r}function pme(t,e){var n=w4(t,e)||"";if(n){var r=n[Nd](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[Me]>3&&ke(r[2])&&r[2][Me]>0)return r[2]+(r[3]||"")}return n}function w4(t,e){var n=null;if(t){var r=t[Nd](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[Me]>2&&ke(r[2])&&r[2][Me]>0&&(n=r[2]||"",e&&r[Me]>2)){var o=(r[1]||"")[kd](),i=r[3]||"";(o==="http"&&i===":80"||o==="https"&&i===":443")&&(i=""),n+=i}}return n}var h4,g4,mme,y4=ne(()=>{Ot();ho();h4=An()||{},g4=0,mme=[null,null,null,null,null]});function iI(t){return vt(hme,t[kd]())!==-1}function C4(t,e,n,r){var o,i=r,s=r;if(e&&e[Me]>0){var a=v4(e);if(o=a.host,!i)if(a[Ey]!=null){var c=a.pathname[Me]===0?"/":a[Ey];c.charAt(0)!=="/"&&(c="/"+c),s=a[Ey],i=Nt(t,n?n+" "+c:c)}else i=Nt(t,e)}else o=r,i=r;return{target:o,name:i,data:s}}var hme,FA=ne(()=>{Ot();bs();Ts();y4();ho();hme=[Td+Sa,"https://breeze.aimon.applicationinsights.io"+Sa,"https://dc-int.services.visualstudio.com"+Sa]});var sI,FAe,OAe,E4=ne(()=>{Ot();sI=fn({LocalStorage:0,SessionStorage:1}),FAe=fn({AI:0,AI_AND_W3C:1,W3C:2}),OAe=fn({Normal:1,Critical:2})});function x4(t){try{if(ae(uo()))return null;var e=new Date()[Cu](),n=gt(t===sI.LocalStorage?"localStorage":"sessionStorage"),r=S4+e;n.setItem(r,e);var o=n.getItem(r)!==e;if(n[RA](r),!o)return n}catch{}return null}function OA(){return aI()?x4(sI.SessionStorage):null}function UA(t){S4=t||""}function aI(t){return(t||Rh===void 0)&&(Rh=!!x4(sI.SessionStorage)),Rh}function $A(t,e){var n=OA();if(n!==null)try{return n.getItem(e)}catch(r){Rh=!1,se(t,2,2,"Browser failed read of session storage. "+nn(r),{exception:Ce(r)})}return null}function MA(t,e,n){var r=OA();if(r!==null)try{return r.setItem(e,n),!0}catch(o){Rh=!1,se(t,2,4,"Browser failed write to session storage. "+nn(o),{exception:Ce(o)})}return!1}function HA(t,e){var n=OA();if(n!==null)try{return n[RA](e),!0}catch(r){Rh=!1,se(t,2,6,"Browser failed removal of session storage item. "+nn(r),{exception:Ce(r)})}return!1}var Rh,S4,_4=ne(()=>{Ot();E4();ho();Rh=void 0,S4=""});function Py(t){if(!t)return{};var e=t[Rd](gme),n=hw(e,function(o,i){var s=i[Rd](vme);if(s[Me]===2){var a=s[0][kd](),c=s[1];o[a]=c}return o},{});if(Ir(n)[Me]>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n[yu]=n[yu]||"https://"+r+"dc."+n.endpointsuffix}n[yu]=n[yu]||Td,Jf(n[yu],"/")&&(n[yu]=n[yu].slice(0,-1))}return n}var gme,vme,D4=ne(()=>{Ot();bs();ho();gme=";",vme="="});var BA,I4=ne(()=>{Ot();bs();ho();Ts();BA=function(){function t(e,n,r){var o=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[Jr]=Nt(e,r)||Kr,i.data=n,i.time=xs(new Date),i[Th]={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1}}return t}()});var Oc,P4=ne(()=>{bs();ho();Ts();Oc=function(){function t(e,n,r,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[Jr]=Nt(e,n)||Kr,i[Rr]=go(e,r),i[Xr]=vo(e,o)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function Ime(t){return t.replace(/(\(anonymous\))/,"<anonymous>")}function Pme(t){return Wi(t,"[native")<0}function YA(t,e){var n=t;return n&&!ke(n)&&(JSON&&JSON[Cy]?(n=JSON[Cy](t),e&&(!n||n==="{}")&&(Re(t[Cu])?n=t[Cu]():n=""+t)):n=""+t+" - (Missing JSON.stringify)"),n||""}function A4(t,e){var n=t;return t&&(n&&!ke(n)&&(n=t[VA]||t[L4]||n),n&&!ke(n)&&(n=YA(n,!0)),t.filename&&(n=n+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&Wi(n||"",e)===-1&&(n=e+": "+n),n||""}function bme(t){try{if(tn(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function Tme(t){try{if(tn(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function k4(t){return t&&t.src&&ke(t.src)&&t.obj&&ve(t.obj)}function $d(t){var e=t||"";ke(e)||(ke(e[Ji])?e=e[Ji]:e=""+e);var n=e[Rd](`
`);return{src:e,obj:n}}function Rme(t){for(var e=[],n=t[Rd](`
`),r=0;r<n[Me];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),e.push(o)}return{src:t,obj:e}}function F4(t){var e=null;if(t)try{if(t[Ji])e=$d(t[Ji]);else if(t[kh]&&t[kh][Ji])e=$d(t[kh][Ji]);else if(t.exception&&t.exception[Ji])e=$d(t.exception[Ji]);else if(k4(t))e=t;else if(k4(t[jA]))e=t[jA];else if(Fn()&&Fn().opera&&t[VA])e=Rme(t[Ph]);else if(t.reason&&t.reason[Ji])e=$d(t.reason[Ji]);else if(ke(t))e=$d(t);else{var n=t[VA]||t[L4]||"";ke(t[T4])&&(n&&(n+=`
`),n+=" from "+t[T4]),n&&(e=$d(n))}}catch(r){e=$d(r)}return e||{src:"",obj:null}}function kme(t){var e="";return t&&(t.obj?e=t.obj.join(`
`):e=t.src||""),e}function Nme(t){var e,n=t.obj;if(n&&n[Me]>0){e=[];var r=0,o=!1,i=0;Q(n,function(h){if(o||Ome(h)){var g=En(h);o=!0;var v=Ume(g,r);v&&(i+=v[Sy],e.push(v),r++)}});var s=32*1024;if(i>s)for(var a=0,c=e[Me]-1,l=0,u=a,f=c;a<c;){var m=e[a][Sy],d=e[c][Sy];if(l+=m+d,l>s){var p=f-u+1;e.splice(u,p);break}u=a,f=c,a++,c--}}return e}function cI(t){var e="";if(t&&(e=t.typeName||t[Jr]||"",!e))try{var n=/function (.{1,200})\(/,r=n.exec(t.constructor[Cu]());e=r&&r[Me]>1?r[1]:""}catch{}return e}function WA(t){if(t)try{if(!ke(t)){var e=cI(t),n=YA(t,!1);return(!n||n==="{}")&&(t[kh]&&(t=t[kh],e=cI(t)),n=YA(t,!0)),Wi(n,e)!==0&&e!=="String"?e+":"+n:n}}catch{}return""+(t||"")}function Ame(){var t=this,e=ve(t[Ad])&&pc(t[Ad],function(r){return Mme(r)}),n={id:t.id,outerId:t.outerId,typeName:t[xy],message:t[Ph],hasFullStack:t[_y],stack:t[Ji],parsedStack:e||void 0};return n}function O4(t,e,n){var r,o,i,s,a,c,l,u;if(bme(e))s=e[xy],a=e[Ph],l=e[Ji],u=e[Ad]||[],c=e[_y];else{var f=e,m=f&&f.evt;qf(f)||(f=f[kh]||m||f),s=Nt(t,cI(f))||Kr,a=Iy(t,A4(e||f,s))||Kr;var d=e[jA]||F4(e);u=Nme(d),ve(u)&&pc(u,function(p){p[Dy]=Nt(t,p[Dy]),p[xa]=Nt(t,p[xa])}),l=NA(t,kme(d)),c=ve(u)&&u[Me]>0,n&&(n[xy]=n[xy]||s)}return r={},r[Th]=Lme,r.id=o,r.outerId=i,r.typeName=s,r.message=a,r[_y]=c,r.stack=l,r.parsedStack=u,r.toInterface=Ame,r}function Fme(t,e){var n=ve(e[Ad])&&pc(e[Ad],function(o){return $me(o)})||e[Ad],r=O4(t,ji(ji({},e),{parsedStack:n}));return r}function U4(t,e){var n=e[Nd](_me);if(n&&n[Me]>=4)t[xa]=n[1],t[Fd]=parseInt(n[2]);else{var r=e[Nd](Dme);r&&r[Me]>=3?(t[xa]=r[1],t[Fd]=parseInt(r[2])):t[xa]=e}}function N4(t,e,n){var r=t[xa];e.fn&&n&&n[Me]>e.fn&&(e.ln&&n[Me]>e.ln?(r=et(n[e.fn]||""),t[Fd]=parseInt(et(n[e.ln]||""))||0):r=et(n[e.fn]||"")),r&&U4(t,r)}function Ome(t){var e=!1;if(t&&ke(t)){var n=et(t);n&&(e=yme.test(n))}return e}function Ume(t,e){var n,r;if(t&&ke(t)&&et(t)){r=(n={},n[Th]=$4,n.level=e,n.assembly=et(t),n.method=b4,n.fileName="",n.line=0,n.sizeInBytes=0,n);for(var o=0;o<R4[Me];){var i=R4[o];if(i.chk&&!i.chk(t))break;i.pre&&(t=i.pre(t));var s=t[Nd](i.re);if(s&&s[Me]>=i.len){i.m&&(r.method=et(s[i.m]||b4)),i.hdl?i.hdl(r,i,s):i.fn&&(i.ln?(r[xa]=et(s[i.fn]||""),r[Fd]=parseInt(et(s[i.ln]||""))||0):U4(r,s[i.fn]||""));break}o++}}return M4(r)}function $me(t){var e,n=(e={},e[Th]=$4,e.level=t.level,e.method=t.method,e.assembly=t[Dy],e.fileName=t[xa],e.line=t[Fd],e.sizeInBytes=0,e);return M4(n)}function M4(t){var e=wme;return t&&(e+=t.method[Me],e+=t.assembly[Me],e+=t.fileName[Me],e+=t.level.toString()[Me],e+=t.line.toString()[Me],t[Sy]=e),t}function Mme(t){return{level:t.level,method:t.method,assembly:t[Dy],fileName:t[xa],line:t[Fd]}}var wme,yme,Cme,Eme,Sme,xme,_me,Dme,b4,kh,Ji,jA,T4,VA,L4,R4,Md,Lme,$4,H4=ne(()=>{Ho();Ot();Ne();bs();ho();Ts();wme=58,yme=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Cme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Eme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,Sme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,xme=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,_me=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Dme=/([^\(\s\n]+):([0-9]+)$/,b4="<no_method>",kh="error",Ji="stack",jA="stackDetails",T4="errorSrc",VA="message",L4="description",R4=[{re:Cme,len:5,m:1,fn:2,ln:3,col:4},{chk:Pme,pre:Ime,re:Eme,len:4,m:1,fn:2,ln:3},{re:Sme,len:3,m:1,fn:2,hdl:N4},{re:xme,len:2,fn:1,hdl:N4}];Md=function(){function t(e,n,r,o,i,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,Tme(n)?(a[bh]=n[bh]||[],a[Rr]=n[Rr],a[Xr]=n[Xr],n[Ld]&&(a[Ld]=n[Ld]),n.id&&(a.id=n.id,n[Rr].id=n.id),n[oI]&&(a[oI]=n[oI]),ae(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),s&&(r.id=s),a[bh]=[O4(e,n,r)],a[Rr]=go(e,r),a[Xr]=vo(e,o),i&&(a[Ld]=i),s&&(a.id=s))}return t.CreateAutoException=function(e,n,r,o,i,s,a,c){var l=cI(i||s||e);return{message:A4(e,l),url:n,lineNumber:r,columnNumber:o,error:WA(i||s||e),evt:WA(s||e),typeName:l,stackDetails:F4(a||i||s),errorSrc:c}},t.CreateFromInterface=function(e,n,r,o){var i=n[bh]&&pc(n[bh],function(a){return Fme(e,a)}),s=new t(e,ji(ji({},n),{exceptions:i}),r,o);return s},t.prototype.toInterface=function(){var e=this,n=e.exceptions,r=e.properties,o=e.measurements,i=e.severityLevel,s=e.problemGroup,a=e.id,c=e.isManual,l=n instanceof Array&&pc(n,function(u){return u.toInterface()})||void 0;return{ver:"4.0",exceptions:l,severityLevel:i,properties:r,measurements:o,problemGroup:s,id:a,isManual:c}},t.CreateSimpleException=function(e,n,r,o,i,s){var a;return{exceptions:[(a={},a[_y]=!0,a.message=e,a.stack=i,a.typeName=n,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=WA,t}(),Lme=lo({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});$4=lo({level:1,method:1,assembly:0,fileName:0,line:0})});var B4,W4=ne(()=>{B4=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var Uc,j4=ne(()=>{bs();ho();W4();Ts();Uc=function(){function t(e,n,r,o,i,s,a,c,l){this.aiDataContract={ver:1,metrics:1,properties:0};var u=this;u.ver=2;var f=new B4;f[d4]=o>0?o:void 0,f.max=isNaN(s)||s===null?void 0:s,f.min=isNaN(i)||i===null?void 0:i,f[Jr]=Nt(e,n)||Kr,f.value=r,f.stdDev=isNaN(a)||a===null?void 0:a,u.metrics=[f],u[Rr]=go(e,c),u[Xr]=vo(e,l)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function lI(t){(isNaN(t)||t<0)&&(t=0),t=wG(t);var e=by+t%1e3,n=by+Bi(t/1e3)%60,r=by+Bi(t/(1e3*60))%60,o=by+Bi(t/(1e3*60*60))%24,i=Bi(t/(1e3*60*60*24));return e=e[Me]===1?"00"+e:e[Me]===2?"0"+e:e,n=n[Me]<2?"0"+n:n,r=r[Me]<2?"0"+r:r,o=o[Me]<2?"0"+o:o,(i>0?i+".":by)+o+":"+r+":"+n+"."+e}var by,qA=ne(()=>{Ne();ho();by=""});var Hd,V4=ne(()=>{bs();qA();ho();Ts();Hd=function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=LA(e,a),c.url=Ud(e,r),c[Jr]=Nt(e,n)||Kr,isNaN(o)||(c[Od]=lI(o)),c[Rr]=go(e,i),c[Xr]=vo(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var Bd,Y4=ne(()=>{qA();FA();ho();Ts();Bd=function(){function t(e,n,r,o,i,s,a,c,l,u,f,m){l===void 0&&(l="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=n,d[Od]=lI(i),d.success=s,d.resultCode=a+"",d.type=Nt(e,l);var p=C4(e,r,c,o);d.data=Ud(e,o)||p.data,d.target=Nt(e,p.target),u&&(d.target="".concat(d.target," | ").concat(u)),d[Jr]=Nt(e,p[Jr]),d[Rr]=go(e,f),d[Xr]=vo(e,m)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var Wd,q4=ne(()=>{bs();ho();Ts();Wd=function(){function t(e,n,r,o,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,n=n||Kr,s[Ph]=Iy(e,n),s[Rr]=go(e,o),s[Xr]=vo(e,i),r&&(s[Ld]=r)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var jd,G4=ne(()=>{bs();ho();Ts();jd=function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=Ud(e,r),c[Jr]=Nt(e,n)||Kr,c[Rr]=go(e,i),c[Xr]=vo(e,s),a&&(c.domProcessing=a.domProcessing,c[Od]=a[Od],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var $c,z4=ne(()=>{$c=function(){function t(e,n){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=n}return t}()});var GA,K4=ne(()=>{Ot();GA=fn({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});function Su(t){var e="ai."+t+".";return function(n){return e+n}}var Ty,Xn,uI,Nh,zA,Eu,Vd,Ry,ky,KA=ne(()=>{Ho();Ot();Ty=Su("application"),Xn=Su("device"),uI=Su("location"),Nh=Su("operation"),zA=Su("session"),Eu=Su("user"),Vd=Su("cloud"),Ry=Su("internal"),ky=function(t){Mo(e,t);function e(){return t.call(this)||this}return e}(KN({applicationVersion:Ty("ver"),applicationBuild:Ty("build"),applicationTypeId:Ty("typeId"),applicationId:Ty("applicationId"),applicationLayer:Ty("layer"),deviceId:Xn("id"),deviceIp:Xn("ip"),deviceLanguage:Xn("language"),deviceLocale:Xn("locale"),deviceModel:Xn("model"),deviceFriendlyName:Xn("friendlyName"),deviceNetwork:Xn("network"),deviceNetworkName:Xn("networkName"),deviceOEMName:Xn("oemName"),deviceOS:Xn("os"),deviceOSVersion:Xn("osVersion"),deviceRoleInstance:Xn("roleInstance"),deviceRoleName:Xn("roleName"),deviceScreenResolution:Xn("screenResolution"),deviceType:Xn("type"),deviceMachineName:Xn("machineName"),deviceVMName:Xn("vmName"),deviceBrowser:Xn("browser"),deviceBrowserVersion:Xn("browserVersion"),locationIp:uI("ip"),locationCountry:uI("country"),locationProvince:uI("province"),locationCity:uI("city"),operationId:Nh("id"),operationName:Nh("name"),operationParentId:Nh("parentId"),operationRootId:Nh("rootId"),operationSyntheticSource:Nh("syntheticSource"),operationCorrelationVector:Nh("correlationVector"),sessionId:zA("id"),sessionIsFirst:zA("isFirst"),sessionIsNew:zA("isNew"),userAccountAcquisitionDate:Eu("accountAcquisitionDate"),userAccountId:Eu("accountId"),userAgent:Eu("userAgent"),userId:Eu("id"),userStoreRegion:Eu("storeRegion"),userAuthUserId:Eu("authUserId"),userAnonymousUserAcquisitionDate:Eu("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Eu("authUserAcquisitionDate"),cloudName:Vd("name"),cloudRole:Vd("role"),cloudRoleVer:Vd("roleVer"),cloudRoleInstance:Vd("roleInstance"),cloudEnvironment:Vd("environment"),cloudLocation:Vd("location"),cloudDeploymentUnit:Vd("deploymentUnit"),internalNodeName:Ry("nodeName"),internalSdkVersion:Ry("sdkVersion"),internalAgentVersion:Ry("agentVersion"),internalSnippet:Ry("snippet"),internalSdkSrc:Ry("sdkSrc")}))});var $n,J4=ne(()=>{KA();$n=new ky});function X4(t,e){Lc(t,null,null,e)}function JA(t){var e=An(),n=zn(),r=!1,o=[],i=1;n&&!ae(n.onLine)&&!n.onLine&&(i=2);var s=0,a=m(),c=wi(Tr("OfflineListener"),t);try{if(u(Fn())&&(r=!0),e){var l=e.body||e;l.ononline&&u(l)&&(r=!0)}}catch{r=!1}function u(w){var y=!1;return w&&(y=ha(w,"online",h,c),y&&ha(w,"offline",g,c)),y}function f(){return a}function m(){return!(s===2||i===2)}function d(){var w=m();a!==w&&(a=w,Q(o,function(y){var S={isOnline:a,rState:i,uState:s};try{y(S)}catch{}}))}function p(w){s=w,d()}function h(){i=1,d()}function g(){i=2,d()}function v(){var w=Fn();if(w&&r){if(X4(w,c),e){var y=e.body||e;Ve(y.ononline)||X4(y,c)}r=!1}}function C(w){return o.push(w),{rm:function(){var y=o.indexOf(w);if(y>-1)return o.splice(y,1)}}}return{isOnline:f,isListening:function(){return r},unload:v,addListener:C,setOnlineState:p}}var Z4=ne(()=>{Ot()});var fI,Mc=ne(()=>{FA();D4();f4();bs();I4();P4();H4();j4();V4();Y4();q4();G4();z4();K4();KA();Ts();J4();_4();Z4();fI="AppInsightsChannelPlugin"});var xu,Q4=ne(()=>{xu="duration"});var Mn,dI,zo,_a,qd,Ye,_u,Du,Xi,Iu,Hc,Bc,Wc,Zi,Ny,Pu,Lh,Gd,Ly,Ah,jc,bu,Fh,Oh,kr,mI,Uh,$h,Mh,pI,XA,hI,gI,ZA,QA,Rs,eF,tF,Ay,Tu,vI,Fy,wI,yI,CI,Hh,eK,Ru=ne(()=>{Mn="tags",dI="deviceType",zo="data",_a="name",qd="traceID",Ye="length",_u="stringify",Du="measurements",Xi="dataType",Iu="envelopeType",Hc="toString",Bc="enqueue",Wc="count",Zi="push",Ny="emitLineDelimitedJson",Pu="clear",Lh="markAsSent",Gd="clearSent",Ly="bufferOverride",Ah="BUFFER_KEY",jc="SENT_BUFFER_KEY",bu="concat",Fh="MAX_BUFFER_SIZE",Oh="triggerSend",kr="diagLog",mI="initialize",Uh="_sender",$h="endpointUrl",Mh="instrumentationKey",pI="customHeaders",XA="maxBatchSizeInBytes",hI="onunloadDisableBeacon",gI="isBeaconApiDisabled",ZA="alwaysUseXhrOverride",QA="enableSessionStorageBuffer",Rs="_buffer",eF="onunloadDisableFetch",tF="disableSendBeaconSplit",Ay="getSenderInst",Tu="_onError",vI="_onPartialSuccess",Fy="_onSuccess",wI="itemsReceived",yI="itemsAccepted",CI="baseType",Hh="sampleRate",eK="getHashCodeScore"});function _n(t,e,n){return Gi(t,e,n,gs)}function Hme(t,e,n){var r=n[Mn]=n[Mn]||{},o=e.ext=e.ext||{},i=e[Mn]=e[Mn]||[],s=o.user;s&&(_n(r,$n.userAuthUserId,s.authId),_n(r,$n.userId,s.id||s.localId));var a=o.app;a&&_n(r,$n.sessionId,a.sesId);var c=o.device;c&&(_n(r,$n.deviceId,c.id||c.localId),_n(r,$n[dI],c.deviceClass),_n(r,$n.deviceIp,c.ip),_n(r,$n.deviceModel,c.model),_n(r,$n[dI],c[dI]));var l=e.ext.web;if(l){_n(r,$n.deviceLanguage,l.browserLang),_n(r,$n.deviceBrowserVersion,l.browserVer),_n(r,$n.deviceBrowser,l.browser);var u=n[zo]=n[zo]||{},f=u[Yt]=u[Yt]||{},m=f[hr]=f[hr]||{};_n(m,"domain",l.domain),_n(m,"isManual",l.isManual?tK:null),_n(m,"screenRes",l.screenRes),_n(m,"userConsent",l.userConsent?tK:null)}var d=o.os;d&&(_n(r,$n.deviceOS,d[_a]),_n(r,$n.deviceOSVersion,d.osVer));var p=o.trace;p&&(_n(r,$n.operationParentId,p.parentID),_n(r,$n.operationName,Nt(t,p[_a])),_n(r,$n.operationId,p[qd]));for(var h={},g=i[Ye]-1;g>=0;g--){var v=i[g];Ie(v,function(w,y){h[w]=y}),i.splice(g,1)}Ie(i,function(w,y){h[w]=y});var C=ji(ji({},r),h);C[$n.internalSdkVersion]||(C[$n.internalSdkVersion]=Nt(t,"javascript:".concat(Bme.Version),64)),n[Mn]=Yo(C)}function ku(t,e,n){ae(t)||Ie(t,function(r,o){_r(o)?n[r]=o:ke(o)?e[r]=o:fa()&&(e[r]=br()[_u](o))})}function zd(t,e){ae(t)||Ie(t,function(n,r){t[n]=r||e})}function Kd(t,e,n,r){var o=new BA(t,r,e);_n(o,"sampleRate",n[wy]),(n[Yt]||{}).startTime&&(o.time=xs(n[Yt].startTime)),o.iKey=n.iKey;var i=n.iKey.replace(/-/g,"");return o[_a]=o[_a].replace("{0}",i),Hme(t,n,o),n[Mn]=n[Mn]||[],Yo(o)}function Jd(t,e){ae(e[Yt])&&se(t,1,46,"telemetryItem.baseData cannot be null.")}function nK(t,e,n){Jd(t,e);var r=e[Yt][Du]||{},o=e[Yt][hr]||{};ku(e[zo],o,r),ae(n)||zd(o,n);var i=e[Yt];if(ae(i))return mo(t,"Invalid input for dependency data"),null;var s=i[hr]&&i[hr][nI]?i[hr][nI]:"GET",a=new Bd(t,i.id,i.target,i[_a],i[xu],i.success,i.responseCode,s,i.type,i.correlationContext,o,r),c=new $c(Bd[Xi],a);return Kd(t,Bd[Iu],e,c)}function rF(t,e,n){Jd(t,e);var r={},o={};e[nF]!==Oc[Xi]&&(r.baseTypeSource=e[nF]),e[nF]===Oc[Xi]?(r=e[Yt][hr]||{},o=e[Yt][Du]||{}):e[Yt]&&ku(e[Yt],r,o),ku(e[zo],r,o),ae(n)||zd(r,n);var i=e[Yt][_a],s=new Oc(t,i,r,o),a=new $c(Oc[Xi],s);return Kd(t,Oc[Iu],e,a)}function rK(t,e,n){Jd(t,e);var r=e[Yt][Du]||{},o=e[Yt][hr]||{};ku(e[zo],o,r),ae(n)||zd(o,n);var i=e[Yt],s=Md.CreateFromInterface(t,i,o,r),a=new $c(Md[Xi],s);return Kd(t,Md[Iu],e,a)}function oK(t,e,n){Jd(t,e);var r=e[Yt],o=r[hr]||{},i=r[Du]||{};ku(e[zo],o,i),ae(n)||zd(o,n);var s=new Uc(t,r[_a],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,i),a=new $c(Uc[Xi],s);return Kd(t,Uc[Iu],e,a)}function iK(t,e,n){Jd(t,e);var r,o=e[Yt];!ae(o)&&!ae(o[hr])&&!ae(o[hr][xu])?(r=o[hr][xu],delete o[hr][xu]):!ae(e[zo])&&!ae(e[zo][xu])&&(r=e[zo][xu],delete e[zo][xu]);var i=e[Yt],s;((e.ext||{}).trace||{})[qd]&&(s=e.ext.trace[qd]);var a=i.id||s,c=i[_a],l=i.uri,u=i[hr]||{},f=i[Du]||{};if(ae(i.refUri)||(u.refUri=i.refUri),ae(i.pageType)||(u.pageType=i.pageType),ae(i.isLoggedIn)||(u.isLoggedIn=i.isLoggedIn[Hc]()),!ae(i[hr])){var m=i[hr];Ie(m,function(h,g){u[h]=g})}ku(e[zo],u,f),ae(n)||zd(u,n);var d=new Hd(t,c,l,r,u,f,a),p=new $c(Hd[Xi],d);return Kd(t,Hd[Iu],e,p)}function sK(t,e,n){Jd(t,e);var r=e[Yt],o=r[_a],i=r.uri||r.url,s=r[hr]||{},a=r[Du]||{};ku(e[zo],s,a),ae(n)||zd(s,n);var c=new jd(t,o,i,void 0,s,a,r),l=new $c(jd[Xi],c);return Kd(t,jd[Iu],e,l)}function aK(t,e,n){Jd(t,e);var r=e[Yt].message,o=e[Yt].severityLevel,i=e[Yt][hr]||{},s=e[Yt][Du]||{};ku(e[zo],i,s),ae(n)||zd(i,n);var a=new Wd(t,r,o,i,s),c=new $c(Wd[Xi],a);return Kd(t,Wd[Iu],e,c)}var nF,Yt,hr,tK,Bme,cK=ne(()=>{Ho();Mc();Ot();Q4();Ru();nF="baseType",Yt="baseData",hr="properties",tK="true";Bme={Version:"3.3.6"}});var lK,EI,Wme,oF,uK=ne(()=>{Ho();dr();Mc();Ot();Ru();lK=function(){function t(e,n){var r=[],o=!1,i=n.maxRetryCnt;this._get=function(){return r},this._set=function(s){return r=s,r},Je(t,this,function(s){s[Bc]=function(a){if(s[Wc]()>=n.eventsLimitInMem){o||(se(e,2,105,"Maximum in-memory buffer size reached: "+s[Wc](),!0),o=!0);return}a.cnt=a.cnt||0,!(!ae(i)&&a.cnt>i)&&r[Zi](a)},s[Wc]=function(){return r[Ye]},s.size=function(){for(var a=r[Ye],c=0;c<r[Ye];c++)a+=r[c].item[Ye];return n[Ny]||(a+=2),a},s[Pu]=function(){r=[],o=!1},s.getItems=function(){return r.slice(0)},s.batchPayloads=function(a){if(a&&a[Ye]>0){var c=[];Q(a,function(u){c[Zi](u.item)});var l=n[Ny]?c.join(`
`):"["+c.join(",")+"]";return l}return null},s.createNew=function(a,c,l){var u=r.slice(0);a=a||e,c=c||{};var f=l?new oF(a,c):new EI(a,c);return Q(u,function(m){f[Bc](m)}),f}})}return t.__ieDyn=1,t}(),EI=function(t){Mo(e,t);function e(n,r){var o=t.call(this,n,r)||this;return Je(e,o,function(i,s){i[Lh]=function(a){s[Pu]()},i[Gd]=function(a){}}),o}return e.__ieDyn=1,e}(lK),Wme=["AI_buffer","AI_sentBuffer"],oF=function(t){Mo(e,t);function e(r,o){var i=t.call(this,r,o)||this,s=!1,a=o==null?void 0:o.namePrefix,c=o[Ly]||{getItem:$A,setItem:MA},l=c.getItem,u=c.setItem,f=o.maxRetryCnt;return Je(e,i,function(m,d){var p=y(e[Ah]),h=y(e[jc]),g=x(),v=h[bu](g),C=m._set(p[bu](v));C[Ye]>e[Fh]&&(C[Ye]=e[Fh]),D(e[jc],[]),D(e[Ah],C),m[Bc]=function(F){if(m[Wc]()>=e[Fh]){s||(se(r,2,67,"Maximum buffer size reached: "+m[Wc](),!0),s=!0);return}F.cnt=F.cnt||0,!(!ae(f)&&F.cnt>f)&&(d[Bc](F),D(e[Ah],m._get()))},m[Pu]=function(){d[Pu](),D(e[Ah],m._get()),D(e[jc],[]),s=!1},m[Lh]=function(F){D(e[Ah],m._set(w(F,m._get())));var k=y(e[jc]);k instanceof Array&&F instanceof Array&&(k=k[bu](F),k[Ye]>e[Fh]&&(se(r,1,67,"Sent buffer reached its maximum size: "+k[Ye],!0),k[Ye]=e[Fh]),D(e[jc],k))},m[Gd]=function(F){var k=y(e[jc]);k=w(F,k),D(e[jc],k)},m.createNew=function(F,k,E){E=!!E;var _=m._get().slice(0),T=y(e[jc]).slice(0);F=F||r,k=k||{},m[Pu]();var I=E?new e(F,k):new EI(F,k);return Q(_,function(b){I[Bc](b)}),E&&I[Lh](T),I};function w(F,k){var E=[],_=[];return Q(F,function(T){_[Zi](T.item)}),Q(k,function(T){!Re(T)&&vt(_,T.item)===-1&&E[Zi](T)}),E}function y(F){var k=F;return k=a?a+"_"+k:k,S(k)}function S(F){try{var k=l(r,F);if(k){var E=br().parse(k);if(ke(E)&&(E=br().parse(E)),E&&ve(E))return E}}catch(_){se(r,1,42," storage key: "+F+", "+nn(_),{exception:Ce(_)})}return[]}function D(F,k){var E=F;try{E=a?a+"_"+E:E;var _=JSON[_u](k);u(r,E,_)}catch(T){u(r,E,JSON[_u]([])),se(r,2,41," storage key: "+E+", "+nn(T)+". Buffer cleared",{exception:Ce(T)})}}function x(){var F=[];try{return Q(Wme,function(k){var E=A(k);if(F=F[bu](E),a){var _=a+"_"+k,T=A(_);F=F[bu](T)}}),F}catch(k){se(r,2,41,"Transfer events from previous buffers: "+nn(k)+". previous Buffer items can not be removed",{exception:Ce(k)})}return[]}function A(F){try{var k=S(F),E=[];return Q(k,function(_){var T={item:_,cnt:0};E[Zi](T)}),HA(r,F),E}catch{}return[]}}),i}var n;return n=e,e.VERSION="_1",e.BUFFER_KEY="AI_buffer"+n.VERSION,e.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,e.MAX_BUFFER_SIZE=2e3,e}(lK)});var fK,dK=ne(()=>{dr();Ot();Ru();fK=function(){function t(e){Je(t,this,function(n){n.serialize=function(s){var a=r(s,"root");try{return br()[_u](a)}catch(c){se(e,1,48,c&&Re(c[Hc])?c[Hc]():"Error serializing object",null,!0)}};function r(s,a){var c="__aiCircularRefCheck",l={};if(!s)return se(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),l;if(s[c])return se(e,2,50,"Circular reference detected while serializing object",{name:a},!0),l;if(!s.aiDataContract){if(a==="measurements")l=i(s,"number",a);else if(a==="properties")l=i(s,"string",a);else if(a==="tags")l=i(s,"string",a);else if(ve(s))l=o(s,a);else{se(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{br()[_u](s),l=s}catch(u){se(e,1,48,u&&Re(u[Hc])?u[Hc]():"Error serializing object",null,!0)}}return l}return s[c]=!0,Ie(s.aiDataContract,function(u,f){var m=Re(f)?f()&1:f&1,d=Re(f)?f()&4:f&4,p=f&2,h=s[u]!==void 0,g=tn(s[u])&&s[u]!==null;if(m&&!h&&!p)se(e,1,24,"Missing required field specification. The field is required but not present on source",{field:u,name:a});else if(!d){var v=void 0;g?p?v=o(s[u],u):v=r(s[u],u):v=s[u],v!==void 0&&(l[u]=v)}}),delete s[c],l}function o(s,a){var c;if(s)if(!ve(s))se(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var l=0;l<s[Ye];l++){var u=s[l],f=r(u,a+"["+l+"]");c[Zi](f)}}return c}function i(s,a,c){var l;return s&&(l={},Ie(s,function(u,f){if(a==="string")f===void 0?l[u]="undefined":f===null?l[u]="null":f[Hc]?l[u]=f[Hc]():l[u]="invalid field: toString() is not defined.";else if(a==="number")if(f===void 0)l[u]="undefined";else if(f===null)l[u]="null";else{var m=parseFloat(f);l[u]=m}else l[u]="invalid field: "+c+" is of unknown type.",se(e,1,l[u],null,!0)})),l}})}return t.__ieDyn=1,t}()});var jme,mK,pK=ne(()=>{Ru();jme=8,mK=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var n=this.getHashCode(e)/t.INT_MAX_VALUE;return n*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[Ye]<jme;)e=e[bu](e);for(var n=5381,r=0;r<e[Ye];++r)n=(n<<5)+n+e.charCodeAt(r),n=n&n;return Math.abs(n)},t.INT_MAX_VALUE=2147483647,t}()});var hK,gK=ne(()=>{Mc();Ru();pK();hK=function(){function t(){var e=this,n=new mK,r=new ky;e.getSamplingScore=function(o){var i=0;return o[Mn]&&o[Mn][r.userId]?i=n.getHashCodeScore(o[Mn][r.userId]):o.ext&&o.ext.user&&o.ext.user.id?i=n[eK](o.ext.user.id):o[Mn]&&o[Mn][r.operationId]?i=n.getHashCodeScore(o[Mn][r.operationId]):o.ext&&o.ext.telemetryTrace&&o.ext.telemetryTrace[qd]?i=n.getHashCodeScore(o.ext.telemetryTrace[qd]):i=Math.random()*100,i}}return t}()});var vK,wK=ne(()=>{Mc();Ot();Ru();gK();vK=function(){function t(e,n){this.INT_MAX_VALUE=2147483647;var r=n||Pc(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Hh]=e,this.samplingScoreGenerator=new hK}return t.prototype.isSampledIn=function(e){var n=this[Hh],r=!1;return n==null||n>=100||e.baseType===Uc[Xi]?!0:(r=this.samplingScoreGenerator.getSamplingScore(e)<n,r)},t}()});function CK(t){try{return t.responseText}catch{}return null}function Yme(t){return t&&t.sendPOST}function qme(t){return!isNaN(t)&&t>0&&t<=100}var Ut,Vc,Da,yK,Vme,EK,Gme,Oy,SK=ne(()=>{Ho();dr();Mc();Ot();Ne();cK();uK();dK();wK();Ru();Da=void 0,yK="",Vme=65e3;EK=ws((Ut={endpointUrl:ch(gs,Td+Sa)},Ut[Ny]=Ki(),Ut.maxBatchInterval=15e3,Ut[XA]=102400,Ut.disableTelemetry=Ki(),Ut[QA]=Ki(!0),Ut.isRetryDisabled=Ki(),Ut[gI]=Ki(!0),Ut[tF]=Ki(!0),Ut.disableXhr=Ki(),Ut[eF]=Ki(),Ut[hI]=Ki(),Ut[Mh]=Da,Ut.namePrefix=Da,Ut.samplingPercentage=ch(qme,100),Ut[pI]=Da,Ut.convertUndefined=Da,Ut.eventsLimitInMem=1e4,Ut[Ly]=!1,Ut.httpXHROverride={isVal:Yme,v:Da},Ut[ZA]=Ki(),Ut.transports=Da,Ut.retryCodes=Da,Ut.maxRetryCnt={isVal:_r,v:10},Ut));Gme=(Vc={},Vc[Oc.dataType]=rF,Vc[Wd.dataType]=aK,Vc[Hd.dataType]=iK,Vc[jd.dataType]=sK,Vc[Md.dataType]=rK,Vc[Uc.dataType]=oK,Vc[Bd.dataType]=nK,Vc),Oy=function(t){Mo(e,t);function e(){var n=t.call(this)||this;n.priority=1001,n.identifier=fI;var r,o,i,s,a,c,l,u,f=0,m,d,p,h,g,v,C,w,y,S,D,x,A,F,k,E,_,T,I,b,R,L,N,B,W,z,V;return Je(e,n,function(q,ce){we(),q.pause=function(){Z(),s=!0},q.resume=function(){s&&(s=!1,o=null,rt(),M())},q.flush=function(P,O,H){if(P===void 0&&(P=!0),!s){Z();try{return q[Oh](P,null,H||1)}catch(G){se(q[kr](),1,22,"flush failed, telemetry will not be collected: "+nn(G),{exception:Ce(G)})}}},q.onunloadFlush=function(){if(!s)if(C||b)try{return q[Oh](!0,Bn,2)}catch(P){se(q[kr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+nn(P),{exception:Ce(P)})}else q.flush(!1)},q.addHeader=function(P,O){u[P]=O},q[mI]=function(P,O,H,G){q.isInitialized()&&se(q[kr](),1,28,"Sender is already initialized"),ce[mI](P,O,H,G);var J=q.identifier;c=new fK(O.logger),r=0,o=null,i=0,q[Uh]=null,l=0;var te=q[kr]();p=wi(Tr("Sender"),O.evtNamespace&&O.evtNamespace()),d=JA(p),q._addHook(mr(P,function(ue){var Oe=ue.cfg;Oe.storagePrefix&&UA(Oe.storagePrefix);var Xe=po(null,Oe,O),Te=Xe.getExtCfg(J,EK),Eo=Te[$h];if(h&&Eo===h){var Ua=Oe[$h];Ua&&Ua!==Eo&&(Te[$h]=Ua)}co(Te[Mh])&&(Te[Mh]=Oe[Mh]),ht(q,"_senderConfig",{g:function(){return Te}}),g!==Te[$h]&&(h=g=Te[$h]),O.activeStatus()===fi.PENDING?q.pause():O.activeStatus()===fi.ACTIVE&&q.resume(),S&&S!==Te[pI]&&Q(S,function(wr){delete u[wr.header]}),v=Te[XA],C=(Te[hI]===!1||Te[gI]===!1)&&zi(),w=Te[hI]===!1&&zi(),y=Te[gI]===!1&&zi(),b=Te[ZA],R=!!Te.disableXhr,V=Te.retryCodes;var So=Te[Ly],Ls=!!Te[QA]&&(!!So||aI()),pC=Te.namePrefix,D9=Ls!==E||Ls&&T!==pC||Ls&&_!==So;if(q[Rs]){if(D9)try{q[Rs]=q[Rs].createNew(te,Te,Ls)}catch(wr){se(q[kr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+nn(wr),{exception:Ce(wr)})}rt()}else q[Rs]=Ls?new oF(te,Te):new EI(te,Te);T=pC,E=Ls,_=So,L=!Te[eF]&&_c(!0),W=!!Te[tF],q._sample=new vK(Te.samplingPercentage,te),x=Te[Mh],!co(x)&&!qe(x,Oe)&&se(te,1,100,"Invalid Instrumentation key "+x),S=Te[pI],ke(h)&&!iI(h)&&S&&S[Ye]>0?Q(S,function(wr){n.addHeader(wr.header,wr.value)}):S=null,I=Te.enableSendPromise;var NO=dt();z?z.SetConfig(NO):(z=new yd,z[mI](NO,te));var hC=Te.httpXHROverride,gC=null,yg=null,I9=Sc([3,1,2],Te.transports);gC=z&&z[Ay](I9,!1);var T0=z&&z.getFallbackInst();N=function(wr,Yu){return le(T0,wr,Yu)},B=function(wr,Yu){return le(T0,wr,Yu,!1)},gC=b?hC:gC||hC||T0,q[Uh]=function(wr,Yu){return le(gC,wr,Yu)},L&&(m=Si);var R0=Sc([3,1],Te.unloadTransports);L||(R0=R0.filter(function(wr){return wr!==2})),yg=z&&z[Ay](R0,!0),yg=b?hC:yg||hC,(b||Te.unloadTransports||!m)&&yg&&(m=function(wr,Yu){return le(yg,wr,Yu)}),m||(m=N),D=Te.disableTelemetry,A=Te.convertUndefined||Da,F=Te.isRetryDisabled,k=Te.maxBatchInterval}))},q.processTelemetry=function(P,O){O=q._getTelCtx(O);var H=O[kr]();try{var G=mt(P,H);if(!G)return;var J=nt(P,H);if(!J)return;var te=c.serialize(J),ue=q[Rs];rt(te);var Oe={item:te,cnt:0};ue[Bc](Oe),M()}catch(Xe){se(H,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+nn(Xe),{exception:Ce(Xe)})}q.processNext(P,O)},q.isCompletelyIdle=function(){return!s&&f===0&&q._buffer[Wc]()===0},q.getOfflineListener=function(){return d},q._xhrReadyStateChange=function(P,O,H){if(!Fr(O))return Mt(P,O,H)},q[Oh]=function(P,O,H){P===void 0&&(P=!0);var G;if(!s)try{var J=q[Rs];if(D)J[Pu]();else{if(J[Wc]()>0){var te=J.getItems();be(H||0,P),O?G=O.call(q,te,P):G=q[Uh](te,P)}i=+new Date}Z()}catch(Oe){var ue=kw();(!ue||ue>9)&&se(q[kr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+nn(Oe),{exception:Ce(Oe)})}return G},q.getOfflineSupport=function(){return{getUrl:function(){return h},createPayload:j,serialize:Dt,batch:yt,shouldProcess:function(P){return!!mt(P)}}},q._doTeardown=function(P,O){q.onunloadFlush(),Ic(d,!1),we()},q[Tu]=function(P,O,H){if(!Fr(P))return Co(P,O,H)},q[vI]=function(P,O){if(!Fr(P))return In(P,O)},q[Fy]=function(P,O){if(!Fr(P))return gn(P,O)},q._xdrOnLoad=function(P,O){if(!Fr(O))return Be(P,O)};function Be(P,O){var H=CK(P);if(P&&(H+""=="200"||H===""))r=0,q[Fy](O,0);else{var G=wd(H);G&&G[wI]&&G[wI]>G[yI]&&!F?q[vI](O,G):q[Tu](O,ld(P))}}function dt(){try{var P={xdrOnComplete:function(H,G,J){var te=Xt(J);if(te)return Be(H,te)},fetchOnComplete:function(H,G,J,te){var ue=Xt(te);if(ue)return pt(H.status,ue,H.url,ue[Ye],H.statusText,J||"")},xhrOnComplete:function(H,G,J){var te=Xt(J);if(te)return Mt(H,te,te[Ye])},beaconOnRetry:function(H,G,J){return Ar(H,G,J)}},O={enableSendPromise:I,isOneDs:!1,disableCredentials:!1,disableXhr:R,disableBeacon:!y,disableBeaconSync:!w,senderOnCompleteCallBack:P};return O}catch{}return null}function Mt(P,O,H){P.readyState===4&&pt(P.status,O,P.responseURL,H,Ec(P),CK(P)||P.response)}function Co(P,O,H){se(q[kr](),2,26,"Failed to send telemetry.",{message:O}),q._buffer&&q._buffer[Gd](P)}function In(P,O){for(var H=[],G=[],J=O.errors.reverse(),te=0,ue=J;te<ue.length;te++){var Oe=ue[te],Xe=P.splice(Oe.index,1)[0];ie(Oe.statusCode)?G[Zi](Xe):H[Zi](Xe)}P[Ye]>0&&q[Fy](P,O[yI]),H[Ye]>0&&q[Tu](H,Ec(null,["partial success",O[yI],"of",O.itemsReceived].join(" "))),G[Ye]>0&&(Qn(G),se(q[kr](),2,40,"Partial success. Delivered: "+P[Ye]+", Failed: "+H[Ye]+". Will retry to send "+G[Ye]+" our of "+O[wI]+" items"))}function gn(P,O){q._buffer&&q._buffer[Gd](P)}function Xt(P){try{if(P){var O=P,H=O.oriPayload;return H&&H[Ye]?H:null}}catch{}return null}function mt(P,O){if(D)return!1;if(!P)return O&&se(O,1,7,"Cannot send empty telemetry"),!1;if(P.baseData&&!P[CI])return O&&se(O,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(P[CI]||(P[CI]="EventData"),!q[Uh])return O&&se(O,1,28,"Sender was not initialized"),!1;if(oe(P))P[wy]=q._sample[Hh];else return O&&se(O,2,33,"Telemetry item was sampled out and not sent",{SampleRate:q._sample[Hh]}),!1;return!0}function nt(P,O){var H=P.iKey||x,G=e.constructEnvelope(P,H,O,A);if(!G){se(O,1,47,"Unable to create an AppInsights envelope");return}var J=!1;if(P[Mn]&&P[Mn][yy]&&(Q(P[Mn][yy],function(te){try{te&&te(G)===!1&&(J=!0,mo(O,"Telemetry processor check returns false"))}catch(ue){se(O,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+nn(ue),{exception:Ce(ue)},!0)}}),delete P[Mn][yy]),!J)return G}function Dt(P){var O=yK,H=q[kr]();try{var G=mt(P,H),J=null;G&&(J=nt(P,H)),J&&(O=c.serialize(J))}catch{}return O}function yt(P){var O=yK;return P&&P[Ye]&&(O="["+P.join(",")+"]"),O}function j(P){var O=Ze();return{urlString:h,data:P,headers:O}}function oe(P){return q._sample.isSampledIn(P)}function xe(P,O,H,G){O===200&&P?q._onSuccess(P,P[Ye]):G&&q[Tu](P,G)}function le(P,O,H,G){G===void 0&&(G=!0);var J=function(Oe,Xe,Te){return xe(O,Oe,Xe,Te)},te=De(O),ue=P&&P.sendPOST;return ue&&te?(G&&q._buffer[Lh](O),ue(te,J,!H)):null}function De(P){if(ve(P)&&P[Ye]>0){var O=q[Rs].batchPayloads(P),H=Ze(),G={data:O,urlString:h,headers:H,disableXhrSync:R,disableFetchKeepAlive:!L,oriPayload:P};return G}return null}function Ze(){try{var P=u||{};return iI(h)&&(P[rI[6]]=rI[7]),P}catch{}return null}function rt(P){var O=P?P[Ye]:0;return q[Rs].size()+O>v?((!d||d.isOnline())&&q[Oh](!0,null,10),!0):!1}function pt(P,O,H,G,J,te){var ue=null;if(q._appId||(ue=wd(te),ue&&ue.appId&&(q._appId=ue.appId)),(P<200||P>=300)&&P!==0){if((P===301||P===307||P===308)&&!vn(H)){q[Tu](O,J);return}if(d&&!d.isOnline()){if(!F){var Oe=10;Qn(O,Oe),se(q[kr](),2,40,". Offline - Response Code: ".concat(P,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(O.length," items."))}return}!F&&ie(P)?(Qn(O),se(q[kr](),2,40,". Response code "+P+". Will retry to send "+O[Ye]+" items.")):q[Tu](O,J)}else vn(H),P===206?(ue||(ue=wd(te)),ue&&!F?q[vI](O,ue):q[Tu](O,J)):(r=0,q[Fy](O,G))}function vn(P){return l>=10?!1:!ae(P)&&P!==""&&P!==h?(h=P,++l,!0):!1}function Bn(P,O){if(m)m(P,!1);else{var H=z&&z[Ay]([3],!0);return le(H,P,O)}}function Ar(P,O,H){var G=P,J=G&&G.oriPayload;if(W)B&&B(J,!0),se(q[kr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var te=[],ue=0;ue<J[Ye];ue++){var Oe=J[ue],Xe=[Oe],Te=De(Xe);H(Te,O)?q._onSuccess(Xe,Xe[Ye]):te[Zi](Oe)}te[Ye]>0&&(B&&B(te,!0),se(q[kr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Fr(P){try{if(P&&P[Ye])return ke(P[0])}catch{}return null}function Si(P,O){var H=null;if(ve(P)){for(var G=P[Ye],J=0;J<P[Ye];J++)G+=P[J].item[Ye];var te=z.getSyncFetchPayload();te+G<=Vme?H=2:zi()?H=3:(H=1,se(q[kr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ue=z&&z[Ay]([H],!0);return le(ue,P,O)}return null}function Qn(P,O){if(O===void 0&&(O=1),!(!P||P[Ye]===0)){var H=q[Rs];H[Gd](P),r++;for(var G=0,J=P;G<J.length;G++){var te=J[G];te.cnt=te.cnt||0,te.cnt++,H[Bc](te)}Oa(O),M()}}function Oa(P){var O=10,H;if(r<=1)H=O;else{var G=(Math.pow(2,r)-1)/2,J=Bi(Math.random()*G*O)+1;J=P*J,H=ta(zl(J,3600),O)}var te=Sn()+H*1e3;o=te}function M(){if(!a&&!s){var P=o?ta(0,o-Sn()):0,O=ta(k,P);a=ui(function(){a=null,q[Oh](!0,null,1)},O)}}function Z(){a&&a.cancel(),a=null,o=null}function ie(P){return ae(V)?P===401||P===408||P===429||P===500||P===502||P===503||P===504:V[Ye]&&V.indexOf(P)>-1}function ge(){var P="getNotifyMgr";return q.core[P]?q.core[P]():q.core._notificationManager}function be(P,O){var H=ge();if(H&&H.eventsSendRequest)try{H.eventsSendRequest(P,O)}catch(G){se(q[kr](),1,74,"send request notification failed: "+nn(G),{exception:Ce(G)})}}function qe(P,O){var H=O.disableInstrumentationKeyValidation,G=ae(H)?!1:H;if(G)return!0;var J="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",te=new RegExp(J);return te.test(P)}function we(){q[Uh]=null,q[Rs]=null,q._appId=null,q._sample=null,u={},d=null,r=0,o=null,i=null,s=!1,a=null,c=null,l=0,f=0,m=null,p=null,h=null,g=null,v=0,C=!1,S=null,D=!1,x=null,A=Da,F=!1,E=null,T=Da,R=!1,L=!1,W=!1,N=null,B=null,z=null,ht(q,"_senderConfig",{g:function(){return $_({},EK)}})}}),n}return e.constructEnvelope=function(n,r,o,i){var s;r!==n.iKey&&!ae(r)?s=ji(ji({},n),{iKey:r}):s=n;var a=Gme[s.baseType]||rF;return a(o,s,i)},e}(kc)});var iF=ne(()=>{SK()});var Xd,Uy,Bh,Wh,xK=ne(()=>{Xd="instrumentationKey",Uy="connectionString",Bh="endpointUrl",Wh="userOverrideEndpointUrl"});var _K={};wC(_K,{AppInsightsCore:()=>Nc,ApplicationInsights:()=>Jme,Sender:()=>Oy,SeverityLevel:()=>GA,arrForEach:()=>Q,isNullOrUndefined:()=>ae,proxyFunctions:()=>vi,throwError:()=>Ln});function Kme(t){return t&&t>0}var jh,sF,zme,Jme,DK=ne(()=>{dr();iF();Mc();Ot();od();Ne();xK();Ot();Mc();iF();sF=void 0,zme=(jh={diagnosticLogInterval:ch(Kme,1e4)},jh[Uy]=sF,jh.endpointUrl=sF,jh[Xd]=sF,jh.extensionConfig={},jh);Jme=function(){function t(e){var n=new Nc,r;(ae(e)||ae(e[Xd])&&ae(e[Uy]))&&Ln("Invalid input configuration"),Je(t,this,function(i){ht(i,"config",{g:function(){return r}}),s(),i.initialize=s,i.track=o,vi(i,n,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function s(){var a=jt(e||{},zme);r=a.cfg,n.addUnloadHook(mr(a,function(){var c=r[Uy];if(co(c)){var l=Dw(function(d,p){hi(c,function(h){var g=h.value,v=r[Xd];if(!h.rejected&&g){r[Uy]=g;var C=Py(g);v=C.instrumentationkey||v}d(v)})}),u=Dw(function(d,p){hi(c,function(h){var g=h.value,v=r[Bh];if(!h.rejected&&g){var C=Py(g),w=C.ingestionendpoint;v=w?w+Sa:v}d(v)})});r[Xd]=l,r[Bh]=r[Wh]||u}if(ke(c)){var f=Py(c),m=f.ingestionendpoint;r[Bh]=r[Wh]?r[Wh]:m+Sa,r[Xd]=f.instrumentationkey||r[Xd]}r[Bh]=r[Wh]?r[Wh]:r[Bh]})),n.initialize(r,[new Oy])}});function o(i){i&&(i.baseData=i.baseData||{},i.baseType=i.baseType||"EventData"),n.track(i)}}return t.__ieDyn=1,t}()});var cF=$(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.TargetPopulation=Nu.Filters=Nu.VSCodeFilterProvider=void 0;var _I=require("vscode"),aF=class t{constructor(e,n,r){this.extensionName=e,this.extensionVersion=n,this.targetPopulation=r}static trimVersionSuffix(e){let n=/\-[a-zA-Z0-9]+$/;return e.split(n)[0]}getFilterValue(e){switch(e){case Ia.ApplicationVersion:return t.trimVersionSuffix(_I.version);case Ia.Build:return _I.env.appName;case Ia.ClientId:return _I.env.machineId;case Ia.ExtensionName:return this.extensionName;case Ia.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case Ia.Language:return _I.env.language;case Ia.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,n=Object.values(Ia);for(let r of n)e.set(r,this.getFilterValue(r));return e}};Nu.VSCodeFilterProvider=aF;var Ia;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Ia||(Nu.Filters=Ia={}));var TK;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(TK||(Nu.TargetPopulation=TK={}))});var RK=$(DI=>{"use strict";Object.defineProperty(DI,"__esModule",{value:!0});DI.BaseFeatureProvider=void 0;var lF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};DI.BaseFeatureProvider=lF});var kK=$(II=>{"use strict";Object.defineProperty(II,"__esModule",{value:!0});II.FilteredFeatureProvider=void 0;var Xme=RK(),uF=class extends Xme.BaseFeatureProvider{constructor(e,n){super(e),this.telemetry=e,this.filterProviders=n,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let n of this.filterProviders){let r=n.getFilters();for(let o of r.keys()){let i=r.get(o);e.set(o,i)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let n=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",n]])),this.cachedTelemetryEvents.push(e)}};II.FilteredFeatureProvider=uF});var NK=$(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.TasApiFeatureProvider=Lu.TASAPI_FETCHERROR_EVENTNAME=void 0;var Zme=kK();Lu.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var fF="ErrorType",dF=class extends Zme.FilteredFeatureProvider{constructor(e,n,r){super(n,r),this.httpClient=e,this.telemetry=n,this.filterProviders=r}async fetch(){let e=this.getFilters(),n={};for(let a of e.keys()){let c=e.get(a);n[a]=c}let r;try{r=await this.httpClient.get({headers:n})}catch(a){let c=a,l=new Map;c.responseReceived&&!c.responseOk?l.set(fF,"ServerError"):c.responseReceived===!1?l.set(fF,"NoResponse"):l.set(fF,"GenericError"),this.telemetry.postEvent(Lu.TASAPI_FETCHERROR_EVENTNAME,l)}if(!r)throw Error(Lu.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(n);let o=r.data,i=o.Configs,s=[];for(let a of i)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};Lu.TasApiFeatureProvider=dF});var LK=$(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});qh.HttpClient=qh.FetchError=void 0;var Yh=class extends Error{constructor(e,n,r){super(e),this.responseReceived=n,this.responseOk=r}};qh.FetchError=Yh;var mF=class{constructor(e){this.endpoint=e}async get(e){let n=await fetch(this.endpoint,{method:"GET",headers:e==null?void 0:e.headers});if(!n)throw new Yh("No response received",!1);if(!n.ok)throw new Yh("Response not ok",!0,!1);let r=await n.json();if(!r)throw new Yh("No data received",!1);return{data:r}}};qh.HttpClient=mF});var AK=$(PI=>{"use strict";Object.defineProperty(PI,"__esModule",{value:!0});PI.MemoryKeyValueStorage=void 0;var pF=class{constructor(){this.storage=new Map}async getValue(e,n){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(n||void 0)}setValue(e,n){this.storage.set(e,n)}};PI.MemoryKeyValueStorage=pF});var FK=$(bI=>{"use strict";Object.defineProperty(bI,"__esModule",{value:!0});bI.ExperimentationServiceBase=void 0;var Qme=AK(),hF=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,n,r,o,i){this.telemetry=e,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=r,this.storageKey=o,this.storage=i,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(i=new Qme.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));let n=await this.fetchPromise;this.updateFeatures(n,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,n=!1){let r={features:[],assignmentContext:"",configs:[]};for(let o of e){for(let i of o.features)r.features.includes(i)||r.features.push(i);for(let i of o.configs){let s=r.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):r.configs.push(i)}r.assignmentContext+=o.assignmentContext}(n||!this.featuresConsumed)&&(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let n=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),n.features.includes(e)}getTreatmentVariable(e,n){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${n}`);let r=this.features.configs.find(o=>o.Id===e);return r==null?void 0:r.Parameters[n]}async getTreatmentVariableAsync(e,n,r){if(r){let o=this.featuresConsumed,i=this.getTreatmentVariable(e,n);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,n)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let n of e)this.featureProviders.push(n)}};bI.ExperimentationServiceBase=hF});var OK=$(TI=>{"use strict";Object.defineProperty(TI,"__esModule",{value:!0});TI.PollingService=void 0;var gF=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};TI.PollingService=gF});var UK=$(RI=>{"use strict";Object.defineProperty(RI,"__esModule",{value:!0});RI.ExperimentationServiceAutoPolling=void 0;var epe=FK(),tpe=OK(),vF=class extends epe.ExperimentationServiceBase{constructor(e,n,r,o,i,s,a){if(super(e,o,i,s,a),this.telemetry=e,this.filterProviders=n,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=i,this.storageKey=s,this.storage=a,r<1e3&&r!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new tpe.PollingService(r),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let n=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),n}else return await super.getFeaturesAsync(e)}};RI.ExperimentationServiceAutoPolling=vF});var $K=$(NI=>{"use strict";Object.defineProperty(NI,"__esModule",{value:!0});NI.ExperimentationService=void 0;var npe=NK(),rpe=LK(),ope=UK(),kI=class extends ope.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new npe.TasApiFeatureProvider(new rpe.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};NI.ExperimentationService=kI;kI.REFRESH_RATE_IN_MINUTES=30});var MK=$(LI=>{"use strict";Object.defineProperty(LI,"__esModule",{value:!0});LI.ExperimentationService=void 0;var ipe=$K();Object.defineProperty(LI,"ExperimentationService",{enumerable:!0,get:function(){return ipe.ExperimentationService}})});var HK=$(AI=>{"use strict";Object.defineProperty(AI,"__esModule",{value:!0});AI.MementoKeyValueStorage=void 0;var wF=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,n){return await this.mementoGlobalStorage.get(e)||n}setValue(e,n){this.mementoGlobalStorage.update(e,n)}};AI.MementoKeyValueStorage=wF});var BK=$(CF=>{"use strict";Object.defineProperty(CF,"__esModule",{value:!0});var yF=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,n){}getTreatmentVariableAsync(e,n){return Promise.resolve(void 0)}};CF.default=yF});var jK=$(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.getExperimentationServiceAsync=Gh.getExperimentationService=void 0;var spe=cF(),ape=MK(),EF=require("vscode"),cpe=HK(),lpe=BK(),upe="https://default.exp-tas.com/vscode/ab",fpe="query-expfeature",dpe="abexp.assignmentcontext",mpe="VSCode.ABExp.FeatureData",ppe=1e3*60*30;function WK(t,e,n,r,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=EF.workspace.getConfiguration("telemetry");if(!(EF.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):EF.env.isTelemetryEnabled))return new lpe.default;let l=[new spe.VSCodeFilterProvider(t,e,n),...i],u=new cpe.MementoKeyValueStorage(o);return new ape.ExperimentationService({filterProviders:l,telemetry:r,storageKey:mpe,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:dpe,telemetryEventName:fpe,endpoint:upe,refetchInterval:ppe})}Gh.getExperimentationService=WK;async function hpe(t,e,n,r,o,...i){let s=WK(t,e,n,r,o,...i);return await s.initializePromise,s}Gh.getExperimentationServiceAsync=hpe});var YK=$(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.TargetPopulation=Au.getExperimentationServiceAsync=Au.getExperimentationService=void 0;var VK=jK();Object.defineProperty(Au,"getExperimentationService",{enumerable:!0,get:function(){return VK.getExperimentationService}});Object.defineProperty(Au,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return VK.getExperimentationServiceAsync}});var gpe=cF();Object.defineProperty(Au,"TargetPopulation",{enumerable:!0,get:function(){return gpe.TargetPopulation}})});var f9=$((bje,yge)=>{yge.exports={name:"remote-containers",displayName:"%displayName%",description:"%description%",version:"0.422.1",publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.99.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"%capabilities.untrustedWorkspaces.description%"},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","devcontainer","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",l10n:"./l10n",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"},{command:"remote-containers.openRepositoryFromGitWithEditSession",group:"0_local@2",when:"git.state == initialized && gitOpenRepositoryCount != 0 && remoteName =~ /(codespaces*.*|tunnel)/ && false",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json",".devcontainer-internal.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"%configuration.title%",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"%configuration.defaultExtensions.deprecationMessage%",markdownDeprecationMessage:"%configuration.defaultExtensions.markdownDeprecationMessage%"},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"%configuration.defaultExtensions.description%",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"%configuration.defaultExtensions.errorMessage%"}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"%configuration.defaultFeatures%",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"%configuration.workspaceMountConsistency.deprecationMessage%",markdownDeprecationMessage:"%configuration.workspaceMountConsistency.markdownDeprecationMessage%"},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["%configuration.workspaceMountConsistency.consistent%","%configuration.workspaceMountConsistency.cached%","%configuration.workspaceMountConsistency.delegated%"],description:"%configuration.workspaceMountConsistency.description%",default:"cached"},"dev.containers.gpuAvailability":{scope:"machine",type:"string",enum:["all","detect","none"],enumDescriptions:["%configuration.gpuAvailability.all%","%configuration.gpuAvailability.detect%","%configuration.gpuAvailability.none%"],description:"%configuration.gpuAvailability.description%",default:"detect"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"%configuration.cacheVolume.deprecationMessage%",markdownDeprecationMessage:"%configuration.cacheVolume.markdownDeprecationMessage%"},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"%configuration.cacheVolume.description%",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"%configuration.copyGitConfig.deprecationMessage%",markdownDeprecationMessage:"%configuration.copyGitConfig.markdownDeprecationMessage%"},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"%configuration.copyGitConfig.markdownDescription%",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"%configuration.gitCredentialHelperConfigLocation.deprecationMessage%",markdownDeprecationMessage:"%configuration.gitCredentialHelperConfigLocation.markdownDeprecationMessage%"},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["%configuration.gitCredentialHelperConfigLocation.system%","%configuration.gitCredentialHelperConfigLocation.global%","%configuration.gitCredentialHelperConfigLocation.none%"],description:"%configuration.gitCredentialHelperConfigLocation.description%",default:"global"},"dev.containers.dockerCredentialHelper":{scope:"machine",type:"boolean",markdownDescription:"%configuration.dockerCredentialHelper.markdownDescription%",default:!0},"dev.containers.githubCLILoginWithToken":{scope:"machine",type:"boolean",markdownDescription:"%configuration.githubCLILoginWithToken.markdownDescription%",default:!1},"dev.containers.mountWaylandSocket":{scope:"application",ignoreSync:!0,type:"boolean",markdownDescription:"%configuration.mountWaylandSocket.markdownDescription%",default:!0},"remote.containers.logLevel":{scope:"application",deprecationMessage:"%configuration.logLevel.deprecationMessage%",markdownDeprecationMessage:"%configuration.logLevel.markdownDeprecationMessage%"},"dev.containers.logLevel":{scope:"application",type:"string",description:"%configuration.logLevel.description%",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"%configuration.dockerPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerPath.markdownDeprecationMessage%"},"dev.containers.dockerPath":{scope:"application",type:"string",description:"%configuration.dockerPath.description%",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"%configuration.dockerComposePath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerComposePath.markdownDeprecationMessage%"},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"%configuration.dockerComposePath.description%",default:"docker-compose"},"dev.containers.dockerSocketPath":{scope:"application",type:"string",description:"%configuration.dockerSocketPath.description%",default:"/var/run/docker.sock"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"%configuration.executeInWSL.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSL.markdownDeprecationMessage%"},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"%configuration.executeInWSL.description%",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"%configuration.executeInWSLDistro.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSLDistro.markdownDeprecationMessage%"},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"%configuration.executeInWSLDistro.markdownDescription%"},"dev.containers.forwardWSLServices":{scope:"application",type:"boolean",description:"%configuration.forwardWSLServices.description%",default:!0},"dotfiles.repository":{scope:"machine",type:"string",description:"%configuration.dotfiles.repository.description%"},"dotfiles.installCommand":{scope:"machine",type:"string",description:"%configuration.dotfiles.installCommand.description%"},"dotfiles.targetPath":{scope:"machine",type:"string",description:"%configuration.dotfiles.targetPath.description%",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"%configuration.dotfiles.repository.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.repository.markdownDeprecationMessage%"},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"%configuration.dotfiles.installCommand.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.installCommand.markdownDeprecationMessage%"},"remote.containers.dotfiles.targetPath":{scope:"machine",deprecationMessage:"%configuration.dotfiles.targetPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.targetPath.markdownDeprecationMessage%"},"remote.containers.repositoryConfigurationPaths":{scope:"application",deprecationMessage:"%configuration.repositoryConfigurationPaths.deprecationMessage%",markdownDeprecationMessage:"%configuration.repositoryConfigurationPaths.markdownDeprecationMessage%"},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"%configuration.repositoryConfigurationPaths.markdownDescription%",default:[],items:{type:"string"}},"dev.containers.experimentalLockfile":{scope:"application",type:"boolean",description:"%configuration.experimentalLockfile.description%",default:!1},"dev.containers.optimisticallyLaunchDocker":{scope:"application",type:"boolean",description:"%configuration.optimisticallyLaunchDocker.description%",default:!0}}},commands:[{command:"remote-containers.reopenInContainer",title:"%command.reopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildAndReopenInContainer",title:"%command.rebuildAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"%command.rebuildNoCacheAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.reopenLocally",title:"%command.reopenLocally%",category:"%command.category%"},{command:"remote-containers.reopenInWSL",title:"%command.reopenInWSL%",category:"%command.category%"},{command:"remote-containers.reopenInSSH",title:"%command.reopenInSSH%",category:"%command.category%"},{command:"remote-containers.reopenInTunnel",title:"%command.reopenInTunnel%",category:"%command.category%"},{command:"remote-containers.openFolder",title:"%command.openFolder%",category:"%command.category%",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openFolderInContainerInCurrentWindow",title:"%command.openFolderInContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.openFolderInContainerInNewWindow",title:"%command.openFolderInContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.openInformationAboutMountPerformance",title:"%command.openInformationAboutMountPerformance%",category:"%command.category%",icon:"$(info)"},{command:"remote-containers.openRepositoryInVolume",title:"%command.openRepositoryInVolume%",category:"%command.category%"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"%command.openRepositoryInUniqueVolume%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"%command.openRepositoryFromRemoteHubWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromGitWithEditSession",title:"%command.openRepositoryFromGitWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openPullRequestInVolume",title:"%command.openPullRequestInVolume%",category:"%command.category%"},{command:"remote-containers.inspectVolume",title:"%command.inspectVolume%",category:"%command.category%"},{command:"remote-containers.openWorkspace",title:"%command.openWorkspace%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainer",title:"%command.attachToRunningContainer%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"%command.attachToRunningContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.inspectVolumeFromViewlet",title:"%command.inspectVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"%command.cloneInVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cleanUpDevContainers",title:"%command.cleanUpDevContainers%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.pruneVolumes",title:"%command.pruneVolumes%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"%command.explorerVolumesRefresh%",category:"%command.category%",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainer",title:"%command.attachToK8sContainer%",category:"%command.category%"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"%command.attachToK8sContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.switchContainer",title:"%command.switchContainer%",category:"%command.category%"},{command:"remote-containers.rebuildContainer",title:"%command.rebuildContainer%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"%command.rebuildContainerNoCache%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"%command.createDevContainerFile%",category:"%command.category%"},{command:"remote-containers.createDevContainerFileWithCopilot",title:"%command.createDevContainerFileWithCopilot%",category:"%command.category%"},{command:"remote-containers.createDevContainer",title:"%command.createDevContainer%",category:"%command.category%"},{command:"remote-containers.settings",title:"%command.settings%",category:"%command.category%"},{command:"remote-containers.getHelp",title:"%command.getHelp%",category:"%command.category%"},{command:"remote-containers.getStarted",title:"%command.getStarted%",category:"%command.category%"},{command:"remote-containers.trySample",title:"%command.trySample%",category:"%command.category%"},{command:"remote-containers.reportIssue",title:"%command.reportIssue%",category:"%command.category%"},{command:"remote-containers.provideFeedback",title:"%command.provideFeedback%",category:"%command.category%"},{command:"remote-containers.openDevContainerFile",title:"%command.openDevContainerFile%",category:"%command.category%",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"%command.openAttachConfigByNameFile%",category:"%command.category%"},{command:"remote-containers.openAttachDevContainerFile",title:"%command.openAttachDevContainerFile%",category:"%command.category%"},{command:"remote-containers.revealLogTerminal",title:"%command.revealLogTerminal%",category:"%command.category%"},{command:"remote-containers.openLogFile",title:"%command.openLogFile%",category:"%command.developerCategory%"},{command:"remote-containers.openLastLogFile",title:"%command.openLastLogFile%",category:"%command.category%"},{command:"remote-containers.testConnection",title:"%command.testConnection%",category:"%command.developerCategory%"},{command:"remote-containers.attachToContainerInCurrentWindow",title:"%command.attachToContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.attachToContainerInNewWindow",title:"%command.attachToContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.stopContainer",title:"%command.stopContainer%",category:"%command.category%"},{command:"remote-containers.startContainer",title:"%command.startContainer%",category:"%command.category%",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"%command.removeContainer%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"%command.removeRecentFolder%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"%command.showDetails%",category:"%command.category%"},{command:"remote-containers.explorerTargetsRefresh",title:"%command.explorerTargetsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"%command.explorerDetailsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"%command.inspectDockerResource%",category:"%command.category%"},{command:"remote-containers.inspectInBasicDevContainer",title:"%command.inspectInBasicDevContainer%",category:"%command.category%"},{command:"remote-containers.cloneInVolume",title:"%command.cloneInVolume%",category:"%command.category%"},{command:"remote-containers.removeVolume",title:"%command.removeVolume%",category:"%command.category%"},{command:"remote-containers.newContainer",title:"%command.newContainer%",category:"%command.category%",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"%command.showContainerLog%",category:"%command.category%"},{command:"remote-containers.addExtensionToConfig",title:"%command.addExtensionToConfig%",category:"%command.category%"},{command:"remote-containers.checkoutPRInVolume",title:"%command.checkoutPRInVolume%",category:"%command.category%"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"%command.showReopenInContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"%command.showRecoveryContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.labelPortAndUpdateConfig",title:"%command.labelPortAndUpdateConfig%",category:"%command.category%",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"%command.installDocker%",category:"%command.category%"},{command:"remote-containers.installDockerInWSL",title:"%command.installDockerInWSL%",category:"%command.category%"},{command:"remote-containers.installUserCLI",title:"%command.installUserCLI%",category:"%command.category%"},{command:"remote-containers.configureContainerFeatures",title:"%command.configureContainerFeatures%",category:"%command.category%"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.openFolder",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.createDevContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openWorkspace",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.openRepositoryFromGitWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.switchContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.testConnection",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.getStarted",when:"!remoteName && !virtualWorkspace || remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.trySample",when:"!hideConnectCommands && !remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"!hideConnectCommands && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"false"},{command:"remote-containers.attachToContainerInNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"false"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"false"},{command:"remote-containers.openInformationAboutMountPerformance",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.installDockerInWSL",when:"!hideConnectCommands && isWindows && !remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_2_actions@0",when:"true"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@1",when:"!hideConnectCommands"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@2",when:"!hideConnectCommands"},{command:"remote-containers.configureContainerFeatures",group:"remote_30_dev-container_2_actions@3",when:"remoteName =~ /^(dev-container)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && remoteName =~ /tunnel*.*/ && gitOpenRepositoryCount == 0"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_2_actions@6",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@3"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@1"},{command:"remote-containers.cleanUpDevContainers",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@2"},{command:"remote-containers.newContainer",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers)",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers) && viewItem =~ /^runningContainer$/i",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"!hideConnectCommands && (view == dockerVolumes || view == vscode-containers.views.volumes) && viewItem == volume",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"!hideConnectCommands && view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/",group:"1_pullrequest@3"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"!hideConnectCommands && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@2"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@2"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@3"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@1"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@2"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^running(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@3"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.openInformationAboutMountPerformance",when:"view == detailsContainers && viewItem == mountPerformanceInfo",group:"inline@1"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && !isWorkspaceScopedExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote|tunnel)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.dev-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.attached-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.exec.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.k8s-container.workspaceSuffix%"}}],views:{remote:[{id:"targetsContainers",name:"%views.remote.targetsContainers%",when:"!hideConnectCommands",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"%views.remote.detailsContainers%",when:"!hideConnectCommands && remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"%views.remote.devVolumes%",when:"!hideConnectCommands",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"%viewsWelcome.targetsContainers.needsDockerStartOrInstall%"},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"%viewsWelcome.targetsContainers.needsSSHCredentials%"},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithFolder%"},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithoutFolder%"},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:"%viewsWelcome.devVolumes.noDevVolumes%"}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":"copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dev-containers-cli","dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@stylistic/eslint-plugin":"^3.0.1","@types/adm-zip":"^0.5.7","@types/chai":"^4.3.20","@types/follow-redirects":"^1.14.4","@types/js-yaml":"^4.0.9","@types/markdown-it":"^14.1.2","@types/minimist":"^1.2.5","@types/mocha":"^10.0.10","@types/ncp":"^2.0.8","@types/node":"^20.19.1","@types/pull-stream":"^3.6.7","@types/recursive-readdir":"^2.2.4","@types/semver":"^7.7.0","@types/stats-lite":"^2.2.2","@types/tar":"^6.1.13","@types/tar-stream":"^3.1.4","@types/vscode":"~1.86.0","@types/yargs":"^17.0.33","@typescript-eslint/eslint-plugin":"^8.35.0","@typescript-eslint/experimental-utils":"^5.62.0","@typescript-eslint/parser":"^8.35.0","@vscode/l10n-dev":"^0.0.35","@vscode/vsce":"^3.5.0",ajv:"^8.17.1",chai:"^4.5.0",copyfiles:"^2.4.1",esbuild:"^0.25.5",eslint:"^8.57.0","eslint-plugin-local":"^6.0.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^9.0.1",husky:"^9.1.7",jsonc:"^2.0.0",minimist:"^1.2.8",mocha:"^11.7.0","npm-run-all":"^4.1.5","npm-watch":"^0.13.0","p-all":"^5.0.0",rimraf:"^6.0.1","stats-lite":"^2.2.0","ts-node":"^10.9.2",typescript:"^5.8.3","typescript-formatter":"^7.2.2",vinyl:"^3.0.1","vinyl-fs":"^4.0.2"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#c3e66708876396f433ddf7e31b21552ff93e8eaf","@vscode/extension-telemetry":"^0.9.9","@vscode/l10n":"^0.0.18","adm-zip":"^0.5.16",applicationinsights:"^2.9.7","find-process":"^1.4.10","follow-redirects":"^1.15.9","js-yaml":"^4.1.0","jsonc-parser":"^3.3.1",muxrpc:"^6.7.3","node-pty":"^1.0.0","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.7.2","stream-to-pull-stream":"^1.7.3",tar:"^6.2.1","tar-stream":"^3.1.7","vscode-tas-client":"^0.1.84","vscode-uri":"^3.1.0",yargs:"~17.7.2"}}});var Xge={};wC(Xge,{activate:()=>Cge,attachToContainer:()=>cC,deactivate:()=>_ge});module.exports=N9(Xge);var U=Y(require("vscode")),h9=Y(Or()),re=require("vscode"),g9=Y(require("os")),b0=Y(require("fs")),lt=Y(require("path")),v9=Y(require("querystring"));function Eg(t,e=!1){let n=t.length,r=0,o="",i=0,s=16,a=0,c=0,l=0,u=0,f=0;function m(w,y){let S=0,D=0;for(;S<w||!y;){let x=t.charCodeAt(r);if(x>=48&&x<=57)D=D*16+x-48;else if(x>=65&&x<=70)D=D*16+x-65+10;else if(x>=97&&x<=102)D=D*16+x-97+10;else break;r++,S++}return S<w&&(D=-1),D}function d(w){r=w,o="",i=0,s=16,f=0}function p(){let w=r;if(t.charCodeAt(r)===48)r++;else for(r++;r<t.length&&fm(t.charCodeAt(r));)r++;if(r<t.length&&t.charCodeAt(r)===46)if(r++,r<t.length&&fm(t.charCodeAt(r)))for(r++;r<t.length&&fm(t.charCodeAt(r));)r++;else return f=3,t.substring(w,r);let y=r;if(r<t.length&&(t.charCodeAt(r)===69||t.charCodeAt(r)===101))if(r++,(r<t.length&&t.charCodeAt(r)===43||t.charCodeAt(r)===45)&&r++,r<t.length&&fm(t.charCodeAt(r))){for(r++;r<t.length&&fm(t.charCodeAt(r));)r++;y=r}else f=3;return t.substring(w,y)}function h(){let w="",y=r;for(;;){if(r>=n){w+=t.substring(y,r),f=2;break}let S=t.charCodeAt(r);if(S===34){w+=t.substring(y,r),r++;break}if(S===92){if(w+=t.substring(y,r),r++,r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:let x=m(4,!0);x>=0?w+=String.fromCharCode(x):f=4;break;default:f=5}y=r;continue}if(S>=0&&S<=31)if(Cg(S)){w+=t.substring(y,r),f=2;break}else f=6;r++}return w}function g(){if(o="",f=0,i=r,c=a,u=l,r>=n)return i=n,s=17;let w=t.charCodeAt(r);if(N0(w)){do r++,o+=String.fromCharCode(w),w=t.charCodeAt(r);while(N0(w));return s=15}if(Cg(w))return r++,o+=String.fromCharCode(w),w===13&&t.charCodeAt(r)===10&&(r++,o+=`
`),a++,l=r,s=14;switch(w){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,o=h(),s=10;case 47:let y=r-1;if(t.charCodeAt(r+1)===47){for(r+=2;r<n&&!Cg(t.charCodeAt(r));)r++;return o=t.substring(y,r),s=12}if(t.charCodeAt(r+1)===42){r+=2;let S=n-1,D=!1;for(;r<S;){let x=t.charCodeAt(r);if(x===42&&t.charCodeAt(r+1)===47){r+=2,D=!0;break}r++,Cg(x)&&(x===13&&t.charCodeAt(r)===10&&r++,a++,l=r)}return D||(r++,f=1),o=t.substring(y,r),s=13}return o+=String.fromCharCode(w),r++,s=16;case 45:if(o+=String.fromCharCode(w),r++,r===n||!fm(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=p(),s=11;default:for(;r<n&&v(w);)r++,w=t.charCodeAt(r);if(i!==r){switch(o=t.substring(i,r),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(w),r++,s=16}}function v(w){if(N0(w)||Cg(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function C(){let w;do w=g();while(w>=12&&w<=15);return w}return{setPosition:d,getPosition:()=>r,scan:e?C:g,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>r-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-u,getTokenError:()=>f}}function N0(t){return t===32||t===9}function Cg(t){return t===10||t===13}function fm(t){return t>=48&&t<=57}var $O;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})($O||($O={}));var Jo=new Array(20).fill(0).map((t,e)=>" ".repeat(e)),dm=200,L0={" ":{"\n":new Array(dm).fill(0).map((t,e)=>`
`+" ".repeat(e)),"\r":new Array(dm).fill(0).map((t,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(dm).fill(0).map((t,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(dm).fill(0).map((t,e)=>`
`+"	".repeat(e)),"\r":new Array(dm).fill(0).map((t,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(dm).fill(0).map((t,e)=>`\r
`+"	".repeat(e))}},MO=[`
`,"\r",`\r
`];function A0(t,e,n){let r,o,i,s,a;if(e){for(s=e.offset,a=s+e.length,i=s;i>0&&!Sg(t,i-1);)i--;let S=a;for(;S<t.length&&!Sg(t,S);)S++;o=t.substring(i,S),r=q9(o,n)}else o=t,r=0,i=0,s=0,a=t.length;let c=G9(n,t),l=MO.includes(c),u=0,f=0,m;n.insertSpaces?m=Jo[n.tabSize||4]??mm(Jo[1],n.tabSize||4):m="	";let d=m==="	"?"	":" ",p=Eg(o,!1),h=!1;function g(){if(u>1)return mm(c,u)+mm(m,r+f);let S=m.length*(r+f);return!l||S>L0[d][c].length?c+mm(m,r+f):S<=0?c:L0[d][c][S]}function v(){let S=p.scan();for(u=0;S===15||S===14;)S===14&&n.keepLines?u+=1:S===14&&(u=1),S=p.scan();return h=S===16||p.getTokenError()!==0,S}let C=[];function w(S,D,x){!h&&(!e||D<a&&x>s)&&t.substring(D,x)!==S&&C.push({offset:D,length:x-D,content:S})}let y=v();if(n.keepLines&&u>0&&w(mm(c,u),0,0),y!==17){let S=p.getTokenOffset()+i,D=m.length*r<20&&n.insertSpaces?Jo[m.length*r]:mm(m,r);w(D,i,S)}for(;y!==17;){let S=p.getTokenOffset()+p.getTokenLength()+i,D=v(),x="",A=!1;for(;u===0&&(D===12||D===13);){let k=p.getTokenOffset()+i;w(Jo[1],S,k),S=p.getTokenOffset()+p.getTokenLength()+i,A=D===12,x=A?g():"",D=v()}if(D===2)y!==1&&f--,n.keepLines&&u>0||!n.keepLines&&y!==1?x=g():n.keepLines&&(x=Jo[1]);else if(D===4)y!==3&&f--,n.keepLines&&u>0||!n.keepLines&&y!==3?x=g():n.keepLines&&(x=Jo[1]);else{switch(y){case 3:case 1:f++,n.keepLines&&u>0||!n.keepLines?x=g():x=Jo[1];break;case 5:n.keepLines&&u>0||!n.keepLines?x=g():x=Jo[1];break;case 12:x=g();break;case 13:u>0?x=g():A||(x=Jo[1]);break;case 6:n.keepLines&&u>0?x=g():A||(x=Jo[1]);break;case 10:n.keepLines&&u>0?x=g():D===6&&!A&&(x="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&u>0?x=g():(D===12||D===13)&&!A?x=Jo[1]:D!==5&&D!==17&&(h=!0);break;case 16:h=!0;break}u>0&&(D===12||D===13)&&(x=g())}D===17&&(n.keepLines&&u>0?x=g():x=n.insertFinalNewline?c:"");let F=p.getTokenOffset()+i;w(x,S,F),y=D}return C}function mm(t,e){let n="";for(let r=0;r<e;r++)n+=t;return n}function q9(t,e){let n=0,r=0,o=e.tabSize||4;for(;n<t.length;){let i=t.charAt(n);if(i===Jo[1])r++;else if(i==="	")r+=o;else break;n++}return Math.floor(r/o)}function G9(t,e){for(let n=0;n<e.length;n++){let r=e.charAt(n);if(r==="\r")return n+1<e.length&&e.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return t&&t.eol||`
`}function Sg(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}var xg;(function(t){t.DEFAULT={allowTrailingComma:!1}})(xg||(xg={}));function HO(t,e){let n=[],r=new Object,o,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,f){i.value=c,i.offset=l,i.length=u,i.type=f,i.colonOffset=void 0,o=i}try{SC(t,{onObjectBegin:(c,l)=>{if(e<=c)throw r;o=void 0,s=e>c,n.push("")},onObjectProperty:(c,l,u)=>{if(e<l||(a(c,l,u,"property"),n[n.length-1]=c,e<=l+u))throw r},onObjectEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onArrayBegin:(c,l)=>{if(e<=c)throw r;o=void 0,n.push(0)},onArrayEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onLiteralValue:(c,l,u)=>{if(e<l||(a(c,l,u,WO(c)),e<=l+u))throw r},onSeparator:(c,l,u)=>{if(e<=l)throw r;if(c===":"&&o&&o.type==="property")o.colonOffset=l,s=!1,o=void 0;else if(c===","){let f=n[n.length-1];typeof f=="number"?n[n.length-1]=f+1:(s=!0,n[n.length-1]=""),o=void 0}}})}catch(c){if(c!==r)throw c}return{path:n,previousNode:o,isAtPropertyKey:s,matches:c=>{let l=0;for(let u=0;l<c.length&&u<n.length;u++)if(c[l]===n[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function BO(t,e=[],n=xg.DEFAULT){let r=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):r!==null&&(o[r]=c)}return SC(t,{onObjectBegin:()=>{let c={};s(c),i.push(o),o=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{let c=[];s(c),i.push(o),o=c,r=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:s,onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n),o[0]}function EC(t,e=[],n=xg.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){r.type==="property"&&(r.length=c-r.offset,r=r.parent)}function i(c){return r.children.push(c),c}SC(t,{onObjectBegin:c=>{r=i({type:"object",offset:c,length:-1,parent:r,children:[]})},onObjectProperty:(c,l,u)=>{r=i({type:"property",offset:l,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:c,offset:l,length:u,parent:r})},onObjectEnd:(c,l)=>{o(c+l),r.length=c+l-r.offset,r=r.parent,o(c+l)},onArrayBegin:(c,l)=>{r=i({type:"array",offset:c,length:-1,parent:r,children:[]})},onArrayEnd:(c,l)=>{r.length=c+l-r.offset,r=r.parent,o(c+l)},onLiteralValue:(c,l,u)=>{i({type:WO(c),offset:l,length:u,parent:r,value:c}),o(l+u)},onSeparator:(c,l,u)=>{r.type==="property"&&(c===":"?r.colonOffset=l:c===","&&o(l))},onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n);let a=r.children[0];return a&&delete a.parent,a}function _g(t,e){if(!t)return;let n=t;for(let r of e)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let o=!1;for(let i of n.children)if(Array.isArray(i.children)&&i.children[0].value===r&&i.children.length===2){n=i.children[1],o=!0;break}if(!o)return}else{let o=r;if(n.type!=="array"||o<0||!Array.isArray(n.children)||o>=n.children.length)return;n=n.children[o]}return n}function CC(t){switch(t.type){case"array":return t.children.map(CC);case"object":let e=Object.create(null);for(let n of t.children){let r=n.children[1];r&&(e[n.children[0].value]=CC(r))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function SC(t,e,n=xg.DEFAULT){let r=Eg(t,!1),o=[],i=0;function s(I){return I?()=>i===0&&I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(I){return I?b=>i===0&&I(b,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function c(I){return I?b=>i===0&&I(b,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}function l(I){return I?()=>{i>0?i++:I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice())===!1&&(i=1)}:()=>!0}function u(I){return I?()=>{i>0&&i--,i===0&&I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}let f=l(e.onObjectBegin),m=c(e.onObjectProperty),d=u(e.onObjectEnd),p=l(e.onArrayBegin),h=u(e.onArrayEnd),g=c(e.onLiteralValue),v=a(e.onSeparator),C=s(e.onComment),w=a(e.onError),y=n&&n.disallowComments,S=n&&n.allowTrailingComma;function D(){for(;;){let I=r.scan();switch(r.getTokenError()){case 4:x(14);break;case 5:x(15);break;case 3:x(13);break;case 1:y||x(11);break;case 2:x(12);break;case 6:x(16);break}switch(I){case 12:case 13:y?x(10):C();break;case 16:x(1);break;case 15:case 14:break;default:return I}}}function x(I,b=[],R=[]){if(w(I),b.length+R.length>0){let L=r.getToken();for(;L!==17;){if(b.indexOf(L)!==-1){D();break}else if(R.indexOf(L)!==-1)break;L=D()}}}function A(I){let b=r.getTokenValue();return I?g(b):(m(b),o.push(b)),D(),!0}function F(){switch(r.getToken()){case 11:let I=r.getTokenValue(),b=Number(I);isNaN(b)&&(x(2),b=0),g(b);break;case 7:g(null);break;case 8:g(!0);break;case 9:g(!1);break;default:return!1}return D(),!0}function k(){return r.getToken()!==10?(x(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(v(":"),D(),T()||x(4,[],[2,5])):x(5,[],[2,5]),o.pop(),!0)}function E(){f(),D();let I=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(I||x(4,[],[]),v(","),D(),r.getToken()===2&&S)break}else I&&x(6,[],[]);k()||x(4,[],[2,5]),I=!0}return d(),r.getToken()!==2?x(7,[2],[]):D(),!0}function _(){p(),D();let I=!0,b=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(b||x(4,[],[]),v(","),D(),r.getToken()===4&&S)break}else b&&x(6,[],[]);I?(o.push(0),I=!1):o[o.length-1]++,T()||x(4,[],[4,5]),b=!0}return h(),I||o.pop(),r.getToken()!==4?x(8,[4],[]):D(),!0}function T(){switch(r.getToken()){case 3:return _();case 1:return E();case 10:return A(!0);default:return F()}}return D(),r.getToken()===17?n.allowEmptyContent?!0:(x(4,[],[]),!1):T()?(r.getToken()!==17&&x(9,[],[]),!0):(x(4,[],[]),!1)}function WO(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}function jO(t,e,n,r){let o=e.slice(),s=EC(t,[]),a,c;for(;o.length>0&&(c=o.pop(),a=_g(s,o),a===void 0&&n!==void 0);)typeof c=="string"?n={[c]:n}:n=[n];if(a)if(a.type==="object"&&typeof c=="string"&&Array.isArray(a.children)){let l=_g(a,[c]);if(l!==void 0)if(n===void 0){if(!l.parent)throw new Error("Malformed AST");let u=a.children.indexOf(l.parent),f,m=l.parent.offset+l.parent.length;if(u>0){let d=a.children[u-1];f=d.offset+d.length}else f=a.offset+1,a.children.length>1&&(m=a.children[1].offset);return Gu(t,{offset:f,length:m-f,content:""},r)}else return Gu(t,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r);else{if(n===void 0)return[];let u=`${JSON.stringify(c)}: ${JSON.stringify(n)}`,f=r.getInsertionIndex?r.getInsertionIndex(a.children.map(d=>d.children[0].value)):a.children.length,m;if(f>0){let d=a.children[f-1];m={offset:d.offset+d.length,length:0,content:","+u}}else a.children.length===0?m={offset:a.offset+1,length:0,content:u}:m={offset:a.offset+1,length:0,content:u+","};return Gu(t,m,r)}}else if(a.type==="array"&&typeof c=="number"&&Array.isArray(a.children)){let l=c;if(l===-1){let u=`${JSON.stringify(n)}`,f;if(a.children.length===0)f={offset:a.offset+1,length:0,content:u};else{let m=a.children[a.children.length-1];f={offset:m.offset+m.length,length:0,content:","+u}}return Gu(t,f,r)}else if(n===void 0&&a.children.length>=0){let u=c,f=a.children[u],m;if(a.children.length===1)m={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===u){let d=a.children[u-1],p=d.offset+d.length,h=a.offset+a.length;m={offset:p,length:h-2-p,content:""}}else m={offset:f.offset,length:a.children[u+1].offset-f.offset,content:""};return Gu(t,m,r)}else if(n!==void 0){let u,f=`${JSON.stringify(n)}`;if(!r.isArrayInsertion&&a.children.length>c){let m=a.children[c];u={offset:m.offset,length:m.length,content:f}}else if(a.children.length===0||c===0)u={offset:a.offset+1,length:0,content:a.children.length===0?f:f+","};else{let m=c>a.children.length?a.children.length:c,d=a.children[m-1];u={offset:d.offset+d.length,length:0,content:","+f}}return Gu(t,u,r)}else throw new Error(`Can not ${n===void 0?"remove":r.isArrayInsertion?"insert":"modify"} Array index ${l} as length is not sufficient`)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${a.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return Gu(t,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}}function Gu(t,e,n){if(!n.formattingOptions)return[e];let r=xC(t,e),o=e.offset,i=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;o>0&&!Sg(r,o-1);)o--;for(;i<r.length&&!Sg(r,i);)i++}let s=A0(r,{offset:o,length:i-o},{...n.formattingOptions,keepLines:!1});for(let c=s.length-1;c>=0;c--){let l=s[c];r=xC(r,l),o=Math.min(o,l.offset),i=Math.max(i,l.offset+l.length),i+=l.content.length-l.length}let a=t.length-(r.length-i)-o;return[{offset:o,length:a,content:r.substring(o,i)}]}function xC(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}var VO;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(VO||(VO={}));var YO;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(YO||(YO={}));var GO=HO,$e=BO,zu=EC,Qi=_g;var _C=CC;var qO;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(qO||(qO={}));function Pn(t,e,n,r){return jO(t,e,n,r)}function xo(t,e){let n=e.slice(0).sort((o,i)=>{let s=o.offset-i.offset;return s===0?o.length-i.length:s}),r=t.length;for(let o=n.length-1;o>=0;o--){let i=n[o];if(i.offset+i.length<=r)t=xC(t,i);else throw new Error("Overlapping edit");r=i.offset}return t}var Ht=Y(require("fs")),As=require("util"),X9="\\\\.\\pipe\\";function yr(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(n?process.platform==="win32"&&n.code==="EBUSY"&&t.startsWith(X9):r.isFile())))}function zO(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isDirectory())))}function KO(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isSocket())))}var st=(0,As.promisify)(Ht.readFile),Dg=(0,As.promisify)(Ht.writeFile),lve=(0,As.promisify)(Ht.appendFile),Jc=(0,As.promisify)(Ht.rename),Xc=(0,As.promisify)(Ht.readdir),JO=(0,As.promisify)(Ht.unlink),es=t=>new Promise((e,n)=>Ht.mkdir(t,{recursive:!0},r=>r?n(r):e())),XO=(0,As.promisify)(Ht.rmdir),Zc=(0,As.promisify)(Ht.rm),uve=(0,As.promisify)(Ht.copyFile);function Ku(t,e,n,r=!1){let o=t.relative(e,n);return(r||!!o)&&!o.startsWith("..")&&!t.isAbsolute(o)}var Ue=Y(require("vscode")),Nr=require("vscode"),tC=Y(require("path"));var ql=Y(require("path")),Rp=Y(Or());var t1=Y(require("os")),Pg=Y(require("fs")),n1=Y(require("path"));var F0=require("events"),Fs=class{nodeEmitter=new F0.EventEmitter;disposables;constructor(...e){this.disposables=e}event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}});fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(e=>e.dispose())}},DC=class{nodeEmitter=new F0.EventEmitter;event=e=>{let n=r=>r.results.push(e(r.data));return this.nodeEmitter.on("event",n),{dispose:()=>{this.nodeEmitter.off("event",n)}}};fire(e){let n=[];return this.nodeEmitter.emit("event",{data:e,results:n}),n}dispose(){this.nodeEmitter.removeAllListeners()}};function ZO(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:e,package:t,getTelemetryLevel:()=>"off"}}function Ju(t){return t.replaceAll(/ghcr.io\/devcontainers\/([^/,]+)\/([^/,]+)/g,"devcontainers-$1:$2")}var er=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(er||{}),U0={info:3,debug:2,trace:1},Z9=Object.keys(U0).reduce((t,e)=>(t[U0[e]]=e,t),[]);function PC(t){return U0[t]||3}function Qr(t){return Z9[t]||3}var Fe={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Os=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function $0(t,e){let n=!!e;return{event:r=>{n&&(n=!1,t.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(o=>o.event(r))}}}function M0(t,e){let n=t7(t);return{event(r){let o=e7(r,e());o&&n.write(o)},join:n.join}}function H0(t,e,n){return{event(r){let o=Q9(r,e(),n.getTime());o&&t(o)}}}function sn(t,e=2){return{event:t.event,write(n,r=e){t.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=e){t.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=e){let o=Date.now();return t.event({type:"start",level:r,timestamp:o,text:n}),o},stop(n,r,o=e){t.event({type:"stop",level:o,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function Q9(t,e,n){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Ig(QO,`${t.timestamp-n} ms`)}] ${IC(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Ig(i7,`[${t.timestamp-n} ms] Start`)}: ${IC(t.text)}`:`[${Ig(QO,`${t.timestamp-n} ms`)}] Start: ${IC(t.text)}`;case"stop":return 1>=e?`${Ig(o7,`[${t.timestamp-n} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${IC(t.text)}`:void 0;default:throw r1(t)}}function IC(t){return a7(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function e7(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${O0(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${O0(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${O0(t.text)}`:void 0;default:throw r1(t)}}function O0(t){return t.replace(Os,"").replace(/(\r?\n)?$/,t1.EOL)}function r1(t){return new Error(`Unknown log event type: ${t.type}`)}function t7(t){let e=[],n=!1,r,o;function i(){n=!1,o&&!e.length&&(r=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!n&&e.length){n=!0;let l=e.join("");e.length=0,Pg.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Pg.mkdir(n1.dirname(t),{recursive:!0},f=>{f?(i(),console.error(f)):Pg.appendFile(t,l,m=>{i(),m&&console.error(m),s()})}):(i(),console.error(u))),i(),s()})}}return{write:s,join:()=>r||(n?r=new Promise(a=>o=a):Promise.resolve())}}var n7="38;2;143;99;79",o1="38;2;99;143;79",r7="38;2;86;156;214",o7=n7,i7=o1,QO=o1,s7=r7;function Ig(t,e){return e.split(`
`).map(n=>`\x1B[1m\x1B[${t}m${n}\x1B[39m\x1B[22m`).join(`
`)}function a7(t){let e,n=0,r=[];for(Os.lastIndex=0;e=Os.exec(t);)r.push(e1(t.substring(n,e.index))),r.push(e[0]),n=Os.lastIndex;return r.push(e1(t.substr(n))),r.join("")}function e1(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,n,r=0,o=[];for(;n=e.exec(t);)o.push(t.substring(r,n.index)),o.push(Ig(s7,n[0])),r=e.lastIndex;return o.push(t.substr(r)),o.join("")}function ot(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function B0(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[33m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var Se=class extends Error{description;detail;step;originalError;manageContainer=!1;params;containerId;dockerParams;volumeName;repositoryPath;folderPath;containerProperties;config;actions=[];data={};constructor(e){var n;super(e.originalError&&e.originalError.message||e.description),Object.assign(this,e),this.actions||(this.actions=[]),this.data||(this.data={}),(n=this.originalError)!=null&&n.stack&&(this.stack=this.originalError.stack)}};var Ee=Y(require("path")),hx=Y(require("fs")),FY=Y(LC()),GR=require("string_decoder"),Nl=Y(YE());var vp=Y(require("crypto")),OY=Y(pT()),kl=Y(Or()),UY=Y(Z2()),$Y=Y(zB());var sse=Y(require("path")),UR=require("string_decoder");var ex=Y(require("path")),YV=Y(require("stream")),qV=Y(require("os")),hp=Y(require("child_process")),Fv=require("string_decoder");var LV=Y(require("path")),AV=Y(require("assert"));var KB;(()=>{"use strict";var t={975:E=>{function _(b){if(typeof b!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(b))}function T(b,R){for(var L,N="",B=0,W=-1,z=0,V=0;V<=b.length;++V){if(V<b.length)L=b.charCodeAt(V);else{if(L===47)break;L=47}if(L===47){if(!(W===V-1||z===1))if(W!==V-1&&z===2){if(N.length<2||B!==2||N.charCodeAt(N.length-1)!==46||N.charCodeAt(N.length-2)!==46){if(N.length>2){var q=N.lastIndexOf("/");if(q!==N.length-1){q===-1?(N="",B=0):B=(N=N.slice(0,q)).length-1-N.lastIndexOf("/"),W=V,z=0;continue}}else if(N.length===2||N.length===1){N="",B=0,W=V,z=0;continue}}R&&(N.length>0?N+="/..":N="..",B=2)}else N.length>0?N+="/"+b.slice(W+1,V):N=b.slice(W+1,V),B=V-W-1;W=V,z=0}else L===46&&z!==-1?++z:z=-1}return N}var I={resolve:function(){for(var b,R="",L=!1,N=arguments.length-1;N>=-1&&!L;N--){var B;N>=0?B=arguments[N]:(b===void 0&&(b=process.cwd()),B=b),_(B),B.length!==0&&(R=B+"/"+R,L=B.charCodeAt(0)===47)}return R=T(R,!L),L?R.length>0?"/"+R:"/":R.length>0?R:"."},normalize:function(b){if(_(b),b.length===0)return".";var R=b.charCodeAt(0)===47,L=b.charCodeAt(b.length-1)===47;return(b=T(b,!R)).length!==0||R||(b="."),b.length>0&&L&&(b+="/"),R?"/"+b:b},isAbsolute:function(b){return _(b),b.length>0&&b.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var b,R=0;R<arguments.length;++R){var L=arguments[R];_(L),L.length>0&&(b===void 0?b=L:b+="/"+L)}return b===void 0?".":I.normalize(b)},relative:function(b,R){if(_(b),_(R),b===R||(b=I.resolve(b))===(R=I.resolve(R)))return"";for(var L=1;L<b.length&&b.charCodeAt(L)===47;++L);for(var N=b.length,B=N-L,W=1;W<R.length&&R.charCodeAt(W)===47;++W);for(var z=R.length-W,V=B<z?B:z,q=-1,ce=0;ce<=V;++ce){if(ce===V){if(z>V){if(R.charCodeAt(W+ce)===47)return R.slice(W+ce+1);if(ce===0)return R.slice(W+ce)}else B>V&&(b.charCodeAt(L+ce)===47?q=ce:ce===0&&(q=0));break}var Be=b.charCodeAt(L+ce);if(Be!==R.charCodeAt(W+ce))break;Be===47&&(q=ce)}var dt="";for(ce=L+q+1;ce<=N;++ce)ce!==N&&b.charCodeAt(ce)!==47||(dt.length===0?dt+="..":dt+="/..");return dt.length>0?dt+R.slice(W+q):(W+=q,R.charCodeAt(W)===47&&++W,R.slice(W))},_makeLong:function(b){return b},dirname:function(b){if(_(b),b.length===0)return".";for(var R=b.charCodeAt(0),L=R===47,N=-1,B=!0,W=b.length-1;W>=1;--W)if((R=b.charCodeAt(W))===47){if(!B){N=W;break}}else B=!1;return N===-1?L?"/":".":L&&N===1?"//":b.slice(0,N)},basename:function(b,R){if(R!==void 0&&typeof R!="string")throw new TypeError('"ext" argument must be a string');_(b);var L,N=0,B=-1,W=!0;if(R!==void 0&&R.length>0&&R.length<=b.length){if(R.length===b.length&&R===b)return"";var z=R.length-1,V=-1;for(L=b.length-1;L>=0;--L){var q=b.charCodeAt(L);if(q===47){if(!W){N=L+1;break}}else V===-1&&(W=!1,V=L+1),z>=0&&(q===R.charCodeAt(z)?--z==-1&&(B=L):(z=-1,B=V))}return N===B?B=V:B===-1&&(B=b.length),b.slice(N,B)}for(L=b.length-1;L>=0;--L)if(b.charCodeAt(L)===47){if(!W){N=L+1;break}}else B===-1&&(W=!1,B=L+1);return B===-1?"":b.slice(N,B)},extname:function(b){_(b);for(var R=-1,L=0,N=-1,B=!0,W=0,z=b.length-1;z>=0;--z){var V=b.charCodeAt(z);if(V!==47)N===-1&&(B=!1,N=z+1),V===46?R===-1?R=z:W!==1&&(W=1):R!==-1&&(W=-1);else if(!B){L=z+1;break}}return R===-1||N===-1||W===0||W===1&&R===N-1&&R===L+1?"":b.slice(R,N)},format:function(b){if(b===null||typeof b!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);return function(R,L){var N=L.dir||L.root,B=L.base||(L.name||"")+(L.ext||"");return N?N===L.root?N+B:N+"/"+B:B}(0,b)},parse:function(b){_(b);var R={root:"",dir:"",base:"",ext:"",name:""};if(b.length===0)return R;var L,N=b.charCodeAt(0),B=N===47;B?(R.root="/",L=1):L=0;for(var W=-1,z=0,V=-1,q=!0,ce=b.length-1,Be=0;ce>=L;--ce)if((N=b.charCodeAt(ce))!==47)V===-1&&(q=!1,V=ce+1),N===46?W===-1?W=ce:Be!==1&&(Be=1):W!==-1&&(Be=-1);else if(!q){z=ce+1;break}return W===-1||V===-1||Be===0||Be===1&&W===V-1&&W===z+1?V!==-1&&(R.base=R.name=z===0&&B?b.slice(1,V):b.slice(z,V)):(z===0&&B?(R.name=b.slice(1,W),R.base=b.slice(1,V)):(R.name=b.slice(z,W),R.base=b.slice(z,V)),R.ext=b.slice(W,V)),z>0?R.dir=b.slice(0,z-1):B&&(R.dir="/"),R},sep:"/",delimiter:":",win32:null,posix:null};I.posix=I,E.exports=I}},e={};function n(E){var _=e[E];if(_!==void 0)return _.exports;var T=e[E]={exports:{}};return t[E](T,T.exports,n),T.exports}n.d=(E,_)=>{for(var T in _)n.o(_,T)&&!n.o(E,T)&&Object.defineProperty(E,T,{enumerable:!0,get:_[T]})},n.o=(E,_)=>Object.prototype.hasOwnProperty.call(E,_),n.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:()=>m,Utils:()=>k}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let i=/^\w[\w\d+.-]*$/,s=/^\//,a=/^\/\//;function c(E,_){if(!E.scheme&&_)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${E.authority}", path: "${E.path}", query: "${E.query}", fragment: "${E.fragment}"}`);if(E.scheme&&!i.test(E.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(E.path){if(E.authority){if(!s.test(E.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(E.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",u="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static isUri(_){return _ instanceof m||!!_&&typeof _.authority=="string"&&typeof _.fragment=="string"&&typeof _.path=="string"&&typeof _.query=="string"&&typeof _.scheme=="string"&&typeof _.fsPath=="string"&&typeof _.with=="function"&&typeof _.toString=="function"}scheme;authority;path;query;fragment;constructor(_,T,I,b,R,L=!1){typeof _=="object"?(this.scheme=_.scheme||l,this.authority=_.authority||l,this.path=_.path||l,this.query=_.query||l,this.fragment=_.fragment||l):(this.scheme=function(N,B){return N||B?N:"file"}(_,L),this.authority=T||l,this.path=function(N,B){switch(N){case"https":case"http":case"file":B?B[0]!==u&&(B=u+B):B=u}return B}(this.scheme,I||l),this.query=b||l,this.fragment=R||l,c(this,L))}get fsPath(){return C(this,!1)}with(_){if(!_)return this;let{scheme:T,authority:I,path:b,query:R,fragment:L}=_;return T===void 0?T=this.scheme:T===null&&(T=l),I===void 0?I=this.authority:I===null&&(I=l),b===void 0?b=this.path:b===null&&(b=l),R===void 0?R=this.query:R===null&&(R=l),L===void 0?L=this.fragment:L===null&&(L=l),T===this.scheme&&I===this.authority&&b===this.path&&R===this.query&&L===this.fragment?this:new p(T,I,b,R,L)}static parse(_,T=!1){let I=f.exec(_);return I?new p(I[2]||l,D(I[4]||l),D(I[5]||l),D(I[7]||l),D(I[9]||l),T):new p(l,l,l,l,l)}static file(_){let T=l;if(o&&(_=_.replace(/\\/g,u)),_[0]===u&&_[1]===u){let I=_.indexOf(u,2);I===-1?(T=_.substring(2),_=u):(T=_.substring(2,I),_=_.substring(I)||u)}return new p("file",T,_,l,l)}static from(_){let T=new p(_.scheme,_.authority,_.path,_.query,_.fragment);return c(T,!0),T}toString(_=!1){return w(this,_)}toJSON(){return this}static revive(_){if(_){if(_ instanceof m)return _;{let T=new p(_);return T._formatted=_.external,T._fsPath=_._sep===d?_.fsPath:null,T}}return _}}let d=o?1:void 0;class p extends m{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(_=!1){return _?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){let _={$mid:1};return this._fsPath&&(_.fsPath=this._fsPath,_._sep=d),this._formatted&&(_.external=this._formatted),this.path&&(_.path=this.path),this.scheme&&(_.scheme=this.scheme),this.authority&&(_.authority=this.authority),this.query&&(_.query=this.query),this.fragment&&(_.fragment=this.fragment),_}}let h={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function g(E,_,T){let I,b=-1;for(let R=0;R<E.length;R++){let L=E.charCodeAt(R);if(L>=97&&L<=122||L>=65&&L<=90||L>=48&&L<=57||L===45||L===46||L===95||L===126||_&&L===47||T&&L===91||T&&L===93||T&&L===58)b!==-1&&(I+=encodeURIComponent(E.substring(b,R)),b=-1),I!==void 0&&(I+=E.charAt(R));else{I===void 0&&(I=E.substr(0,R));let N=h[L];N!==void 0?(b!==-1&&(I+=encodeURIComponent(E.substring(b,R)),b=-1),I+=N):b===-1&&(b=R)}}return b!==-1&&(I+=encodeURIComponent(E.substring(b))),I!==void 0?I:E}function v(E){let _;for(let T=0;T<E.length;T++){let I=E.charCodeAt(T);I===35||I===63?(_===void 0&&(_=E.substr(0,T)),_+=h[I]):_!==void 0&&(_+=E[T])}return _!==void 0?_:E}function C(E,_){let T;return T=E.authority&&E.path.length>1&&E.scheme==="file"?`//${E.authority}${E.path}`:E.path.charCodeAt(0)===47&&(E.path.charCodeAt(1)>=65&&E.path.charCodeAt(1)<=90||E.path.charCodeAt(1)>=97&&E.path.charCodeAt(1)<=122)&&E.path.charCodeAt(2)===58?_?E.path.substr(1):E.path[1].toLowerCase()+E.path.substr(2):E.path,o&&(T=T.replace(/\//g,"\\")),T}function w(E,_){let T=_?v:g,I="",{scheme:b,authority:R,path:L,query:N,fragment:B}=E;if(b&&(I+=b,I+=":"),(R||b==="file")&&(I+=u,I+=u),R){let W=R.indexOf("@");if(W!==-1){let z=R.substr(0,W);R=R.substr(W+1),W=z.lastIndexOf(":"),W===-1?I+=T(z,!1,!1):(I+=T(z.substr(0,W),!1,!1),I+=":",I+=T(z.substr(W+1),!1,!0)),I+="@"}R=R.toLowerCase(),W=R.lastIndexOf(":"),W===-1?I+=T(R,!1,!0):(I+=T(R.substr(0,W),!1,!0),I+=R.substr(W))}if(L){if(L.length>=3&&L.charCodeAt(0)===47&&L.charCodeAt(2)===58){let W=L.charCodeAt(1);W>=65&&W<=90&&(L=`/${String.fromCharCode(W+32)}:${L.substr(3)}`)}else if(L.length>=2&&L.charCodeAt(1)===58){let W=L.charCodeAt(0);W>=65&&W<=90&&(L=`${String.fromCharCode(W+32)}:${L.substr(2)}`)}I+=T(L,!0,!1)}return N&&(I+="?",I+=T(N,!1,!1)),B&&(I+="#",I+=_?B:g(B,!1,!1)),I}function y(E){try{return decodeURIComponent(E)}catch{return E.length>3?E.substr(0,3)+y(E.substr(3)):E}}let S=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function D(E){return E.match(S)?E.replace(S,_=>y(_)):E}var x=n(975);let A=x.posix||x,F="/";var k;(function(E){E.joinPath=function(_,...T){return _.with({path:A.join(_.path,...T)})},E.resolvePath=function(_,...T){let I=_.path,b=!1;I[0]!==F&&(I=F+I,b=!0);let R=A.resolve(I,...T);return b&&R[0]===F&&!_.authority&&(R=R.substring(1)),_.with({path:R})},E.dirname=function(_){if(_.path.length===0||_.path===F)return _;let T=A.dirname(_.path);return T.length===1&&T.charCodeAt(0)===46&&(T=""),_.with({path:T})},E.basename=function(_){return A.basename(_.path)},E.extname=function(_){return A.extname(_.path)}})(k||(k={})),KB=r})();var{URI:ye,Utils:ko}=KB;var JB=Y(require("path"));var Cl=Y(Or());function It(t,e){if(yv(e)){let n=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:n,configFolderPath:n}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function yv(t){return JB.extname(t)===".code-workspace"}async function yS(t,e){if(e.isWorkspaceFile)try{let n=e.rootFolderPath,r=(await t.readFile(e.workspaceOrFolderPath)).toString(),i=$e(r).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return Cl.t("Workspace contains an absolute folder path '{0}'.",a);c=t.path.resolve(n,a)}else{let l=s.uri;return l?ye.parse(l).scheme!=="file"?Cl.t("Workspace contains folder '{0}' not on the local file system.",l):Cl.t("Workspace contains an absolute folder path '{0}'.",l):Cl.t("Workspace contains a folder that defines neither a path nor a URI.")}if(!eoe(t,c,n))return Cl.t("Folder '{0}' is not a subfolder of shared root folder '{1}'.",c,n)}return}return Cl.t("Workspace does not define any folders")}catch(n){return Cl.t("Problems loading workspace file {0}: {1}",e.workspaceOrFolderPath,n&&(n.message||n.toString()))}}function eoe(t,e,n){return e===n?!0:!e||!n||n.length>e.length||e.length>n.length&&e.charAt(n.length)!==t.path.sep?!1:toe(t.platform,n,e.substr(0,n.length))}function toe(t,e,n){return t==="linux"?e===n:e.toLowerCase()===n.toLowerCase()}var ar=Y(require("path")),MS=Y(YE()),_R=Y(require("crypto")),US=Y(Cv()),IV=require("string_decoder");var DR=Y(Or());var op=Y(require("path"));async function ej(t,e){let n=await boe(t),r=n["agent-socket"];if(!r){e.write("gpg-agent: No agent-socket found in container.");return}let o=n.homedir;try{let{stdout:a}=await t.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim()){e.write("gpg-agent: Private keys found in container, not forwarding.");return}}catch{}let i=!1,s=n["keyboxd-socket"];if(s)try{await t.exec(`grep -e '^s*use-keyboxds*$' '${o}/common.conf' 2>/dev/null`),i=!0}catch{}return{homedir:o,gpgSocket:r,keyboxdSocket:s,useKeyboxd:i}}async function tj(t,e,n,r){let o=await Poe(t,r),i=o["agent-extra-socket"];if(!i){r.write(`gpg-agent: No agent-extra-socket found on ${t.type} host.`);return}let s=o.homedir,a=!1,c=o["keyboxd-socket"];if(c)try{let w=(await t.readFile(t.path.join(s,"common.conf"))).toString();a=/^\s*use-keyboxd\s*$/m.test(w)}catch{}let l=op.posix.join(n.homedir,"pubring.kbx"),u=await ki(e,l);u&&r.write(`GPG forwarding: ${l} exists in container.`);let f=op.posix.join(n.homedir,"pubring.gpg"),m=await ki(e,f);m&&r.write(`GPG forwarding: ${f} exists in container.`);let d=op.posix.join(n.homedir,"trustdb.gpg"),p=await ki(e,d);p&&r.write(`GPG forwarding: ${d} exists in container.`);let h=a&&n.keyboxdSocket&&!n.useKeyboxd&&!u&&!m,g=a&&(n.useKeyboxd||h),v=[],C=(async()=>{if(await e.exec(`mkdir -p -m 700 '${op.posix.dirname(n.gpgSocket)}'`),g)h&&await e.exec(`mkdir -p -m 700 '${n.homedir}' && echo '
use-keyboxd' >> '${op.posix.join(n.homedir,"common.conf")}'`);else if(a||n.useKeyboxd){if(!n.useKeyboxd&&!u&&!m||n.useKeyboxd&&(await e.exec("gpg --export --export-options backup")).stdout.trim().length===0){try{let w=await ee({exec:t.exec,cmd:"gpg",args:["--export","--export-options","backup"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Sf(w.stdout.byteLength)} | gpg --import --import-options restore`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import public keys: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export public keys: ${w==null?void 0:w.message}`)}try{let w=await ee({exec:t.exec,cmd:"gpgsm",args:["--export","--armor"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Sf(w.stdout.byteLength)} | gpgsm --import`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import certificates: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export certificates: ${w==null?void 0:w.message}`)}}}else u||await El(t,e,t.path.join(s,"pubring.kbx"),l,"gpg"),m||await El(t,e,t.path.join(s,"pubring.gpg"),f,"gpg"),p||await El(t,e,t.path.join(s,"trustdb.gpg"),d,"gpg");if((a||n.useKeyboxd)&&!p)try{let w=await ee({exec:t.exec,cmd:"gpg",args:["--export-ownertrust"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Sf(w.stdout.byteLength)} | gpg --import-ownertrust`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import ownertrust: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export ownertrust: ${w==null?void 0:w.message}`)}await Toe(t,r)})();return{cliHost:t,remoteGpgSocket:n.gpgSocket,localGpgSocket:i,remoteKeyboxdSocket:g?n.keyboxdSocket:void 0,localKeyboxdSocket:g?c:void 0,importTasks:async()=>{await C;for(let w of v)await w()}}}async function Poe(t,e){try{let{stdout:n}=await ee({exec:t.exec,cmd:"gpgconf",args:["--list-dirs"],output:e,print:!0});return n.toString().trim().split(/\r?\n/).reduce((r,o)=>{let i=o.indexOf(":");if(i!==-1){let s=decodeURIComponent(o.substring(i+1));t.platform==="win32"&&/^\/.\//.test(s)&&(s=`${s.charAt(1)}:${s.substring(2).replace(/\//g,"\\")}`),r[o.substring(0,i)]=s}return r},{})}catch{return{}}}async function boe(t){try{let{stdout:e}=await t.exec("gpgconf --list-dirs");return e.trim().split(`
`).reduce((n,r)=>{let o=r.indexOf(":");return o!==-1&&(n[r.substring(0,o)]=decodeURIComponent(r.substring(o+1))),n},{})}catch{return{}}}async function Toe(t,e){try{await ee({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}var eR=Y(require("path"));async function Ev(t,e,n){if(!("exec"in t)){for(let r=e,o="";r!==o;o=r,r=t.path.dirname(r))if(await t.isFile(t.path.join(r,".git","config")))return r;return}try{let{stdout:r}=await ee({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:n}),o=r.toString().trim();return t.path.resolve(e,o)}catch{return}}async function tR(t,e,n,r){try{return await ee({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",env:n,output:r,print:"onerror"}),!0}catch(o){return(o==null?void 0:o.code)==="ENOENT"?void 0:!1}}async function oj(t,e,n,r,o){let i=r[1],s={get:"fill",store:"approve",erase:"reject"}[i];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${i}`);let a=await nj(n?t:e,s,o).catch(c=>{if(n)throw c});if(!n&&(a==="ENOENT"||(a==null?void 0:a.code)!==0)){let c=await nj(t,s,o);c!=="ENOENT"&&(a=c,c.code===0&&(n=!0))}return a==="ENOENT"?{result:{stdout:"",stderr:"",code:127},preferLocalCLIHost:n}:{result:a,preferLocalCLIHost:n}}async function nj({exec:t},e,n){try{let{stdout:r,stderr:o}=await ee({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(n),output:Fe});return{stdout:r.toString(),stderr:o.toString(),code:0}}catch(r){if((r==null?void 0:r.code)==="ENOENT"||(r==null?void 0:r.code)==="EPIPE")return"ENOENT";if(!(r&&r.stdout&&r.stderr))throw r;let{stdout:o,stderr:i,code:s}=r;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function ij(t,e,n){let r=await nR(t,e,n);if(!r)return;r.startsWith("refs/")&&(r=r.substr(5)),r.startsWith("remotes/")&&(r=r.substr(8));let o=r.indexOf("/");if(o===-1)return;let i=r.substr(0,o),s=r.substr(o+1);try{let{stdout:a}=await ee({exec:t.exec,cmd:"git",args:["remote","get-url",i],cwd:e.rootFolderPath,output:n}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let l=await Loe(t,e,i,n);if(l&&s!==l)return`${c}/tree/${s}`}return c}catch{return}}async function xS(t,e,n){if(!("exec"in t)){let o=await Ev(t,e.rootFolderPath,n);if(!o)return;try{return(await t.readFile(t.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let r;try{let{stdout:o}=await ee({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:n});r=o.toString()}catch{return}return Array.from(new Set(Roe(/^[^\s]+\s+([^\s]+)/gm,r,1)))}function Roe(t,e,n){return{[Symbol.iterator]:function*(){let r;for(;r=t.exec(e);)yield r[n],t.lastIndex===r.index&&t.lastIndex++}}}async function sj(t,e,n){return await koe(t,e,n)||Noe(t,e,n)}async function koe(t,e,n){try{let{stdout:r}=await ee({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:n});return!!r.toString().trim()}catch{return}}async function Noe(t,e,n){let r=await nR(t,e,n);if(r)try{let{stdout:o}=await ee({exec:t.exec,cmd:"git",args:["log",`${r}..HEAD`],cwd:e.rootFolderPath,output:n});return!!o.toString().trim()}catch{return}}async function aj(t,e,n,r){let o=await nR(t,e,r);if(!o)return!1;try{let i=t.platform==="win32"?n.replace(/\\/g,"/"):n;return await ee({exec:t.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:e.rootFolderPath,output:r}),!0}catch{return!1}}async function nR(t,e,n){try{let{stdout:r}=await ee({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:n});return r.toString().trim()}catch{return}}async function Loe(t,e,n,r){try{let{stdout:o}=await ee({exec:t.exec,cmd:"git",args:["remote","show",n],cwd:e.rootFolderPath,output:r});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function cj(t,e,n,r,o,i,s){let{extensionPath:a,onDidInput:c}=t;if(await e.isFolder(e.path.join(n,".git"))){if(s&&(e.type==="container"&&await Ni({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",n],cwd:n,output:sn(o,3)}),await Aoe(e,n,o))){let d=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env;return{gitClone:Ni({ptyExec:e.ptyExec,cmd:"git",args:["pull","--ff-only"],cwd:n,env:d,onDidInput:c,output:sn(o,3)}).catch(h=>h),gitUnshallow:void 0}}return{gitClone:void 0,gitUnshallow:void 0}}await e.mkdirp(n);let l=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env,u=[];if(r.fullClone||u.push("--depth","1"),r.branch&&u.push("--branch",r.branch),r.recurseSubmodules&&u.push("--recurse-submodules"),e.type==="container"&&r.url.startsWith("file:")){let d=e.path.join(ye.parse(r.url).path,".git");await Ni({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",d],cwd:n,env:l,output:sn(o,3)})}let f=Ni({ptyExec:e.ptyExec,cmd:"git",args:["clone",...u,r.url,"."],cwd:n,env:l,onDidInput:c,output:sn(o,3)}),m=r.fullClone?f:(async()=>(await f,await Ni({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:n,env:l,output:i}),Ni({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:n,env:l,onDidInput:c,output:i})))();return{gitClone:f,gitUnshallow:m}}async function Aoe(t,e,n){return(await ee({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e,output:n}).catch(o=>o)).stdout.toString().trim()===""}async function _S(t,e,n){let r=await Sv(t,e,[".gitconfig"],"git"," && grep -e '^\\[' ~/.gitconfig | grep -v -E '^\\[(filter|safe)([[:blank:]]+|\\])'"),o=await Foe(t,e,n);(r||o)&&(await Ooe(t,e.shellServer),Uoe(t,e).catch(i=>{t.output.write(`Error copying allowed signers: ${(i==null?void 0:i.stack)||(i==null?void 0:i.message)||i}`,5)}))}var lj=["git","config"];async function Foe(t,e,n){let{cliHost:r}=t,o=await rj(r);if(!await r.isFile(o)&&(r.type==="local"||(r=await Vr(process.cwd(),t.loadNativeModule,t.output),o=await rj(r),!await r.isFile(o))))return!1;let i=(async()=>{let s=await n,a=s.XDG_CONFIG_HOME?[s.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return eR.posix.join(...a,...lj)})();return El(r,e.shellServer,o,i,"git")}async function rj(t){let{env:e}=t,n=e.XDG_CONFIG_HOME?[e.XDG_CONFIG_HOME]:[await t.homedir(),".config"];return t.path.join(...n,...lj)}async function Ooe(t,e){await e.exec(`# Cleaning up git config
for key in core.editor core.sshCommand gpg.program gpg.openpgp.program gpg.x509.program gpg.ssh.program
do
	value="$(git config --global --get $key)"
	executable="\${value%% *}"
	([ -z "$executable" ] || [ "$executable" = "${t.product.applicationName}" ]) && continue
	command -v "$executable" >/dev/null 2>&1 || (echo "Removing Git config key: $key = $value" && git config --global --unset $key)
done
git config --global --unset http.sslBackend || true`)}async function Uoe(t,e){let{cliHost:n,output:r}=t,{homeFolder:o,shellServer:i}=e,s=await $oe(n,"gpg.ssh.allowedSignersFile",r);if(!s)return;let a=await n.homedir(),c=/^~[/\\]/.test(s)?n.path.join(a,s.substring(2)):s,l=n.path.resolve(a,c);r.write(`Copying allowed signers file: ${l}`);let u=n.path.relative(a,l),f=n.platform==="win32"?u.replace(/\\/g,"/"):u,m=eR.posix.resolve(o,f);await El(n,i,l,m,"ssh")&&await i.exec(`git config --global gpg.ssh.allowedSignersFile '${m}'`)}async function $oe(t,e,n){try{let{stdout:r}=await ee({exec:t.exec,cmd:"git",args:["config","--global","--get",e],output:n}),o=r.toString();return t.platform==="win32"&&o.endsWith(`\r
`)?o.substring(0,o.length-2):o.endsWith(`
`)?o.substring(0,o.length-1):o}catch{return}}var xl=require("stream");async function uj(t,e){let{stdout:n}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return n.split("\0").map(r=>{let o=r.indexOf("=");return o!==-1?[r.slice(0,o),r.slice(o+1)]:[]}).reduce((r,[o,i])=>(o&&(r[o]=i),r),{})}async function rR(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await t.exec(e,{logOutput:!1}),r=6,o=n.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,c,l,u,f,m])=>{let d=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:d[1],pgrp:d[2],cwd:c,mntNS:l,cmd:m.replace(/\0/g," "),env:f.split("\0").reduce((p,h)=>{let g=h.indexOf("=");return g!==-1&&(p[h.substr(0,g)]=h.substr(g+1)),p},{})}}),mntNS:i}}function fj(t){let e={};return t.forEach(n=>e[n.pid]={process:n,childProcesses:[]}),t.filter(n=>n.ppid).forEach(n=>{var r;return(r=e[n.ppid])==null?void 0:r.childProcesses.push(e[n.pid])}),e}function oR(t,e="  ",n="  "){return`${n}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(r=>oR(r,e,n+e))}`}var Li=Y(require("path")),hj=Y(require("fs"));async function ti(t,e=process.cwd(),n=process.env){if(process.platform!=="win32")return t;if(Li.isAbsolute(t))return await iR(t)||t;if(/[/\\]/.test(t)){let s=Li.join(e,t);return await iR(s)||s}let r,o;if(n){for(let s of Object.keys(n))if(s.toLowerCase()==="path"){let a=n[s];typeof a=="string"&&(r=a,o=a.split(Li.delimiter).filter(Boolean),o.push(Li.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){let s=new Error(`No PATH to look up executable '${t}'.`);throw s.code="ENOENT",s}for(let s of o){let a;Li.isAbsolute(s)?a=Li.join(s,t):a=Li.join(e,s,t);let c=await iR(a);if(c)return c}let i=new Error(`Exectuable '${t}' not found on PATH '${r}'.`);throw i.code="ENOENT",i}var dj=process.env.PATHEXT,mj=dj?dj.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function iR(t){if(mj.indexOf(Li.extname(t))!==-1)return await pj(t)?t:void 0;for(let e of mj){let n=t+e;if(await pj(n))return n}}function pj(t){return new Promise(e=>hj.stat(t,(n,r)=>e(!n&&r.isFile())))}var sR="dev-containers-",gj="credentials not found in native keychain";async function yj(t,e,n,r,o,i){let s=await vj(n?t:e,r,o,i).catch(a=>{if(n)throw a});return!n&&(s==null?void 0:s.code)!==0&&(s=await vj(t,r,o,i),s.code===0&&(n=!0)),{result:s,preferLocalCLIHost:n}}async function vj(t,e,n,r){let o,i=e[1];try{let s=i==="store"?JSON.parse(n).ServerURL:n.trim(),a=await Moe(t,s,r);if(!a)return{stdout:i==="get"?gj:"Docker credential helper not found.",stderr:"",code:1};if("identitytoken"in a)return i!=="get"?{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1}:{stdout:JSON.stringify({ServerURL:s,Username:"<token>",Secret:a.identitytoken}),stderr:"",code:0};if("auth"in a){if(i!=="get")return{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1};let[u,f]=Buffer.from(a.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:s,Username:u,Secret:f}),stderr:"",code:0}}o=`docker-credential-${a.helper}`;let{stdout:c,stderr:l}=await ee({exec:t.exec,cmd:o,args:e.slice(1),stdin:Buffer.from(n),output:Fe});return{stdout:c.toString(),stderr:l.toString(),code:0}}catch(s){if(o&&((s==null?void 0:s.code)==="ENOENT"||(s==null?void 0:s.code)==="EPIPE"))return{stdout:i==="get"?gj:`Docker credential helper '${o}' not found: ${(s==null?void 0:s.message)||String(s)}.`,stderr:"",code:1};if(!(s&&s.stdout&&s.stderr))throw s;let{stdout:a,stderr:c,code:l}=s;return{stdout:a.toString(),stderr:c.toString(),code:l||0}}}async function Moe(t,e,n){var o,i,s,a,c;n.write(`Looking up Docker credential helper for '${e}'.`);try{let l=$e((await t.readFile(t.path.join(await t.homedir(),".docker","config.json"))).toString()),u=ye.parse(e).authority||e,f=(o=l==null?void 0:l.credHelpers)==null?void 0:o[u];if(f)return{helper:f};let m=(s=(i=l==null?void 0:l.auths)==null?void 0:i[e])==null?void 0:s.identitytoken;if(m)return{identitytoken:m};let d=(c=(a=l==null?void 0:l.auths)==null?void 0:a[e])==null?void 0:c.auth;if(d)return{auth:d};if(l!=null&&l.credsStore)return{helper:l.credsStore}}catch(l){(l==null?void 0:l.code)!=="ENOENT"&&n.write(`Error reading Docker config: ${(l==null?void 0:l.message)||String(l)}.`)}let r=await Cj(t);return r?{helper:r}:void 0}async function aR(t,e){let n=t.path.join(await t.homedir(),".docker","config.json");try{let r=await t.readFile(n),o=$e(r.toString());return!!(o!=null&&o.credsStore)||Object.keys((o==null?void 0:o.credHelpers)||{}).some(i=>{var s;return(s=o==null?void 0:o.credHelpers)==null?void 0:s[i]})||Object.keys((o==null?void 0:o.auths)||{}).some(i=>{var s,a;return(a=(s=o==null?void 0:o.auths)==null?void 0:s[i])==null?void 0:a.auth})||wj(t)}catch(r){return(r==null?void 0:r.code)!=="ENOENT"?(e.write(`Error reading Docker config (${n}): ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)}.`),!1):wj(t)}}async function wj(t){let e=await Cj(t);return!!e&&await Hoe(t,`docker-credential-${e}`)}async function Cj(t){if(t.platform==="darwin")return"osxkeychain";if(t.platform==="win32")return"wincred";if(t.platform==="linux")try{return await ee({exec:t.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:Fe}),"pass"}catch{return"secretservice"}}async function Hoe(t,e){try{return t.platform==="win32"?!!await ti(e,t.cwd,t.env):(await ee({exec:t.exec,cmd:"/bin/sh",args:["-c",`command -v '${e}' >/dev/null 2>&1`],output:Fe}),!0)}catch{return!1}}function Sl(t){return`remote.containers.${t}`}function ss(t){return`dev.containers.${t}`}var lR=Y(require("path"));var Boe=Y(require("http")),Woe=Y(require("https"));function cR(t,e={}){return new Promise((n,r)=>{let o=t.startsWith("https:")?Woe:Boe,i;if(Object.keys(e).length>0){let a=new URL(t);i={headers:e,host:a.host,path:a.pathname}}o.get(i??t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&n(cR(l,e))}r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",r);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>n(Buffer.concat(l)))}}).on("error",r)})}async function sr(t){let e=await st(lR.join(t,"package.json"),"utf8");return JSON.parse(e)}async function xv(t){let e=await st(lR.join(t,"product.json"),"utf8"),n=JSON.parse(e);return n.commit||(n.commit=await ip(n.quality)),n.serverDataFolderName||(n.serverDataFolderName=".vscode-server-oss"),n}async function ip(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,n=await cR(e);return JSON.parse(n.toString()).version}function DS(t){return["bin",t.serverApplicationName]}async function Bt(t){return new Promise(e=>setTimeout(e,t))}var Tie=vV(),DV=AS(),SR=SV(),Rie=_V(),kie=["docker","oras","skopeo"];async function HS(t,e,n){var R,L,N,B,W,z;let{cliHost:r,wslCLIHost:o,output:i}=t,{shellServer:s,launchRootShellServer:a}=e,c="Launching Dev Containers helper.",l=i.start(c);if(_l)return i.stop(c,l),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let u=[r];r.type!=="local"&&u.push(await Vr(process.cwd(),t.loadNativeModule,i)),r.type!=="wsl"&&o&&u.push(o);let f=_R.randomUUID(),m={},d=await xR(u,V=>Mie(V,i)),p=d?ar.posix.join(((R=e.env)==null?void 0:R.TMPDIR)||"/tmp",`vscode-ssh-auth-${f}.sock`):void 0;d&&(m[p]=d,i.write(`ssh-agent: SSH_AUTH_SOCK in container (${p}) forwarded to ${d.cliHost.type} host (${d.unparsed}).`));let h=(L=e.env)!=null&&L.DISPLAY?void 0:Nie(u,V=>Hie(V,i)),g=-1,v;if(h)do v=ar.posix.join(((N=e.env)==null?void 0:N.TMPDIR)||"/tmp",".X11-unix",`X${++g}`);while(await Lie(s,v));let C=h?`:${g}`:void 0;h&&(await s.exec(`mkdir -p '${ar.posix.dirname(v)}'`),m[v]=h,i.write(`X11 forwarding: DISPLAY in container (${C}) forwarded to ${h.cliHost.type} host (${h.unparsed}).`));let w=await ej(e.shellServer,i),y=w?await xR(u,V=>tj(V,e.shellServer,w,i)):void 0;y&&(m[y.remoteGpgSocket]={name:"gpg-agent",unparsed:y.localGpgSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localGpgSocket}},i.write(`gpg-agent: Socket in container (${y.remoteGpgSocket}) forwarded to ${y.cliHost.type} host (${y.localGpgSocket}).`),y.localKeyboxdSocket&&y.remoteKeyboxdSocket&&(m[y.remoteKeyboxdSocket]={name:"keyboxd",unparsed:y.localKeyboxdSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localKeyboxdSocket}},i.write(`GPG keyboxd: Socket in container (${y.remoteKeyboxdSocket}) forwarded to ${y.cliHost.type} host (${y.localKeyboxdSocket}).`))),((n==null?void 0:n.getNewConfiguration("githubCLILoginWithToken"))??t.isGitHubCLILoginWithTokenEnabled)&&await Bie(e,u,i);let D=ar.posix.join(((B=e.env)==null?void 0:B.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${f}.sock`),x=ar.posix.join(((W=e.env)==null?void 0:W.TMPDIR)||"/tmp",`vscode-remote-containers-server-${f}.js`),A=ar.posix.join(((z=e.env)==null?void 0:z.TMPDIR)||"/tmp",`vscode-remote-containers-${f}.js`),k=((n==null?void 0:n.getNewConfiguration("dockerCredentialHelper"))??t.isDockerCredentialHelperEnabled)&&a&&await PV(s,kie)?ar.posix.join("/usr/local/bin",`docker-credential-${sR}${f}`):void 0,E=u.find(V=>V.type==="local"),_=bV(t,e,"Container",void 0,!1,!1,x,A,k,m,D,E),T=_.then(async V=>{await V.ready,await(y==null?void 0:y.importTasks())}),I=_.then(V=>V.mrpcExec),b=_.then(V=>V.mrpcPtyExec);return T.catch(console.error),t.onAdoptProcess(V=>Yie(e.shellServer,D,p,v,V).catch(console.error)),i.stop(c,l),{remoteContainersCLI:A,remoteEnv:{REMOTE_CONTAINERS_IPC:D,...p?{SSH_AUTH_SOCK:p}:void 0,...C?{DISPLAY:C}:void 0,...v?{REMOTE_CONTAINERS_DISPLAY_SOCK:v}:void 0},mrpcExec:I,mrpcPtyExec:b,ready:T,reconnect:()=>_.then(V=>V.reconnect())}}function Nie(t,e){for(let n of t){let r=e(n);if(r)return r}}async function xR(t,e){for(let n of t){let r=await e(n);if(r)return r}}async function PV(t,e){try{return await t.exec(`(${e.map(n=>`command -v '${n}'`).join(" || ")}) >/dev/null 2>&1`),!0}catch{return!1}}async function Lie(t,e){try{return await t.exec(`test -e ${e}`),!0}catch{return!1}}async function fp(t,e,n,r,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}=await bV(t,{remoteExec:e,platform:o},"Host",n,!0,r,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}}async function bV(t,e,n,r,o,i,s,a,c,l,u,f){let{cliHost:m,product:d,output:p}=t,{remoteExec:h,platform:g,nodeExecutable:v,launchRootShellServer:C}=e,w=a&&st(ar.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),y=st(ar.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),S=await Wt(h,p,void 0,g,n),D=o?await _f(S,await Dl(S)):void 0,x=(await S.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],A=!0;if(!v||!s){let I=S.path.join(x,".vscode-remote-containers");v||(v=await qie(t,S,I,x,d,i)),s||(s=S.path.join(I,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await ki(S,s)?A=!1:await S.exec(`mkdir -p '${S.path.dirname(s)}'`))}if(a){let I=`EOF-${a}`;await S.exec(`cat <<'${I}' >${a}
${await w}
${I}
`)}if(c&&C&&((m==null?void 0:m.type)!=="local"&&f&&await aR(f,p)||m&&await aR(m,p))){let I=(await S.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,b=$e(I);if(!(b!=null&&b.credsStore)||b.credsStore.startsWith(sR)){let R=await C(),L=`EOF-${c}`;await R.exec(`mkdir -p ${ar.posix.dirname(c)} && cat <<'${L}' >${c}
#!/bin/sh
${v} ${a} docker-credential-helper $@
${L}
`),await R.exec(`chmod +x ${c}`);let N=Pn(I,["credsStore"],ar.posix.basename(c).substring(18),{formattingOptions:{}}),B=xo(I,N);await S.exec(`mkdir -p ~/.docker && cat <<'${L}' >~/.docker/config.json
${B}
${L}
`)}}if(A){let I=`EOF-${s}`,b=`${s}_${Date.now()}`;await S.exec(`cat <<'${I}' >${b}
${await y}
${I}
mv ${b} ${s}`)}let F=()=>Aie(t,n,S,v,s,l,u,f),k=await F(),E;async function _(){let I=`${n}: Reconnecting Dev Container server`,b=p.start(I);await k.terminate().catch(()=>{}),S=await Wt(h,p,void 0,void 0,n),k=await F(),E&&await new Promise((R,L)=>{k.mrpc.setBaseEnv(E,N=>N?L(N):R())}),T(k),p.stop(I,b)}async function T(I){if(await I.reconnect,I===k)try{await _()}catch(b){p.write(`Reconnecting Dev Container server failed: ${(b==null?void 0:b.message)||String(b)}`)}}return T(k),{ready:k.ready,passwdUser:D,nodeExecutable:v,homeFolder:x,mrpcExec:Oie(()=>k.mrpc,n,r||x),mrpcPtyExec:Uie(()=>k.mrpc,n,r||x),mrpcExecToEnd:$ie(()=>k.mrpc,n,r||x),setBaseEnv:I=>new Promise((b,R)=>{E=I,k.mrpc.setBaseEnv(I,L=>L?R(L):b())}),connect:k.mrpc.connect,reconnect:_,terminate:()=>k.terminate()}}async function Aie(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=Object.keys(i||{}),f={...u.reduce((E,_)=>(E[_]="duplex",E),{}),rpc:"async",connected:"async",ready:"async"},m={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},d=n.process,p=`set -e ; echo -n ${ni} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${r}' '${o}' ; exit
`;d.stdin.write(p);let h,g=new Promise(E=>h=E),v=new IV.StringDecoder;d.stderr.on("data",E=>{let _=v.write(E).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(h){let T=_.indexOf(ni);T!==-1&&(h(),h=void 0,_=_.substr(0,T)+_.substr(T+1))}_&&l.write(ot(`${e} server: ${_}`))});let C=!1,w,y=new Promise(E=>w=E);d.exit.then(async({code:E,signal:_})=>{l.write(`${e} server terminated (code: ${E}, signal: ${_}).`),C?(l.write(`${e} server terminated. Reconnecting in 5 seconds...`),await Bt(5*1e3),w()):l.write(`${e} server terminated early. Not reconnecting.`)},E=>{l.write(`${e} server did not launch or terminated: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)});let S=(c==null?void 0:c.type)==="local",D={git:S,docker:S},x,A=new Promise(E=>x=E),F=Tie(m,f)({...u.reduce((E,_)=>{let T=i[_];return E[_]=Fie(t,T),E},{}),rpc:async(E,_)=>{try{let{args:T,stdin:I}=JSON.parse(E);if(T[0]==="git-credential-helper"){let b=await oj(a,c,D.git,T,I);D.git=b.preferLocalCLIHost,_(void 0,JSON.stringify(b.result))}else if(T[0]==="docker-credential-helper"){let b=await yj(a,c,D.docker,T,I,l);D.docker=b.preferLocalCLIHost,_(void 0,JSON.stringify(b.result))}}catch(T){console.error(T),_(T)}},connected:E=>{E()},ready:E=>{C=!0,x(),E()}});(0,US.default)(DV.source(d.stdout),F.createStream(),DV.sink(d.stdin)),await Promise.race([g,d.exit.then(({code:E,signal:_})=>{throw new Error(`${e} server terminated (code: ${E}, signal: ${_}).`)})]);function k(){return C=!1,d.terminate()}return{ready:A,mrpc:F,terminate:k,reconnect:y}}function Fie(t,e){let{sendTelemetryEvent:n,output:r}=t,o=!1;function i(s){if(!o&&s instanceof Error&&s.code==="ENOENT"&&(o=!0,r.event({type:"notification",message:DR.t("Could not connect to {0} on {1} host ({2}). Make sure the service is running.",e.name,e.cliHost.type,e.unparsed)}),n)){let a={serviceName:e.name,hostType:e.cliHost.type,hostPlatform:e.cliHost.platform},c=e.cliHost.authority;if(c){let l=c.indexOf("+");l!==-1&&(a.hostAuthority=c.substring(0,l))}n("serviceConnectionFailure",a)}}return()=>{let s=e.cliHost.connect(e.connectTo);return{sink:a=>{s.sink((c,l)=>{i(c),a(c,l)})},source:(a,c)=>{s.source(a,(l,u)=>{i(l),c(l,u)})}}}}function Oie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((d,p)=>{f.exec({cmd:o,args:i,cwd:s||n,env:a},(h,g)=>{h?p(h):d(g)})});return{stdin:SR.sink(f.stdin(m,d=>{d&&d.message!=="unexpected end of parent stream"&&console.error(d)})),stdout:SR.source(f.stdout(m)),stderr:SR.source(f.stderr(m)),exit:new Promise((d,p)=>{f.exit(m,(h,g)=>{var v;c.stop(l,u),h?((v=h.message)!=null&&v.endsWith("ENOENT")&&!h.code&&(h.code="ENOENT"),p(h)):d(g)})}),terminate:async()=>new Promise((d,p)=>{f.terminate(m,h=>{h?p(h):d()})})}}}function Uie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((g,v)=>{var C,w;f.ptyExec({cmd:o,args:i,cwd:s||n,env:a,rows:(C=c.dimensions)==null?void 0:C.rows,cols:(w=c.dimensions)==null?void 0:w.columns},(y,S)=>{y?v(y):g(S)})}),d=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>f.ptyResize(m,g.columns,g.rows))],p=Rie();(0,US.default)(p,f.ptyIn(m,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let h=new Fs;return(0,US.default)(f.ptyOut(m),g=>{g(null,function v(C,w){if(C!==!0){if(C)throw C;h.fire(w),g(null,v)}})}),{write:g=>p.push(g),onData:h.event,resize:(g,v)=>f.ptyResize(m,g,v),exit:new Promise((g,v)=>{f.ptyExit(m,(C,w)=>{d.forEach(y=>y==null?void 0:y.dispose()),c.stop(l,u),C?v(C):g(w)})}),terminate:async()=>new Promise((g,v)=>{f.ptyTerminate(m,C=>{C?v(C):g()})})}}}function $ie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t();return new Promise((m,d)=>{f.execToEnd({cmd:o,args:i,cwd:s||n,env:a},(p,h)=>{if(c.stop(l,u),p||!h)d({stdin:new xl.Writable,stdout:xl.Readable.from([]),stderr:xl.Readable.from([]),exit:Promise.reject(p),terminate:async()=>{}});else{let g=xl.Readable.from([Buffer.from(h.stdout.data)]),v=new Promise(y=>g.on("end",y)),C=xl.Readable.from([Buffer.from(h.stderr.data)]),w=new Promise(y=>C.on("end",y));m({stdin:new xl.Writable,stdout:g,stderr:C,exit:Promise.all([v,w]).then(()=>({code:h.code,signal:h.signal})),terminate:async()=>{}})}})})}}var Iv="\\\\.\\pipe\\openssh-ssh-agent";async function IR(t){return t.platform==="win32"&&t.isFile(Iv)}async function Mie(t,e){let n=t.env.SSH_AUTH_SOCK;if(n)return{name:"ssh-agent",unparsed:n,cliHost:t,connectTo:{socketPath:n}};if(e.write(`ssh-agent: SSH_AUTH_SOCK not set on ${t.type} host.`),await IR(t))return{name:"ssh-agent",unparsed:Iv,cliHost:t,connectTo:{socketPath:Iv}}}function Hie(t,e){let n=t.env.DISPLAY,r=n==null?void 0:n.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:o,display:i}=r.groups,s=DR.t("X11 display");return!o||o==="localhost/unix"?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`/tmp/.X11-unix/X${i}`}}:o.startsWith("/")?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`${o}:${i}`}}:{name:s,unparsed:n,cliHost:t,connectTo:{host:o,port:6e3+parseInt(i,10)}}}n?e.write(`X11 forwarding: DISPLAY value on ${t.type} host not supported (${n}).`):e.write(`X11 forwarding: DISPLAY not set on ${t.type} host.`)}async function PR(t){let e=t.env.WAYLAND_DISPLAY,n=t.env.XDG_RUNTIME_DIR,r=e&&t.path.isAbsolute(e)?e:e&&n&&t.path.join(n,e),o=n&&t.path.join(n,"wayland-0"),i=r||o;if(i&&await t.isSocket(i))return i}async function TV(t){let e=_R.randomUUID();return ar.posix.join((t==null?void 0:t.TMPDIR)||"/tmp",`vscode-wayland-${e}.sock`)}async function RV(t,e){let{shellServer:n,remoteWaylandSocket:r}=t;if(!r||e.WAYLAND_DISPLAY)return{};let o=e.XDG_RUNTIME_DIR;o||(o=(await n.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let i=ar.posix.basename(r);return await n.exec(`test -e ${o}/${i} || ln -sf ${r} ${o}/${i}`),o===e.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:i}:{XDG_RUNTIME_DIR:o,WAYLAND_DISPLAY:i}}async function Bie(t,e,n){let r="Checking for GitHub CLI",o=n.start(r);await PV(t.shellServer,["gh"])&&(async()=>{let s="Setting up GitHub CLI",a=n.start(s);try{if(!await jie(t.remoteExec,n)){let l=await xR(e,u=>Wie(u.exec,n))||void 0;l&&await Vie(t.remoteExec,l,n)}}catch(c){n.write(`Error setting up GitHub CLI: ${(c==null?void 0:c.stack)||(c==null?void 0:c.message)||String(c)}`)}finally{n.stop(s,a)}})(),n.stop(r,o)}async function Wie(t,e){try{let{stdout:n}=await ee({exec:t,cmd:"gh",args:["auth","token"],output:e});return n.toString().trim()}catch{return}}async function jie(t,e){try{return await ee({exec:t,cmd:"gh",args:["auth","status"],output:e}),!0}catch{return!1}}async function Vie(t,e,n){try{await ee({exec:t,cmd:"gh",args:["auth","login","--with-token"],stdin:Buffer.from(e),output:n})}catch{}}var ap=new Set;async function Yie(t,e,n,r,o){let i=await o.processId;if(i&&i>0){let s=await uj(t,i),a=s.REMOTE_CONTAINERS_IPC;a&&a!==e&&!ap.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(ap.add(a),await t.exec(`rm '${a}' && ln -s '${e}' '${a}'`));let c=s.SSH_AUTH_SOCK;c&&n&&c!==n&&!ap.has(c)&&c.indexOf("vscode-ssh-auth")!==-1&&(ap.add(c),await t.exec(`rm '${c}' && ln -s '${n}' '${c}'`));let l=s.REMOTE_CONTAINERS_DISPLAY_SOCK;l&&r&&l!==r&&!ap.has(l)&&(ap.add(l),await t.exec(`rm '${l}' && ln -s '${r}' '${l}'`))}}async function qie(t,e,n,r,o,i){let s=o.commit||await ip(o.quality),a=o.commit?o.quality||"insider":"stable",c=ar.posix,l=`${a.substring(0,1).toUpperCase()}${a.substring(1)}${a==="insider"?"s":""}-${s}`,u=D=>ki(e,D),f=c.join(lp(c,r,o),"cli","servers",l,"server");if(await OS(f,u))return cp(f);let m=c.join(bR(c,r,o),"cli","servers",l,"server");if(await OS(m,u))return cp(m);let d=c.join(lp(c,r,o),"bin",s);if(await OS(d,u))return cp(d);let p=c.join(n,"bin",s);if(await OS(p,u))return cp(p);let{localCacheFolder:h,output:g,alternateDownload:v}=t,C;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")C=(await e.exec("uname -m")).stdout.trim()==="arm64"?$S.arm64:$S.x64;else{let D=await TR(e);C=BS(D,!1)}let y={localCacheFolder:h,build:C,commit:s,quality:a,web:!1,output:g,alternateDownload:v,legacy:!1},S=dp(y);if(await yr(S)||await bv(y),C.id==="darwin")await Pv({output:g},e,S,p,i);else{let D=[];await MS.t({file:S,filter:A=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(A),onentry:A=>{new MS.WriteEntry.Tar(A).on("data",k=>D.push(k))}});let x=Buffer.concat(D);await Pv({output:g},e,x,p,i,!1)}return cp(p)}async function OS(t,e){let n=cp(t),r=ar.posix.join(t,"node_modules","node-pty","package.json");return await e(n)&&await e(r)}function cp(t){return ar.posix.join(t,"node")}var Tv=Y(require("net"));var Rv=AS(),RR=t=>{if("port"in t)return Rv.duplex(Tv.connect(t.port,t.host));let e=t.socketPath;if(process.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return Rv.duplex(Tv.connect(e));let n=new Tv.Socket;return Kie(n,e)};function Gie(t){let e=[];return t.split("-").map(n=>{let r=n.match(/.{2}/g);r!==null&&r.reverse().map(o=>{e.push(parseInt(o,16))})}),Buffer.from(e)}function zie(t,e,n){return e||n===void 0?{headerSize:t,err:e}:t===0?{headerSize:t,data:n}:n.length>t?(n=n.slice(t,n.length),t=0,{headerSize:t,data:n}):(t=t-n.length,{headerSize:t})}function Kie(t,e){let n=0,r=[],o=[],i,s=u=>{u instanceof Error&&console.error(u),t.destroy();for(let f of r)f.cb(u,void 0);r=[];for(let f of o)f(u,(m,d)=>{});o=[]};function a(u,f){i.source(u,function(m,d){let p=zie(n,m,d);n=p.headerSize,p.err||p.data?f(p.err||null,p.data):a(u,f)})}return(async()=>{let u=await st(e),m=u.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),d,p;if(m!==null){let h=m[1],g=m[3];d=parseInt(h,10);let v=Gie(g),C=Buffer.alloc(12);C.writeUInt32LE(process.pid,0),p=Buffer.concat([v,C]),n=16+3*4}else{let h=u.indexOf(10);d=parseInt(u.slice(0,h).toString(),10),p=u.slice(h+1),n=0}t.on("error",h=>{s(h)}),t.connect(d,"127.0.0.1",()=>{t.write(p,h=>{if(!h){i=Rv.duplex(t);for(let g of r)a(g.abort,g.cb);r=[];for(let g of o)i.sink(g);o=[]}})})})().catch(u=>{s(u)}),{source:function(u,f){i!==void 0?a(u,f):r.push({abort:u,cb:f})},sink:function(u){i!==void 0?i.sink(u):o.push(u)}}}function kV(t,e,n){return r=>{let o=(async()=>{let i="port"in r?`{ host: '${r.host}', port: ${r.port} }`:`{ path: '${r.socketPath}' }`,s=await e({cmd:t,args:["-e",`// Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host.
const net = require('net');
const fs = require('fs');
process.stdin.pause();
const client = net.createConnection(${i}, () => {
	console.error('Connection established');
	client.pipe(process.stdout);
	process.stdin.pipe(client);
});
client.on('close', function (hadError) {
	console.error(hadError ? 'Remote close with error' : 'Remote close');
	process.exit(hadError ? 1 : 0);
});
client.on('error', function (err) {
	process.stderr.write(err && (err.stack || err.message) || String(err));
});
process.stdin.on('close', function (hadError) {
	console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
	process.exit(hadError ? 1 : 0);
});
process.on('uncaughtException', function (err) {
	fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
});
`],output:sn(n,1)});return s.exit.then(({code:a,signal:c})=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with code ${a} and signal ${c}.`,1)},a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with error: ${a&&a.message||String(a)}`)}),s.stderr.on("data",a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host stderr: ${a.toString("utf8")}`,1)}),{sink:Rv.sink(s.stdin),source:Rv.source(s.stdout)}})();return{sink:i=>{o.then(s=>s.sink(i),s=>i(s,()=>{})).catch(s=>n.write(`Connection forwarding to sink error: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||String(s)}`))},source:(i,s)=>{o.then(a=>a.source(i,s),a=>s(a)).catch(a=>n.write(`Connection forwarding to source error: ${(a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a)}`))}}}}var WS=!1;function Df(t,e,n){return WS?function(o){return Jie(t(o),`${e} ${JSON.stringify(o)}`,n)}:t}function Jie(t,e,n){return WS?{source:NV(t.source,`${e} Source`,n),sink:Xie(t.sink,`${e} Sink`,n)}:t}function NV(t,e,n){return WS?function(o,i){n.write(`${e} end in (${typeof o}${o&&typeof o=="object"?`: ${Object.keys(o)}`:""}): ${o&&typeof o=="object"&&o.stack||o}`),t(o,function(a,c){n.write(`${e} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),n.write(`${e} data: ${c==null?void 0:c.toString("hex")}`),i(a,c)})}:t}function Xie(t,e,n){return WS?function(o){t(NV(o,e,n))}:t}var kR=Y(Or()),FV=/^\\\\wsl(\.localhost|\$)?\\/;function Sr(t){return FV.test(t.toLowerCase())}function If(t){let e=t.toLowerCase(),n=FV.exec(e);if(!n)return"";let r=e.indexOf("\\",n[0].length);return t.substring(n[0].length,r)}async function kv(t){let{stdout:e}=await ee({exec:cs(void 0),cmd:"wsl",args:["-l","-v"],output:t}),n=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(n)||[])[1]}async function Il(t,e,n){let{stdout:r}=await ee({exec:cs(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:n}),o=r.toString().trim();if(o.startsWith("/mnt/wsl/")&&e.match(/^[a-zA-Z]:/)){let i=`/mnt/${e[0].toLowerCase()}${e.substring(2).replace(/\\/g,"/")}`;try{return await ee({exec:cs(void 0),cmd:"wsl",args:["-d",t,"-e","test","-e",i],output:n}),i}catch(s){(s==null?void 0:s.code)!==1&&n.write(`Error checking WSL path: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||s}`)}}return o}async function Zie(t,e){let{stdout:n}=await ee({exec:cs(void 0),cmd:"wsl",args:["-d",t,"-e","/bin/sh","-c","echo ~"],output:e});return n.toString().trim()}async function OV(t,e,n){let{stdout:r}=await ee({exec:t.exec,cmd:"wslpath",args:["-w",e],output:n});return r.toString().trim()}async function mp(t,e){let n=If(t),r=await Il(n,t,e);return ye.parse(`vscode-remote://wsl+${n}${r}`)}function pp(t){if(t.scheme==="vscode-remote"){let e=jS(t.authority);if(e){let n=t.path;return yv(n)&&(n=LV.posix.dirname(n)),{wslDistro:e,wslPath:n}}}}function jS(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function VS(t,e,n,r,o,i,s,a){var p;let{distro:c,cwd:l}=await NR(t,e,s);AV.ok(!c.startsWith("-"),kR.t("Distro must not start with a dash: {0}",c));let u=Pf("wsl",["-d",c,"-e"],l),f=await fp({extensionPath:n,localCacheFolder:r,package:await sr(n),product:o,loadNativeModule:i,output:s,alternateDownload:a},u,l,!1),m=await bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=f.passwdUser)==null?void 0:p.shell)||"/bin/sh",remoteExec:f.exec});delete m.WSL_INTEROP,await f.setBaseEnv(m);let d=no("wsl",l,m,f.exec,f.ptyExec,Df(f.connect,"WSL",s),f.nodeExecutable,s);return d.toCommonURI=async h=>{try{return ye.file((await ee({exec:f.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},d.reconnect=()=>f.reconnect(),d.terminate=()=>f.terminate(),d}async function NR(t,{defaultDistro:e},n){let r,o;return typeof t=="object"?(r=t.wslDistro,o=t.wslPath):t&&Sr(t)?(r=If(t),o=await Il(r,t,n)):(r=e||await kv(n)||(()=>{throw new Se({description:kR.t("No default WSL distro found.")})})(),o=t?await Il(r,t,n):await Zie(r,n)),{distro:r,cwd:o}}function Tf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function UV(t,e,n,r,o){try{return(await Vn(e,{posix:ee({exec:t,cmd:"cat",args:[r],output:o}),win32:ee({exec:t,cmd:n,args:["-e",`require('fs').createReadStream('${r.replace(/\\/g,"\\\\")}').pipe(process.stdout)`],output:o})})).stdout}catch(i){let s=new Error(`Could not read file: ${r}`);throw s.originalError=i,s.code="ENOENT",s}}async function $V(t,e,n,r,o,i){await Vn(e,{posix:ee({exec:t,cmd:"dd",args:[`of=${r}`],stdin:o,output:i}),win32:ee({exec:t,cmd:n,args:["-e",`process.stdin.pipe(require('fs').createWriteStream('${r.replace(/\\/g,"\\\\")}'))`],stdin:o,output:i})})}async function YS(t,e,n,r,o){await Vn(e,{posix:()=>ee({exec:t,cmd:"mv",args:["-n",n,r],output:o}),win32:()=>ee({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Move-Item -Path '${n}' -Destination '${r}'`],env:ro(),output:o})})()}async function qS(t,e,n,r,o){let{recursive:i,force:s}=r;await Vn(e,{posix:()=>ee({exec:t,cmd:"rm",args:[i&&"-r",s&&"-f",n].filter(Boolean),output:o}),win32:()=>ee({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Remove-Item${i?" -Recurse":""}${s?" -Force":""} '${n}'`],env:ro(),output:o})})()}async function GS(t,e,n,r){await Vn(e,{posix:()=>ee({exec:t,cmd:"mkdir",args:["-p",n],output:r}),win32:()=>ee({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`New-Item -ItemType Directory '${n}'`],env:ro(),output:r})})()}async function MV(t,e,n,r){return(await Vn(e,{posix:()=>ee({exec:t,cmd:"ls",args:["-a",n],output:r}),win32:()=>ee({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`(Get-ChildItem '${n}').Name`],env:ro(),output:r})})()).stdout.toString().trim().split(/\r?\n/).filter(i=>i!=="."&&i!=="..")}var AR=Y(require("path")),JS=Y(require("os")),XS=Y(require("crypto"));var HV=Y(require("os")),zS=Y(require("assert")),KS=Y(Or());async function BV(t,e,n,r,o,i,s,a,c,l){var v;let u=t.substr(6),f=u.indexOf(":"),m=[(l==null?void 0:l.settings.executablePath)||"ssh"];if(l!=null&&l.settings.executableArgs&&m.push(...l.settings.executableArgs),l!=null&&l.settings.configFilePath&&m.push("-F",Qie(l==null?void 0:l.settings.configFilePath)),f!==-1){let C=u.substr(f+1);zS.ok(!C.startsWith("-"),KS.t("Port number must not start with a dash: {0}",C));let w=u.substr(0,f);zS.ok(!w.startsWith("-"),KS.t("Hostname must not start with a dash: {0}",w)),m.push("-p",C,w)}else zS.ok(!u.startsWith("-"),KS.t("Hostname must not start with a dash: {0}",u)),m.push(u);let d=Pf(m[0],m.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),p=await fp({extensionPath:r,localCacheFolder:o,package:await sr(r),product:i,loadNativeModule:s,output:a,alternateDownload:c},d,e,!1),h=await bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=p.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:p.exec});await p.setBaseEnv(h);let g=no("remote",e||p.homeFolder,h,p.exec,p.ptyExec,p.connect,p.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>p.reconnect(),g.terminate=()=>p.terminate(),g}function Qie(t){return t.replace(/^~($|\/|\\)/,`${HV.homedir()}$1`)}function Nv(t,e){let n=ese(t);if(n)return ye.parse(`vscode-remote://${LR(n)}${e}`)}function LR(t){let e=t.hostName;if(t.user||t.hostName.toLowerCase()!==t.hostName||t.port||t.hostName.match(/[\/\\\+]/)){let n=JSON.stringify(t);e=Buffer.from(n,"utf8").toString("hex")}return`ssh-remote+${e}`}function ese(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6);return WV(e)}function WV(t){let e=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(e){let[,n,r,o]=e;return{hostName:r,user:n,port:o?parseInt(o,10):void 0}}return{hostName:t}}function Pl(t){var e;return!!(t&&"host"in t&&((e=t.host)!=null&&e.startsWith("ssh://")))}function bl(t){return!!(t!=null&&t.startsWith("ssh-remote+"))}function Lv(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let n=e[1];try{let r=JSON.parse(Buffer.from(n,"hex").toString("utf8"));if(r&&r.hostName)return r}catch{}return WV(n)}var tse=!1;async function FR(t,e,n,r,o,i,s,a,c,l){return t!=null&&t.startsWith("ssh://")&&!(l!=null&&l.localDocker)?BV(t,e,r,o,i,s,n,a,c,l):typeof e=="object"||r.executeInWSL==="forWSLPath"&&e&&Sr(e)||r.executeInWSL==="always"?VS(e,r,o,i,s,n,a,c):tse?nse(e||process.cwd(),o,i,s,n,a,c):Vr(e||process.cwd(),n,a)}async function Vr(t,e,n=Fe){let r=cs(t),o=await VV(t,e);return jV(t,r,o,n?Df(RR,"Local",n):RR,e,n)}async function nse(t,e,n,r,o,i,s){let a=cs(t),c=await fp({extensionPath:e,localCacheFolder:n,package:await sr(e),product:r,loadNativeModule:o,output:i,alternateDownload:s},a,t,!0,process.platform);return jV(t,c.exec,c.ptyExec,Df(c.connect,"Local Test",i),o,i)}function no(t,e,n,r,o,i,s,a){let c,l,u;return{type:t,platform:"linux",exec:r,ptyExec:o,cwd:e,env:n,path:AR.posix,async homedir(){if(typeof l>"u"){let m=(await ee({exec:r,cmd:"id",args:["-u"],output:Fe})).stdout.toString().trim(),d=await Wt(r,Fe,void 0,"linux","Host"),p=await _f(d,m);l=this.env.HOME||(p==null?void 0:p.home)||"/"}return l},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async f=>{try{return await ee({exec:r,cmd:"test",args:["-f",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isFolder:async f=>{try{return await ee({exec:r,cmd:"test",args:["-d",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isSocket:async f=>{try{return await ee({exec:r,cmd:"test",args:["-S",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},readFile:async f=>{try{return(await ee({exec:r,cmd:"cat",args:[f],output:Fe})).stdout}catch(m){let d=new Error(`Could not read file: ${f}`);throw d.originalError=m,d.code="ENOENT",d}},writeFile:async(f,m)=>{await ee({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${f}'`],stdin:m,output:Fe})},rename:async(f,m)=>{await ee({exec:r,cmd:"mv",args:[f,m],output:Fe})},rm:async(f,{recursive:m,force:d}={})=>{await ee({exec:r,cmd:"rm",args:[...m?["-r"]:[],...d?["-f"]:[],f],output:Fe})},mkdirp:async f=>{await ee({exec:r,cmd:"mkdir",args:["-p",f],output:Fe})},readDir:async f=>(await ee({exec:r,cmd:"ls",args:["-a",f],output:Fe})).stdout.toString().trim().split(`
`).filter(m=>m!=="."&&m!==".."),readDirWithTypes:async f=>{let m={f:1,"*":1,"/":2,"@":64};return(await ee({exec:r,cmd:"ls",args:["-aF",f],output:Fe})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,p])=>[d,m[p]||0])},getUsername:async()=>(c===void 0&&(c=(await ee({exec:r,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()),c),toCommonURI:()=>Promise.resolve(void 0),connect:i,locateCertificatesFile:function(){return u||(u=ZS(this,void 0,a))},nodeExecutable:s}}function jV(t,e,n,r,o,i){let s;return{type:"local",platform:process.platform,exec:e,ptyExec:n,cwd:t,env:process.env,path:AR,homedir:async()=>JS.homedir(),tmpdir:async()=>JS.tmpdir(),isFile:yr,isFolder:zO,isSocket:KO,readFile:st,writeFile:Dg,rename:Jc,rm:Zc,mkdirp:async a=>{await es(a)},readDir:Xc,getUsername:QS,toCommonURI:async a=>ye.file(a),connect:r,locateCertificatesFile:function(){return s||(s=ZS(this,o,i))}}}var rse=["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt","/etc/ssl/ca-bundle.pem"];async function ZS(t,e,n){if(t.env.NODE_EXTRA_CA_CERTS&&await t.isFile(t.env.NODE_EXTRA_CA_CERTS))return t.env.NODE_EXTRA_CA_CERTS;if(t.platform==="linux"){for(let c of rse)if(await t.isFile(c))return c;return}if(t.type!=="local")return;let r=await(e==null?void 0:e("@vscode/proxy-agent"));if(!(r!=null&&r.loadSystemCertificates))return;let o=await r.loadSystemCertificates({log:{trace(c,...l){n.write(c,1)},debug(c,...l){n.write(c,2)},info(c,...l){n.write(c,3)},warn(c,...l){n.write(c,4)},error(c,...l){n.write(typeof c=="string"?c:String(c),5)}}});if(!o.length)return;let i=Buffer.from(o.join(t.platform==="win32"?`\r
`:`
`)),s=XS.createHash("sha256").update(i).digest("hex"),a=t.path.join(await Av(t),`certificates-${s}.pem`);if(!await t.isFile(a)){await t.mkdirp(t.path.dirname(a));let c=`${a}-${XS.randomUUID()}`;await t.writeFile(c,i),await t.rename(c,a)}return a}var ose=ex.join(__dirname,"..","..","node_modules",".bin","ts-node"),_l=ex.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function ee(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,print:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((u,f)=>{let m=[],d=[],p=c==="continuous"?new Fv.StringDecoder:void 0;l.stdout.on("data",v=>{m.push(v),c==="continuous"&&a.write(p.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let h=c==="continuous"?new Fv.StringDecoder:void 0;l.stderr.on("data",v=>{d.push(v),c==="continuous"&&a.write(ot(h.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];l.exit.then(({code:v})=>{try{g.forEach(y=>y.dispose());let C=Buffer.concat(m),w=Buffer.concat(d);(c===!0||v&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(ot(w.toString()))),c&&v&&a.write(`Exit code ${v}`),v?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:C,stderr:w,code:v}):u({stdout:C,stderr:w})}catch(C){f(C)}},v=>{c&&(v!=null&&v.message)&&a.write(ot(v==null?void 0:v.message)),f(v)}),s instanceof Buffer?(l.stdin.write(s,v=>{v&&f(v)}),l.stdin.end()):s instanceof YV.Readable?s.pipe(l.stdin):typeof s=="function"&&g.push(s(v=>l.stdin.write(v)))})}async function Ni(t){let{ptyExec:e,cmd:n,args:r,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:s});return new Promise((u,f)=>{let m="",d=[c&&c(p=>l.write(p))];l.onData(p=>{m+=p,s.raw(p),a&&a.exec(m)&&u({cmdOutput:m})}),l.exit.then(({code:p,signal:h})=>{try{d.forEach(g=>g==null?void 0:g.dispose()),p||h?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,cmdOutput:m,code:p,signal:h}):u({cmdOutput:m})}catch(g){f(g)}},p=>{p!=null&&p.message&&s.write(ot(p==null?void 0:p.message)),d.forEach(h=>h==null?void 0:h.dispose()),f(p)})})}var ise={SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGEMT:void 0,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGSTKFLT:16,SIGCHLD:17,SIGCLD:void 0,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGINFO:void 0,SIGLOST:void 0,SIGSYS:31,SIGUNUSED:31};function cs(t){return async function(e){let{cmd:n,args:r,output:o}=e,i=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await ti(n,a,c),u=hp.spawn(l,r,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,m)=>{u.once("error",d=>{o.stop(i,s),m(d)}),u.once("close",(d,p)=>{o.stop(i,s),f({code:d,signal:p})})}),async terminate(){u.kill("SIGKILL")}}}}async function VV(t,e){let n=await e("node-pty");if(!n)throw new Error("Missing node-pty");return async function(r){var h,g;let{cmd:o,args:i,output:s}=r,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=r.cwd||t,f=r.env?{...process.env,...r.env}:process.env,m=await ti(o,u,f),d=n.spawn(m,i||[],{cwd:u,env:f,cols:(h=s.dimensions)==null?void 0:h.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),p=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>d.resize(v.columns,v.rows))];return{onData:d.onData.bind(d),write:d.write.bind(d),resize:d.resize.bind(d),exit:new Promise(v=>{d.onExit(({exitCode:C,signal:w})=>{if(p.forEach(y=>y==null?void 0:y.dispose()),s.stop(a,c),v({code:C,signal:w}),process.platform==="win32")try{d.kill()}catch{}})}),async terminate(){d.kill("SIGKILL")}}}}function GV(t){let e=async function(n){let r=await t(n),o=new Fs;if(r.stdout){let i=new Fv.StringDecoder;r.stdout.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stdout.on("close",()=>{let s=i.end();s&&o.fire(s)})}if(r.stderr){let i=new Fv.StringDecoder;r.stderr.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stderr.on("close",()=>{let s=i.end();s&&o.fire(s)})}return{onData:o.event,write:r.stdin.write.bind(r.stdin),resize:()=>{},exit:r.exit.then(({code:i,signal:s})=>({code:typeof i=="number"?i:void 0,signal:typeof s=="string"?ise[s]:void 0})),terminate:r.terminate.bind(r)}};return e.isTTY=!1,e}function Pf(t,e,n,r){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,l=o.cwd||n,u=l?`cd '${l}' && `:"",f=Object.keys(i||{}).map(y=>i[y]===void 0?"":`${y}='${i[y]}' `).join(""),m=(a||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${f}${s}${m}`,p=d!==s?["/bin/sh","-c",d]:[d],h=[...e,...p],g=`Run: ${t} ${h.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),C=await ti(t,process.cwd(),process.env),w=hp.spawn(C,h,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:w.stdin,stdout:w.stdout,stderr:w.stderr,exit:new Promise((y,S)=>{w.once("error",D=>{c.stop(g,v),S(D)}),w.once("close",(D,x)=>{c.stop(g,v),y({code:D,signal:x})})}),async terminate(){w.kill("SIGKILL")}}}}function tx(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(e)return e[1].split(".").map(n=>parseInt(n,10))}function nx(t,e){for(let n=0,r=Math.max(t.length,e.length);n<r;n++){let o=t[n]||0,i=e[n]||0;if(o!==i)return o<i}return!1}var zV=_l?(t,e,n)=>hp.spawn(ose,[t,...e||[]],{...n,windowsHide:!0}):hp.fork;async function Rf(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules.asar/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules/${t}`)}catch{}}function KV(t){let{output:e}=t,n=[];return{output:sn({...e,get dimensions(){return e.dimensions},event:o=>n?n.push(o):e.event(o)}),flush:()=>{n&&(n.forEach(o=>e.event(o)),n=void 0)}}}function JV(t,e,n){return sn({...t,get dimensions(){return t.dimensions},event:o=>{o.channel===e&&t.event(o),n.event(o)}})}function Vn(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function ki(t,e){return Vn(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var OR;async function QS(){return OR===void 0&&(OR=(async()=>{try{return qV.userInfo().username}catch(t){if(process.platform!=="linux")throw t;return(await ee({exec:cs(void 0),cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()}})()),OR}function XV(t){let e=t.replace(/['\\]/g,"\\$&"),n=Tf(t).replaceAll("'","\\'");return` (command -v getent >/dev/null 2>&1 && getent passwd '${e}' || grep -E '^${n}|^[^:]*:[^:]*:${n}:' /etc/passwd || true)`}async function ZV(t,e,n,r,o,i){let s="Extracting tarball",a=i.start(s),c=`${r}_${Date.now()}`;try{await GS(t,e,c,i);let l=n instanceof Buffer?n:await(async()=>{let u=[];for await(let f of n)u.push(f);return Buffer.concat(u)})();await ee({exec:t,cmd:"tar",args:["--no-same-owner",`-x${o?"z":""}`,"--strip-components","1","-C",c],stdin:l,output:i,print:"continuous"}),await YS(t,e,c,r,i)}catch(l){try{await qS(t,e,c,{recursive:!0,force:!0},i)}catch{}throw l}finally{i.stop(s,a)}}async function Av(t){return t.path.join(await t.tmpdir(),t.platform==="linux"?`vsch-${await t.getUsername()}`:"vsch")}async function rx(t,e){let{output:n}=t,r=await Wt(e.remoteExec,n);try{for(let i=0;i<3;i++){let s=Date.now();await r.exec("echo ping!"),n.write(`Roundtrip ${i+1} to container took ${Date.now()-s} ms`)}}finally{r.process.terminate()}let o=await Wt(t.cliHost.exec,n);try{for(let i=0;i<3;i++){let s=Date.now();await o.exec("echo ping!"),n.write(`Roundtrip ${i+1} to host took ${Date.now()-s} ms`)}}finally{o.process.terminate()}}function ro(t){return t?{...t,PSModulePath:void 0}:{PSModulePath:void 0}}var ni="\u2404";async function Wt(t,e,n,r="linux",o="Container"){let i=typeof t=="function",s=r==="win32",a=n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},c=i?await t({env:s?ro(a):a,cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!i){let d=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${ni}; /bin/sh'
`;c.stdin.write(d),await new Promise(h=>{let g="",v=new UR.StringDecoder;c.stdout.on("data",function C(w){g+=v.write(w),g.includes(d)&&(c.stdout.off("data",C),h())})})}let l=ase(c),u;async function f(d,p){let h=u=(async()=>{try{await u}catch{}return m(Vn(r,d),p)})();try{return await Promise.race([h,l.unexpectedExit])}finally{l.disposeStdioListeners(),u===h&&(u=void 0)}}async function m(d,p){let h=`Run in ${o.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,g;if((p==null?void 0:p.logOutput)!=="silent"&&(g=e.start(h,p==null?void 0:p.logLevel)),c.stdin.destroyed){e.write("Stdin closed!");let{code:A,signal:F}=await c.exit;return Promise.reject({message:`Shell server terminated (code: ${A}, signal: ${F})`,code:A,signal:F})}r==="win32"?c.stdin.write(`[Console]::Write('${ni}'); ( ${d} ); [Console]::Write("${ni}$LastExitCode ${ni}"); [Console]::Error.Write('${ni}')
`):c.stdin.write(`echo -n ${ni}; ( ${d} ); echo -n ${ni}$?${ni}; echo -n ${ni} >&2
`);let[v,C]=QV(c.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(A,F,k)=>{F===1&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{}),w=QV(c.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(A,F,k)=>{F===0&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await v,c.stdin.write(p==null?void 0:p.stdin));let[y,S]=await C,[D]=await w,x=parseInt(S,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(y,p==null?void 0:p.logLevel),e.write(D,p==null?void 0:p.logLevel),x&&e.write(`Exit code ${x}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&x&&e.write(`Exit code ${x}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(h,g,p==null?void 0:p.logLevel),x?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${d}`,code:x,stdout:y,stderr:D}):{stdout:y,stderr:D}}return{exec:f,process:c,platform:r,path:Vn(r,sse)}}function QV(t,e,n){let r=e.map(()=>{let u;return{promise:new Promise((m,d)=>u={resolve:m,reject:d}),...u}}),o=new UR.StringDecoder("utf8"),i=[],s=0,a=[];function c(u){let f=o.write(u);l(f)}function l(u){let f=u.indexOf(ni);if(f!==-1){let m=u.substr(0,f);i.push(m),n(m,s,a.length),a.push(i.join("")),i.length=0,a.length===e[s]&&(r[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else i.push(u),n(u,s,a.length)}return t.on("data",c),r.map(u=>u.promise)}function ase(t){let e,n=new Promise((c,l)=>e=l),r=[],o=[],i=c=>r.push(c),s=c=>o.push(c);return t.stdout.on("data",i),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(r).toString()}
${Buffer.concat(o).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{t.stdout.off("data",i),t.stderr.off("data",s),r.length=0,o.length=0}}}var vY=Y(require("net")),wY=Y(gY());async function yY({forwardedPorts:t,output:e,getLogLevel:n},r,o,i){e.write(`Port forwarding for container port ${o} starts listening on local port.`,2);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let l=!0,u=new Set,f=vY.createServer({pauseOnConnect:!0},m=>{let d=m.remotePort,p=f.address().port;e.write(`Port forwarding connection from ${d} > ${p} > ${o} in the container.`),n()===1&&(async()=>{let h=await(0,wY.default)("port",d);e.write(`Port forwarding process for ${d} > ${p} > ${o} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),wse(e,r,[r.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(h=>{let g;h.exit.then(({code:v,signal:C})=>{g||(u.delete(m),m.end()),e.write(`Port forwarding ${d} > ${p} > ${o} terminated${g?` by extension (${g})`:""} with code ${v} and signal ${C}.`)},v=>{u.delete(m),m.end(),e.write(`Port forwarding ${d} > ${p} > ${o} terminated with error: ${v&&v.message||String(v)}`)}),h.stderr.on("data",v=>{e.write(`Port forwarding ${d} > ${p} > ${o} stderr: ${v.toString("utf8")}`,2)}),m.on("close",v=>{e.write(`Port forwarding ${d} > ${p} > ${o}: Local close${v?" with error":""}`,2),u.delete(m),g="closed",h.stdin.end(),setTimeout(()=>{g="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(m),m.pipe(h.stdin),u.add(m)}).catch(console.error)});f.on("listening",()=>{var d,p;let m={targetPort:o,server:f,connections:u};f.on("close",()=>{t.delete(m)}),t.add(m),e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o}`),l?(l=!1,a(f)):e.write(`Port forwarding local port ${(p=f.address())==null?void 0:p.port} to container port ${o} failed before listening`)}),f.on("error",m=>{var d;if(m&&(m.code==="EADDRINUSE"||m.code==="EACCES")){f.listen(0,"127.0.0.1");return}l?(l=!1,c(m)):e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o} error: ${(m==null?void 0:m.message)||String(m)}`)}),f.on("close",()=>{var m;l?(l=!1,c(new Error("Closed"))):e.write(`Port forwarding local port ${(m=f.address())==null?void 0:m.port} to container port ${o} closed`)}),f.listen(o,"127.0.0.1")})}async function wse(t,e,n,r){return e.remoteExec({env:r,cmd:n[0],args:n.slice(1),output:t})}function CY(t,e){return[...t].find(n=>{let r=n.server.address();return(r==null?void 0:r.port)===e})}var gp=Y(require("path"));var VR=Y(Or());function cx(t,e){let n,r=t.platform==="win32",o={...t,get env(){return n||(n=SY(r,t.env))}},i=Ese.bind(void 0,r,o);return t.containerWorkspaceFolder&&(o.containerWorkspaceFolder=xY(i,t.containerWorkspaceFolder)),ax(i,e)}function EY(t,e,n,r){let o=t==="win32";return ax(Sse.bind(void 0,o,e,SY(o,n)),r)}function ax(t,e){if(typeof e=="string")return xY(t,e);if(Array.isArray(e))return e.map(n=>ax(t,n));if(e&&typeof e=="object"){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r]=ax(t,e[r])}),n}return e}var yse=/\$\{(.*?)\}/g;function SY(t,e){if(t){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r.toLowerCase()]=e[r]}),n}return e}function xY(t,e){return e.replace(yse,Cse.bind(void 0,t))}function Cse(t,e,n){let r,o=n.split(":");return o.length>1&&(n=o[0],r=o[1]),t(e,n,r)}function Ese(t,e,n,r,o){switch(r){case"env":case"localEnv":return _Y(t,e.env,o,n,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:n;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?gp.win32:gp.posix).basename(e.localWorkspaceFolder):n;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:n;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?gp.posix.basename(e.containerWorkspaceFolder):n;default:return n}}function Sse(t,e,n,r,o,i){switch(o){case"containerEnv":return _Y(t,n,i,r,e);default:return r}}function _Y(t,e,n,r,o){if(n){t&&(n=n.toLowerCase());let i=e[n];return typeof i=="string"?i:""}throw new Se({description:o?VR.t("'{0}' in {1} can not be resolved because no environment variable name is given.",r,gp.posix.basename(o.path)):VR.t("'{0}' can not be resolved because no environment variable name is given.",r)})}var lx=Y(require("path"));var xse=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function DY(t,e,n,r,o){let{repository:i,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(i=o.getDotfileConfiguration("dotfiles.repository")||i,s=o.getDotfileConfiguration("dotfiles.installCommand")||s,a=o.getDotfileConfiguration("dotfiles.targetPath")||a,!i)return;await r;let c=await n;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let l=e.shellServer,u=IY(e),f=Object.keys(c).filter(m=>!(m.startsWith("BASH_FUNC_")&&m.endsWith("%%"))).reduce((m,d)=>`${m}${d}=${_se(c[d])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${ux(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await l.exec(`# Clone & install dotfiles
${ux(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${xse.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function _se(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function IY(t){return lx.posix.join(Oi(t),".dotfilesMarker")}async function PY(t){let e=IY(t),n=lx.posix.resolve(t.homeFolder,".devcontainer",".dotfilesMarker");try{await t.shellServer.exec(`test -f '${e}' && test ! -e '${n}' && mkdir -p '${lx.posix.dirname(n)}' && cp '${e}' '${n}'`)}catch{}}var qR=Y(require("path"));async function bY(t,e){var i;let n=Oi(t),r=qR.posix.join(n,".writeMachineMCPConfigMarker"),o=TY(t);if(await fx(t.shellServer,r)&&!await ki(t.shellServer,o)){let s=(i=e.customizations)==null?void 0:i.vscode,a=(Array.isArray(s)?s:s?[s]:[]).map(l=>l.mcp).filter(Boolean),c=Dse(a);Object.keys(c).length&&await t.shellServer.exec(`mkdir -p '${qR.posix.dirname(o)}' && cat >'${o}' <<'mcpJSON'
${JSON.stringify(c,null,"	")}
mcpJSON
`)}}function Dse(t){let e={},n=Object.assign({},...t.map(s=>s.servers));Object.keys(n).length&&(e.servers=n);let r=t.filter(s=>s.inputs).map(s=>s.inputs).flat(),o=new Set,i=[];for(let s=r.length-1;s>=0;s--){let a=r[s];o.has(a.id)||(o.add(a.id),i.push(a))}return i.length&&(e.inputs=i.reverse()),e}var Ll=0,RY=/Extension host agent listening on (\d+)/;var Ise="updateContentCommand";async function gx(t){let{params:e,createdAt:n,startedAt:r,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,rootShellServer:d,remoteWaylandSocket:p}=t,h;if(d&&a==="root"?h=d:h=await Wt(u,e.output,e.sessionId),!l){let I=(await h.exec("echo $PATH")).stdout.trim();l=I?{PATH:I}:{}}a||(a=await Dl(h)),!m&&a==="root"&&(m=u);let g=await TR(h),v=await _f(h,a);v||e.output.write(B0(`User ${a} not found with 'getent passwd'.`));let C=await bse(l,v),w=await Pse(h,l,v),y=lp(Ee.posix,w,e.product),{commit:S,quality:D}=e.product,x=!1,A=S&&await Rse(y,S,D||"insider",e.web,x),F=BS(g,D==="stable"),k=S&&o&&await MY(Ee.posix,o,F,S,D||"insider",e.web,x),E=A&&Rl("linux",A),_;d?_=Promise.resolve(d):a==="root"&&(_=Promise.resolve(h));let T={createdAt:n,startedAt:r,osRelease:g,build:F,user:a,gid:c||(v==null?void 0:v.gid),env:l,shell:C,homeFolder:w,userDataFolder:y,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,legacy:x,installFolder:A,sharedInstallFolder:k,remoteWorkspaceFolder:s,nodeExecutable:E,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,shellServer:h,remoteWaylandSocket:p};return(_||m)&&(T.launchRootShellServer=()=>_||(_=Wt(m,e.output))),T}async function Dl(t){return(await t.exec("id -un")).stdout.trim()}async function Pse(t,e,n){if(e.HOME){if(e.HOME===(n==null?void 0:n.home)||(n==null?void 0:n.uid)==="0")return e.HOME;try{return await t.exec(`[ ! -e '${e.HOME}' ] || [ -w '${e.HOME}' ]`),e.HOME}catch{}}return(n==null?void 0:n.home)||"/root"}async function bse(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function _f(t,e){let{stdout:n}=await t.exec(XV(e),{logOutput:!1});if(n.trim())return Tse(n)}function Tse(t){let e=t.replace(/\n$/,"").split(":");return{name:e[0],uid:e[2],gid:e[3],home:e[5],shell:e[6]}}async function Rse(t,e,n,r,o){return Ee.posix.join(t,"bin",`${e}${n==="stable"?"":`-${n}`}${r?"-web":""}${o?"-legacy":""}`)}async function MY(t,e,n,r,o,i,s){return t.join(e,"bin",n.id,`${r}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}`)}function HY(t){return Ee.posix.join(t.userDataFolder,"extensions")}function Oi(t){return Ee.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function vx(t){return Ee.posix.join(t.userDataFolder,"data/Machine/settings.json")}function TY(t){return Ee.posix.join(t.userDataFolder,"data/User/mcp.json")}function kse(t){return Ee.posix.join(t,".vscode-remote")}function lp(t,e,n){return t.join(e,n.serverDataFolderName)}function bR(t,e,n){return t.join(e,n.dataFolderName)}function wx(t){return Ee.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}function Rl(t,e){return Vn(t,{posix:()=>Ee.posix.join(e,"node"),win32:()=>Ee.win32.join(e,"node.exe")})()}var Ov=class{constructor(e){this.settings=e}getConfiguration(e){return this.settings[ss(e)]||this.settings[Sl(e)]}getNewConfiguration(e){return this.settings[ss(e)]}getDotfileConfiguration(e){return this.settings[Sl(e)]||this.settings[e]}};async function Al(t,e,n,r,o=Ll,i,s){await Nse(t,e);let a=await Lse(t,e,r);await bY(e,r);let{serverDownloaded:c,didCheckRequirements:l}=await Hse(t,e),u,f,m=Promise.resolve(),d;if(e.nodeExecutable){let y=await HS(t,e,a);u=y.remoteContainersCLI,f=y.remoteEnv,m=y.ready;let S=i;i=S&&(async(...x)=>(await y.ready,S(...x))),d=y.mrpcExec;let D=t.cliHost.reconnect;D&&(t.cliHost.reconnect=async x=>{await D(x),y.reconnect().catch(A=>t.output.write(ot(A&&(A.stack||A.message)||String(A))))})}let h=t.computeExtensionHostEnv||t.postCreate.enabled?bf(t,e,r,d).then(async y=>({...y,...f,...await RV(e,y),REMOTE_CONTAINERS:"true",...EY(t.cliHost.platform,n.configFilePath,e.env,r.remoteEnv||{})})):Promise.resolve({}),g=a.getConfiguration("gitCredentialHelperConfigLocation")??t.credentialHelperConfigLocation;e.nodeExecutable&&(await Sv(t,e,[".ssh","known_hosts"],"ssh"),g!=="none"&&await mx(e,u,t.output,"system"));let v,C,w;if(e.installFolder){let S=await nae(t,e,o,d,async()=>jse(t,e,r,!1),void 0,!0,!1,l),D=S.serverPort;w=S.connectionToken,v=D,t.forwardServerPort&&e.nodeExecutable&&(C=await yY(t,e,D,t.sessionId),v=C.address().port,t.backgroundTasks.push(async()=>sae(t,e,r)))}if(t.postCreate.enabled){let y,S=new Promise(x=>y=()=>{x()}),D=(async()=>{let x={...f,REMOTE_CONTAINERS:"true"},A=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],F=A.reduce((k,E)=>(k[E]=(r[`${E}s`]||[]).length>0,k),{});if(t.prebuild){let k=A.indexOf("updateContentCommand");if((!A.slice(0,k+1).some(T=>F[T])||!i?"prebuild":await i(!1,!1,!0,a,x))!=="prebuild")throw new Error('"prebuild" expected')}else{let k=!0,E=!0,_=r.waitFor||Ise,T=A.indexOf(_),I=A.indexOf("postCreateCommand"),b=T<=I&&!A.slice(0,T+1).some(B=>F[B]),R=a.getDotfileConfiguration("dotfiles.repository")||t.dotfilesConfiguration.repository,L=!A.slice(0,I+1).some(B=>F[B])&&!R,N=b?"skipNonBlocking":L||!i?"stopForPersonalization":await i(k,E,!1,a,x);if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(T+1,I+1).some(W=>F[W])&&!R||!i?"stopForPersonalization":await i(k,E,!1,a,x)}if(N==="stopForPersonalization"){i||await DY(t,e,h,m,a),e.nodeExecutable&&((a.getConfiguration("copyGitConfig")??t.isCopyGitConfigEnabled)&&await _S(t,e,h.then(z=>({...e.env,...z}))),await mx(e,u,t.output,g)),await(s==null?void 0:s()),E=!1;let B=T>I&&!A.slice(I+1,T+1).some(z=>F[z]),W=!A.slice(I+1).some(z=>F[z]);N=B?"skipNonBlocking":W||!i?"done":await i(k,E,!1,a,x)}if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(T+1).some(W=>F[W])||!i?"done":await i(k,E,!1,a,x)}if(N!=="done")throw new Error('"done" expected')}})();D.then(()=>{t.postCreate.done()},x=>{t.postCreate.done(x)}),t.backgroundTasks.push(D),await Promise.race([S,D])}return{hostOrContainerPort:v,hostPortServer:C,connectionToken:w,remoteEnv:t.computeExtensionHostEnv?await h:{},serverDownloaded:c}}async function Nse(t,e){let n=kse(e.homeFolder);!await px(e.shellServer,e.userDataFolder)&&await px(e.shellServer,n)&&await rc(t,e,["/bin/sh","-c",`cp -r '${n}' '${e.userDataFolder}'`])}async function Lse(t,e,n){var s;let r=Oi(e),o=Ee.posix.join(r,".writeMachineSettingsMarker"),i=vx(e);if(await fx(e.shellServer,o)&&!await ki(e.shellServer,i)){let a=(s=n.customizations)==null?void 0:s.vscode,c=(Array.isArray(a)?a:a?[a]:[]).map(d=>d.settings).filter(Boolean),l=await Ase(e.shellServer,t.getLogLevel()),u=l.length?`

Some of the command line tools available on the \`PATH\`: ${l.map(d=>`\`${d}\``).join(", ")}`:"",f=e.osRelease.prettyName||"Linux";c.push({"github.copilot.chat.codeGeneration.instructions":[{text:`This workspace is in a dev container running on ${f}.

Use \`"$BROWSER" <url>\` to open a webpage in the host's default browser.${u}`}]});let m=Ose(c);if(Use(m,n.portsAttributes),$se(m,n.otherPortsAttributes),Object.keys(m).length)return await e.shellServer.exec(`mkdir -p '${Ee.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(m,null,"	")}
settingsJSON
`),new Ov(m)}try{let{stdout:a}=await e.shellServer.exec(`cat ${i}`);return new Ov($e(a)||{})}catch{return new Ov({})}}async function Ase(t,e){let n=["apt","dpkg","snap","dnf","yum","rpm","apk","docker","git","gh","kubectl","podman","curl","wget","ssh","scp","rsync","gpg","ps","lsof","netstat","top","tree","find","grep","zip","unzip","tar","gzip","bzip2","xz"],{stdout:r}=await t.exec(`which ${n.join(" ")} || true`,{logOutput:e===1});return r.split(`
`).filter(Boolean).map(i=>Ee.posix.basename(i)).filter(i=>n.includes(i))}var Fse=["github.copilot.chat.reviewSelection.instructions","github.copilot.chat.codeGeneration.instructions","github.copilot.chat.commitMessageGeneration.instructions","github.copilot.chat.pullRequestDescriptionGeneration.instructions","github.copilot.chat.testGeneration.instructions"];function Ose(t){let e=t.reduce((n,r)=>Fse.reduce((o,i)=>{let s=r[i];return Array.isArray(s)&&(o[i]=o[i]?o[i].concat(s):s),o},n),{});return Object.assign({},...t,e)}function Use(t,e){if(!t||!e||!Object.keys(e).length)return;let n="remote.portsAttributes";if(!t[n]){t[n]=e;return}for(let r in e)t[n][r]||(t[n][r]=e[r])}function $se(t,e){if(!t||!e)return;let n="remote.otherPortsAttributes";t[n]||(t[n]=e)}async function yx(t,e,n,r){let o=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,i=await e();if((await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let c=Ee.posix.dirname(n);c!=="/"&&await i.exec(`chown ${o} ${c}`),n!=="/"&&await i.exec(`chown -R ${o} ${n}`)}else if(r&&(await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let u=Ee.posix.dirname(r);u!=="/"&&await i.exec(`chown -R ${o} ${u}`)}}async function mx(t,e,n,r){if(e||_l)if(r==="none")n.write("Git credential helper not enabled.");else{let o=r==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${r} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} git-credential-helper $*; }; f' || true`):n.write("Cannot configure system wide Git credential helper without root access.")}}async function Sv(t,e,n,r,o){let{cliHost:i}=t,s=i.path.join(await i.homedir(),...n);if(!await i.isFile(s)&&(i.type==="local"||(i=await Vr(process.cwd(),t.loadNativeModule,t.output),s=i.path.join(await i.homedir(),...n),!await i.isFile(s))))return!1;let a=Ee.posix.join(e.homeFolder,...n);return El(i,e.shellServer,s,a,r,o)}async function El(t,e,n,r,o,i=""){let s=await Mse(t,n);if(s)try{let a=await r,c=Ee.posix.dirname(a);return await e.exec(`# Test for ${a} and ${o}
[ -e '${a}' ] ${i}&& echo '${a}' exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p '${c}'
[ -w '${c}' ] || (echo '${c}' not writable && exit 1) || exit 1`),await e.exec(`# Copy ${n} to ${a}
${Sf(s.byteLength)} >>'${a}'`,{stdin:s}),!0}catch(a){if(a&&a.code!==1)throw a}return!1}async function Mse(t,e){try{return await t.readFile(e)}catch(n){if(n&&(n.code==="ENOENT"||n.code==="EISDIR"))return;throw n}}async function Hse(t,e){let n=await kY(t,e,e.legacy);if(n!=="retryWithLegacyServer")return n;let r=await kY(t,e,!0);return e.legacy=!0,e.installFolder=r.installFolder,e.sharedInstallFolder=r.sharedInstallFolder,e.nodeExecutable=r.installFolder&&Rl("linux",r.installFolder),r}async function kY(t,e,n){let r=await Bse(t,e,n),o=!1;if(r.installFolder){let i=Ee.posix.join(r.installFolder,"bin","helpers","check-requirements.sh");if(o=await tae(e.shellServer,i),o)try{await e.shellServer.exec(`'${i}'`)}catch(s){if((s==null?void 0:s.code)===100){if(!n)return"retryWithLegacyServer"}else throw(s==null?void 0:s.code)===99?new Se({description:kl.t("The container does not meet all the requirements of the VS Code Server."),detail:s==null?void 0:s.stdout.toString().trim(),step:"checkRequirements",data:{reload:!1,learnMoreUrl:"https://aka.ms/vscode-remote/faq/old-linux"},originalError:s}):s}}return{...r,didCheckRequirements:o}}async function Bse(t,e,n){let{commit:r}=t.product,{shellServer:o,launchRootShellServer:i,build:s}=e;if(!(r&&e.installFolder))return{serverDownloaded:void 0,installFolder:void 0,sharedInstallFolder:void 0};let a=n?`${e.installFolder}-legacy`:e.installFolder,c=n&&e.sharedInstallFolder?`${e.sharedInstallFolder}-legacy`:e.sharedInstallFolder;Wse(e.osRelease,s),s.preview&&t.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let l=await px(o,a),u;if(l||s===VY[s.arch]&&(i?u=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):u=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`)),c&&await px(o,c))return l||await o.exec(`mkdir -p '${Ee.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),i&&(async()=>{await(await i()).exec(`touch '${c}'`)})().catch(console.error),await u,{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};if(l)return{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let f=!!(c&&i),m=f?c:a,d=f?await i():o,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload,legacy:n},h=dp(p),g=await yr(h);g||await bv(p);try{if(e.sharedDataFolderIsLocalCacheFolder)await LY(p);else{let v=Pv(t,d,h,m);t.cliHost.type!=="local"&&await Promise.race([v,Bt(2e4).then(()=>!0)])&&rx(t,e).catch(C=>t.output.write(`Error testing connection: ${(C==null?void 0:C.stack)||(C==null?void 0:C.message)||C}`)),await v}}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await bv(p),e.sharedDataFolderIsLocalCacheFolder?await LY(p):await Pv(t,d,h,m);else throw v}return f&&(await o.exec(`mkdir -p '${Ee.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),(async()=>{await d.exec(`touch '${c}' && cd '${Ee.posix.dirname(c)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await u,{serverDownloaded:!g,installFolder:a,sharedInstallFolder:c}}function Wse(t,e){let n=t.version;if(e.minVersion&&n){let r=tx(n.trim());if(r&&nx(r,e.minVersion)){let o=kl.t("{0} {1} or later required.",e.label,e.minVersion.join("."));throw new Se({description:o,data:{reload:!1}})}}}async function bv(t){let{build:e,commit:n,quality:r,web:o,legacy:i,output:s}=t,a="Downloading VS Code Server",c=s.start(a);s.write(`${n} ${e.id} ${r}${o?" web":""}${i?" legacy":""}`);let l=dp(t);await es(Ee.dirname(l));let u=`https://update.code.visualstudio.com/commit:${n}/server-${i?e.id.replace("linux-","linux-legacy-"):e.id}${o?"-web":""}/${r}`;s.write(`URL: ${u}`),s.write(`Path: ${l}`);let f,m;try{m=`${l}_${Date.now()}`,await new Promise((d,p)=>{let h=hx.createWriteStream(m);s.write("Starting download.",1),FY.https.get(u,{trackRedirects:!0},v=>{var y;if(v.statusCode<200||v.statusCode>299){s.write(`Download failed: ${v.statusCode} ${v.statusMessage}.`,1),p(new Se({description:kl.t("Downloading the VS Code Server failed. Please try again later."),originalError:`Failed to download VS Code Server (${u}): HTTP ${v.statusCode} - ${v.statusMessage}`}));return}let w=(y=[...v.redirects,v].find(S=>S.headers["x-sha256"]))==null?void 0:y.headers["x-sha256"];f=Array.isArray(w)?w[0]:w,s.write("Downloading data.",1),v.on("error",p),v.pipe(h),v.on("end",d)}).on("error",p)}),f&&await NY(u,m,f,s)}catch(d){if(s.write("Downloading failed.",1),s.write((d==null?void 0:d.stack)||(d==null?void 0:d.message)||String(d),1),t.alternateDownload)s.write(d&&(d.originalError||d.message)),s.write("Retrying to download VS Code Server."),m=`${l}_${Date.now()}`,await t.alternateDownload(u,m),f&&await NY(u,m,f,s);else throw d||new Se({description:kl.t("Downloading the VS Code Server failed. Please try again later.")})}finally{s.stop(a,c)}await Jc(m,l)}async function NY(t,e,n,r){let o=vp.createHash("sha256"),i=await st(e);o.update(i);let s=o.digest("hex");if(s!==n)throw r.write(`Failed to download VS Code Server (${t}): SHA mismatch, actual ${s} != expected ${n} (${e}, ${i.byteLength} bytes)`),new Se({description:kl.t("Downloading the VS Code Server failed. Please try again later.")})}async function Pv(t,e,n,r,o,i=!0){let s="Installing VS Code Server",a=t.output.start(s),c=`${r}_${Date.now()}`;try{if(await e.exec(`mkdir -p ${c}`),o)typeof n=="string"&&n.endsWith(".zip")?await e.exec(`unzip ${n} -d ${c}`):await e.exec(`cat ${n} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let l=typeof n=="string"?await st(n):n;await e.exec(`${Sf(l.byteLength,!0)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:l,logOutput:"continuous"})}await e.exec(`mv -n ${Ee.posix.join(c,"*",".")} ${r} && rmdir ${c}`)}catch(l){try{await e.exec(`rm -rf ${c}`)}catch{}throw l}finally{t.output.stop(s,a)}}async function LY(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s,output:a}=t,c="Unpacking VS Code Server",l=a.start(c);a.write(`${r} ${n.id} ${o} ${i?"web":""} ${s?"legacy":""}`);let u=await MY(Ee,e,n,r,o,i,s),f=`${u}_${Date.now()}`;try{await es(f);let m=dp(t);await(await cs(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",m,"--strip-components","1","-C",f],cwd:process.cwd(),output:a})).exit,await Zc(u,{recursive:!0,force:!0}),await Jc(f,u)}catch(m){try{await Zc(f,{recursive:!0,force:!0})}catch{}throw m}finally{a.stop(c,l)}}function dp(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s}=t,a=Ee.join(e,"serverCache",r),c=`vscode-server-${n.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}${n.archiveExt||".tar.gz"}`;return Ee.join(a,c)}async function BY(t,e){let n=await YY(e),r={},{stdout:o}=await rc(t,e,[Ee.posix.join(e.installFolder,...DS(n)),...qY(e.userDataFolder),...GY(t.getTelemetryLevel()),"--list-extensions"],e.installFolder,{remoteEnv:r});return o.toString().split(`
`).filter(i=>!!i)}async function jse(t,e,n,r){let o="Preparing Extensions",i=t.output.start(o),{sharedDataFolder:s}=e,a=s?Jse(s):void 0,c=WY(e),l=Oi(e),u=Ee.posix.join(l,".installExtensionsMarker"),f=!await fx(e.shellServer,u),m=Yse(t,f,n);if(e.sharedDataFolderIsLocalCacheFolder)e.launchRootShellServer&&await(await e.launchRootShellServer()).exec(`mkdir -p '${a}' && chown -R ${e.user} ${a}`),await e.shellServer.exec(`mkdir -p '${a}' && ln -s -T '${a}' '${c}' || true`);else{let p=Kse(t.localCacheFolder),h=await qse(t,e,p,a,c,[...m.builtinExtensions,...m.extensions]);Gse(t,e,p,a,c,h).catch(console.error)}m.extensions=m.extensions.filter(p=>!m.builtinExtensions.includes(p)),t.product.version&&OY.lte("1.77.0",t.product.version.split("-")[0])&&(t.output.write(`Optimizing extensions for quality: ${t.product.quality}`),m.builtinExtensions=await Vse(t,e,c,m.builtinExtensions));let d=[].concat(...m.builtinExtensions.map(p=>["--install-builtin-extension",p]),...m.extensions.map(p=>["--install-extension",p]));return r&&d.length&&d.push("--do-not-sync"),t.output.stop(o,i),{...m,args:d}}async function Vse(t,e,n,r){if(r.length===0)return r;let{shellServer:o}=e,i=(await o.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(a=>!!a&&a.endsWith("vsix"));t.output.write(`Available vsix: ${i.join(", ")||"None"}`);let s=r.map(a=>{let c=i.find(l=>l.startsWith(a.toLocaleLowerCase()));return c?`${n}/${c}`:a});return t.output.write(`Optimized extensions to install: ${s.join(", ")||"None"}`),s}function Yse(t,e,n){var a,c;let r=e?[]:t.installBuiltinExtensions||[],o=t.getAdditionalExtensionsToInstall(e),i=[...e?[]:(((a=n.customizations)==null?void 0:a.vscode)||[]).map(l=>l.extensions||[]),o],s=[];for(let l of i.flat()){let u=(c=/^(?<removal>-)?(?<idAndVersion>(?<id>[^@ ]*)[^ ]*)$/.exec(l))==null?void 0:c.groups;if(u){let f=s.findIndex(m=>m.id===u.id);f!==-1&&s.splice(f,1),u.removal||s.push(u)}}return{builtinExtensions:r,extensions:s.map(l=>l.idAndVersion)}}async function qse(t,e,n,r,o,i){t.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(r){let c=(await s.exec(`test -d ${r} && ls ${r} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${o}' && ln -s '${r}'/* '${o}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${r} && touch ${l.map(m=>`'${m}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await es(n);let c=await Xc(n),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=Ee.basename(n),f=Nl.c({cwd:Ee.dirname(n)},l.map(p=>Ee.join(u,p))),m=Ee.posix.join(o,`tmp-${Date.now()}`),d=await new Promise(p=>{let h=[];f.on("data",g=>h.push(g)),f.on("end",()=>p(Buffer.concat(h)))});await s.exec(`# Copy extensions to remote
mkdir -p ${m}
${Sf(d.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${m}
mv ${m}/* ${o} && rmdir ${m}`,{stdin:d})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function Gse(t,e,n,r,o,i){if(r&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Bt(s);;)i=await zse(t,e,n,r,o,i),await Bt(a)}async function zse(t,e,n,r,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(m=>!!m);if(!r){let m=i.filter(d=>u.indexOf(d)===-1);t.output.write(`Extensions cache, remote removals: ${m.join(", ")||"None"}`);for(let d of m)try{await JO(Ee.join(n,d))}catch(p){if(!(p&&p.code==="ENOENT"))throw p}}let f=u.filter(m=>i.indexOf(m)===-1&&s.indexOf(m)===-1);if(t.output.write(`Extensions cache, copy to ${r?"shared cache":"local"}: ${f.join(", ")||"None"}`,1),f.length)if(r){let m=await c();await m.exec(`mkdir -p '${r}' && cd '${o}' && cp ${f.map(d=>`'${d}'`).join(" ")} '${r}'`),await m.exec(`cd '${r}' && ls -t | tail -n +500 | xargs rm -f`)}else{let m=Ee.posix.basename(o),d=await l({cmd:"tar",cwd:Ee.posix.dirname(o),args:["c",...f.map(v=>Ee.posix.join(m,v))],output:t.output}),p=Ee.join(Ee.dirname(n),`${Ee.basename(n)}-${Date.now()}`);await es(p);let h=Nl.x({cwd:p,strip:1}),g=new Promise((v,C)=>{h.on("error",C),h.on("finish",v)});d.stdout.pipe(h),await g;for(let v of await Xc(p))await Jc(Ee.join(p,v),Ee.join(n,v));await XO(p)}return{remoteExtensions:u,cachedExtensions:s}}var zR="extensionsCache";function Kse(t){return Ee.join(t,zR)}function Jse(t){return Ee.posix.join(t,zR)}function WY(t){return Ee.posix.join(t.userDataFolder,zR)}var jY={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},VY={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},$S={x64:{label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Mac ARM",id:"darwin-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},Xse={x64:{label:"Windows",id:"win32-x64",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Windows ARM",id:"win32-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},Zse={linux:jY,alpine:VY,darwin:$S,win32:Xse},Qse={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function BS(t,e){var o;let n=Qse[t.hardware],r=n&&(((o=Zse[t.id])==null?void 0:o[n])||jY[n]);if(!r||e&&!r.stable)throw new Se({description:t.id==="alpine"?kl.t("Alpine Linux is not supported on the hardware architecture '{0}' of the container.",t.hardware):kl.t("The hardware architecture '{0}' of the container is not supported.",t.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function TR(t){let e="unknown",n="unknown",r="unknown",o;try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");n=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",r=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",o=(i.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(i){console.error(i)}return{hardware:e,id:n,version:r,prettyName:o}}async function eae(t,e,n,r){let o=await Vn(n,{async win32(){var c;return{amd64:"x86_64",arm64:"arm64"}[((c=e.PROCESSOR_ARCHITECTURE)==null?void 0:c.toLowerCase())||""]||"unknown"},async posix(){return(await ee({exec:t,cmd:"uname",args:["-m"],output:r})).stdout.toString().trim()}})(),i=n,s="unknown",a;if(n==="linux")try{let c=(await ee({exec:t,cmd:"/bin/sh",args:["(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null"],output:r})).stdout.toString();i=(c.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",s=(c.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",a=(c.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(c){console.error(c)}return{hardware:o,id:i,version:s,prettyName:a}}async function fx(t,e){try{return await t.exec(ux(e)),!0}catch{return!1}}function ux(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${Ee.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function px(t,e){try{return await t.exec(`test -d '${e}'`),!0}catch{return!1}}async function tae(t,e){try{return await t.exec(`test -x '${e}'`),!0}catch{return!1}}async function nae(t,e,n,r,o,i,s,a,c){let{installFolder:l,sharedInstallFolder:u,shellServer:f}=e,{processes:m,mntNS:d}=await rR(f),p=await YY(e),h=`(${Ee.posix.join(...DS(p))})`.replace(".","\\."),g=new RegExp(`${Ee.posix.join(Ee.posix.dirname(l).replace(".","\\."),"[^/]*",h)}`),v=m.filter(z=>z.mntNS===d&&g.test(z.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(v,void 0,"  ")}`,1);let C=v.length?(await f.exec(`readlink -f '${l}'`)).stdout.toString().trim():void 0,{current:w,others:y}=v.reduce((z,V)=>(z[(V.cwd===C||V.cwd===l||V.cwd===u)&&g.test(V.cmd)?"current":"others"].push(V),z),{current:[],others:[]});if(s&&y.length){t.output.write(`Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${y.map(z=>z.pgrp?`-${z.pgrp}`:z.pid).join(" ")}`)}catch{}}let{commit:S,quality:D}=t.product,x=Ee.posix.join(Oi(e),`.connection-token-${S}${D==="stable"?"":`-${D}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`),A=Ee.posix.join(Oi(e),`.devport-${S}${D==="stable"?"":`-${D}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`);if(w.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:z}=await f.exec(`cat '${A}' 2>/dev/null`),V=z.toString().trim(),q=parseInt(V,10),ce=new RegExp(" '?--connection-token-file'? ").test(w[0].cmd)?(await f.exec(`cat '${x}'`)).stdout.toString().trim():void 0;return{serverPort:q,connectionToken:ce}}catch(z){console.error(z),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${w.map(V=>V.pgrp?`-${V.pgrp}`:V.pid).join(" ")}`)}catch{}}}let F="isLocalContainer"in t&&t.isLocalContainer,k=`${x}-${vp.randomUUID()}`,{stdout:E}=await f.exec(`cat '${x}' 2>/dev/null || (umask 377 && echo '${vp.randomUUID()}' >'${k}' && mv -n '${k}' '${x}' && rm -f '${k}' && cat '${x}')`),_=E.toString().trim();t.progress(5);let T="Starting VS Code Server",I=t.output.start(T),b=[Ee.posix.join(l,...DS(p)),"--log",Qr(t.getLogLevel()),"--force-disable-user-env",...qY(e.userDataFolder),...rae(F),...GY(t.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(n),"--connection-token-file",x,"--extensions-download-dir",WY(e),...(await o()).args,"--start-server",...F?["--disable-websocket-compression"]:[""],...a?["--enable-remote-auto-shutdown"]:[],...c?["--skip-requirements-check"]:[]],R={SHELL:e.shell,...await i};delete R.NODE_OPTIONS;let N=(await rc(t,{remoteExec:e.remoteExec},b,l,{remoteEnv:R,resolveOn:RY,print:"continuous"})).cmdOutput;t.output.stop(T,I);let B=(RY.exec(N)||[])[1];if(!B)throw new Error("Port not found");return await f.exec(`echo ${B} >'${A}'`),{serverPort:parseInt(B,10),connectionToken:_}}async function YY({shellServer:t,installFolder:e}){return JSON.parse((await t.exec(`cat '${Ee.posix.join(e,"product.json")}'`,{logOutput:!1})).stdout.toString().trim())}function qY(t){return["--server-data-dir",t]}function rae(t){return t?["--use-host-proxy"]:[]}function GY(t){return t?["--telemetry-level",t]:[]}var oae=/^([a-z0-9\-]+):(\d{1,5})$/;function iae(t){let e=t.match(oae);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function sae(t,e,n){let r=(n.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(iae).filter(Boolean),o=await t.getTunnels();await Promise.all(r.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>t.openTunnel(e,s,i)))}async function rc(t,{remoteExec:e},n,r,o={}){let i=o.print||(o.silent?"off":"end"),s=await e({env:o.remoteEnv,cwd:r,cmd:n[0],args:n.slice(1),output:o.silent?Fe:t.output}),a=[],c=[],l=new GR.StringDecoder,u=new GR.StringDecoder,f="",m="",d,p,h=new Promise((y,S)=>{d=y,p=S});s.stdout.on("data",y=>{a.push(y);let S=l.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),f+=S,o.resolveOn&&o.resolveOn.exec(f)&&d()}),s.stderr.on("data",y=>{c.push(y);let S=u.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),m+=S}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,y=>{y&&p(y)}),s.stdin.end()):o.stdin instanceof hx.ReadStream&&o.stdin.pipe(s.stdin),i!=="off"&&s.exit.catch(y=>{y!=null&&y.message&&t.output.write(ot(y==null?void 0:y.message))});let g=await Promise.race([s.exit,h]),v=Buffer.concat(a),C=Buffer.concat(c);i==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(ot(m)));let w=`${f}
${m}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${n.join(" ")}`,cmdOutput:w,stdout:v,stderr:C,code:g.code,signal:g.signal}):{cmdOutput:w,stdout:v,stderr:C}}function Sf(t,e=!1){let r=t%8192;return`(dd iflag=fullblock bs=8192 count=${(t-r)/8192}${e?"":" 2>/dev/null"}; dd iflag=fullblock bs=${r} count=1${e?"":" 2>/dev/null"})`}async function bf(t,e,n,r){let o=lae(n,t);if(!o||o==="none")return{};let i=await aae(o,t,e.shellServer);return i||(t.output.write("userEnvProbe: not found in cache"),i=await AY(o,t,e,r,"cat /proc/self/environ","\0"),i||(t.output.write("userEnvProbe: falling back to printenv"),i=await AY(o,t,e,r,"printenv",`
`)),i&&await cae(i,o,t,e.shellServer),i||{})}async function aae(t,e,n){if(!n||!e.containerSessionDataFolder)return;let r=zY(t,e.containerSessionDataFolder);try{if(await ki(n,r)){let{stdout:o}=await n.exec(`cat '${r}'`);return JSON.parse(o)}}catch(o){e.output.write(`Failed to read/parse user env cache: ${o}`,5)}}async function cae(t,e,n,r){if(!r||!n.containerSessionDataFolder)return;let o=zY(e,n.containerSessionDataFolder);try{await r.exec(`mkdir -p '${Ee.posix.dirname(o)}' && cat > '${o}' << 'envJSON'
${JSON.stringify(t,null,"	")}
envJSON
`)}catch(i){n.output.write(`Failed to cache user env: ${i}`,5)}}function zY(t,e){return Ee.posix.join(e,`env-${t}.json`)}async function AY(t,e,n,r,o,i){var s;if(t==="none")return{};try{let a=vp.randomUUID(),c=new RegExp(a+"([^]*)"+a),l=n.shell;e.output.write(`userEnvProbe shell: ${l}`);let u=Ee.posix.basename(l),f=`echo -n ${a}; ${o}; echo -n ${a}`,m;/^pwsh(-preview)?$/.test(u)?m=t==="loginInteractiveShell"||t==="loginShell"?["-Login","-Command"]:["-Command"]:m=[t==="loginInteractiveShell"?"-lic":t==="loginShell"?"-lc":t==="interactiveShell"?"-ic":"-c"];let d=sn(e.output,1),p=rc({output:d},{remoteExec:await r||n.remoteExec},[l,...m,f],n.installFolder);Promise.race([p,Bt(2e3)]).then(async x=>{if(!x){let A,F=n.shellServer||await Wt(n.remoteExec,e.output);try{({processes:A}=await rR(F))}finally{n.shellServer||await F.process.terminate()}let k=A.find(E=>E.cmd.startsWith(l)&&E.cmd.indexOf(a)!==-1);if(k){let _=fj(A)[k.pid];e.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${oR(_)}`)}else e.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(x=>e.output.write(ot(x&&(x.stack||x.message)||"Error reading process tree.")));let h=await Promise.race([p,Bt(1e4)]);if(!h)return e.output.write(ot("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let g=h.stdout.toString(),v=c.exec(g),C=v?v[1]:"";if(!C||C.trim()==="-n")return;let w=C.split(i).reduce((x,A)=>{let F=A.indexOf("=");return F!==-1&&(x[A.substring(0,F)]=A.substring(F+1)),x},{});e.output.write(`userEnvProbe parsed: ${JSON.stringify(w,void 0,"  ")}`,1),delete w.PWD;let y=w.PATH,S=(s=n.env)==null?void 0:s.PATH,D=!(e.allowSystemConfigChange&&n.launchRootShellServer)&&y&&S;if(D){let x=n.user;w.PATH=uae(y,S,x==="root"||x==="0")}return e.output.write(`userEnvProbe PATHs:
Probe:     ${typeof y=="string"?`'${y}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${D?`
Merged:    ${typeof w.PATH=="string"?`'${w.PATH}'`:"None"}`:""}`),w}catch(a){return e.output.write(ot("Error reading shell environment.")),e.output.write(ot((a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a))),{}}}function lae(t,e){let n=t==null?void 0:t.userEnvProbe;return e.output.write(`userEnvProbe: ${n||e.defaultUserEnvProbe}${n?"":" (default)"}`),n||(n=e.defaultUserEnvProbe),n}function uae(t,e,n){let r=t.split(":"),o=0;for(let i of e.split(":")){let s=r.indexOf(i);s===-1?(n||!/\/sbin(\/|$)/.test(i))&&r.splice(o++,0,i):o=s+1}return r.join(":")}async function KR(t){for(let e of t)await(typeof e=="function"?e():e)}async function KY(t){let{localCacheFolder:e,output:n,alternateDownload:r,exec:o,env:i,isFile:s,userDataFolder:a,homeFolder:c,product:l,platform:u}=t,f=l.commit||await ip(l.quality),m=l.commit?l.quality||"insider":"stable",d=u==="win32"?Ee.win32:Ee.posix,p=`${m.substring(0,1).toUpperCase()}${m.substring(1)}${m==="insider"?"s":""}-${f}`,h=d.join(lp(d,c,l),"cli","servers",p,"server");if(await dx(u,h,s))return Rl(u,h);let g=d.join(bR(d,c,l),"cli","servers",p,"server");if(await dx(u,g,s))return Rl(u,g);let v=d.join(lp(d,c,l),"bin",f);if(await dx(u,v,s))return Rl(u,v);let C=d.join(a,"bin",f);if(await dx(u,C,s))return Rl(u,C);let w=await eae(o,i,u,n),y=BS(w,!1),S={localCacheFolder:e,build:y,commit:f,quality:m,web:!1,output:n,alternateDownload:r,legacy:!1},D=dp(S);await yr(D)||await bv(S);let x=D.endsWith(".zip")?await dae(D):await fae(D);return await ZV(o,u,x,C,!1,n),Rl(u,C)}async function dx(t,e,n){let r=Rl(t,e),i=(t==="win32"?Ee.win32:Ee.posix).join(e,"node_modules","node-pty","package.json");return await n(r)&&await n(i)}async function fae(t){let e=[];return await Nl.t({file:t,filter:n=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(n),onentry:n=>{new Nl.WriteEntry.Tar(n).on("data",o=>e.push(o))}}),Buffer.concat(e)}async function dae(t){let n=new UY.default(t).getEntries().filter(o=>/^[^/]*\/(LICENSE$|node(\.exe)?$|node_modules\/node-pty\/.*[^/]$)/.test(o.entryName)),r=$Y.pack();for(let o of n){let i=await new Promise((s,a)=>{o.getDataAsync((c,l)=>{l?a(l):s(c)})});r.entry({name:o.entryName,mode:o.attr>>>16&4095},i)}return r.finalize(),r}var Vq=Y(require("crypto")),Kv=Y(require("path"));function fq(t){return typeof t>"u"||t===null}function mae(t){return typeof t=="object"&&t!==null}function pae(t){return Array.isArray(t)?t:fq(t)?[]:[t]}function hae(t,e){var n,r,o,i;if(e)for(i=Object.keys(e),n=0,r=i.length;n<r;n+=1)o=i[n],t[o]=e[o];return t}function gae(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function vae(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var wae=fq,yae=mae,Cae=pae,Eae=gae,Sae=vae,xae=hae,Yn={isNothing:wae,isObject:yae,toArray:Cae,repeat:Eae,isNegativeZero:Sae,extend:xae};function dq(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function $v(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=dq(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}$v.prototype=Object.create(Error.prototype);$v.prototype.constructor=$v;$v.prototype.toString=function(e){return this.name+": "+dq(this,e)};var No=$v;function JR(t,e,n,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-e>a&&(i=" ... ",e=r-a+i.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:i+t.slice(e,n).replace(/\t/g,"\u2192")+s,pos:r-e+i.length}}function XR(t,e){return Yn.repeat(" ",e-t.length)+t}function _ae(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=n.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,o.length).toString().length,f=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=JR(t.buffer,r[s-c],o[s-c],t.position-(r[s]-r[s-c]),f),a=Yn.repeat(" ",e.indent)+XR((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=JR(t.buffer,r[s],o[s],t.position,f),a+=Yn.repeat(" ",e.indent)+XR((t.line+1).toString(),u)+" | "+l.str+`
`,a+=Yn.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=o.length);c++)l=JR(t.buffer,r[s+c],o[s+c],t.position-(r[s]-r[s+c]),f),a+=Yn.repeat(" ",e.indent)+XR((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var Dae=_ae,Iae=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Pae=["scalar","sequence","mapping"];function bae(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function Tae(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(Iae.indexOf(n)===-1)throw new No('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=bae(e.styleAliases||null),Pae.indexOf(this.kind)===-1)throw new No('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Yr=Tae;function JY(t,e){var n=[];return t[e].forEach(function(r){var o=n.length;n.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),n[o]=r}),n}function Rae(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function QR(t){return this.extend(t)}QR.prototype.extend=function(e){var n=[],r=[];if(e instanceof Yr)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new No("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(i){if(!(i instanceof Yr))throw new No("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new No("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new No("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof Yr))throw new No("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(QR.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=JY(o,"implicit"),o.compiledExplicit=JY(o,"explicit"),o.compiledTypeMap=Rae(o.compiledImplicit,o.compiledExplicit),o};var kae=QR,Nae=new Yr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Lae=new Yr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Aae=new Yr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Fae=new kae({explicit:[Nae,Lae,Aae]});function Oae(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Uae(){return null}function $ae(t){return t===null}var Mae=new Yr("tag:yaml.org,2002:null",{kind:"scalar",resolve:Oae,construct:Uae,predicate:$ae,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Hae(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Bae(t){return t==="true"||t==="True"||t==="TRUE"}function Wae(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var jae=new Yr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Hae,construct:Bae,predicate:Wae,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Vae(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Yae(t){return 48<=t&&t<=55}function qae(t){return 48<=t&&t<=57}function Gae(t){if(t===null)return!1;var e=t.length,n=0,r=!1,o;if(!e)return!1;if(o=t[n],(o==="-"||o==="+")&&(o=t[++n]),o==="0"){if(n+1===e)return!0;if(o=t[++n],o==="b"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!Vae(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!Yae(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;n<e;n++)if(o=t[n],o!=="_"){if(!qae(t.charCodeAt(n)))return!1;r=!0}return!(!r||o==="_")}function zae(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function Kae(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Yn.isNegativeZero(t)}var Jae=new Yr("tag:yaml.org,2002:int",{kind:"scalar",resolve:Gae,construct:zae,predicate:Kae,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Xae=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Zae(t){return!(t===null||!Xae.test(t)||t[t.length-1]==="_")}function Qae(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var ece=/^[-+]?[0-9]+e/;function tce(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Yn.isNegativeZero(t))return"-0.0";return n=t.toString(10),ece.test(n)?n.replace("e",".e"):n}function nce(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Yn.isNegativeZero(t))}var rce=new Yr("tag:yaml.org,2002:float",{kind:"scalar",resolve:Zae,construct:Qae,predicate:nce,represent:tce,defaultStyle:"lowercase"}),oce=Fae.extend({implicit:[Mae,jae,Jae,rce]}),ice=oce,mq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),pq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sce(t){return t===null?!1:mq.exec(t)!==null||pq.exec(t)!==null}function ace(t){var e,n,r,o,i,s,a,c=0,l=null,u,f,m;if(e=mq.exec(t),e===null&&(e=pq.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(n,r,o));if(i=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],f=+(e[11]||0),l=(u*60+f)*6e4,e[9]==="-"&&(l=-l)),m=new Date(Date.UTC(n,r,o,i,s,a,c)),l&&m.setTime(m.getTime()-l),m}function cce(t){return t.toISOString()}var lce=new Yr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sce,construct:ace,instanceOf:Date,represent:cce});function uce(t){return t==="<<"||t===null}var fce=new Yr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:uce}),ok=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function dce(t){if(t===null)return!1;var e,n,r=0,o=t.length,i=ok;for(n=0;n<o;n++)if(e=i.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function mce(t){var e,n,r=t.replace(/[\r\n=]/g,""),o=r.length,i=ok,s=0,a=[];for(e=0;e<o;e++)e%4===0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(e));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function pce(t){var e="",n=0,r,o,i=t.length,s=ok;for(r=0;r<i;r++)r%3===0&&r&&(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]),n=(n<<8)+t[r];return o=i%3,o===0?(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]):o===2?(e+=s[n>>10&63],e+=s[n>>4&63],e+=s[n<<2&63],e+=s[64]):o===1&&(e+=s[n>>2&63],e+=s[n<<4&63],e+=s[64],e+=s[64]),e}function hce(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var gce=new Yr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:dce,construct:mce,predicate:hce,represent:pce}),vce=Object.prototype.hasOwnProperty,wce=Object.prototype.toString;function yce(t){if(t===null)return!0;var e=[],n,r,o,i,s,a=t;for(n=0,r=a.length;n<r;n+=1){if(o=a[n],s=!1,wce.call(o)!=="[object Object]")return!1;for(i in o)if(vce.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function Cce(t){return t!==null?t:[]}var Ece=new Yr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:yce,construct:Cce}),Sce=Object.prototype.toString;function xce(t){if(t===null)return!0;var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(r=s[e],Sce.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[e]=[o[0],r[o[0]]]}return!0}function _ce(t){if(t===null)return[];var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1)r=s[e],o=Object.keys(r),i[e]=[o[0],r[o[0]]];return i}var Dce=new Yr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:xce,construct:_ce}),Ice=Object.prototype.hasOwnProperty;function Pce(t){if(t===null)return!0;var e,n=t;for(e in n)if(Ice.call(n,e)&&n[e]!==null)return!1;return!0}function bce(t){return t!==null?t:{}}var Tce=new Yr("tag:yaml.org,2002:set",{kind:"mapping",resolve:Pce,construct:bce}),hq=ice.extend({implicit:[lce,fce],explicit:[gce,Ece,Dce,Tce]}),Ol=Object.prototype.hasOwnProperty,Cx=1,gq=2,vq=3,Ex=4,ZR=1,Rce=2,XY=3,kce=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Nce=/[\x85\u2028\u2029]/,Lce=/[,\[\]\{\}]/,wq=/^(?:!|!!|![a-z\-]+!)$/i,yq=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ZY(t){return Object.prototype.toString.call(t)}function Gs(t){return t===10||t===13}function Nf(t){return t===9||t===32}function Lo(t){return t===9||t===32||t===10||t===13}function yp(t){return t===44||t===91||t===93||t===123||t===125}function Ace(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Fce(t){return t===120?2:t===117?4:t===85?8:0}function Oce(t){return 48<=t&&t<=57?t-48:-1}function QY(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Uce(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Cq=new Array(256),Eq=new Array(256);for(kf=0;kf<256;kf++)Cq[kf]=QY(kf)?1:0,Eq[kf]=QY(kf);var kf;function $ce(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||hq,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Sq(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Dae(n),new No(e,n)}function Pe(t,e){throw Sq(t,e)}function Sx(t,e){t.onWarning&&t.onWarning.call(null,Sq(t,e))}var eq={YAML:function(e,n,r){var o,i,s;e.version!==null&&Pe(e,"duplication of %YAML directive"),r.length!==1&&Pe(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Pe(e,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Pe(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Sx(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var o,i;r.length!==2&&Pe(e,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],wq.test(o)||Pe(e,"ill-formed tag handle (first argument) of the TAG directive"),Ol.call(e.tagMap,o)&&Pe(e,'there is a previously declared suffix for "'+o+'" tag handle'),yq.test(i)||Pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Pe(e,"tag prefix is malformed: "+i)}e.tagMap[o]=i}};function Fl(t,e,n,r){var o,i,s,a;if(e<n){if(a=t.input.slice(e,n),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Pe(t,"expected valid JSON character");else kce.test(a)&&Pe(t,"the stream contains non-printable characters");t.result+=a}}function tq(t,e,n,r){var o,i,s,a;for(Yn.isObject(n)||Pe(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)i=o[s],Ol.call(e,i)||(e[i]=n[i],r[i]=!0)}function Cp(t,e,n,r,o,i,s,a,c){var l,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&Pe(t,"nested arrays are not supported inside keys"),typeof o=="object"&&ZY(o[l])==="[object Object]"&&(o[l]="[object Object]");if(typeof o=="object"&&ZY(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)tq(t,e,i[l],n);else tq(t,e,i,n);else!t.json&&!Ol.call(n,o)&&Ol.call(e,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,Pe(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):e[o]=i,delete n[o];return e}function ik(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function bn(t,e,n){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;Nf(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(Gs(o))for(ik(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&Sx(t,"deficient indentation"),r}function Dx(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Lo(n)))}function sk(t,e){e===1?t.result+=" ":e>1&&(t.result+=Yn.repeat(`
`,e-1))}function Mce(t,e,n){var r,o,i,s,a,c,l,u,f=t.kind,m=t.result,d;if(d=t.input.charCodeAt(t.position),Lo(d)||yp(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(o=t.input.charCodeAt(t.position+1),Lo(o)||n&&yp(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;d!==0;){if(d===58){if(o=t.input.charCodeAt(t.position+1),Lo(o)||n&&yp(o))break}else if(d===35){if(r=t.input.charCodeAt(t.position-1),Lo(r))break}else{if(t.position===t.lineStart&&Dx(t)||n&&yp(d))break;if(Gs(d))if(c=t.line,l=t.lineStart,u=t.lineIndent,bn(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Fl(t,i,s,!1),sk(t,t.line-c),i=s=t.position,a=!1),Nf(d)||(s=t.position+1),d=t.input.charCodeAt(++t.position)}return Fl(t,i,s,!1),t.result?!0:(t.kind=f,t.result=m,!1)}function Hce(t,e){var n,r,o;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Fl(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,o=t.position;else return!0;else Gs(n)?(Fl(t,r,o,!0),sk(t,bn(t,!1,e)),r=o=t.position):t.position===t.lineStart&&Dx(t)?Pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Pe(t,"unexpected end of the stream within a single quoted scalar")}function Bce(t,e){var n,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Fl(t,n,t.position,!0),t.position++,!0;if(a===92){if(Fl(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),Gs(a))bn(t,!1,e);else if(a<256&&Cq[a])t.result+=Eq[a],t.position++;else if((s=Fce(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=Ace(a))>=0?i=(i<<4)+s:Pe(t,"expected hexadecimal character");t.result+=Uce(i),t.position++}else Pe(t,"unknown escape sequence");n=r=t.position}else Gs(a)?(Fl(t,n,r,!0),sk(t,bn(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Dx(t)?Pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Pe(t,"unexpected end of the stream within a double quoted scalar")}function Wce(t,e){var n=!0,r,o,i,s=t.tag,a,c=t.anchor,l,u,f,m,d,p=Object.create(null),h,g,v,C;if(C=t.input.charCodeAt(t.position),C===91)u=93,d=!1,a=[];else if(C===123)u=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),C=t.input.charCodeAt(++t.position);C!==0;){if(bn(t,!0,e),C=t.input.charCodeAt(t.position),C===u)return t.position++,t.tag=s,t.anchor=c,t.kind=d?"mapping":"sequence",t.result=a,!0;n?C===44&&Pe(t,"expected the node content, but found ','"):Pe(t,"missed comma between flow collection entries"),g=h=v=null,f=m=!1,C===63&&(l=t.input.charCodeAt(t.position+1),Lo(l)&&(f=m=!0,t.position++,bn(t,!0,e))),r=t.line,o=t.lineStart,i=t.position,Ep(t,e,Cx,!1,!0),g=t.tag,h=t.result,bn(t,!0,e),C=t.input.charCodeAt(t.position),(m||t.line===r)&&C===58&&(f=!0,C=t.input.charCodeAt(++t.position),bn(t,!0,e),Ep(t,e,Cx,!1,!0),v=t.result),d?Cp(t,a,p,g,h,v,r,o,i):f?a.push(Cp(t,null,p,g,h,v,r,o,i)):a.push(h),bn(t,!0,e),C=t.input.charCodeAt(t.position),C===44?(n=!0,C=t.input.charCodeAt(++t.position)):n=!1}Pe(t,"unexpected end of the stream within a flow collection")}function jce(t,e){var n,r,o=ZR,i=!1,s=!1,a=e,c=0,l=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)ZR===o?o=f===43?XY:Rce:Pe(t,"repeat of a chomping mode identifier");else if((u=Oce(f))>=0)u===0?Pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Pe(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Nf(f)){do f=t.input.charCodeAt(++t.position);while(Nf(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Gs(f)&&f!==0)}for(;f!==0;){for(ik(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Gs(f)){c++;continue}if(t.lineIndent<a){o===XY?t.result+=Yn.repeat(`
`,i?1+c:c):o===ZR&&i&&(t.result+=`
`);break}for(r?Nf(f)?(l=!0,t.result+=Yn.repeat(`
`,i?1+c:c)):l?(l=!1,t.result+=Yn.repeat(`
`,c+1)):c===0?i&&(t.result+=" "):t.result+=Yn.repeat(`
`,c):t.result+=Yn.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,n=t.position;!Gs(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Fl(t,n,t.position,!1)}return!0}function nq(t,e){var n,r=t.tag,o=t.anchor,i=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Lo(s))));){if(a=!0,t.position++,bn(t,!0,-1)&&t.lineIndent<=e){i.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,Ep(t,e,vq,!1,!0),i.push(t.result),bn(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)Pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function Vce(t,e,n){var r,o,i,s,a,c,l=t.tag,u=t.anchor,f={},m=Object.create(null),d=null,p=null,h=null,g=!1,v=!1,C;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),C=t.input.charCodeAt(t.position);C!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(C===63||C===58)&&Lo(r))C===63?(g&&(Cp(t,f,m,d,p,null,s,a,c),d=p=h=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,C=r;else{if(s=t.line,a=t.lineStart,c=t.position,!Ep(t,n,gq,!1,!0))break;if(t.line===i){for(C=t.input.charCodeAt(t.position);Nf(C);)C=t.input.charCodeAt(++t.position);if(C===58)C=t.input.charCodeAt(++t.position),Lo(C)||Pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Cp(t,f,m,d,p,null,s,a,c),d=p=h=null),v=!0,g=!1,o=!1,d=t.tag,p=t.result;else if(v)Pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)Pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===i||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),Ep(t,e,Ex,!0,o)&&(g?p=t.result:h=t.result),g||(Cp(t,f,m,d,p,h,s,a,c),d=p=h=null),bn(t,!0,-1),C=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>e)&&C!==0)Pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&Cp(t,f,m,d,p,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=f),v}function Yce(t){var e,n=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Pe(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(n=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",e=t.position,n){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Lo(s);)s===33&&(r?Pe(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),wq.test(o)||Pe(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),Lce.test(i)&&Pe(t,"tag suffix cannot contain flow indicator characters")}i&&!yq.test(i)&&Pe(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Pe(t,"tag name is malformed: "+i)}return n?t.tag=i:Ol.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Pe(t,'undeclared tag handle "'+o+'"'),!0}function qce(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Pe(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Lo(n)&&!yp(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Gce(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Lo(r)&&!yp(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Ol.call(t.anchorMap,n)||Pe(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],bn(t,!0,-1),!0}function Ep(t,e,n,r,o){var i,s,a,c=1,l=!1,u=!1,f,m,d,p,h,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=Ex===n||vq===n,r&&bn(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;Yce(t)||qce(t);)bn(t,!0,-1)?(l=!0,a=i,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||o),(c===1||Ex===n)&&(Cx===n||gq===n?h=e:h=e+1,g=t.position-t.lineStart,c===1?a&&(nq(t,g)||Vce(t,g,h))||Wce(t,h)?u=!0:(s&&jce(t,h)||Hce(t,h)||Bce(t,h)?u=!0:Gce(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Pe(t,"alias node should not have any properties")):Mce(t,h,Cx===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&nq(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,m=t.implicitTypes.length;f<m;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ol.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,m=d.length;f<m;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||Pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function zce(t){var e=t.position,n,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(bn(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),n=t.position;s!==0&&!Lo(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),o=[],r.length<1&&Pe(t,"directive name must not be less than one character in length");s!==0;){for(;Nf(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Gs(s));break}if(Gs(s))break;for(n=t.position;s!==0&&!Lo(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(n,t.position))}s!==0&&ik(t),Ol.call(eq,r)?eq[r](t,r,o):Sx(t,'unknown document directive "'+r+'"')}if(bn(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,bn(t,!0,-1)):i&&Pe(t,"directives end mark is expected"),Ep(t,t.lineIndent-1,Ex,!1,!0),bn(t,!0,-1),t.checkLineBreaks&&Nce.test(t.input.slice(e,t.position))&&Sx(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Dx(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,bn(t,!0,-1));return}if(t.position<t.length-1)Pe(t,"end of the stream or a document separator is expected");else return}function xq(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new $ce(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Pe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)zce(n);return n.documents}function Kce(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=xq(t,n);if(typeof e!="function")return r;for(var o=0,i=r.length;o<i;o+=1)e(r[o])}function Jce(t,e){var n=xq(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new No("expected a single document in the stream, but found more")}}var Xce=Kce,Zce=Jce,_q={loadAll:Xce,load:Zce},Dq=Object.prototype.toString,Iq=Object.prototype.hasOwnProperty,ak=65279,Qce=9,Mv=10,ele=13,tle=32,nle=33,rle=34,ek=35,ole=37,ile=38,sle=39,ale=42,Pq=44,cle=45,xx=58,lle=61,ule=62,fle=63,dle=64,bq=91,Tq=93,mle=96,Rq=123,ple=124,kq=125,qr={};qr[0]="\\0";qr[7]="\\a";qr[8]="\\b";qr[9]="\\t";qr[10]="\\n";qr[11]="\\v";qr[12]="\\f";qr[13]="\\r";qr[27]="\\e";qr[34]='\\"';qr[92]="\\\\";qr[133]="\\N";qr[160]="\\_";qr[8232]="\\L";qr[8233]="\\P";var hle=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],gle=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function vle(t,e){var n,r,o,i,s,a,c;if(e===null)return{};for(n={},r=Object.keys(e),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&Iq.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[s]=a;return n}function wle(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new No("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Yn.repeat("0",r-e.length)+e}var yle=1,Hv=2;function Cle(t){this.schema=t.schema||hq,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Yn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=vle(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Hv:yle,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function rq(t,e){for(var n=Yn.repeat(" ",e),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=n),i+=s;return i}function tk(t,e){return`
`+Yn.repeat(" ",t.indent*e)}function Ele(t,e){var n,r,o;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(o=t.implicitTypes[n],o.resolve(e))return!0;return!1}function _x(t){return t===tle||t===Qce}function Bv(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ak||65536<=t&&t<=1114111}function oq(t){return Bv(t)&&t!==ak&&t!==ele&&t!==Mv}function iq(t,e,n){var r=oq(t),o=r&&!_x(t);return(n?r:r&&t!==Pq&&t!==bq&&t!==Tq&&t!==Rq&&t!==kq)&&t!==ek&&!(e===xx&&!o)||oq(e)&&!_x(e)&&t===ek||e===xx&&o}function Sle(t){return Bv(t)&&t!==ak&&!_x(t)&&t!==cle&&t!==fle&&t!==xx&&t!==Pq&&t!==bq&&t!==Tq&&t!==Rq&&t!==kq&&t!==ek&&t!==ile&&t!==ale&&t!==nle&&t!==ple&&t!==lle&&t!==ule&&t!==sle&&t!==rle&&t!==ole&&t!==dle&&t!==mle}function xle(t){return!_x(t)&&t!==xx}function Uv(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function Nq(t){var e=/^\n* /;return e.test(t)}var Lq=1,nk=2,Aq=3,Fq=4,wp=5;function _le(t,e,n,r,o,i,s,a){var c,l=0,u=null,f=!1,m=!1,d=r!==-1,p=-1,h=Sle(Uv(t,0))&&xle(Uv(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=Uv(t,c),!Bv(l))return wp;h=h&&iq(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=Uv(t,c),l===Mv)f=!0,d&&(m=m||c-p-1>r&&t[p+1]!==" ",p=c);else if(!Bv(l))return wp;h=h&&iq(l,u,a),u=l}m=m||d&&c-p-1>r&&t[p+1]!==" "}return!f&&!m?h&&!s&&!o(t)?Lq:i===Hv?wp:nk:n>9&&Nq(t)?wp:s?i===Hv?wp:nk:m?Fq:Aq}function Dle(t,e,n,r,o){t.dump=function(){if(e.length===0)return t.quotingType===Hv?'""':"''";if(!t.noCompatMode&&(hle.indexOf(e)!==-1||gle.test(e)))return t.quotingType===Hv?'"'+e+'"':"'"+e+"'";var i=t.indent*Math.max(1,n),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&n>=t.flowLevel;function c(l){return Ele(t,l)}switch(_le(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!r,o)){case Lq:return e;case nk:return"'"+e.replace(/'/g,"''")+"'";case Aq:return"|"+sq(e,t.indent)+aq(rq(e,i));case Fq:return">"+sq(e,t.indent)+aq(rq(Ile(e,s),i));case wp:return'"'+Ple(e)+'"';default:throw new No("impossible error: invalid scalar style")}}()}function sq(t,e){var n=Nq(t)?String(e):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return n+i+`
`}function aq(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Ile(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,n.lastIndex=l,cq(t.slice(0,l),e)}(),o=t[0]===`
`||t[0]===" ",i,s;s=n.exec(t);){var a=s[1],c=s[2];i=c[0]===" ",r+=a+(!o&&!i&&c!==""?`
`:"")+cq(c,e),o=i}return r}function cq(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,o=0,i,s=0,a=0,c="";r=n.exec(t);)a=r.index,a-o>e&&(i=s>o?s:a,c+=`
`+t.slice(o,i),o=i+1),s=a;return c+=`
`,t.length-o>e&&s>o?c+=t.slice(o,s)+`
`+t.slice(s+1):c+=t.slice(o),c.slice(1)}function Ple(t){for(var e="",n=0,r,o=0;o<t.length;n>=65536?o+=2:o++)n=Uv(t,o),r=qr[n],!r&&Bv(n)?(e+=t[o],n>=65536&&(e+=t[o+1])):e+=r||wle(n);return e}function ble(t,e,n){var r="",o=t.tag,i,s,a;for(i=0,s=n.length;i<s;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(oc(t,e,a,!1,!1)||typeof a>"u"&&oc(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function lq(t,e,n,r){var o="",i=t.tag,s,a,c;for(s=0,a=n.length;s<a;s+=1)c=n[s],t.replacer&&(c=t.replacer.call(n,String(s),c)),(oc(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&oc(t,e+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=tk(t,e)),t.dump&&Mv===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function Tle(t,e,n){var r="",o=t.tag,i=Object.keys(n),s,a,c,l,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=i[s],l=n[c],t.replacer&&(l=t.replacer.call(n,c,l)),oc(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),oc(t,e,l,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function Rle(t,e,n,r){var o="",i=t.tag,s=Object.keys(n),a,c,l,u,f,m;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new No("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)m="",(!r||o!=="")&&(m+=tk(t,e)),l=s[a],u=n[l],t.replacer&&(u=t.replacer.call(n,l,u)),oc(t,e+1,l,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&Mv===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,f&&(m+=tk(t,e)),oc(t,e+1,u,!0,f)&&(t.dump&&Mv===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,o+=m));t.tag=i,t.dump=o||"{}"}function uq(t,e,n){var r,o,i,s,a,c;for(o=n?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,Dq.call(a.represent)==="[object Function]")r=a.represent(e,c);else if(Iq.call(a.represent,c))r=a.represent[c](e,c);else throw new No("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}function oc(t,e,n,r,o,i,s){t.tag=null,t.dump=n,uq(t,n,!1)||uq(t,n,!0);var a=Dq.call(t.dump),c=r,l;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,m;if(u&&(f=t.duplicates.indexOf(n),m=f!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(o=!1),m&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&m&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(Rle(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Tle(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?lq(t,e-1,t.dump,o):lq(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(ble(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&Dle(t,t.dump,e,i,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new No("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function kle(t,e){var n=[],r=[],o,i;for(rk(t,n,r),o=0,i=r.length;o<i;o+=1)e.duplicates.push(n[r[o]]);e.usedDuplicates=new Array(i)}function rk(t,e,n){var r,o,i;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(e.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)rk(t[o],e,n);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)rk(t[r[o]],e,n)}function Nle(t,e){e=e||{};var n=new Cle(e);n.noRefs||kle(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),oc(n,0,r,!0,!0)?n.dump+`
`:""}var Lle=Nle,Ale={dump:Lle};function ck(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Wv=_q.load,w_e=_q.loadAll,y_e=Ale.dump;var C_e=ck("safeLoad","load"),E_e=ck("safeLoadAll","loadAll"),S_e=ck("safeDump","dump");var us=Y(require("path")),Bq=Y(require("os")),Wq=Y(require("crypto")),jq=Y(YE());var jv=Y(require("path")),$q=Y(require("os"));var Uq=Y(require("crypto"));var ls={async readDocument(t){switch(t.scheme){case"file":try{return(await st(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,n){switch(t.scheme){case"file":let r=xo(n,e);await Dg(t.fsPath,r);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ke=class t{constructor(e,n=t.scheme){this.fileHost=e;this.scheme=n}static scheme="vscode-fileHost";async readDocument(e){switch(e.scheme){case this.scheme:try{return(await this.fileHost.readFile(_e(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case this.scheme:let o=xo(r,n);await this.fileHost.writeFile(_e(e,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},oo=class t{constructor(e){this.shellServer=e}static scheme="vscode-remote";static nonce;async readDocument(e){switch(e.scheme){case t.scheme:try{let{stdout:n}=await this.shellServer.exec(`cat ${e.path}`);return n}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case t.scheme:try{t.nonce||(t.nonce=Uq.randomUUID());let o=xo(r,n),i=`EOF-${t.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${e.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},uk=class{constructor(e){this.documents=e}async readDocument(e){let n=this.documents[e.scheme];if(!n)throw new Error(`Unsupported scheme: ${e.toString()}`);return n.readDocument(e)}async applyEdits(e,n,r){let o=this.documents[e.scheme];if(!o)throw new Error(`Unsupported scheme: ${e.toString()}`);return o.applyEdits(e,n,r)}};function cr(t,e){let n={file:ls,[Ke.scheme]:new Ke(t)};return e&&(n[oo.scheme]="readFile"in e?new Ke(e,oo.scheme):new oo(e)),new uk(n)}var lk=new Map;async function fk(t,e){let n=t.toString(),r=lk.get(n);if(r||lk.set(n,r=[]),r.push(e),r.length===1){for(;r.length;)await r[0](),r.shift();lk.delete(n)}}function _e(t,e){let n;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===Ke.scheme)?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,e==="win32"&&(n=n.replace(/\//g,"\\"),n[0]==="\\"&&n[1]!=="\\"&&(n=`C:${n}`)),n}function Tn(t,e,n){let r=t==="win32"?"/"+n.replace(/\\/g,"/"):n;return e.with({path:r})}function Ul(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function Vv(t,e){let n=t.normalize(e);return Ul(t,"").includes(n)}async function Lf(t,e){let n=Ul(t.path,e);for(let r of n)if(await t.isFile(r))return ye.file(r).with({scheme:Ke.scheme})}async function Mq(t){let e=Ul(jv,t);for(let n of e)if(await yr(n))return n}var ic=`{${$q.EOL}}`;async function Ui(t,e,n,r){e.scheme==="file"&&await es(jv.dirname(e.fsPath)),await t.applyEdits(e,n,r)}function Af(t){let e=jv.posix.dirname(t.path);return t.with({path:e})}var Yv=require("string_decoder");function qv(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e={...t},n=e.customizations||(e.customizations={}),r=n.vscode||(n.vscode={});return e.extensions&&(r.extensions=(r.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(r.settings={...e.settings,...r.settings||{}},delete e.settings),e.devPort!==void 0&&r.devPort===void 0&&(r.devPort=e.devPort,delete e.devPort),e}function dk(t,e,n){return Ix(t,e.configFilePath,n)}function Ix(t,e,n){let r=Af(e);return e.with({path:us.posix.resolve(r.path,t.platform==="win32"&&e.scheme!==oo.scheme?(us.win32.isAbsolute(n)?"/":"")+n.replace(/\\/g,"/"):n)})}function Ao(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Px(t){return t&&(Ao(t)||"image"in t||"dockerComposeFile"in t)}function Ff(t,e){return dk(t,e,Ole(e))}function Ole(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function $l(t,e,n,r){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(o=>_e(dk(t,e,o),t.platform))}else if(typeof e.dockerComposeFile=="string")return[_e(dk(t,e,e.dockerComposeFile),t.platform)];if(r){let o=n==null?void 0:n.COMPOSE_FILE;if(o)return o.split(t.path.delimiter).map(a=>t.path.resolve(r,a));try{let a=t.path.join(r,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(f=>t.path.resolve(r,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[t.path.resolve(r,"docker-compose.yml")],s=t.path.resolve(r,"docker-compose.override.yml");return await t.isFile(s)&&i.push(s),i}return[]}async function ri(t,e){let{cliHost:n,postCreate:r,output:o}=t;o.write(`Running Dev Containers CLI:   ${e.join(" ")}
`);let i=await Ule(t),s=Gv(n),a;try{await $le({exec:n.exec,cwd:t.cwd||i.cwd,cmd:s.cmd,args:[...s.args,i.script,...e],env:await mk(t,s.cmd),stdin:r==null?void 0:r.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>o.event(c)}),o.write(a?JSON.stringify(a,void 0,4):"(No dev container CLI standard out)",1),o.write("Dev Containers CLI completed",1)}catch(c){throw c.data=a,c}return a}async function Ule(t){let{cliHost:e,extensionPath:n,output:r}=t,o=us.join(n,"dist","spec-node","devContainersSpecCLI.js"),i=e.type==="local"?n:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?o:e.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","remote"].indexOf(e.type)!==-1){let a="Checking for Dev Containers CLI",c=r.start(a),l=await e.isFile(s);if(r.stop(a,c),!l){let u="Copying Dev Containers CLI",f=r.start(u),m=`${i}-${Wq.randomUUID()}`,d=e.path.join(m,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(d)),await Promise.all([Hq(us.join(n,"package.json"),e,e.path.join(m,"package.json")),Hq(o,e,d),zv(us.join(n,"scripts"),e,e.path.join(m,"scripts"),r)]),await e.rename(m,i),r.stop(u,f)}}return{cwd:i,script:s}}function Gv(t){if(t.type==="local")return _l?{cmd:process.argv[0],args:[]}:{cmd:process.argv[0],args:[]};if(t.nodeExecutable)return{cmd:t.nodeExecutable,args:[]};throw new Error("Node executable required")}async function $le(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((f,m)=>{let d=new Yv.StringDecoder,p="";u.stdout.on("data",C=>{p+=d.write(C);let w=p.split(`
`);p=w.pop();for(let y of w)if(y.trim())try{c(JSON.parse(y))}catch{a.write(y)}}),u.stdout.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let h=new Yv.StringDecoder,g="";u.stderr.on("data",C=>{g+=h.write(C);let w=g.split(`
`);g=w.pop();for(let y of w)if(y.trim())try{l(JSON.parse(y))}catch{a.write(y)}}),u.stderr.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let v=[];u.exit.then(({code:C})=>{try{v.forEach(w=>w.dispose()),C?(a.write(`Exit code ${C}`),m({message:`Command failed: ${n} ${(r||[]).join(" ")}`,code:C})):f()}catch(w){m(w)}},m),typeof s=="function"&&v.push(s(C=>u.stdin.write(C)))})}async function mk(t,e){let{cliHost:n,env:r,appRoot:o}=t,i=await n.locateCertificatesFile();return{...r,...n.type==="local"?o?{NODE_PATH:`${n.path.join(o,"node_modules.asar")}${us.delimiter}${n.path.join(o,"node_modules")}`}:void 0:n.type==="container"?void 0:{NODE_PATH:n.path.join(n.path.dirname(e),"node_modules")},...i?{NODE_EXTRA_CA_CERTS:i}:{},..._l?{TS_NODE_PROJECT:void 0}:{}}}async function Hq(t,e,n){await e.writeFile(n,await st(t))}async function zv(t,e,n,r){await e.mkdirp(n);let o=jq.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),i=new Promise((l,u)=>{o.on("error",u),o.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:n,output:r}),a=new Yv.StringDecoder;s.stdout.on("data",l=>{r.write(a.write(l))});let c=new Yv.StringDecoder;s.stderr.on("data",l=>{r.write(ot(c.write(l)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function io(){return us.join(Bq.tmpdir(),process.platform==="linux"?`vsch-${await QS()}`:"vsch")}function Mle(){return{contentHashes:{}}}async function Tx(t,e,n,r){let o=t.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await pk(e,n,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(d=>u.delete(d));let f=new Set(s);l.forEach(d=>f.delete(d));let m=[];for(let d of s)d in c&&c[d]!==i[d]&&m.push(d);if(u.size||f.size||m.length){let d=await pk(e,n,r);(async()=>{await t.containerOutdated([...u,...f,...m].sort())==="ignore"&&await t.updateConfigurationState(d)})().catch(console.error)}}else await Yq(t,e,n,r)}async function Rx(t,e,n,r,o){let i="Updating configuration state",s=o.start(i);await Yq(t,e,n,r),o.stop(i,s)}async function Yq(t,e,n,r){let o=await pk(e,n,r);await t.updateConfigurationState(o)}async function pk(t,e,n){let r=Mle();bx(r,Kv.posix.basename(n.configFilePath.path),JSON.stringify({...n,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let o=Af(n.configFilePath).path;if(Ao(n)){let i=Ff(t,n),s=await e.readDocument(i);s!==void 0&&bx(r,Kv.posix.relative(o,i.path),s)}if("dockerComposeFile"in n){let i=await $l(t,n,t.env,t.cwd),s=await Promise.all(i.map(async a=>{let c=ye.file(a).with({scheme:Ke.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&bx(r,Kv.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=Hle(l),f=u&&u.services,m=f&&f[n.service],d=m&&m.build,p=d&&(typeof d=="string"?d:d.context);if(p){let h=Ix(t,c,p),g=qq(h,d.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&bx(r,Kv.posix.relative(o,g.path),v)}if(m&&(m.image||m.build))break}}}return r}function Hle(t){try{return Wv(t)}catch{return{}}}function bx(t,e,n){let r=Vq.createHash("sha256").update(n).digest("hex");t.contentHashes[e]=r}var ps=Y(require("path")),Xs=Y(require("crypto"));var Vl=Y(Or());var Gr=Y(require("path")),xk=Y(require("crypto"));var Uf=Y(Or());var Xq=Y(require("net")),yk=Y(require("path"));var hk=Y(require("path")),vk=Y(require("http")),Gq=Y(require("os")),zq=Y(require("crypto"));async function Kq(t,e){let n=await wk(t),r=new gk(n,e);return r.listen(),r}var gk=class{constructor(e,n){this.ipcHandlePath=e;this.server=vk.createServer((r,o)=>{Promise.resolve(n(r,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",r=>console.error(r))}server;listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function Jq(t){return new Promise((e,n)=>{let r=[];t.setEncoding("utf8"),t.on("data",o=>r.push(o)),t.on("error",o=>n(o)),t.on("end",()=>{let o=JSON.parse(r.join(""));e(o)})})}async function wk(t){let e=zq.randomUUID(),n=`${t}-${e}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?hk.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):hk.join(Gq.tmpdir(),`${n}.sock`)}var kx=class{messages=[];dequeueRequest;push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let n=this.messages;return this.messages=[],n}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((n,r)=>{this.dequeueRequest={resolve:n,reject:r},typeof e=="number"&&setTimeout(r,e)})}};async function Ml(t,e,n){if(process.env.SSH_ASKPASS)return{};let r=await wk("ssh-askpass");return await new Promise((o,i)=>{Xq.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{n.write(`SSH askpass request: ${a}`,1);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(r,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:yk.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_MAIN:yk.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var Ble=0;function lr(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++Ble)}:{}}async function oi(t,e){return(await fs(t,[e]))[0]}async function fs(t,e){let n=await Lx(t,"container",e);for(let r of n){r.Ports=[];let o=r.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:l,HostPort:u}=c;r.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return n}async function Zq(t,e){return(await Lx(t,"image",[e]))[0]}async function Nx(t,e){return(await Lx(t,"volume",[e]))[0]}async function Of(t,e){return Lx(t,"volume",e)}async function Lx(t,e,n){if(!n.length)return[];let r=Mi(t),o=await ee({...r,args:(r.args||[]).concat(["inspect","--type",e,...n])});try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Hl(t,e=!1,n=[]){let r=[];e&&r.push("-a");for(let i of n)r.push("--filter",`label=${i}`);return(await Qe(t,"ps","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Fo(t,e=[]){let n=[];for(let o of e)n.push("--filter",`label=${o}`);return(await Qe(t,"volume","ls","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function Bl(t,e=[]){return(await Qe(t,"volume","ls","-q","-f","dangling=true",...e.map(r=>["-f",`label=${r}`]).flat())).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function Sp(t,e,n){let r=[];for(let o of n||[])r.push("--label",o);await Qe(t,"volume","create",...r,e)}async function $i(t,e){var o;let n,r;try{for(let i=0,s=7;i<s;i++)try{return await Qe(t,"rm","-f",e)}catch(a){let c=((o=a==null?void 0:a.stderr)==null?void 0:o.toString().toLowerCase())||"";if(i===s-1||!c.includes("already in progress"))throw a;r||(n=await Ax(t,{container:[e],event:["destroy"]}),r=new Promise(l=>{n.stdout.on("data",()=>{l(),n.terminate(),r=new Promise(()=>{})})})),await Promise.race([r,Bt(1e3)])}}finally{n&&n.terminate()}throw new Error("Unreachable")}async function Ax(t,e){let{exec:n,cmd:r,args:o,env:i,output:s}=Mi(t),a=[];for(let m in e)for(let d of e[m])a.push("--filter",`${m}=${d}`);let c="isPodman"in t&&t.isPodman?"json":"{{json .}}",l=(o||[]).concat(["events","--format",c,...a]),u=await n({cmd:r,args:l,env:i,output:s}),f=[];return u.stderr.on("data",m=>f.push(m)),u.exit.then(({code:m,signal:d})=>{f.length&&s.write(ot(Buffer.concat(f).toString())),(m||d&&d!=="SIGKILL")&&s.write(ot(`Docker events terminated (code: ${m}, signal: ${d}).`))},m=>{s.write(ot(m&&(m.stack||m.message)))}),u}async function Qe(t,...e){let n=Mi(t);return ee({...n,args:(n.args||[]).concat(e)})}async function Ck(t){var e;try{let{stdout:n}=await Qe(t,"context","ls","--format","{{json .}}"),r=`[${n.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(r).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function Qq(t){try{let{stdout:e}=await Qe(t,"-v");return e.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function e3(t,...e){let n=r3(t);return Ni({...n,args:(n.args||[]).concat(e)})}async function Jv(t,...e){let n=Mi(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return ee({...n,args:(n.args||[]).concat(e)})}function ds(t,e,n){return async function(r){let{exec:o,cmd:i,args:s,env:a}=Mi(t),{argsPrefix:c,args:l}=n3(e,n,r,!1);return o({cmd:i,args:(s||[]).concat(l),env:a,output:t3(r.output,i,c)})}}async function zs(t,e,n,r){if(!await r("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:l}=r3(t),{argsPrefix:u,args:f}=n3(e,n,i,s.isTTY!==!1);return s({cmd:a,args:(c||[]).concat(f),env:l,output:t3(i.output,a,u)})}}function t3(t,e,n){return Wle(t,`Run: ${e} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function Wle(t,e,n){let r=new RegExp(Tf(e),"g");return sn({...t,get dimensions(){return t.dimensions},event:i=>t.event("text"in i?{...i,text:i.text.replace(r,n)}:i)})}function n3(t,e,n,r){let{env:o,cwd:i,cmd:s,args:a}=n,c=["exec","-i"];r&&c.push("-t"),e&&c.push("-u",e),o&&Object.keys(o).forEach(u=>c.push("-e",`${u}=${o[u]}`)),i&&c.push("-w",i),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function Mi(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...lr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...lr(t.env)},output:t.output}:{...t,env:{...t.env,...lr(t.env)}}}function r3(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...lr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...lr(t.env)},output:t.output}:{...t,env:{...t.env,...lr(t.env)}}}var o3=Y(Or()),jle="com.docker.compose.project";async function i3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var v,C;let{common:p}=t,{cliHost:h}=e,g;try{let w=await $l(h,n,h.env,h.cwd),y=h.path.join(h.cwd,".env"),S=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await h.isFile(y)?y:void 0,D=!c,x=r.remoteUser,A=Vle(n);g=await _p(t,s.Id,A,x),u&&c&&g.user!=="root"&&(g.launchRootShellServer?await yx(g,g.launchRootShellServer,A,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let F=await Ox(p,c,s,A,g),k=cr(h,g.shellServer);D||await Rx(t.configurationTracking,h,k,n,p.output);let E=r.shutdownAction;E==="stopContainer"&&(E="stopCompose");let _={cwd:o,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:p.env,containerId:s.Id,user:g.user,sessionId:p.sessionId,shutdownAction:E,projectName:Xv(s),composeFiles:w,envFile:S,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:T,doneWithDocuments:I}=await Fx(t,h,k,"dockerCompose",_,D?n:void 0);p.backgroundTasks.push(I);let b=((C=(((v=r.customizations)==null?void 0:v.vscode)||[]).slice().reverse().find(z=>typeof z.devPort=="number"))==null?void 0:C.devPort)||Ll,{hostOrContainerPort:R,hostPortServer:L,connectionToken:N,remoteEnv:B,serverDownloaded:W}=await Al(p,g,n,r,b,Dp(t,e,g,i,f,s.Id,a,m,d),F);return T.hostPortServer=L,{params:p,properties:g,config:n,resolvedAuthority:{host:sc,port:R,connectionToken:N,extensionHostEnv:B},tunnelInformation:p.isLocalContainer?xp(s):{},dockerParams:t,dockerContainerId:s.Id,serverDownloaded:W}}catch(w){let y=w instanceof Se?w:new Se({description:o3.t("An error occurred setting up the container."),originalError:w});throw s&&(y.manageContainer=!0,y.params=t.common,y.containerId=s.Id,y.dockerParams=t),g&&(y.containerProperties=g),y.config=n,y}}function Vle(t){return t.workspaceFolder||"/"}function Xv(t){let e=(t.Config.Labels||{})[jle];return e||void 0}function ms(t,e,n){let r;return()=>r||(r=(async()=>{let o=!0,i;try{i=(await Jv({...t,cmd:e},"compose","version","--short")).stdout}catch{i=(await Jv({...t,cmd:n},"version","--short")).stdout,o=!1}let s=i.toString().trim();return t.output.write(`Docker Compose version: ${s}`),{version:s,cmd:o?e:n,args:o?["compose"]:[]}})())}var Zv=Y(Or());var Ux=Y(LC()),s3=Y(require("url"));function $x(t,e){return new Promise((n,r)=>{let o=new s3.URL(t.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:t.type,headers:t.headers},s=(o.protocol==="https:"?Ux.https:Ux.http).request(i,a=>{if(a.statusCode<200||a.statusCode>299)r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",r);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>n(Buffer.concat(c)))}});s.on("error",r),t.data&&s.write(t.data),s.end()})}async function Ip(t,e,n,r){var c;let o=await Gle(e,t.output),i=Object.keys(n.features||{}).map(l=>{let u=Yle(o,l);return u?{configFeatureId:l,disallowedFeatureEntry:u}:void 0}).filter(Boolean);if(!i.length)return;let s=!1;if(r){let l=await Wl(t,r);((c=l==null?void 0:l.State)==null?void 0:c.Status)==="running"&&(await Qe(t,"stop","-t","0",l.Id),s=!0)}let a=i[0];throw Ek(a.configFeatureId,a.disallowedFeatureEntry.documentationURL,s)}function Ek(t,e,n){return new Se({description:n?Zv.t("Cannot use the '{0}' feature since it was reported to be problematic. The existing dev container was stopped.",t):Zv.t("Cannot use the '{0}' feature since it was reported to be problematic.",t),detail:Zv.t("Please remove this feature from your devcontainer.json and rebuild the dev container before continuing."),data:{learnMoreUrl:e,reload:!1}})}function Yle(t,e){return t.disallowedFeatures.find(n=>e.startsWith(n.featureIdPrefix)&&(e.length===n.featureIdPrefix.length||"/:@".indexOf(e[n.featureIdPrefix.length])!==-1))}var a3="devcontainers.controlManifest",qle=5*60*1e3;async function Gle(t,e){let n=t.get(a3);return n&&Date.parse(n.timestamp)+qle>Date.now()?n.manifest:zle(t,n==null?void 0:n.manifest,e)}async function zle(t,e,n){let r;try{r=await Kle()}catch(o){n.write(Zv.t("Failed to fetch control manifest: {0}",o.message)),r=e||{disallowedFeatures:[]}}return t.update(a3,{timestamp:new Date().toISOString(),manifest:r}),r}async function Kle(){let t=await $x({type:"GET",url:"https://containers.dev/static/devcontainer-control-manifest.json",headers:{"user-agent":"devcontainers-vscode",accept:"application/json"}}),e=$e(t.toString())||{};return Array.isArray(e.disallowedFeatures)?e.disallowedFeatures=e.disallowedFeatures.filter(n=>typeof n.featureIdPrefix=="string"):e.disallowedFeatures=[],e}async function _k(t,e,n,r){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${_e(e,t.common.cliHost.platform)}).`);let o=t.parsedAuthority;if(!o||un(o))return Jle(t,o,e,n,r);if(so(o))return o.inspectVolume?Sk(t,o):Xle(t,o,e);if(Hf(o))return o.inspectVolume?Sk(t,o):Zle(t,o,e);if(nw(o))return Sk(t,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function Jle(t,e,n,r,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=t,{cliHost:l,env:u,output:f}=i,m=l.cwd,d=t.originalCwd||m,p=e&&It(l.path,yv(e.hostPath)?l.path.join(m,Gr.basename(e.hostPath)):m);e!=null&&e.configFile&&!n&&(n=e.configFile,l.type==="wsl"&&n.scheme==="file"&&(n=ye.from({scheme:Ke.scheme,path:await w3(n,l)})));let h={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:f},g=o?void 0:Dk(d),v=o||[`${tw}=${d}`,`${jx}=${i.product.quality}`];return Ik(t,h,g,v,d,m,n,r,void 0,p,e==null?void 0:e.settings,[],"on")}function Dk(t,e){let n=[`${ew}=${t}`];if(e){let{buildCLIHost:r,configFile:o}=e,i;o.scheme===Ke.scheme||o.scheme==="file"&&r.type==="local"?i=_e(o,r.platform):i=o.toString(),n.push(`${$f}=${i}`)}return n}async function Xle(t,e,n){let{repositoryPath:r,volumeName:o,folder:i}=e,s=si(r);o=await p3(t,s,o);let{labels:a,remoteWorkspaceFolder:c}=h3(s,r,i,o),l=[...a],u=[...a,`${jx}=${t.common.product.quality}`];e.configFile&&!n&&(n=e.configFile);let{containerId:f,shellServer:m,remoteContainersEnv:d,config:p,preInstalledExtensions:h}=await s.cloneAndInitializeRepository(t,e,s,o,n),g=i?s.workspaceFolder(i):s.fullRepositoryName,v=Tk(s,o,i,t.dockerSocketPath);return c3(t,e,n,p,h,f,m,d,o,g,c,l,u,v)}async function Zle(t,e,n){let{common:r}=t,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=r,{volumeName:c,folder:l}=e,u=[`${Bx}=${c}`,`${d3}=${l}`],f=u;await kk(t);let m=Rk(c,Mf(),t.dockerSocketPath),{stdout:d}=await Qe(t,...m),p=d.toString().trim(),h=ds(t,p,"root"),g=await Wt(h,a),v=[],C=Qv(l),w=C,y=await zs(t,p,"root",s),S=no("container",C,{},h,y,()=>{throw new Error("not implemented")},"node",a),{configuration:D}=await Mx({cliHost:S,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:r.package,output:a},C,n,t.common.getLogLevel(),u);return c3(t,e,n,D,v,p,g,{},c,C,w,u,f,m)}async function c3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var A,F,k;let p=It(Gr.posix,l),h=[`type=volume,source=${c},target=${Gr.posix.dirname(p.rootFolderPath)},external=true`],g=await g3(t,i,a,u),v={},{HOME:C,USERPROFILE:w}=t.common.env;C!=null&&C.startsWith("/")&&(v.HOME=C,await s.exec(`test -e "${C}" || (mkdir -p "$(dirname "${C}")" && ln -s ~ "${C}")`)),w!==void 0&&(v.USERPROFILE=w);let y=g.cliHost,S,D,x=Ao(r)||"image"in r;if(x||"dockerComposeFile"in r&&r.workspaceFolder||o.length){let E=o.length?{...r.customizations,vscode:{...(A=r.customizations)==null?void 0:A.vscode,extensions:[...((k=(F=r.customizations)==null?void 0:F.vscode)==null?void 0:k.extensions)||[],...o]}}:r.customizations;D=x?b=>({...b,workspaceFolder:void 0,workspaceMount:"",customizations:E}):b=>({...b,workspaceFolder:p.rootFolderPath,customizations:E});let _=y.path.join(await y.tmpdir(),`devcontainer-${xk.randomUUID()}.json`),T=`EOF-${_}`,I=`${_}_${Date.now()}`;await s.exec(`cat <<'${T}' >${I}
${JSON.stringify({...D(r),configFilePath:void 0})}
${T}
mv ${I} ${_}`),S=ye.from({scheme:Ke.scheme,path:_})}try{return await Ik(t,g,f,m,t.common.cliHost.cwd,y.cwd,n,S,D,p,e.settings,h,"off",d,!0,void 0,v)}finally{Promise.all(t.common.backgroundTasks.filter(E=>typeof E!="function").map(E=>E.catch(()=>{}))).then(()=>$i(t,i))}}async function Sk(t,e){let{common:n,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i}=t,{cliHost:s,env:a,output:c}=n,{volumeName:l}=e,u,f,m=nw(e);m?(u=Wx,f="Inspect Volume"):(u=si(e.repositoryPath).volumeDestination,f="Recovery Container");let d=[`${Pp}=${l}`],p=[`${Pp}=${l}`,`${jx}=${n.product.quality}`],h=await m3(t),g=[`type=volume,source=${l},target=${u},external=true`],v={cliHost:s,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},C=It(s.path,h);return Ik(t,v,d,p,h,h,void 0,void 0,void 0,C,e.settings,g,"never",void 0,!m,f)}async function Ik(t,e,n,r,o,i,s,a,c,l,u,f,m,d,p,h,g){var mt,nt,Dt,yt;let{common:v,userRepositoryConfigurationPaths:C}=t,{output:w,extensionPath:y,appRoot:S,postCreate:D,localWaylandSocket:x}=v,{cliHost:A}=e,F=[...f];if(t.cacheMount==="bind"&&(await es(v.localCacheFolder),F.push(`type=bind,source=${v.localCacheFolder},target=/vscode`)),t.cacheMount==="volume"){let j="vscode";(await Fo(e)).indexOf(j)===-1&&await Sp(e,j),F.push("type=volume,source=vscode,target=/vscode,external=true")}if(x){let j=await TV(void 0);F.push(`type=bind,source=${x},target=${j}`)}let k=s?{uri:s,type:Qle(A,l,s),fileHost:A}:l?await u3(A,l,C,t.common.loadNativeModule,!a,w):void 0,E=k==null?void 0:k.uri;if((E==null?void 0:E.scheme)==="file"&&A.type!=="local"){let j=Gr.dirname(E.fsPath),oe=Gr.basename(E.fsPath),xe=oe===".devcontainer.json"?j:Gr.dirname(j),le=A.path.join(await A.tmpdir(),`devcontainer-config-${xk.randomUUID()}`);await zv(xe,A,le,w),E=ye.from({scheme:Ke.scheme,path:A.path.join(le,...oe===".devcontainer.json"?[oe]:[Gr.basename(j),oe])})}typeof t.removeOnStartup=="string"&&await ii(t,t.removeOnStartup)&&await $i(t,t.removeOnStartup);let _=await Wl(e,r);_&&t.removeOnStartup===!0&&n&&(await $i(t,_.Id),_=void 0);let T=!!_||!n,I=T?r:await eue(t,e,k,n),b=!1,R=t.removeOnStartup!==!0?_||n&&await Wl(e,n):void 0;((mt=R==null?void 0:R.State)==null?void 0:mt.Status)==="running"&&(b=!0,Qe({...Mi(t),print:"continuous"},"exec","-i","-u","root",R.Id,"/bin/sh","-c",`echo "Container already running. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{b=!1,w.write("Keep-alive process ended.")}));let L="",N=v.postCreate.output,B=sn({...N,get dimensions(){return N.dimensions},event:j=>{(j.type==="text"||j.type==="raw")&&(L+=j.text),N.event(j)}}),W={...g,...e.env,...lr(e.env)},z={cliHost:A,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:W,extensionPath:y,appRoot:S,package:v.package,postCreate:D,output:B},V=v.postCreate.output.dimensions||v.output.dimensions,q=v.additionalFeaturesToInstall,ce;try{ce=await ri(z,["up",...e.cliHost.type==="local"&&v.persistedFolder?["--user-data-folder",v.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...v.containerSessionDataFolder?["--container-session-data-folder",v.containerSessionDataFolder]:[],...T?["--container-data-folder",Oi(t.common.product.serverDataFolderName)]:[],...T?["--container-system-data-folder",wx(t.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],"--gpu-availability",t.gpuAvailability,...[].concat(...I.map(j=>["--id-label",j])),"--log-level",Qr(v.getLogLevel()),"--log-format","json",...E?["--config",_e(E,A.platform)]:[],...a?["--override-config",_e(a,A.platform)]:[],"--default-user-env-probe",v.defaultUserEnvProbe,...t.buildNoCache?["--build-no-cache"]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer||!t.common.hostConfig.canRebuildContainer?["--expect-existing-container"]:[],...t.useExperimentalLockfile?["--experimental-lockfile"]:[],...[].concat(...F.map(j=>["--mount",j])),"--skip-post-create","--update-remote-user-uid-default",m,"--mount-workspace-git-root",...V?["--terminal-columns",String(V.columns),"--terminal-rows",String(V.rows)]:[],...Object.keys(q).length>0?["--additional-features",JSON.stringify(q)]:[],"--include-configuration","--include-merged-configuration"])}catch(j){let oe;if((nt=j==null?void 0:j.data)!=null&&nt.disallowedFeatureId){let{disallowedFeatureId:xe,didStopContainer:le,learnMoreUrl:De}=j.data;oe=Ek(xe,De,le),oe.originalError=j}else oe=j instanceof Se?j:new Se({description:Uf.t("An error occurred setting up the container."),originalError:j});throw j&&!(j instanceof Se)&&(j.cmdOutput=L),(Dt=j==null?void 0:j.data)!=null&&Dt.containerId&&(oe.manageContainer=!0,oe.params=t.common,oe.containerId=(yt=j==null?void 0:j.data)==null?void 0:yt.containerId,oe.dockerParams=t),oe.step="devContainersCLIUP",oe}if((ce==null?void 0:ce.outcome)!=="success")throw new Se({description:Uf.t("devcontainer command failed: {0}",JSON.stringify(ce)),step:"devContainersCLIUP"});ce.configuration.configFilePath=ce.mergedConfiguration.configFilePath=ce.configuration.configFilePath&&ye.revive(ce.configuration.configFilePath).with({scheme:A.type==="local"?"file":Ke.scheme});let Be=await ii(t,ce.containerId);if(!Be)return Nk(v.output,"Dev container not found.");b||(b=!0,Qe({...Mi(t),print:"continuous"},"exec","-i","-u","root",Be.Id,"/bin/sh","-c",`echo "New container started. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{b=!1,w.write("Keep-alive process ended.")}));let{configuration:dt,mergedConfiguration:Mt,remoteWorkspaceFolder:Co}=ce,In=bp(v.cliHost.authority,u),gn=h||(dt.name?Uf.t("Dev Container: {0}{1}",dt.name,In):Uf.t("Dev Container{0}",In));v.setWorkspaceName(gn);let Xt;try{if(Ao(dt)||"image"in dt)Xt=await v3(t,e,dt,Mt,Co,o,i,Be,T,!R,p,I,E,a);else if("dockerComposeFile"in dt)Xt=await i3(t,e,dt,Mt,o,i,Be,T,!R,d,p,I,E,a);else throw new Se({description:Uf.t('Dev container config ({0}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.',dt.configFilePath.toString())})}catch(j){let oe=j instanceof Se?j:new Se({description:Uf.t("An error occurred setting up the container."),originalError:j});throw oe.step||(oe.step="setupDevContainer"),oe}if(tue(t,z,dt,a,c,Be,d,i,E,I,Xt.properties),Xt.configLocationType=k==null?void 0:k.type,(k==null?void 0:k.type)==="workspace")if(A.type==="container")Xt.configWorkspaceURI=k.uri.with({scheme:oo.scheme,authority:v.authority});else{let j=_e(k.uri,A.platform),oe=Be.Mounts.find(xe=>Ku(A.path,xe.Source,j));if(oe){let xe=A.path.relative(oe.Source,j),le=A.platform==="win32"?xe.replace(/\\/g,"/"):xe;Xt.configWorkspaceURI=ye.from({scheme:oo.scheme,authority:v.authority,path:Gr.posix.join(oe.Destination,le)})}}return Xt}function Qle(t,e,n){return e&&(n.scheme===Ke.scheme||n.scheme==="file"&&t.type==="local")&&Ku(Gr,e.rootFolderPath,_e(n,t.platform))?"workspace":n.scheme==="file"?"repositoryConfig":"unknown"}async function eue(t,e,n,r){var s;let{cliHost:o}=e,i;if(n){let{uri:a}=n,c;a.scheme===Ke.scheme||a.scheme==="file"&&o.type==="local"?c=_e(a,o.platform):c=a.toString();let l=[...r,`${$f}=${c}`];if(await Wl(e,l))i=l;else{let u=await Wl(e,r);u&&!((s=u.Config.Labels)!=null&&s[$f])?t.removeOnStartup===!0?(await $i(e,u.Id),i=l):i=r:i=l}}else i=r;return i}function tue(t,e,n,r,o,i,s,a,c,l,u){let{common:f}=t,{output:m,extensionPath:d,appRoot:p}=f,{cliHost:h}=e;if(f.hostConfig.canRebuildContainer&&t.watch){let g,v=n.configFilePath;if(v.scheme===Ke.scheme)if(h.type==="local")g=v.with({scheme:"file"});else if(h.type==="container")g=v.with({scheme:oo.scheme,authority:f.authority});else{let C=_e(v,h.platform),w=i.Mounts.find(y=>Ku(h.path,y.Source,C));if(w){let y=h.path.relative(w.Source,C),S=h.platform==="win32"?y.replace(/\\/g,"/"):y;g=ye.from({scheme:oo.scheme,authority:f.authority,path:Gr.posix.join(w.Destination,S)})}}else(v.scheme==="file"||v.scheme===oo.scheme)&&(g=v);if(g){let D=function(){C||(y=w().finally(async()=>{await Bt(h.type==="container"?5e3:1e3),y=void 0,S&&(S=!1,D())}))},C=!1;async function w(){let A=e,F;try{if(h.type==="container"){let{stdout:_}=await Qe(t,...s);F=_.toString().trim();let T=ds(t,F,"root");if(r&&o){let R=r.path,L=`EOF-${R}`,N=`${R}_${Date.now()}`,B=await Wt(T,m),W=$e((await B.exec(`cat '${v.path}'`)).stdout);await B.exec(`cat <<'${L}' >${N}
${JSON.stringify({...o(W),configFilePath:void 0})}
${L}
mv ${N} ${R}`)}let I=await zs(t,F,"root",f.loadNativeModule);A={cliHost:no("container",a,{},T,I,()=>{throw new Error("not implemented")},"node",m),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:d,appRoot:p,package:f.package,output:m}}let k=await Mx(A,a,c,f.getLogLevel(),l,i.Id,r),E=cr(A.cliHost,u.shellServer);await Tx({...t.configurationTracking,containerOutdated:async _=>{C=!0;let T=await t.configurationTracking.containerOutdated(_);return T==="ignore"&&(C=!1),T}},A.cliHost,E,k.configuration)}finally{F&&await $i(t,F)}}let y,S=!1,x=t.watch(g,()=>{y?S=!0:D()});t.common.shutdowns.push(async()=>(await x).dispose())}}}async function Wl(t,e){let n=await Hl(t,!0,e);return(await fs(t,n)).filter(o=>o.State.Status!=="removing")[0]}async function Mx(t,e,n,r,o,i,s){let{cliHost:a,output:c}=t,l=await ri(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],"--workspace-folder",e,...(o||[]).map(u=>["--id-label",u]).flat(),...i?["--container-id",i]:[],"--log-level",Qr(r),"--log-format","json",...n?["--config",_e(n,a.platform)]:[],...s?["--override-config",_e(s,a.platform)]:[],"--mount-workspace-git-root",...c.dimensions?["--terminal-columns",String(c.dimensions.columns),"--terminal-rows",String(c.dimensions.rows)]:[]]);return l.configuration.configFilePath=ye.revive(l.configuration.configFilePath).with({scheme:a.type==="local"?"file":Ke.scheme}),l}async function l3(t,e,n,r,o,i){let s=await u3(t,e,n,r,o,i);return s==null?void 0:s.uri}async function u3(t,e,n,r,o,i){let s=await xS(t,e,Fe),a=s&&await Pk(s,n);if(a)return{uri:a,type:"repositoryConfig",fileHost:await Vr(process.cwd(),r,i)};let c=await Lf(t,e.configFolderPath);if(c)return{uri:c,type:"workspace",fileHost:t};o&&i&&(s!=null&&s.length?i.write(`No dev container config found. Additional locations checked:
${Hx(s,n).map(l=>`- ${Gr.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function Pk(t,e){let n=Hx(t,e);for(let r of n){let o=await Mq(r);if(o)return ye.file(o)}}function Hx(t,e){let n=[],r=new Set(t.map(nue).filter(o=>!!o));for(let o of r)for(let i of e){let s=Gr.join(i,o);n.push(s)}return n}function f3(t,e,n){let r=t.path.relative(e.rootFolderPath,_e(n,t.platform));return r&&!r.startsWith("..")&&!t.path.isAbsolute(r)}function nue(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let n=/[^@:]+@([^:]+):(.+)/.exec(t);if(n)e=`${n[1]}/${n[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}var Bx="vsc.devcontainer.volume.name",d3="vsc.devcontainer.volume.folder";function bk(t){return t?`${t.volumeName}:${t.folder}`:void 0}function jl(t){let e=(t.Config.Labels||{})[Bx],n=(t.Config.Labels||{})[d3];return e&&n?{volumeName:e,folder:n}:void 0}var Ks=Y(require("url")),y3=Y(require("https"));var C3=Y(Or());function Js(t){return t.toLowerCase().indexOf("github.com")>=0?aue(t):t.toLowerCase().indexOf("visualstudio.com")>=0?iue(t):t.toLowerCase().indexOf("dev.azure.com")>=0?oue(t):t.toLowerCase().indexOf("gitlab.com")>=0?sue(t):rue(t)}function ac(t){let e="owner",n="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function rue(t){var s;let e="unknown-owner",n,r=t,o;o=(s=Ks.parse(t))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?ac(t):(n=i[i.length-1],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"unknown",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`})}function oue(t){var i,s;let e,n,r=t,o;if(Yx(t)){let a=`http://${t}`;o=(i=Ks.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return ac(t);e=c[3],n=c[4]}else{o=(s=Ks.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return ac(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function iue(t){var i,s;let e,n,r=t,o;if(Yx(t)){let a=`http://${t}`;o=(i=Ks.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return ac(t);e=c[3],n=c[4]}else{o=(s=Ks.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return ac(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function sue(t){var s,a;let e,n,r,o=t,i;if(Yx(t)){let c=`http://${t}`;i=(s=Ks.parse(c))==null?void 0:s.path,i&&(i=i.replace("/:","/"));let l=i==null?void 0:i.split("/");if(!l||l.length<3)return ac(t);e=l[1],n=l.slice(2,l.length-1).join("/")||void 0,r=l[l.length-1]}else{i=(a=Ks.parse(t))==null?void 0:a.path;let c=i==null?void 0:i.split("/");if(!c||c.length<3)return ac(t);e=c[1],n=c.slice(2,c.length-1).join("/")||void 0,r=c[c.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:o,ref:void 0,commit:!1,repositoryOwner:e,repositoryProject:n,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}${n?`/${n}`:""}/${r}`}}function aue(t){var c,l;let e,n,r=t,o,i,s;if(Yx(t)){let u=`http://${t}`;s=(c=Ks.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=Ks.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return ac(t);if(e=a[1],n=a[2],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(r=t.substring(0,u.index),o=t.substring(u.index+u[0].length))}if(a[3]==="pull"){i=a[4];let u=t.match(/\/pull\//);u&&u.index&&(r=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:r,ref:o,commit:a[3]==="commit",repositoryOwner:e,repositoryName:n,pullRequestId:i,fullRepositoryName:`${e}/${n}`}}function Yx(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var rw=class extends Error{description;code;constructor(e,n){super(),this.code=e,this.description=n}},ow=class{inputUrl;gitUrlInfo;constructor(e){this.inputUrl=e,this.gitUrlInfo=Js(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,n,r,o){}installExtension(){return null}},Lk=class extends ow{constructor(e){super(e)}async parseUrl(e){var i,s,a;let n=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,r=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,n,r,o)}async getPullRequestInfo(e,n,r,o){var u,f,m,d,p,h,g,v,C,w,y;let i=await this.fetchPullRequestInfo(e,n,r,o),s=(f=(u=i.head)==null?void 0:u.repo)==null?void 0:f.clone_url,a=(d=(m=i.base)==null?void 0:m.repo)==null?void 0:d.clone_url;if(!a)throw new rw(2,C3.t("Cannot access the head repository of the Pull Request."));let c=(p=i.head)==null?void 0:p.ref,l=((v=(g=(h=i.head)==null?void 0:h.repo)==null?void 0:g.owner)==null?void 0:v.login)===n?null:(y=(w=(C=i.head)==null?void 0:C.repo)==null?void 0:w.owner)==null?void 0:y.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,n,r,o){let i=`/repos/${n}/${r}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,l)=>{let u="",f=y3.request(a,m=>{if(m.statusCode<200||m.statusCode>=300)return l(new Error(`Status Code: ${m.statusCode}`));m.on("data",d=>{u+=d}),m.on("end",()=>{let d=JSON.parse(u.toString());c(d)})});f.on("error",l),f.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,n,r,o){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await ee({exec:n.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:r,output:o}),await ee({exec:n.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:r,output:o});try{await ee({exec:n.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:r,output:o})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await ee({exec:n.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:r,output:o})}else await ee({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await ee({exec:n.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:r,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},Ak=class extends ow{constructor(e){super(e)}async parseUrl(e){var n,r;return{urlToClone:(n=this.gitUrlInfo)==null?void 0:n.repositoryUrl,ref:(r=this.gitUrlInfo)==null?void 0:r.ref}}cloneOptions(e){let n=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!n&&e.ref||void 0,fullClone:n}}async postClone(e,n,r,o){this.gitUrlInfo.commit&&await ee({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o})}},Vx=class extends ow{constructor(n,r){super(n);this.branch=r}async parseUrl(n){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(n){return{url:n.urlToClone,branch:n.ref||void 0}}};function qx(t,e){if(e)return new Vx(t,e);let n=Js(t);if(n.repository==="github"){if(n.pullRequestId)return new Lk(t);if(n.ref)return new Ak(t)}return new Vx(t)}var Uk="vsch.local.repository",Gx="dev.container.volume";function si(t){return{repositoryPath:t,fullRepositoryName:$k(t),repositoryName:Mk(t),workspaceFolder:Qv,volumeDestination:Mf(),oldVolumeName:lue(t),alreadyCloned:!1,uniqueVolumeName:uue(t),legacyUniqueVolumeName:fue(t),getOldWorkspacePath:_3,cloneAndInitializeRepository:due,gitUrlHandler:qx(t),gitUrlInfo:Js(t)}}function $k(t){let e=Js(t);return e==null?void 0:e.fullRepositoryName}function Mk(t){let e=Js(t);return e==null?void 0:e.repositoryName}function Mf(){return"/workspaces"}function lue(t){let e=$k(t);return`vsc-${ps.posix.basename(e)}-${S3(t)}`}function uue(t){let e=E3(t),n=Xs.createHash("sha256").update(t).digest("hex");return`${e}-${n}`}function fue(t){let e=E3(t),n=S3(t);return`${e}-${n}`}function E3(t){let e=Js(t),n="";return e&&e.repositoryName&&(n=e.repositoryName,e.ref?n=`${n}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(n=`${n}-pull-${e.pullRequestId}`)),n}function S3(t){return Xs.createHash("md5").update(t).digest("hex")}function Qv(t){return ps.posix.join(`${Mf()}`,`${t}`)}async function due(t,{folder:e,cloneInfo:n},r,o,i){var f;await kk(t);let{containerId:s,shellServer:a,remoteContainersEnv:c}=await mue(t,r,o,e,i,t.configProvider,n),{config:l}=await pue(t,r,e,i,a),u=(f=r.gitUrlHandler)==null?void 0:f.installExtension();return{repository:r,volumeName:o,containerId:s,shellServer:a,remoteContainersEnv:c,config:l,preInstalledExtensions:u?[u]:[]}}async function mue(t,e,n,r,o,i,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,f,m,d,p;t.common.progress(1);let h=Tk(e,n,r,t.dockerSocketPath,t.buildContainerRunArgs);r?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(r)}
\r`),f=`fatal: destination path '${e.workspaceFolder(r)}' already exists`,p=e.workspaceFolder(r),d=`Repository '${u}' was already cloned into '${e.workspaceFolder(r)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${n}
\r`),f=`fatal: destination path '${u}' already exists`,p=`${u}`,d=`Repository '${u}' was already cloned into volume.`);let g=e.gitUrlHandler;if(!g)throw new Se({description:Vl.t("Could not analyze the URL.")});s?m=g.cloneOptions(s):m={url:e.repositoryPath};let{stdout:v}=await Qe(t,...h),C=v.toString().trim(),w=ds(t,C,"root"),y=await Wt(w,c),S=await HS(a,{remoteExec:w,user:"root",nodeExecutable:"node",shellServer:y,launchRootShellServer:async()=>y}),D=S.remoteContainersCLI,x=S.remoteEnv,A=S.ready,F=S.mrpcExec,k=await zs(t,C,"root",l),E=no("container",p,{},await F||w,k,()=>{throw new Error("not implemented")},void 0,c);try{t.common.isCopyGitConfigEnabled&&await _S(t.common,{homeFolder:"/root",shellServer:y},{}),await mx({shellServer:y,nodeExecutable:"node"},D,c,"global"),await Sv(t.common,{homeFolder:"/root",shellServer:y},[".ssh","known_hosts"],"ssh"),await A;let T=KV(a),I=await cj(a,E,p,{...m,env:{...x,...m.env}},c,T.output,!!t.removeOnStartup);if(await I.gitClone,I.gitUnshallow&&(a.backgroundTasks.push(I.gitUnshallow.then(()=>{})),I.gitUnshallow.then(T.flush,T.flush)),I.gitClone&&s)try{await g.postClone(s,E,p,c)}catch{return Fk(t,C,Vl.t("Failed to checkout the repository {0}.",s.urlToClone))}}catch(T){let I=T&&(T.cmdOutput||T.stack||T.message)||String(T);if(I=I.replace(Os,""),I.replace(/[\r\n]+/gm,"").includes(f))c.write(d),e.alreadyCloned=!0;else return Fk(t,C,Vl.t("Git clone failed. {0}",I))}let{configRaw:_}=await x3(t,e,r,o,y);if(!Px(_)&&i){c.write(`Repository ${u} has no dev container files.
\r`);let T=!0;for(;T;){let I=await i.createConfiguration(p,E);if(I)T=!1;else{let b=Vl.t("Select Configuration");if(I=await i.showError(Vl.t("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started."),b),I!==b)return Fk(t,C,Vl.t("Cancelled container configuration selection."),{closeRemote:!0})}}}return{containerId:C,shellServer:y,remoteContainersEnv:x}}function Tk(t,e,n,r,o=[]){let i=n?t.volumeDestination:t.fullRepositoryName;return Rk(e,i,r,o)}function Rk(t,e,n,r=[]){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,"-v",`${n}:/var/run/docker.sock`,"--security-opt","label=disable",...r,`${D3}`,"sleep","infinity"]}function Fk(t,e,n,r){throw e&&$i(t,e),new Se({description:n,data:r})}async function x3(t,e,n,r,o){let i,s;if(n?s=e.workspaceFolder(n):s=`${_3(e.repositoryPath)}`,r)return i=(await o.exec(`cat ${r.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&$e(i),configFile:r,workspaceFolder:s};if(r=await Pk([e.repositoryPath],t.userRepositoryConfigurationPaths),r&&(i=(await st(r.fsPath)).toString()),!r)for(let a of Ul(ps.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,r=ye.from({scheme:"vscode-remote",path:a});break}catch{}return{configRaw:i&&$e(i),configFile:r,workspaceFolder:s}}async function pue(t,e,n,r,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await x3(t,e,n,r,o);if(!s||!i)throw new Se({description:Vl.t("The repository does not have a 'devcontainer.json' configuration file.")});let{common:c,configUpdater:l}=t,{cliHost:u,output:f}=c,m=qv({...i}),d=m;l&&(m.configFilePath=s,d=l(m),delete d.configFilePath);let p=cx({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},d);return p.configFilePath=s,("workspaceMount"in p||"workspaceFolder"in p)&&f.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:p}}function _3(t){return`/workspaces/${ps.posix.basename($k(t))}`}var D3="vsc-volume-bootstrap",Ok="bootstrap.Dockerfile",hue="volume.Dockerfile";async function kk(t,e,n,r){let{cliHost:o,output:i}="cliHost"in t?t:t.common;"cliHost"in t||(e=t.common.extensionPath,n=t.common.package.version,r=t.development);let s=o.path.join(await Av(o),"bootstrap-image",r?`${n}-dev-${Date.now()}`:n),a=o.path.join(s,Ok),c=o.path.join(s,".vscode-remote-containers","dist",`dev-containers-cli-${n}`),l=o.path.join(c,"dist","spec-node","devContainersSpecCLI.js"),u=!await o.isFolder(s);if(!u&&!(await o.isFile(a)&&await o.isFile(l))){let h="Removing incomplete bootstrap-image folder.",g=i.start(h),v=`${s}-${Xs.randomUUID()}`;await o.rename(s,v),await o.rm(v,{recursive:!0,force:!0}),u=!await o.isFolder(s),i.stop(h,g)}if(u){let h=`${s}-${Xs.randomUUID()}`,g=o.path.join(h,".vscode-remote-containers","dist",`dev-containers-cli-${n}`);await o.mkdirp(o.path.join(g,"dist","spec-node")),await o.writeFile(o.path.join(h,Ok),await st(ps.join(e,"scripts",Ok))),await o.writeFile(o.path.join(g,"package.json"),await st(ps.join(e,"package.json"))),await o.writeFile(o.path.join(g,"dist","spec-node","devContainersSpecCLI.js"),await st(ps.join(e,"dist","spec-node","devContainersSpecCLI.js"))),await o.mkdirp(o.path.join(g,"scripts")),await o.writeFile(o.path.join(g,"scripts","updateUID.Dockerfile"),await st(ps.join(e,"scripts","updateUID.Dockerfile"))),await o.rename(h,s)}let f=["build","-f",a,"-t",D3,s],m=await o.locateCertificatesFile(),d=o.path.join(s,"host-ca-certificates.crt"),p=`${d}-${Xs.randomUUID()}`;await o.writeFile(p,m?await o.readFile(m):Buffer.from("")),await o.rename(p,d),await e3(t,...f)}async function m3(t){let{common:e}=t,{cliHost:n,output:r}=e,o=await gue(t),i=n.path.join(o,hue),s=!await n.isFolder(o);if(!s&&!await n.isFile(i)){let u="Removing incomplete inspect-volume folder.",f=r.start(u),m=`${o}-${Xs.randomUUID()}`;await n.rename(o,m),await n.rm(m,{recursive:!0,force:!0}),s=!await n.isFolder(o),r.stop(u,f)}if(s){let u=`${o}-${Xs.randomUUID()}`;await zv(ps.join(e.extensionPath,"scripts","inspect-volume"),n,u,r),await n.rename(u,o)}let a=await n.locateCertificatesFile(),c=n.path.join(o,"host-ca-certificates.crt"),l=`${c}-${Xs.randomUUID()}`;return await n.writeFile(l,a?await n.readFile(a):Buffer.from("")),await n.rename(l,c),o}async function gue(t){let{common:e,development:n}=t,{cliHost:r}=e,o=e.package.version;return r.path.join(await Av(r),"inspect-volume",n?`${o}-dev-${Date.now()}`:o)}async function p3(t,e,n){let r=[`${Uk}=${e.repositoryPath}`];!n||n===ai?r.push("vsch.local.repository.unique=true"):r.push("vsch.local.repository.unique=false"),e.gitUrlInfo.ref&&r.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&r.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`);let o=await Fo(t),i=Hk(e,n,o);return o.indexOf(i)===-1&&await Sp(t,i,r),i}function Hk(t,e,n){return e?e===ai&&(n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.legacyUniqueVolumeName)===-1?e=t.uniqueVolumeName:e=t.legacyUniqueVolumeName):n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.oldVolumeName)===-1?e=t.uniqueVolumeName:e=t.oldVolumeName,e}var Tp="vsch.local.repository",Bk="vsch.local.repository.volume",Wk="vsch.local.repository.folder";function h3(t,e,n,r){return n?{labels:[`${Tp}=${e}`,`${Bk}=${r}`,`${Wk}=${n}`],remoteWorkspaceFolder:t.workspaceFolder(n)}:{labels:[`${Tp}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function g3(t,e,n,r){let{loadNativeModule:o,output:i}=t.common,s=ds(t,e,"root"),a=await zs(t,e,"root",o),c=no("container",r,n,s,a,()=>{throw new Error("not implemented")},"node",i);return{cliHost:c,dockerCLI:"docker",dockerComposeCLI:ms({exec:c.exec,env:n,output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:n,output:i}}var I3=Y(Or()),ew="devcontainer.local_folder",$f="devcontainer.config_file",Pp="vsch.local.volume",Wx="/volume",jx="vsch.quality",tw="vsch.local.folder";async function v3(t,e,n,r,o,i,s,a,c,l,u,f,m,d){let{common:p}=t,h;try{let g=!l,v=r.remoteUser;h=await _p(t,a.Id,o,v),u&&l&&o&&h.user!=="root"&&(h.launchRootShellServer?await yx(h,h.launchRootShellServer,o,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let C=await Ox(p,l,a,o,h);return await wue(a,c,t,e,h,n,r,g,i,s,f,m,d,C)}catch(g){throw vue(g,a,t,h,n)}}function vue(t,e,n,r,o){let i=t instanceof Se?t:new Se({description:I3.t("An error occurred setting up the container."),originalError:t});return e&&(i.manageContainer=!0,i.params=n.common,i.containerId=e.Id,i.dockerParams=n),r&&(i.containerProperties=r),o&&(i.config=o),i}async function wue(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var k,E;let{common:p}=n,h=cr(r.cliHost,o.shellServer);a||await Rx(n.configurationTracking,r.cliHost,h,i,p.output);let g=s.shutdownAction;g==="stopCompose"&&(g="stopContainer");let v={cwd:c,dockerCLI:n.dockerCLI,env:p.env,containerId:t.Id,user:o.user,sessionId:p.sessionId,shutdownAction:g,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:C,doneWithDocuments:w}=await Fx(n,r.cliHost,h,"singleContainer",v,a?i:void 0);p.backgroundTasks.push(w);let y=((E=(((k=s.customizations)==null?void 0:k.vscode)||[]).slice().reverse().find(_=>typeof _.devPort=="number"))==null?void 0:E.devPort)||Ll,{hostOrContainerPort:S,hostPortServer:D,connectionToken:x,remoteEnv:A,serverDownloaded:F}=await Al(p,o,i,s,y,Dp(n,r,o,l,u,t.Id,e,f,m),d);return C.hostPortServer=D,{params:p,properties:o,config:i,resolvedAuthority:{host:sc,port:S,connectionToken:x,extensionHostEnv:A},tunnelInformation:p.isLocalContainer?xp(t):{},dockerParams:n,dockerContainerId:t.Id,serverDownloaded:F}}function Yl(t){let e=t.Config.Labels||{},n=e[ew]||e[tw];return n||void 0}function P3(t){return(t.Config.Labels||{})[$f]||void 0}function cc(t){let e=(t.Config.Labels||{})[Tp];return e||void 0}function zx(t){let e=(t.Config.Labels||{})[Bk];return e||void 0}function b3(t){let e=(t.Config.Labels||{})[Pp];return e||void 0}function T3(t){let e=(t.Config.Labels||{})[Wk];return e||void 0}function Nk(t,e){throw t.write(ot(e)),new Error(e)}function lc(t){return!!(t!=null&&t.startsWith("tunnel+"))}function R3(t){let e=/^tunnel\+(.*)$/.exec(t);return e?{tunnelName:e[1]}:void 0}var k3=Y(require("path"));async function N3(t,e,n,r,o,i){let s,a=new Promise(p=>s=p),c=new kx,l=[],u=await Kq("vscode-remote-containers",async(p,h)=>{let g=await Jq(p),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let C=l[g.sequence];C&&(C(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&r.event(g.event);h.write(JSON.stringify(v)),h.end()});u.server.unref();let f=k3.join(n,"dist","shutdown","shutdownMonitorProcess"),m=[u.ipcHandlePath,t,er[e],o||"",i.getTime().toString()];r.write(`Forking shutdown monitor: ${f} ${m.join(" ")}\r
`);let d=zV(f,m,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return d.on("error",p=>{console.error(p)}),d.unref(),{queue:c,sequence:0,replies:l,done:a}}async function Kx(t,e,n){let r=t.sequence++,o=new Promise(s=>t.replies[r]=s);return t.queue.push({type:"configure",sequence:r,options:e}),await o}async function L3({queue:t,done:e}){t.push({type:"cleanup"}),await e}var F3=require("util");var ai="__UNIQUE__",sc="127.0.0.1";async function w3(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:n}=await ee({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Fe});return n.toString().trim()}return _e(t,e.platform)}async function Bf(t,e){let n=!t.env.SSH_AUTH_SOCK&&await IR(t)?Iv:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,r={DOCKER_CONTEXT:"default"};return e&&("context"in e?r.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="remote"?r.VSCODE_DOCKER_HOST=e.host:r.DOCKER_HOST=e.host),e.certPath&&(r.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(r.DOCKER_TLS_VERIFY=e.tlsVerify))),n&&(r.SSH_AUTH_SOCK=n),r}function ur(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let n=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;n&&(e.host=n),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function Jx(t,{parentAuthority:e,settings:n}){e&&t.write(`Host authority: ${e}\r
`),n&&("context"in n&&n.context&&t.write(`Context: ${n.context}\r
`),"host"in n&&n.host&&t.write(`Host: ${n.host}\r
`),"certPath"in n&&n.certPath&&t.write(`CertPath: ${n.certPath}\r
`),"tlsVerify"in n&&n.tlsVerify&&t.write(`TLSVerify: ${n.tlsVerify}\r
`))}function kp(t,e){return(!t||t.startsWith("wsl+"))&&!e.VSCODE_DOCKER_HOST&&!e.DOCKER_HOST&&(!e.DOCKER_CONTEXT||e.DOCKER_CONTEXT==="default"||e.DOCKER_CONTEXT==="desktop-linux")}function bp(t,e){var r,o;let n;return lc(t)?n=(r=R3(t))==null?void 0:r.tunnelName:bl(t)?n=(o=Lv(t))==null?void 0:o.hostName:e&&("context"in e||e.host)&&(n="context"in e?e.context:e.host),n?` @ ${n}`:""}function uc(t){let{Name:e}=t;return e[0]==="/"?e.substring(1):e}async function ii(t,e){try{return await oi(t,e)}catch{return}}async function Xx(t,e=!0){let{common:n}=t,{output:r}=n,o="Check Docker is running",i=r.start(o);try{let{stdout:s}=await jk(t,t.common.loadNativeModule,e,"version"),a=s.toString();if(a.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(a)}catch(s){console.error(s);let a=Rp.t("Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed."),c=s&&(s.stderr?s.stderr.toString().toLowerCase():s.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a=Rp.t("Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction."):a=Rp.t("Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group."):c.indexOf("ENOENT")!==-1&&(a=Rp.t("The 'docker' command was not found. Make sure Docker is installed.")),new Se({description:a,originalError:`Docker returned an error code ${s.code}, message: ${s.message}`})}finally{r.stop(o,i)}}async function jk(t,e,n,...r){let o={...Mi(t),print:"continuous"};try{return await Qe(o,...r)}catch(i){if(!A3(i)||!n)throw i;let s="cliHost"in t?t.cliHost:t.common.cliHost,a="output"in t?t.output:t.common.output;if(s.type==="wsl"&&(s=await Vr(process.cwd(),e,a)),s.platform==="linux")throw i;if(s.platform==="darwin"&&await s.isFolder("/Applications/Docker.app"))await ee({exec:s.exec,cmd:"open",args:["-g","-a","Docker"],env:{ELECTRON_RUN_AS_NODE:""},output:a,print:"continuous"});else{let c=yue(s);if(s.platform==="win32"&&await s.isFile(c))await ee({exec:s.exec,cmd:c,env:{ELECTRON_RUN_AS_NODE:""},output:"output"in t?t.output:t.common.output,print:"continuous"});else throw i}for(let c=6;c>0;c--){await Bt(5e3);try{return await Qe(o,...r)}catch(l){if(c===1||!A3(l))throw l}}throw i}}function yue(t){return t.path.join(t.env.ProgramW6432||"C:\\Program Files","Docker\\Docker\\Docker Desktop.exe")}function A3(t){let e=Buffer.concat([t==null?void 0:t.stdout,t==null?void 0:t.stderr].filter(Boolean)).toString().toLowerCase();return e.includes("cannot connect to the docker daemon")||e.includes("docker daemon is not running")||e.includes("internal server error for api route and version")||e.includes("activate the wsl integration")}function un(t){return t.hostPath!==void 0}function so(t){return t.repositoryPath!==void 0}function Hf(t){return!so(t)&&!!t.folder}function nw(t){return!so(t)&&!Hf(t)&&t.volumeName!==void 0}function ao(t){let e=U3("dev-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,hostPath:e.unparsedConfig}:("repositoryPath"in e&&e.configFile&&(e.configFile=ye.revive(e.configFile)),"repositoryPath"in e?e.dockerHost?{parentAuthority:e.parentAuthority,repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},cloneInfo:e.cloneInfo}:e:("hostPath"in e&&e.configFile&&(e.configFile=ye.revive(e.configFile)),"hostPath"in e&&e.dockerHost?{parentAuthority:e.parentAuthority,hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e))}function iw(t,e,n,r,o,i){t=sw(t);let s=r||i?JSON.stringify({hostPath:e,localDocker:o,settings:r,configFile:i}):e;return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${t?`@${t}`:""}${n}`}function Hi(t,e,n,r,o,i,s,a){if(t=sw(t),e){let l=si(e);if(!n){let f=JSON.stringify({repositoryPath:e,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(f,"utf8").toString("hex")}${t?`@${t}`:""}${l.getOldWorkspacePath(e)}`}let u=JSON.stringify({repositoryPath:e,volumeName:n,folder:r,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${t?`@${t}`:""}${l.workspaceFolder(r)}`}if(r){let l={volumeName:n,folder:r,settings:i};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(l),"utf8").toString("hex")}${t?`@${t}`:""}${Qv(r)}`}let c=JSON.stringify({volumeName:n,settings:i});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${t?`@${t}`:""}${Wx}`}function Wf(t){let e=U3("attached-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,containerId:e.unparsedConfig}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function O3(t,e,n,r){t=sw(t);let o=JSON.stringify({containerName:e,settings:n,cwd:r});return`attached-container+${Buffer.from(o,"utf8").toString("hex")}${t?`@${t}`:""}`}function U3(t,e){try{let n=Np(e);if(!n)return;let{name:r,config:o,parentAuthority:i}=n,s=r===t&&o?Buffer.from(o,"hex").toString("utf8"):void 0;if(!s)return;if(!s.startsWith("{"))return{parentAuthority:i,unparsedConfig:s};let a=JSON.parse(s);return a.parentAuthority=i,a}catch(n){console.warn(n);return}}function Np(t){let e=t==null?void 0:t.match(/^(?<name>[^@+]+)\+(?<config>[^@]+)(?:@(?<parentAuthority>.*))?$/);if(!e)return;let{name:n,config:r,parentAuthority:o}=e.groups;return{name:n,config:r,parentAuthority:o}}function Gl(t,e){return Tn(e.startsWith("/")?"linux":"win32",ye.parse(`vscode-remote://${t}`),e)}function sw(t){if(t){if(bl(t)){let e=t.indexOf("@");if(e!==-1&&t.indexOf("+",e)===-1){let r=Lv(t);return LR(r)}return t}if(lc(t))return t}}async function $3(t,e,n){return await Ev(t,e,n)||e}function M3(t,e,n){let r=t.path.relative(t.path.dirname(e),n);return`/workspaces/${t.platform==="win32"?r.replace(/\\/g,"/"):r}`}function qq(t,e){return t.with({path:ql.posix.resolve(t.path,e)})}async function Fx(t,e,n,r,o,i){let{common:s,onRemoveOnShutdownChanged:a}=t,c=s.output.start("Setup shutdown monitor"),l=await N3(r,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?ql.dirname(s.logFilePath):void 0,s.sessionStart);Kx(l,o,s.output).catch(d=>console.error(d)),a&&a(async d=>{o.rebuild=!!d,o.delay=0,await Kx(l,o,s.output)}),s.onDidChangeLogLevel(async d=>{o.logLevel=d,await Kx(l,o,s.output)});let u={},f=async()=>{let d=L3(l);u.hostPortServer&&await(0,F3.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await d};s.shutdowns.push(f);let m=t.common.hostConfig.canRebuildContainer&&i?Tx(t.configurationTracking,e,n,i).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",c),{monitor:l,shutdownArgs:u,doneWithDocuments:m}}function xp(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}async function _p(t,e,n,r,o){var y;let{common:i}=t,s="Inspecting container",a=i.output.start(s),c=await oi(t,e);i.output.stop(s,a);let l=r||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),m=Cue(c.Config.Env),d=ds(t,e,l),p=await zs(t,e,l,i.loadNativeModule),h=ds(t,e,"root"),g=c.Mounts.find(S=>S.Type==="volume"&&S.Name==="vscode"),v=c.Mounts.find(S=>S.Type==="bind"&&S.Source===i.localCacheFolder),C=g&&ql.posix.join(g.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination),w=(y=c.Mounts.find(S=>S.Type==="bind"&&S.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:y.Destination;return gx({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:C,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:n,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:m,remoteExec:d,remotePtyExec:p,remoteExecAsRoot:h,rootShellServer:o,remoteWaylandSocket:w})}function Cue(t){return(t||[]).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substr(0,r)]=n.substr(r+1)),e},{})}async function H3(t){let{common:e,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,dockerEnv:i}=t,{cliHost:s,output:a}=e;return{cliHost:s,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,env:i,output:a}}async function B3(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}function Dp(t,e,n,r,o,i,s,a,c){let l=!s;return async(u,f,m,d,p)=>{let{common:h}=t,{cliHost:g}=e,{dotfilesConfiguration:v}=h,C=d.getDotfileConfiguration("dotfiles.repository")||v.repository,w=d.getDotfileConfiguration("dotfiles.installCommand")||v.installCommand,y=d.getDotfileConfiguration("dotfiles.targetPath")||v.targetPath;l&&C&&(l=!1,await PY(n));let S={...e.env,...lr(e.env)},D={cliHost:e.cliHost,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:S,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,postCreate:h.postCreate,output:h.postCreate.output},x=h.postCreate.output.dimensions||h.output.dimensions,A=await ri(D,["run-user-commands",...e.cliHost.type==="local"&&h.persistedFolder?["--user-data-folder",h.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...h.containerSessionDataFolder?["--container-session-data-folder",h.containerSessionDataFolder]:[],...s?["--container-data-folder",Oi(t.common.product.serverDataFolderName)]:[],...s?["--container-system-data-folder",wx(t.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(o||[]).map(F=>["--id-label",F]).flat(),"--container-id",i,"--log-level",Qr(h.getLogLevel()),"--log-format","json",...a?["--config",_e(a,g.platform)]:[],...c?["--override-config",_e(c,g.platform)]:[],"--default-user-env-probe",h.defaultUserEnvProbe,"--skip-non-blocking-commands",String(u),...h.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(m),"--stop-for-personalization",String(f),...[].concat(...Object.keys(p).map(F=>["--remote-env",`${F}=${p[F]}`])),"--mount-workspace-git-root",...x?["--terminal-columns",String(x.columns),"--terminal-rows",String(x.rows)]:[],...C?["--dotfiles-repository",C]:[],...w?["--dotfiles-install-command",w]:[],...y?["--dotfiles-target-path",y]:[]]);if((A==null?void 0:A.outcome)!=="success")throw new Se({description:Rp.t("devcontainer command failed: {0}",JSON.stringify(A))});return A.result}}async function W3(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=await ri(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...e?["--workspace-folder",e]:[],...(i||[]).map(f=>["--id-label",f]).flat(),...s?["--container-id",s]:[],"--log-level",Qr(r),"--log-format","json",...n?["--config",_e(n,c.platform)]:[],...a?["--override-config",_e(a,c.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return u.configuration.configFilePath=u.configuration.configFilePath&&ye.revive(u.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme}),u}async function Ox(t,e,n,r,o){let{output:i}=t;if(e&&r)try{i.write(`safe.directory: Looking up root folder for workspace folder '${r}'.`);let s=n.Mounts.find(a=>Ku(ql.posix,a.Destination,r,!0));if((s==null?void 0:s.Type)==="bind"){let a;try{let{stdout:u}=await o.shellServer.exec(`command -v git >/dev/null 2>&1 && ROOT_FOLDER="$(git -C '${r}' rev-parse --show-toplevel)" && test "$(stat -c %u "$ROOT_FOLDER")" != "$(id -u)" && echo -n "$ROOT_FOLDER"`);a=u.trim()}catch(u){a=u!=null&&u.stderr?(/dubious ownership in repository at '([^']+)'/.exec(u.stderr)||[])[1]:void 0}if(!a||!Ku(ql.posix,s.Destination,a,!0)){i.write(`safe.directory: Checking host ownership of root folder${a?` '${a}'`:""} at mount point '${s.Destination}' skipped.`);return}i.write(`safe.directory: Checking host ownership of root folder '${a}' at mount point '${s.Destination}'.`);let c=ql.posix.relative(s.Destination,a),l=t.cliHost.path.join(s.Source,t.cliHost.platform==="win32"?c.replace(/\//g,"\\"):c);if(t.cliHost.platform==="win32"){let u;try{u=(await ee({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","(Get-Acl .).Owner"],cwd:l,env:ro(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get host owner for '${l}': ${m==null?void 0:m.message}`);return}let f;try{f=(await ee({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],cwd:l,env:ro(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get current user ('${l}' owned by '${u}'): ${m==null?void 0:m.message}`);return}if(i.write(`safe.directory: '${l}' owned by '${u}', current user is '${f}'.`),u!==f)return}else await ee({exec:t.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${l}' && test "$(stat -${t.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:i});if(o.launchRootShellServer){i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Adding to safe directory list in Git system config.`),await(await o.launchRootShellServer()).exec(`git config --system --get-all safe.directory | grep -x '${a}' || git config --system --add safe.directory '${a}'`);return}else return i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Later adding to safe directory list in Git global config.`),async()=>{await o.shellServer.exec(`git config --global --get-all safe.directory | grep -x '${a}' || git config --global --add safe.directory '${a}'`)}}}catch{}}var $t=Y(require("vscode")),Ci=require("vscode");var K=Y(require("vscode")),em=Y(require("path"));var Lp=Y(require("vscode")),Zx=Y(require("path")),Y3=require("stream");var Eue=AS();async function Oo(t,e,n,r,o,i,s,a,c,l,u){return t?Sue(t,n,s,a,c,l):FR(e,n,r,o,i,s,a,c,l,u)}async function Sue({server:t,authority:e},n,r,o,i,s){var A,F,k,E,_,T,I,b;let a="Loading environment from ExecServer",c=i.start(a),l=await t.env();i.stop(a,c),i.write(`Host OS: ${l.osPlatform}${l.osRelease?` ${l.osRelease}`:""}`),i.write(`Host CWD: ${n}`);let u=xue(()=>t,void 0),f=l.osPlatform,{homeFolder:m,localEnv:d}=await Vn(f,{posix:async()=>{let R=await Wt(u,i,void 0,f,"Host"),L=f==="darwin"?(await ee({exec:u,cmd:"/bin/sh",args:["-c","echo ~"],output:i})).stdout.toString().trim():(await R.exec("echo ~")).stdout.trim(),N=f==="darwin"?(await ee({exec:u,cmd:"/bin/sh",args:["-c","id -un"],output:i})).stdout.toString().trim():await Dl(R),B=await _f(R,N),W=(B==null?void 0:B.shell)||"/bin/sh",z=await bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:i},{shell:W,remoteExec:u});return R.process.terminate(),{homeFolder:L,localEnv:z}},win32:async()=>(i.write(`USERPROFILE: ${l.env.USERPROFILE}`),i.write(`PATH: ${l.env.PATH}`),{homeFolder:l.env.USERPROFILE,localEnv:l.env})})(),p=async R=>u({...R,env:{...d,...R.env}}),h=async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="file"}try{return(await t.fs.stat(R)).type===Lp.FileType.File}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},g=l.osPlatform==="win32",v=g?Zx.win32:Zx.posix,C=v.join(m,".vscode-remote-containers"),w=await KY({localCacheFolder:r,output:i,alternateDownload:s,exec:p,env:d,isFile:h,userDataFolder:C,homeFolder:m,product:o,platform:f}),y=kV(w,p,i),S=n||m,D,x;return{type:"remote",authority:e,platform:f,exec:p,ptyExec:GV(p),cwd:S,env:d,path:v,async homedir(){return m},tmpdir:Vn(f,{posix:async()=>d.TMPDIR||"/tmp",win32:async()=>d.TEMP}),isFile:h,isFolder:async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="dir"}try{return(await t.fs.stat(R)).type===Lp.FileType.Directory}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},isSocket:async R=>{if(g)return!1;try{return await ee({exec:p,cmd:"test",args:["-S",R],output:Fe}),!0}catch(L){if((L==null?void 0:L.code)!==1)throw L;return!1}},readFile:(A=t.fs)!=null&&A.read?async R=>{let L=await t.fs.read(R),N=[];return L.onDidReceiveMessage(B=>N.push(B)),await L.onEnd,Buffer.concat(N)}:R=>UV(p,f,w,R,Fe),writeFile:(F=t.fs)!=null&&F.write?async(R,L)=>{let{stream:N,done:B}=await t.fs.write(R);N.write(L),N.end(),await B}:(R,L)=>$V(p,f,w,R,L,Fe),rename:(k=t.fs)!=null&&k.rename?async(R,L)=>t.fs.rename(R,L):(R,L)=>YS(p,f,R,L,Fe),rm:(E=t.fs)!=null&&E.rm?async R=>t.fs.rm(R):(R,L)=>qS(p,f,R,L||{},Fe),mkdirp:(_=t.fs)!=null&&_.mkdirp?async R=>t.fs.mkdirp(R):R=>GS(p,f,R,Fe),readDir:(T=t.fs)!=null&&T.readdir?async R=>(await t.fs.readdir(R)).map(N=>N.name):R=>MV(p,f,R,Fe),readDirWithTypes:(I=t.fs)!=null&&I.readdir?async R=>(await t.fs.readdir(R)).map(N=>{let B=0;return N.type&Lp.FileType.File&&(B|=1),N.type&Lp.FileType.Directory&&(B|=2),N.type&Lp.FileType.SymbolicLink&&(B|=64),[N.name,B]}):Vn(f,{posix:async R=>{let L={f:1,"*":1,"/":2,"@":64};return(await ee({exec:p,cmd:"ls",args:["-aF",R],output:Fe})).stdout.toString().trim().split(`
`).map(N=>"/*@=%|>".indexOf(N[N.length-1])!==-1?[N.substr(0,N.length-1),N[N.length-1]]:[N,"f"]).filter(([N])=>N!=="."&&N!=="..").map(([N,B])=>[N,L[B]||0])},win32:void 0}),getUsername:async()=>(D===void 0&&(D=await Vn(f,{posix:async()=>(await ee({exec:p,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim(),win32:async()=>d.USERNAME})()),D),toCommonURI:()=>Promise.resolve(void 0),connect:Df((b=t.fs)!=null&&b.connect?R=>{if("port"in R&&!t.tcpConnect)return y(R);let L=(async()=>{let{stream:N}=await("port"in R?t.tcpConnect(R.host,R.port):t.fs.connect(R.socketPath));return Eue.duplex(Vk(N,N))})();return{sink:N=>{L.then(B=>B.sink(N),B=>N(B,()=>{})).catch(B=>i.write(`Connection forwarding to sink error: ${(B==null?void 0:B.stack)||(B==null?void 0:B.message)||String(B)}`))},source:(N,B)=>{L.then(W=>W.source(N,B),W=>B(W)).catch(W=>i.write(`Connection forwarding to source error: ${(W==null?void 0:W.stack)||(W==null?void 0:W.message)||String(W)}`))}}}:y,"Exec Server",i),locateCertificatesFile:function(){return x||(x=ZS(this,void 0,i))},nodeExecutable:w,reconnect:async R=>{R?R!==t?(i.write("Updating to new ExecServer to reconnect."),t=R):i.write("New ExecServer to reconnect same as old."):i.write("No new ExecServer to reconnect.")}}}function xue(t,e){return async function(n){let{cmd:r,args:o,output:i}=n,s=t(),a=`Run: ${r} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=i.start(a),l=n.cwd||e,u=await s.env(),f=n.env?{...u.env,...n.env}:u.env,m=await s.spawn(r,o||[],{cwd:l,env:f});return{stdin:_ue(m.stdin),stdout:j3(m.stdout),stderr:j3(m.stderr),exit:Promise.all([m.onExit,m.stdout.onEnd,m.stderr.onEnd]).then(([{status:d}])=>(i.stop(a,c),{code:d,signal:null})).catch(d=>{throw i.stop(a,c),d!=null&&d.message.includes("NotFound")&&(d.code="ENOENT"),d}),async terminate(){}}}}function j3(t){return Vk(void 0,t)}function _ue(t){return Vk(t,void 0)}function Vk(t,e){let n=new Y3.Stream,r=!1;if(t&&(n.writable=!0,n.write=function(o,i,s){s=Array.from(arguments).find(c=>typeof c=="function");let a;try{t.write(o)}catch(c){a=c,setImmediate(()=>n.emit("error",c))}return s&&s(a),!0},n.end=function(o,i,s){s=Array.from(arguments).find(a=>typeof a=="function"),typeof o=="function"&&(o=void 0);try{o&&t.write(o),r=!0,t.end()}catch(a){setImmediate(()=>n.emit("error",a))}return s&&s(),this}),e){let c=function(){for(;i.length&&!n.paused;)n.emit("data",i.shift());!n.paused&&o&&n.emit("end")},o=!1;n.readable=!0,n.paused=!0;let i=[];(e.onDidReceiveMessage||e.onData)(l=>{let u=Buffer.from(l);n.paused?i.push(u):n.emit("data",u)}),e.onEnd.then(()=>{o=!0,n.paused||n.emit("end")});let s=n.on.bind(n);n.on=(l,u)=>{let f=s(l,u);return l==="data"&&n.paused&&setImmediate(n.resume.bind(n)),f};let a=n.pipe.bind(n);n.pipe=function(l,u){let f=a(l,u);return n.paused&&n.resume(),f},n.pause=function(){return n.paused=!0,n},n.resume=function(){return n.paused=!1,c(),n}}return n.destroy=function(o){return t&&!r&&(r=!0,n.end()),o&&n.emit("error",o),n.emit("close"),this},n}var bK=Y(require("https")),Vh=Y(require("os")),$y=Y(require("vscode"));var dme=async(t,e,n)=>{let r=await Promise.resolve().then(()=>(Ed(),D6)),o=await Promise.resolve().then(()=>(l4(),c4)),i=new r.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=u}let l=e.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{u.ext=u.ext??{},u.ext.web=u.ext.web??{},u.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},u4=async(t,e,n)=>{let r=await dme(t,e,n);return{logEvent:(s,a)=>{try{r==null||r.track({name:s,baseData:{name:s,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!r){a();return}r.flush(!0,l=>{if(!l){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!r){a();return}r.unload(!1,()=>{a(),r=void 0},1e3)})}};Mc();var Yd=class t{static applyReplacements(e,n){for(let r of Object.keys(e))for(let o of n)o.lookup.test(r)&&(o.replacementString!==void 0?e[r]=o.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"PACKAGE_JSON_VERSION"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};var IK=async(t,e,n,r,o)=>{let i;try{let a=await Promise.resolve().then(()=>(DK(),_K)),c={};if(r){let f={alwaysUseXhrOverride:!0,httpXHROverride:r};c[fI]=f}let l;t.startsWith("InstrumentationKey=")||(l=t);let u=l?{instrumentationKey:l}:{connectionString:t};i=new a.ApplicationInsights({...u,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:c})}catch(a){return Promise.reject(a)}return{logEvent:(a,c)=>{let l={...c==null?void 0:c.properties,...c==null?void 0:c.measurements};o!=null&&o.length&&Yd.applyReplacements(l,o),i==null||i.track({name:a,data:l,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:n}},baseData:{name:a,properties:c==null?void 0:c.properties,measurements:c==null?void 0:c.measurements}})},flush:async()=>{i==null||i.flush(!1)},dispose:async()=>new Promise(c=>{i==null||i.unload(!0,()=>{c(),i=void 0},1e3)})}};var SI=class{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendRawTelemetryEvent(e,n,r){let o={...n};for(let i of Object.keys(o??{})){let s=o[i];typeof i=="string"&&s!==void 0&&(o[i]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,o,r)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};var Yc;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(Yc||(Yc={}));var xI=class{constructor(e,n){this._instantiationStatus=Yc.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Yc.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Yc.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}let r={stack:e.stack,message:e.message,name:e.name};if(n){let o=n.properties||n;n.properties={...o,...r}}else n={properties:r};this._telemetryClient.logEvent("unhandlederror",n)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Yc.NOT_INSTANTIATED&&(this._instantiationStatus=Yc.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=Yc.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=Yc.INSTANTIATED}))}};function PK(){return{sendPOST:(e,n)=>{let r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let o=bK.request(e.urlString,r,i=>{i.on("data",function(s){n(i.statusCode??200,i.headers,s.toString())}),i.on("error",function(){n(0,{})})});o.write(e.data,i=>{i&&n(0,{})}),o.end()}catch{n(0,{})}}}}var My=class extends SI{constructor(e,n){let r=s=>IK(s,$y.env.machineId,$y.env.sessionId,PK(),n);Yd.shouldUseOneDataSystemSDK(e)&&(r=s=>u4(s,$y,PK()));let o={release:Vh.release(),platform:Vh.platform(),architecture:Vh.arch()},i=new xI(e,r);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,$y,{additionalCommonProperties:Yd.getAdditionalCommonProperties(o)})}};var Uu=Y(YK());var qK=Y(require("vscode"));function qt(t){let e=qK.workspace.getConfiguration(),n=ss(t),r=e.get(n),o=Sl(t),i=e.get(o);if(i!=null&&i!==r){let s=e.inspect(n);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return r}function SF(t,e){return t.affectsConfiguration(ss(e))||t.affectsConfiguration(Sl(e))}var Fu=Y(require("path"));var GK=Y(require("os")),Pt=Y(require("vscode")),Zd=require("vscode");async function FI(){await Pt.window.showInformationMessage(Zd.l10n.t("You need to first save your workspace in a folder containing all its workspace folders."),{modal:!0})}async function Pa(t){var r;let e=t?[t]:(r=Pt.workspace.workspaceFolders)==null?void 0:r.map(o=>o.uri);if(!e)return[];let n=await Promise.all([...e.map(o=>(async()=>{try{let i=o.with({path:Fu.posix.join(o.path,".devcontainer.json")});if((await Pt.workspace.fs.stat(i)).type===Pt.FileType.File)return[i]}catch(i){if((i==null?void 0:i.code)!=="FileNotFound")throw i}return[]})()),...e.map(o=>Pt.workspace.findFiles(new Pt.RelativePattern(o.with({path:Fu.posix.join(o.path,".devcontainer")}),"{devcontainer.json,*/devcontainer.json}")))]);return[].concat(...n)}async function Ou(t,e){let n;if(t.length>1){let r=Pt.window.createQuickPick();r.placeholder=Zd.l10n.t("Select a devcontainer.json file."),r.busy=!0,r.enabled=!1,r.show(),r.items=(await Promise.all(t.map(async i=>{let s=i.uri,a=i.fileHost.path,c=i.fileHost.platform,l=_e(s,c),u=$e((await i.fileHost.readFile(l)).toString())||{},f,m,d=a.dirname(l),p=a.dirname(d);a.basename(d)===".devcontainer"?(f=Zd.l10n.t("Main"),m=p):a.basename(p)===".devcontainer"?(f=a.basename(d),m=a.dirname(p)):(f=Zd.l10n.t("Project Root"),m=d);let h=u.name||f,g=i.type==="repositoryConfig"||i.type==="userData"?By(c,l,GK.homedir()):a.relative(m,l);return{label:h,description:g+(s.toString()===(e==null?void 0:e.toString())?` ${Zd.l10n.t(" (Current)")}`:""),uri:s,buttons:[{iconPath:new Pt.ThemeIcon("go-to-file"),tooltip:Zd.l10n.t("Open File")}]}}))).sort((i,s)=>{let a=Fu.posix.dirname(i.uri.path),c=Fu.posix.dirname(s.uri.path);return a!==c?a.localeCompare(c):i.label.localeCompare(s.label)}),r.busy=!1,r.enabled=!0;let o=await new Promise(i=>{r.onDidAccept(()=>i(r.selectedItems[0])),r.onDidHide(()=>i(void 0)),r.onDidTriggerItemButton(({item:s})=>{Pt.commands.executeCommand("vscode.open",s.uri),i(void 0)})});r.dispose(),n=o?ye.from(o.uri):"cancelled"}else t.length===1&&(n=t[0].uri);return n}function By(t,e,n){if(t==="win32")return e;let r=`${vpe(n,"/")}/`;return(t==="linux"?e.startsWith(r):e.toLowerCase().startsWith(r.toLowerCase()))&&(e=`~/${e.substr(r.length)}`),e}function vpe(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function ba(t,e){let n=Pt.workspace.fs;return{platform:t,path:t==="win32"?Fu.win32:Fu.posix,async isFile(r){try{return((await n.stat(Tn(t,e,r))).type&Pt.FileType.File)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async isFolder(r){try{return((await n.stat(Tn(t,e,r))).type&Pt.FileType.Directory)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async readFile(r){try{let o=await n.readFile(Tn(t,e,r));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${r}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(r,o){try{let i=Tn(t,e,r),s=Tn(t,e,o);await n.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${r} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async rm(r,o){try{let i=Tn(t,e,r);await n.delete(i,{recursive:o.recursive})}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not remove ${r}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(r,o){await n.writeFile(Tn(t,e,r),o)},async readDir(r){return(await n.readDirectory(Tn(t,e,r))).map(i=>i[0])},async readDirWithTypes(r){return n.readDirectory(Tn(t,e,r))},async mkdirp(r){await n.createDirectory(Tn(t,e,r))},async toCommonURI(r){return Tn(t,e,r)}}}var Hy=class{async readDocument(e){try{let n=Pt.workspace.textDocuments.find(o=>o.uri.toString()===e.toString());if(n)return n.getText();let r=await Pt.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,n,r){let o=Pt.workspace.textDocuments.find(s=>s.uri.toString()===e.toString());if(o){let s=new Pt.WorkspaceEdit;for(let a of n){let c=o.positionAt(a.offset),l=o.positionAt(a.offset+a.length);s.replace(e,new Pt.Range(c,l),a.content)}if(await Pt.workspace.applyEdit(s))return}let i=xo(r,n);await Pt.workspace.fs.writeFile(e,Buffer.from(i))}};function Wy(t){var o,i;let e=((o=/\r?\n/.exec(t))==null?void 0:o[0])||`
`,n=((i=/^\t|^ +/m.exec(t))==null?void 0:i[0])||"	",r=n[0]===" ";return{eol:e,insertSpaces:r,tabSize:r?n.length:void 0}}function jy(){let t=qt("logLevel")||"debug";return PC(t)}var He=require("vscode");var zK=Y(require("crypto"));async function OI(t,e,n){let r=await xF(t,e,n);return r?Pa(await t.toCommonURI(r)):[]}var UI=".devcontainer-internal.json";async function xF(t,e,n){let r=_F(t,e,n),o=t.path.basename(r),i=t.path.dirname(r),s=await t.isFolder(i)?await t.readDir(i):[];for(let a of s)if(a===o||a.startsWith(`${o}-`)&&!isNaN(Number(a.substring(o.length+1)))){let c=t.path.join(i,a),l=t.path.join(c,UI);if(await t.isFile(l)){let u=$e((await t.readFile(l)).toString());if((u==null?void 0:u.rootFolder)===e.rootFolderPath)return c}}}function KK(t,e,n){return`${_F(t,e,n)}-${zK.randomUUID()}`}async function JK(t,e,n,r){let o=`// Maintained by the Dev Container extension
${JSON.stringify({rootFolder:e.rootFolderPath},void 0,"	")}`;await t.writeFile(t.path.join(r,UI),Buffer.from(o));let i=_F(t,e,n),s;for(let a=1;;a++)if(s=a>1?`${i}-${a}`:i,!await t.isFolder(s)){await t.rename(r,s);break}return s}function _F(t,e,n){return t.path.join(n,"configs",t.path.basename(e.rootFolderPath))}async function XK(t,e){await t.rm(e,{recursive:!0})}process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT="{}";function ZK(t){return t.serverDataFolderName?t.serverDataFolderName:t.quality?t.quality==="stable"?".vscode-server":t.quality==="insider"?".vscode-server-insiders":`.vscode-server-${t.quality}`:".vscode-server-oss"}var wt="remote-containers.revealLogTerminal",NF="remote-containers.revealPostCreateTerminal",tm="remote-containers.openDevContainerFile",i5="remote-containers.openRepositoryInVolume",MI="remote-containers.openRepositoryInUniqueVolume",s5="remote-containers.openRepositoryFromRemoteHubWithEditSession",a5="remote-containers.openRepositoryFromGitWithEditSession",c5="remote-containers.openPullRequestInVolume",QK=new DC,gr={onRemoveOnShutdownChangedEmitter:QK,onRemoveOnShutdownChanged:QK.event,results:new Map},Qd,Hn=t=>Rf(t,K.env.appRoot);function HI(t,e,n,r,o,i){return async(s,a)=>{r(),K.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0);let c=K.env.remoteAuthority;if(a.resolveAttempt>1){let l=n.get(c);if(!l)throw new Error("Reconnect attempt without old result.");let u=He.l10n.t("Reconnection attempt {0}",a.resolveAttempt-1),f=t.log.start(u),{cliHost:m}=l.params;if(m.reconnect){let g=`Reconnecting CLIHost ${a.execServer?"with":"without"} ExecServer.`,v=t.log.start(g);try{await m.reconnect(a.execServer)}catch(C){throw t.log.write(ot(String(C&&(C.stack||C.message)||C))),K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Cannot reconnect to remote host."))}finally{t.log.stop(g,v)}}else t.log.write("CLIHost does not need reconnection.");if((await qy(m,t.log)).pauseResolver&&await l5(m,t.log),l.dockerContainerId){let g=await ii(l.dockerParams,l.dockerContainerId);if(!g)throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container no longer exists."));if(g.State.Status==="paused")throw K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Container is paused."));if(g.State.Status!=="running")throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container is no longer running."))}let p=l.resolvedAuthority.port,h=CY(l.params.forwardedPorts,p);if(h){if(h.connections.size){t.log.write(`Destroying ${h.connections.size} leftover connections to forwarded port ${p}.`);for(let g of h.connections)g.destroy()}}else t.log.write(`Forwarded port ${p} not found.`);return t.log.stop(u,f),{...l.resolvedAuthority,isTrusted:l.isTrusted}}else{let l=He.l10n.t("Resolving Remote"),u=t.log.start(l),f=await i(c,a,t,e);return wpe(f.params,f.properties).catch(m=>{}),n.set(c,f),o(),t.log.stop(l,u),K.window.withProgress({location:K.ProgressLocation.Window,title:Hpe,cancellable:!1},async m=>{await KR(f.params.backgroundTasks)}).then(void 0,m=>{t.log.write(ot(String(m&&(m.stack||m.message)||m)))}),{...f.resolvedAuthority,...f.tunnelInformation,isTrusted:f.isTrusted}}}}async function qy(t,e){let n=t.path.join(await t.homedir(),".vscode-remote-containers","config.json");try{let r=$e((await t.readFile(n)).toString())||{},o=r.canConnectToContainer!==!1,i=r.canRebuildContainer!==!1&&o;return await K.commands.executeCommand("setContext","hideConnectCommands",!o),await K.commands.executeCommand("setContext","hideRebuildCommands",!i),{canConnectToContainer:o,canRebuildContainer:i,pauseResolver:!!r.pauseResolver}}catch(r){return r.code!=="ENOENT"&&e.write(`Error reading ${n}: ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||r}`),{canConnectToContainer:!0,canRebuildContainer:!0,pauseResolver:!1}}}async function l5(t,e){let n=He.l10n.t("Pausing resolver"),r=e.start(n),o=Gv(t),i=`
const fs = require('fs');
const path = require('path');
const os = require('os');

const filepath = path.join(os.homedir(), '.vscode-remote-containers', 'config.json');

fs.watch(path.dirname(filepath), (event, filename) => {
	if (filename === path.basename(filepath)) {
		console.log(\`config.json file event: \${event}\`);
		rereadConfig(true);
	}
});
rereadConfig();
setInterval(() => {
	rereadConfig();
}, 5000);
function rereadConfig(event = false) {
	try {
		const text = fs.readFileSync(filepath, 'utf8');
		const config = JSON.parse(text);
		if (!config.pauseResolver) {
			console.log(\`config.json: Continuing... (\${event ? 'event' : 'poll'})\`);
			process.exit();
		}
		if (event) {
			console.log('config.json: Still paused.');
		}
	} catch (err) {
		console.log('config.json: Not a JSON file.');
	}
}
`;try{await ee({exec:t.exec,cmd:o.cmd,args:[...o.args,"-e",i],output:sn(e,1),print:"continuous"})}catch(s){e.write(ot((s==null?void 0:s.message)||String(s)))}e.stop(n,r)}async function wpe(t,e){if(!e.nodeExecutable)return;let n=await st(em.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:r}=await rc(t,e,[e.nodeExecutable,"-e",n],void 0,{silent:!0}),o=r.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var DF;async function BI(t){return DF||(DF=Ml(em.join(__dirname,"..",".."),nm,t)),DF}var Vy={};async function nm(t,e=!0){var n;if(t.counter&&((n=Vy[t.prompt])==null?void 0:n.from)===t.counter&&delete Vy[t.prompt],!Vy[t.prompt]){if(!e)return"";Vy[t.prompt]={result:Promise.resolve(K.window.showInputBox({prompt:t.prompt||He.l10n.t("Enter password"),password:!0,ignoreFocusOut:!0}).then(r=>r||"")),from:t.counter}}return Vy[t.prompt].result}async function tt(t,e,n,r=!0,o=BI(e),i=!0){var C;let s=!n;if(s){if(gr.results.size){let w=[...gr.results.values()].filter(y=>y.dockerParams)[0];return H3(w.dockerParams)}if(Qd)return Qd}XI()&&(e.write(He.l10n.t("Getting Docker parameters for own remote.")),rm()===1&&e.write(new Error().stack,1)),n&&typeof n!="string"&&"scheme"in n&&(n.scheme==="file"?n=n.fsPath:n=pp(n));let a,c;if(!n){let w=(K.workspace.workspaceFolders||[])[0];if(K.env.remoteName==="wsl")w?n=pp(w.uri):n={wslDistro:jS(K.env.remoteAuthority),wslPath:"/"};else if(K.env.remoteName==="ssh-remote"){if(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),!c){let y=Lv(K.env.remoteAuthority);if(y){let{user:S,hostName:D,port:x}=y;a={host:`ssh://${S?`${S}@`:""}${D}${x?`:${x}`:""}`}}}(c||a)&&(w?n=w.uri.path:n="/")}else K.env.remoteName==="tunnel"?(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),w?n=w.uri.path:n="/"):K.env.remoteName==="attached-container"?a=(C=Wf(K.env.remoteAuthority))==null?void 0:C.settings:(w==null?void 0:w.uri.scheme)==="file"&&(n=w.uri.fsPath);n||(n=process.cwd())}let l=a&&"host"in a&&a.host||void 0,u=r?Ra():{executeInWSL:"never",defaultDistro:void 0},f=await xv(K.env.appRoot),m=Oo(c?{server:c,authority:K.env.remoteAuthority}:void 0,l,n,Hn,u,t.extensionPath,await io(),f,e,Ns,{sshAskpassEnv:o,settings:zh()});i&&!await Promise.race([m,Bt(1e3)])&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Setting up Dev Containers (show log)")}](command:${wt} "${He.l10n.t("Show details in terminal")}")`,cancellable:!1},async()=>{await m});let d=await m,p=ks(),h=Ta();if(!a){let w=K.workspace.getConfiguration("containers"),y=K.workspace.getConfiguration("docker"),S=w.get("environment")||{},D=y.get("environment")||{},x=S.DOCKER_CONTEXT||D.DOCKER_CONTEXT||y.get("context")||d.env.DOCKER_CONTEXT;if(!x){let A={cliHost:d,dockerCLI:p,dockerComposeCLI:ms({exec:d.exec,env:{},output:Fe},p,h),dockerComposePath:h,env:{},output:Fe};x=await Ck(A)||"default"}x&&x!=="default"?a={context:x}:(a={...ur(d.env),...["host","certPath","tlsVerify"].reduce((A,F)=>ype(A,y,F),{}),...ur({...D,...S})},Object.keys(a).length||(a=void 0))}let g={...d.type==="local"?await o:void 0,...await Bf(d,a)},v={cliHost:d,dockerCLI:p,dockerComposeCLI:ms({exec:d.exec,env:g,output:e},p,h),dockerComposePath:h,env:g,output:e};return s&&(Qd=v,LF(t,f),await qy(v.cliHost,e)),v}async function u5(){if(!K.env.remoteName||K.env.remoteName==="test")return process.platform;if(K.env.remoteName==="ssh-remote"||K.env.remoteName==="tunnel"){let t=await K.workspace.getRemoteExecServer(K.env.remoteAuthority);if(t)return(await t.env()).osPlatform}return"linux"}var $I;function LF(t,e){if($I)return $I;let n=Spe(t,e);return t.subscriptions.push(n),t.subscriptions.push(n.event(()=>{let r=Qd==null?void 0:Qd.cliHost;Qd=void 0,r!=null&&r.terminate&&r.terminate()})),$I=n.event,$I}function ype(t,e,n){let r=e.get(n);return r&&(t[n]=r),t}var Cpe=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment","containers.environment"],Epe=["dockerPath","dockerComposePath","executeInWSL","executeInWSLDistro"];function Spe(t,e){let n=new K.EventEmitter,r=K.workspace.onDidChangeConfiguration(async l=>{(Cpe.some(u=>l.affectsConfiguration(u))||Epe.some(u=>SF(l,u)))&&n.fire()}),o,i,s,a=()=>{(async()=>{i||(i=await Oo(void 0,void 0,process.cwd(),Hn,Ra(),t.extensionPath,await io(),e,Fe,Ns));let l={cliHost:i,dockerCLI:ks(),dockerComposeCLI:ms({exec:i.exec,env:{},output:Fe},ks(),Ta()),dockerComposePath:Ta(),env:{},output:Fe},u=await Ck(l);u===void 0?s=setTimeout(a,2*60*1e3):(u!==o&&(o!==void 0&&n.fire(),o=u),s=setTimeout(a,2*1e3))})().catch(console.error)};a();let c=n.dispose;return n.dispose=()=>{r.dispose(),s&&clearTimeout(s),c.call(n)},n}function $u(){let t=K.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return AF(e)}return null}function AF(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let n=ao(t.authority);if(un(n))return null;if(so(n)&&n.inspectVolume&&n.inspectVolume===!0)return n}return null}function WI(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:xpe}}async function xpe(t){let e="Rebuild",n="Ignore",r=await K.window.showInformationMessage(He.l10n.t("Configuration file(s) changed: {0}. The container might need to be rebuilt to apply the changes.",t.join(", ")),e,n);if(r===e)return K.commands.executeCommand("remote-containers.rebuildContainer");if(r===n)return"ignore"}var IF="remote.defaultExtensionsIfInstalledLocally",e5="dev.containers.defaultExtensionsIfInstalledLocally";async function f5(){let t=K.workspace.getConfiguration(),e=t.get(e5);if(!e)return;let n=t.inspect(IF);if(!(n!=null&&n.globalValue))await t.update(IF,e,K.ConfigurationTarget.Global);else{let r=n.globalValue.slice(),o=n.globalValue.map(i=>i.toLowerCase());for(let i of e){let s=i.toLowerCase();o.includes(s)||r.push(i)}await t.update(IF,r,K.ConfigurationTarget.Global)}await t.update(e5,void 0,K.ConfigurationTarget.Global)}function _pe(t){return t?t5():Array.from(new Set([...qt("defaultExtensions")||[],...t5()]))}function d5(){return $u()?{}:qt("defaultFeatures")||{}}function t5(){let t=K.env.language,e=t.indexOf("-"),n=n5(t)||(e!==-1?n5(t.substr(0,e)):void 0);return n?[n]:[]}function n5(t){let e=t.toLowerCase();return K.extensions.all.filter(n=>{var o;let r=n.packageJSON&&n.packageJSON.contributes;return(o=r==null?void 0:r.localizations)!=null&&o.length?!!r.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(n=>n.id)[0]}function r5(){return!!K.workspace.getConfiguration().get("workbench.enableExperiments")}function Dpe(){return!!qt("enableWebAccess")}function jI(){return qt("workspaceMountConsistency")||"cached"}async function VI(t,e,n){if(t.type!=="local")try{let r=t.path.join(await t.homedir(),ZK(e),"data","Machine","settings.json"),o=await t.readFile(r),i=$e(o.toString());return(i==null?void 0:i["dev.containers.gpuAvailability"])||"detect"}catch(r){return(r==null?void 0:r.code)!=="ENOENT"&&n.write(ot(String(r&&(r.stack||r.message)||r))),"detect"}return qt("gpuAvailability")||"detect"}function YI(){return qt("cacheVolume")??!0}function Ipe(){let t=qt("copyGitConfig");return typeof t=="boolean"?t:!0}function Ppe(){return qt("gitCredentialHelperConfigLocation")||"global"}function bpe(){let t=qt("dockerCredentialHelper");return typeof t=="boolean"?t:!0}function Tpe(){let t=qt("githubCLILoginWithToken");return typeof t=="boolean"?t:!0}function Rpe(){let t=qt("mountWaylandSocket");return typeof t=="boolean"?t:!0}function ks(){return qt("dockerPath")||"docker"}function qI(){return qt("dockerSocketPath")||"/var/run/docker.sock"}function Ra(){return{executeInWSL:FF(),defaultDistro:GI()}}function FF(){return process.platform!=="win32"?"never":qt("executeInWSL")?"always":"forWSLPath"}function GI(){if(process.platform==="win32")return qt("executeInWSLDistro")||void 0}function kpe(){return process.platform==="win32"&&qt("forwardWSLServices")!==!1}function Ta(){return qt("dockerComposePath")||"docker-compose"}function zI(){return qt("experimentalLockfile")||!1}function OF(){let t=qt("optimisticallyLaunchDocker");return typeof t=="boolean"?t:!0}function rm(){let t=qt("logLevel")||"debug";return PC(t)}var Npe=t=>K.workspace.onDidChangeConfiguration(e=>{SF(e,"logLevel")&&t(rm())});function Lpe(){let t=K.workspace.getConfiguration(),e=n=>(t.get(Sl(n),"")||t.get(n,"")).trim();return{repository:e("dotfiles.repository")||void 0,installCommand:e("dotfiles.installCommand")||void 0,targetPath:e("dotfiles.targetPath")||"~/dotfiles"}}function zh(){let t=K.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),executableArgs:rm()===1?["-v"]:void 0,configFilePath:t.get("remote.SSH.configFile")}}function qc(t,e,n,r,o,i,s,a,c){var m,d;let l={resolver:e,outcome:n};if(o){l.hostType=o.cliHost.type;let p=o.cliHost.authority;if(p){let h=p.indexOf("+");h!==-1&&(l.hostAuthority=p.substring(0,h))}}i&&(l.configProperties=JSON.stringify(Object.keys(i)),l.configExtensions=JSON.stringify(((d=(m=i.customizations)==null?void 0:m.vscode)==null?void 0:d.extensions)||[]),l.configFeatures=JSON.stringify(Object.keys(i.features||{}).map(p=>Ju(p))),"image"in i?l.configType="image":Ao(i)?l.configType="dockerfile":"dockerComposeFile"in i&&(l.configType="dockerCompose")),s&&(l.configLocation=s),a&&(l.hardwareId=a.osRelease.hardware,l.osReleaseId=a.osRelease.id,l.osReleaseVersion=a.osRelease.version);let u=c&&c.originalError,f=u&&(u.stack||u.message||String(u))||c&&c.description;f&&(l.errorMessage=f),c!=null&&c.step&&(l.step=c.step),t.sendTelemetryEvent("resolver",l,{sessionTimeInMs:Date.now()-r.getTime()})}var PF=class{constructor(e){this.onClose=e}writeEmitter=new K.EventEmitter;onDidWrite=this.writeEmitter.event;inputEmitter=new K.EventEmitter;onDidInput=this.inputEmitter.event;queue=[];ready=!1;open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},Yy=class{constructor(e,n,r=void 0){this.sessionStart=n;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?em.join(e,`remoteContainers-${n.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=Ape(o,rm,this.logFilePath,n,r),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>K.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}_terminal;outputTerminal=new PF(()=>this._terminal=void 0);onDidInput=this.outputTerminal.onDidInput;_name=He.l10n.t("Dev Containers");_revealOnNextOutput=!1;log;logFilePath;get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=K.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function Ape(t,e,n,r,o=void 0){let i=[];return n&&i.push(M0(n,()=>Math.min(2,e()))),i.push(H0(t,e,r)),i.push(Fpe()),sn($0(i,o))}function Fpe(){return{event(t){t.type==="notification"&&K.window.showInformationMessage(t.message,He.l10n.t("Dismiss"))}}}async function UF(t,e){let n=await ii(t,e.Id);if(n&&n.State.Status==="running")try{await Qe(t,"stop",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error stopping container: {0}",r.message))}}async function KI(t,e){let n=await ii(t,e.Id);if(n&&n.State.Status!=="running")try{await Qe(t,"start",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error starting container: {0}",r.message))}}async function m5(t,e){try{await Qe(t,"rm",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing container: {0}",n.message))}}async function $F(t,e){try{await Qe(t,"volume","rm","--force",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing volume: {0}",n.message))}}function Ope(){return K.env.sessionId!=="someValue.sessionId"?K.env.sessionId:`${K.env.sessionId}_${Date.now()}`}function Upe(t,e){let n=K.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(n.dispose.bind(n))}async function p5(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let n=t.workspaceState.get("removeOnStartup",!1);return n&&await t.workspaceState.update("removeOnStartup",null),n}async function h5(t,e){await t.workspaceState.update("removeOnStartup",e)}async function MF(t,e){await t.globalState.update("removeOnStartup",e)}async function g5(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function Gy(t,e){await t.globalState.update("buildNoCache",e)}async function Kh(t,e,n,r,o){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:n==null?void 0:n.toString(),logFile:r,openLog:o})}async function v5(t){var n;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let r=(n=K.workspace.workspaceFolders)==null?void 0:n.some(i=>i.uri.fsPath===e.workspaceFolder||i.uri.path===e.workspaceFolder),o=await $u();if(r||o&&o.repositoryPath===e.workspaceFolder&&(r=!0),r){let i=e.fileWithError?ye.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await o5(i),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?K.ViewColumn.Beside:K.ViewColumn.One,preserveFocus:!0},a=await K.window.showTextDocument(K.Uri.file(e.logFile),s),c=new K.Position(a.document.lineCount-1,0);a.selection=new K.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await o5(i),!0}}return!1}function w5(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function o5(t){return t?K.commands.executeCommand("vscode.open",K.Uri.parse(t.toString()),{viewColumn:K.ViewColumn.One}):K.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:K.ViewColumn.One})}async function JI(t,e,n,r){return!r&&gr.results.size?[...gr.results.values()].filter(o=>o.config).map(o=>({type:o.configLocationType||"unknown",uri:o.configWorkspaceURI||o.config.configFilePath,fileHost:t})):(await Promise.all([!r||r==="workspace"?Pa().then(o=>o.map(i=>({type:"workspace",uri:i,fileHost:t}))):[],!r||r==="repositoryConfig"?HF(t,e).then(o=>o.map(i=>({type:"repositoryConfig",uri:i,fileHost:ba(process.platform,i.with({path:em.posix.dirname(i.path)}))}))):[],n&&(!r||r==="userData")?OI(t,e,n).then(o=>o.map(i=>({type:"userData",uri:i,fileHost:t}))):[]])).flat()}async function HF(t,e){let n=zy();if(n.length){let r=await xS(t,e,Fe);if(r!=null&&r.length){let o=Hx(r,n);return(await Promise.all(o.map(s=>Pa(ye.file(s))))).flat()}}return[]}function zy(){return qt("repositoryConfigurationPaths")||[]}async function Gc(t,e){if(e.type==="local")return t.globalStoragePath}async function $pe(t,e,n="localhost"){await K.workspace.openTunnel({remoteAddress:{host:n,port:e}})}function y5(t,e){let n=new Yy(void 0,e);n.name=He.l10n.t("Configuring..."),n.revealOnNextOutput=!0;let r=!1;n.onDidInput(()=>{r&&(r=!1,n.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:JV(n.log,"postCreate",t),onDidInput:n.onDidInput,done:()=>{n.shown&&(n.log.raw(`\x1B[1m${He.l10n.t("Done. Press any key to close the terminal.")}\x1B[0m`),r=!0),o()},promise:new Promise(s=>o=s)};return{channel:n,postCreate:i}}async function Jh(t){let{authority:e,extensionContext:n,sessionStart:r,progress:o,cliHost:i,env:s,cwd:a,wslSettings:c,isLocalContainer:l,telemetry:u,onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,postCreate:h}=t,g=Dpe(),v=Ope(),C=await io(),w;if(i.type!=="wsl"&&kpe())try{w=await VS(void 0,c,n.extensionPath,C,u.product,Hn,m,Ns)}catch(S){m.write("Could not connect to WSL."),m.write((S==null?void 0:S.message)||String(S)),S!=null&&S.stdout&&m.write(S.stdout.toString()),S!=null&&S.stderr&&m.write(S.stderr.toString())}let y={computeExtensionHostEnv:!0,...u,appRoot:K.env.appRoot,localCacheFolder:C,containerSessionDataFolder:em.posix.join("/tmp",`devcontainers-${v}`),extensionPath:n.extensionPath,sessionId:v,sessionStart:r,authority:e,cliHost:i,hostConfig:await qy(i,m),env:s,cwd:a,isLocalContainer:l,getAdditionalExtensionsToInstall:_pe.bind(void 0),additionalFeaturesToInstall:d5(),isCopyGitConfigEnabled:Ipe(),credentialHelperConfigLocation:Ppe(),isDockerCredentialHelperEnabled:bpe(),isGitHubCLILoginWithTokenEnabled:Tpe(),dotfilesConfiguration:Lpe(),progress:jpe(o),onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,defaultUserEnvProbe:"loginInteractiveShell",postCreate:h,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:g,getLogLevel:rm,onDidChangeLogLevel:Npe,loadNativeModule:Hn,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:S=>Upe(y,S),openTunnel:$pe,getTunnels:()=>Promise.resolve(K.workspace.tunnels),onAdoptProcess:K.window.onDidOpenTerminal,persistedFolder:await B3(i,n.globalStoragePath),alternateDownload:Ns,skipPostAttach:!1,wslCLIHost:w,localWaylandSocket:l?await Mpe(i,w,m):void 0,globalState:n.globalState};return y.hostConfig.pauseResolver&&await l5(i,m),y}async function Mpe(t,e,n){if(!Rpe())return;let r=await PR(t);if(r)return r;let o=e&&await PR(e);if(o)return OV(e,o,n)}async function Ns(t,e){let n=await K.commands.executeCommand("_workbench.downloadResource",K.Uri.parse(t));if(!n)throw new Se({description:He.l10n.t("Downloading the VS Code Server failed. Please try again later.")});await Jc(n.fsPath,e)}var Xh=`[${He.l10n.t("Connecting to Dev Container (show log)")}](command:${wt} "${He.l10n.t("Show details in terminal")}")`,Hpe=`[${He.l10n.t("Configuring Dev Container (show log)")}](command:${NF} "${He.l10n.t("Show details in terminal")}")`,Bpe=`[${He.l10n.t("Reading Dev Container Configuration (show log)")}](command:${wt} "${He.l10n.t("Show details in terminal")}")`,Wpe={0:"",1:He.l10n.t("Cloning Repository"),2:He.l10n.t("Building image"),3:He.l10n.t("Starting container"),4:He.l10n.t("Installing server"),5:He.l10n.t("Starting server"),6:""};function jpe(t){let e=0;return n=>{let r=6-n,o=(100-e)/(r+1);t.report({message:Wpe[n],increment:o}),e+=o}}function C5(t,e,n){let{name:r,publisher:o,version:i,aiKey:s}=e;if(!s)return ZO(e,n);let a=o?`${o}.${r}`:r,c=new My(s);t.subscriptions.push(c);let l=new bF(c),u=Vpe(n),f=r5()?(0,Uu.getExperimentationService)(a,i,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async m=>f&&r5()?f.isCachedFlightEnabled(m):!1,product:n,package:e,getTelemetryLevel:()=>c.telemetryLevel}}var bF=class{constructor(e){this.baseReporter=e}sharedProperties={};sendTelemetryEvent(e,n,r){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...n},r)}setSharedProperty(e,n){this.sharedProperties[e]=n}postEvent(e,n){let r={};for(let[o,i]of n)r[o]=i;this.sendTelemetryEvent(e,r)}};function Vpe(t){switch(t.quality){case"stable":return Uu.TargetPopulation.Public;case"insider":return Uu.TargetPopulation.Insiders;case"exploration":return Uu.TargetPopulation.Internal;case void 0:return Uu.TargetPopulation.Team;default:return Uu.TargetPopulation.Public}}var Ky=He.l10n.t("Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container."),TF="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function Jy(t,e){if(e!=null&&e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||t.globalState.get(TF))return!0;let n=He.l10n.t("Got It"),r=He.l10n.t("Learn More"),o=await K.window.showWarningMessage(He.l10n.t("Cloning a repository in a Dev Container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only clone a repository in a Dev Container if you trust its authors.")},n,r);return o===n?(await t.globalState.update(TF,!0),!0):(o===r&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var RF="userConfirmedAttachToContainerRequiresTrust";async function Mu(t){if(t.globalState.get(RF))return!0;let e=He.l10n.t("Got It"),n=He.l10n.t("Learn More"),r=await K.window.showWarningMessage(He.l10n.t("Attaching to a container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only attach to a container if you trust its origin.")},e,n);return r===e?(await t.globalState.update(RF,!0),!0):(r===n&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function E5(t){t.globalState.setKeysForSync([TF,RF,kF])}function S5(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var kF="updatedToPreRelease2",Ype="2022-01-19T05:14:31.474Z";async function x5(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(Ype)>=0&&!t.globalState.get(kF,!1)&&(await t.globalState.update(kF,!0),await K.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(n){console.error(n)}}async function Zh(t,e,n,r){try{return await Mx(t,e,n,rm(),void 0,void 0,r)}catch{return}}async function BF(t,e,n,r){let o=(async()=>{try{return await W3(t,e,n,rm(),d5(),void 0,void 0,r)}catch{return}})(),i=await Promise.race([o,new Promise(s=>setTimeout(()=>s("timeout"),1e3))]);return i!=="timeout"?i:K.window.withProgress({location:K.ProgressLocation.Notification,title:Bpe,cancellable:!0},async(s,a)=>Promise.race([o,new Promise(c=>{let l=a.onCancellationRequested(()=>{l.dispose(),c("canceled")})})]))}async function Hu(t){return K.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function _5(t,e,n,r){try{return await Ip(e,t.globalState,n,r),!0}catch(o){if(!(o instanceof Se))throw o;let i=He.l10n.t("Learn More");return await K.window.showWarningMessage(o.description,{modal:!0,detail:o.detail},...o.data.learnMoreUrl?[i]:[])===i&&await K.env.openExternal(K.Uri.parse(o.data.learnMoreUrl)),!1}}async function D5(t,e){let n="";for(let r=Np(K.env.remoteAuthority);r;r=Np(r.parentAuthority)){let o=r.name==="tunnel"?await K.extensions.getExtension("ms-vscode.remote-server"):r.name==="ssh-remote"?await K.extensions.getExtension("ms-vscode-remote.remote-ssh"):void 0;o&&(n+=` over ${o.packageJSON.displayName} ${o.packageJSON.version}`)}return`Dev Containers ${t.version}${n} in VS Code ${K.version} (${e.commit||"out-of-source"}).`}function I5(t){XI()&&(async()=>await Promise.race([t,new Promise(n=>setTimeout(()=>n("timeout"),1e4))])==="timeout"&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Dev Containers waiting for connection request (show log)")}](command:${wt} "${He.l10n.t("Show details in terminal")}")`},async()=>t))()}var qpe=["dev-container","attached-container","k8s-container"];function XI(){return K.env.remoteName&&qpe.includes(K.env.remoteName)}var om={id:"openDocumentation",title:Ci.l10n.t("Open Documentation"),isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await $t.env.openExternal($t.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},im={id:"reloadWindow",title:Ci.l10n.t("Reload Window"),isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await Qe(t.dockerParams,"stop","-t","0",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},b5={id:"rebuildContainer",title:Ci.l10n.t("Rebuild Container"),isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e&&!(t.params&&"hostConfig"in t.params&&!t.params.hostConfig.canRebuildContainer),execute:async t=>{await $i(t.dockerParams,t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},Qh={id:"openRecent",title:Ci.l10n.t("Open Recent..."),isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await $t.commands.executeCommand("workbench.action.openRecent")}},T5={id:"startContainer",title:Ci.l10n.t("Start Container"),isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await Qe(t.dockerParams,"start",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},R5={id:"chooseContainer",title:Ci.l10n.t("Choose Container"),isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await $t.commands.executeCommand("remote-containers.attachToRunningContainer")}},Bu={id:"closeRemote",title:Ci.l10n.t("Close Remote"),isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let n=$t.workspace.workspaceFile;return!(n&&n.scheme==="untitled"||$t.workspace.textDocuments.some(o=>o.isDirty))},execute:async t=>{await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},eg=[{id:"retry",title:Ci.l10n.t("Retry"),isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:im.execute},{id:"moreActions",title:Ci.l10n.t("More Actions..."),isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:Ci.l10n.t("Learn More"),isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await $t.env.openExternal($t.Uri.parse(t.data.learnMoreUrl))}}];async function Wu(t,e,n,r=!1,o){var d,p,h,g,v,C;let i=t instanceof Se?t:new Se({description:Ci.l10n.t("An error occurred setting up the container."),originalError:t});$t.commands.executeCommand(wt);let s=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(s!==void 0){o.write(ot(String(s)));let w=(p=(d=i.originalError)==null?void 0:d.stdout)==null?void 0:p.toString().trim();w&&o.write(w);let y=(g=(h=i.originalError)==null?void 0:h.stderr)==null?void 0:g.toString().trim();y&&o.write(ot(y)),(v=i.originalError)!=null&&v.code&&o.write(`Exit code ${(C=i.originalError)==null?void 0:C.code}`)}if(i.data.closeRemote)throw await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),$t.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let a=i.actions;a.length||(a=[om]);let c=await a.reduce(async(w,y)=>await y.applicable(i,!0)?[...await w,y]:w,Promise.resolve([])),l=await $t.window.showErrorMessage(i.description,{modal:!0,detail:i.detail},...c);if(l&&(P5(n,e,l.id),await l.execute(i)),l&&l.isLastAction){if(r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await a.reduce(async(w,y)=>await y.applicable(i,!1)?[...await w,y]:w,Promise.resolve([])),f=u.map(w=>({label:w.title,action:w}));async function m(){let y=await(u.length?$t.window.showQuickPick(f,{ignoreFocusOut:!0,placeHolder:Ci.l10n.t("Pick an action to help resolve the problem.")}):Promise.resolve(void 0));y&&(P5(n,e,y.action.id),y.action.execute(i).catch(console.error),y.action.isLastAction||await m())}if(m().catch(console.error),r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function P5(t,e,n){t.sendTelemetryEvent("errorAction",{resolver:e,action:n})}var hn=Y(require("vscode")),Kt=require("vscode"),ka=Y(require("path"));var fe=Y(require("vscode")),zt=require("vscode");var z5=Y(pT());function k5(t){var e;return(e=t.options)!=null&&e.version?"version":void 0}var sg=Y(require("path"));async function ju(t){let r=await $x({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},t),o=$e(r.toString());return o.collections.find(i=>i.templates.length)||t.write("No container templates retrieved from index.",5),o.collections.find(i=>i.features.length)||t.write("No container features retrieved from index.",5),o}var Lt=Y(require("vscode")),it=require("vscode"),eC=Y(require("os"));var Qy=Y(require("path"));var Dn=Y(require("vscode")),Gt=require("vscode");var N5=Gt.l10n.t("Keep Defaults"),Gpe=Gt.l10n.t("Configure Options"),Xy={iconPath:new Dn.ThemeIcon("check-all"),tooltip:Gt.l10n.t("Finish")},WF=["devcontainers","microsoft","github"];async function tg(t,e,n,r=[],o,i=!0,s=!1){if(!e.length)return{};let a={iconPath:new Dn.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")},c=t.quickPick.onDidTriggerItemButton(y=>{let S=y.item.feature.documentationURL;Dn.env.openExternal(Dn.Uri.parse(S))}),l=await o,u=Gt.l10n.t("Suggested by GitHub Copilot"),f=e.map(y=>{let S=r.indexOf(y)!==-1,D;if(S)D=Gt.l10n.t("$(lock) Feature is included in base image and cannot be removed");else if(y.owner){let A=y.owner==="devcontainers"?"$(verified)":"";D=`${y.owner||Gt.l10n.t("Unknown Publisher")} ${A}`}else D=void 0;let x=l==null?void 0:l.features.includes(y);return{label:x?`$(sparkle) ${y.name}`:y.name,detail:y.description,description:x?D?`${D} ${u}`:u:D,picked:n.indexOf(y)!==-1,buttons:y.documentationURL?[a]:void 0,feature:y,isAlreadyInstalledViaBaseImage:S,kind:Dn.QuickPickItemKind.Default}}).sort((y,S)=>{if(y.isAlreadyInstalledViaBaseImage!==S.isAlreadyInstalledViaBaseImage)return y.isAlreadyInstalledViaBaseImage?1:-1;let D=l==null?void 0:l.features.includes(y.feature),x=l==null?void 0:l.features.includes(S.feature);return D!==x?D?-1:1:y.label.localeCompare(S.label)}),m,d=t.quickPick,{matchOnDetail:p}=d;try{d.matchOnDetail=!0;let y=[];s&&y.push(Dn.QuickInputButtons.Back),i&&y.push(Xy),m=await wo(d,f,Gt.l10n.t("Select additional features to install"),Gt.l10n.t("Select Features"),!0,y)}finally{d.matchOnDetail=p}if(c.dispose(),!m)return;if(m.button===Dn.QuickInputButtons.Back)return"back";let h=m.pick.filter(y=>!y.isAlreadyInstalledViaBaseImage).map(y=>y.feature),g={};if(!h.length)return g;let v=[];for(let y of e){let S=h.indexOf(y)!==-1;g[y.id]=S?{}:!1,S&&WF.indexOf(y.owner)===-1&&v.push(y)}if(t.askForTrust&&v.length){let y=[...new Set(v.map(E=>E.owner))].sort().map(E=>`@${E}`),S=y.length===1?y[0]:`${y.slice(0,-1).join(", ")} and ${y[y.length-1]}`,D={label:Gt.l10n.t("Trust {0}",S),description:Gt.l10n.t("from GitHub"),buttons:[{iconPath:new Dn.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")}]},x={label:Gt.l10n.t("Back")},A={label:Gt.l10n.t("Cancel")},F=d.onDidTriggerItemButton(()=>{for(let E of v)Dn.env.openExternal(Dn.Uri.parse(E.documentationURL))}),k=await wo(d,[D,x,A],Gt.l10n.t("Some features are from the {0} GitHub owner/organization(s).",S),void 0,void 0,!0);if(F.dispose(),!k||k===A)return;if(k==="back"||k===x)return tg(t,e,n,r,o,i,s)}return m.button===Xy||!i||!h.some(y=>{let S=y.options;return S&&Object.keys(S).some(D=>{let x=S[D];return x.type==="boolean"||x.type==="string"&&("enum"in x&&(x.enum||[]).length>1||"proposals"in x&&(x.proposals||[]).length>1)})})||await Dn.window.showQuickPick([N5,Gpe],{title:Gt.l10n.t("Keep Feature defaults or configure options?"),canPickMany:!1})===N5?g:zpe(t,g,h,()=>tg(t,e,n,r,o))}async function zpe(t,e,n,r){return async function o(i,s,a){if(!s.length)return i;let c=s[0],l=i;if(!(c!=null&&c.options))return o(l,s.slice(1),a);let u,f;return u=await Kpe(t,l,c),u&&(f=await Jpe(t,u,c,a)),!u||!f?await a():o(f,s.slice(1),a)}(e,n,r)}async function Kpe(t,e,n){let r=n==null?void 0:n.options;if(!r)return e;let i=Object.keys(r).filter(l=>{var u;return((u=r[l])==null?void 0:u.type)==="boolean"}).map(l=>{let u=r[l];return{label:l,description:u.description,key:l,value:!0,picked:!!(u!=null&&u.default)}});if(!i.length)return e;let s=n.id,a=n.name||s,c=await wo(t.quickPick,i,Gt.l10n.t("Select boolean options for {0}",a),Gt.l10n.t("Select boolean options for '{0}'",a),!0,[Dn.QuickInputButtons.Back,Xy]);if(!(!c||c.button===Dn.QuickInputButtons.Back))return c.pick.reduce((l,u)=>({...l,[s]:{...l==null?void 0:l[s],[u.key]:u.value}}),e)}async function Jpe(t,e,n,r){let o=n==null?void 0:n.options;if(!o)return e;let i=n.id,s=n.name||i;return async function a(c,l,u){if(!l.length)return c;let f=l[0],m=o[f],d=("enum"in m&&m.enum||"proposals"in m&&m.proposals||[]).map(v=>({label:String(v),value:v,description:m.default===v?Gt.l10n.t("(default)"):void 0}));if(d.length===0)return a(c,l.slice(1),u);let p="enum"in m?void 0:v=>{if(!(!v||d.some(C=>C.value===v)))return{label:Gt.l10n.t("Use: {0}",v),value:v,description:Gt.l10n.t("(custom)")}},h=d.length===1?{pick:d[0],button:"ok"}:await wo(t.quickPick,d,m.description||Gt.l10n.t("Select a value"),Gt.l10n.t("Select options for '{0}'",s),void 0,[Dn.QuickInputButtons.Back,Xy],p);if(!h||h.button===Dn.QuickInputButtons.Back)return;let g={...c,[i]:{...c==null?void 0:c[i],[f]:h.pick.value}};return h.button===Xy?g:a(g,l.slice(1),u)}(e,Object.keys(o).filter(a=>{var c;return((c=o[a])==null?void 0:c.type)==="string"}),r)}var Xpe=["png","md","json","txt","map"],Zpe=["node_modules",".git","bin","out","dist",".vscode-test"],Qpe=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],L5={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},A5={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},ehe=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function F5(t,e){let n=new Map;for(let r of e)if(r.platforms){if(ehe.indexOf(r.id)>-1)continue;let o=0,i=0,s=r.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if(A5[a]){let c=A5[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(o+=10),t.mostPopularFileType===l&&(o+=10)}else if(L5[a]){let c=L5[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}n.set(r,o+(i<0?-4:i))}return n}async function O5(t,e){return the(t,e.rootFolderPath,Zpe,Xpe)}async function the(t,e,n,r){let o=new Map,i=new Map,s=500;function a(d,p,h,g){let v=[];(t.readDirWithTypes||t.readDir)(d).then(w=>{if(h.count>=s)return h.count+=w.length,h.maxReached=!0,g(v);let y=w.length;if(y===0)return g(v);let S=w;h.count+w.length>s&&(h.maxReached=!0,y=s-h.count,S=w.slice(0,y)),h.count+=w.length;for(let D of S){let x=Array.isArray(D)?D[0]:D;(Array.isArray(D)?Promise.resolve((D[1]&1)!==0):t.isFile(t.path.join(d,x))).then(F=>{F?(v.push(x),--y===0&&g(v)):p.indexOf(x)===-1?a(t.path.join(d,x),p,h,k=>{if(v=v.concat(k),--y===0)return g(v)}):--y===0&&g(v)},()=>{if(--y===0)return g(v)})}},()=>g(v))}let c=d=>{o.has(d)?o.set(d,o.get(d)+1):o.set(d,1)},l=d=>{for(let p of Qpe)p.pattern.test(d)&&(i.has(p.tag)?i.set(p.tag,i.get(p.tag)+1):i.set(p.tag,1))},u=d=>{if(d.lastIndexOf(".")>=0){let p=d.split(".").pop();p&&!r.includes(p)&&c(p.toLowerCase())}l(d)},f=d=>[...d.entries()].reduce((p,h)=>h[1]>p[1]?h:p,["",0])[0],m={count:0,maxReached:!1};return new Promise((d,p)=>{a(e,n,m,async h=>{h.forEach(u),d({configFiles:i,fileTypes:o,fileCount:m.count,mostPopularFileType:f(o)})})})}var Ei=Y(require("vscode")),ZI=require("vscode");var Zy={"ghcr.io/devcontainers/templates/anaconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/kubernetes-helm":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/alpine":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-outside-of-docker-compose":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/jekyll":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/docker-outside-of-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-in-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/go":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet-fsharp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/debian":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/rust-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/universal":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/conda","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/dotnet","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/git-lfs","ghcr.io/devcontainers/features/github-cli","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/hugo","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/kubectl-helm-minikube","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/oryx","ghcr.io/devcontainers/features/php","ghcr.io/devcontainers/features/python","ghcr.io/devcontainers/features/ruby","ghcr.io/devcontainers/features/sshd"],"ghcr.io/devcontainers/templates/python":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/markdown":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/rust":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/java-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/java":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/anaconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/php":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/powershell":["ghcr.io/devcontainers/features/common-utils"],"ghcr.io/devcontainers/templates/kubernetes-helm-minikube":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby-rails-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/cpp-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/cpp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-mssql":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/typescript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/ubuntu":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/php-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/go-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-mongo":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"]};async function $5(t,e,n,r,o){var u;let i=await jF(t,e,n);if(i.type==="cancelled")return;if(i.type==="failure"){let f=ZI.l10n.t("OK");return await Ei.window.showInformationMessage(Ei.l10n.t("Something went wrong. Please pick a Dev Container configuration yourself."),{modal:!0,detail:i.message},f)===f||void 0}if(!i.template){let f=ZI.l10n.t("OK");return await Ei.window.showInformationMessage(Ei.l10n.t("GitHub Copilot did not have enough contextual information. Please pick a Dev Container configuration yourself."),{modal:!0},f)===f||void 0}let s=i.template,a=await VF(t,{id:s,name:s},void 0),c=new Set(Zy[s]||[]);a.features=((u=i.features)==null?void 0:u.filter(f=>!c.has(f)).map(f=>({id:f,copilotSuggested:!0,options:{}})))||[];let l=await ng(t,e,r,o,a);return l&&Ko(t.telemetry,"copilot",a,o),l}var M5="github.copilot.devcontainer.generateDevContainerConfig",U5=6e3;async function jF(t,e,n){var i,s;let r={index:{templates:((i=t.index)==null?void 0:i.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/templates").map(a=>a.templates).flat().filter(a=>!rg.includes(a.id)).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[],features:((s=t.index)==null?void 0:s.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/features").map(a=>a.features).flat().filter(a=>!a.deprecated).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[]},rootUri:Ei.Uri.parse((await e.toCommonURI(n.rootFolderPath)).toString())},o=new Ei.CancellationTokenSource;try{return await Promise.race([Ei.commands.executeCommand(M5,r,o.token),Bt(U5).then(()=>(o.cancel(),{type:"failure",message:ZI.l10n.t("Timeout after {0} seconds.",U5/1e3)}))])}catch(a){return{type:"failure",message:(a==null?void 0:a.message)||String(a)}}finally{o.dispose()}}async function H5(){return(await Ei.commands.getCommands()).includes(M5)}var YF=Qy.default.join(__dirname,"..",".."),B5=Lt.env.appRoot,nhe=t=>Rf(t,B5);async function ig(t,e){let{fileHost:n,output:r}=t;r.write("Entering createDevContainerConfig_v2");let o=await G5();if(o){let i=_e(o,n.platform),s=It(n.path,i),a=await yS(n,s);if(a){let l=it.l10n.t("Continue");if(await Lt.window.showInformationMessage(it.l10n.t("The workspace could fail to open in a container: {0}",a),{modal:!0},l)!==l)return!1}let c=await zF(t,s,void 0,void 0,e);if(c){let l=await n.toCommonURI(c);l&&Lt.window.showTextDocument(Lt.Uri.parse(l.toString()))}return!!c}return!1}async function ng(t,e,n,r,o,i=(s,a)=>a){return Lt.window.withProgress({location:Lt.ProgressLocation.Notification,title:it.l10n.t("Adding Dev Container Configuration Files..."),cancellable:!1},async()=>GF(t,e,n,r,o,i))}async function W5(t){let{output:e}=t,n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await io(),o=process.cwd();return{cliHost:await Oo(void 0,void 0,o,nhe,n,YF,r,t.telemetry.product,e,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:YF,appRoot:B5,output:e,package:await sr(YF)}}async function GF(t,e,n,r,o,i=(s,a)=>a){let{output:s}=t;s.write(`Preparing to apply Template '${o==null?void 0:o.id}'`);let a=Qy.default.join(eC.tmpdir(),`tmp-output-dir-${Date.now()}`),c=Qy.default.join(eC.tmpdir(),`tmp-dir-${Date.now()}`);t.quickPick.busy=!0,t.quickPick.enabled=!1;let l=await W5(t),u;try{u=await ri(l,["templates","apply","--workspace-folder",a,"--template-id",o.id,"--template-args",o.options?JSON.stringify(o.options):"{}","--features",o.features?JSON.stringify(o.features):"[]","--tmp-dir",c,"--log-level",Qr(jy()),"--omit-paths",o.omitPaths?JSON.stringify(o.omitPaths):"[]"])}catch{let d=it.l10n.t("Show Log");await Lt.window.showErrorMessage(it.l10n.t("Application of the template failed."),{modal:!0},...t.showLogCommandId?[d]:[])===d&&Lt.commands.executeCommand(t.showLogCommandId);return}let f=it.l10n.t("Skip"),m;for(let d of u.files){s.write(`Copying file '${d}'`,1);let p=e.path.join(n,d);if(await e.isFile(p)){let v=r==="userData"?By(e.platform,p,eC.homedir()):d,C=await Lt.window.showInformationMessage(it.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},f,it.l10n.t("Overwrite"));if(!C)return;if(C===f)continue}await e.mkdirp(e.path.dirname(p));let h=await st(Qy.default.join(a,d)),g=i(d,h);await e.writeFile(p,g),!m&&Vv(e.path,d)&&(m=p)}return s.write("Cleaning up...",1),await Zc(a,{recursive:!0,force:!0}),await Zc(c,{recursive:!0,force:!0}),t.quickPick.busy=!1,t.quickPick.enabled=!0,m}async function zF(t,e,n,r,o){let{fileHost:i,telemetry:s}=t,a=await KF(t,n,!1);if(r){Ko(await s,"existsMissingImageInfo");let d=_e(r,i.platform);if(!await Lt.window.showWarningMessage(it.l10n.t("Dev Container configuration '{0}' file is missing image information. You can add this manually or overwrite with a template.",i.path.relative(e.configFolderPath,d)),{modal:!0},it.l10n.t("Use Template"))){let h=await i.toCommonURI(d);h&&Lt.window.showTextDocument(Lt.Uri.parse(h.toString()));return}}let c,l,u="workspace";if(t.userDataFolderForConfigurations){c=await xF(i,e,t.userDataFolderForConfigurations);let d=c&&await Lf(i,c),p={label:it.l10n.t("Add configuration to user data folder"),description:d?it.l10n.t("Configuration already exists"):void 0,detail:it.l10n.t("This avoids having outgoing changes in your workspace folder")},h=await Lf(i,e.configFolderPath),g={label:it.l10n.t("Add configuration to workspace"),description:h?it.l10n.t("Configuration already exists"):void 0,detail:it.l10n.t("This allows you to share the configuration with others via source control")},v=await wo(a.quickPick,[g,p],it.l10n.t("Where would you like to create your container configuration?"));if(!v)return;v===p&&(l=c||KK(i,e,t.userDataFolderForConfigurations),u="userData")}else if(!r){let d=await e0(i,e);if(d){Ko(await s,"exists");let p=_e(d.uri,i.platform);if(!await Lt.window.showWarningMessage(it.l10n.t("Dev Container configuration '{0}' file already exists.",i.path.relative(e.configFolderPath,p)),{modal:!0},it.l10n.t("Continue"))){let g=await i.toCommonURI(p);g&&Lt.window.showTextDocument(Lt.Uri.parse(g.toString()));return}}}let f=l||e.configFolderPath,m;if((o==null?void 0:o.picker)==="copilot"){let d=await $5(a,i,e,f,u);d===!0&&(d=await og(a,i,e,f,u,void 0)),m=d}else m=await og(a,i,e,f,u,void 0);if(m&&l&&!c){let d=await JK(i,e,t.userDataFolderForConfigurations,l);m=i.path.resolve(d,i.path.relative(l,m))}return a.quickPick.hide(),m}async function KF(t,e,n){let r=Lt.window.createQuickPick();r.ignoreFocusOut=!0,e&&(r.title=e);let o=await ju(t.output);return{existingFilesLearnMoreLink:Y5,predefinedDefinitionsLearnMoreLink:q5,...t,quickPick:r,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await t.telemetry,index:o,skipOptions:n}}async function j5(t,e,n,r,o,i,s){if(!t.index)return;let c=await QI(t,e,n,i);if(!c)return;if(c==="back")return s?s():void 0;let l=await ng(t,e,r,o,c);return l&&Ko(t.telemetry,"definition",c,o),l}var rg=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function QI(t,e,n,r){let{index:o}=t,i=((o==null?void 0:o.collections.map(l=>l.templates).flat())||[]).filter(l=>!rg.includes(l.id));if(!(i!=null&&i.length))return;let s=()=>QI(t,e,n,r),a=await rhe(t,e,n,i);if(!(a!=null&&a.length))return qF(t,[],i,r,s);let c=[{label:it.l10n.t("Show All Templates..."),detail:it.l10n.t("Show all available predefined container templates."),alwaysShow:!0,type:"showAll"}];return qF(t,c,a,r,s)}async function rhe(t,e,n,r){r=r.filter(a=>a.owner==="devcontainers");let o=t.stats||e&&n&&(t.stats=await O5(e,n));if(!(o!=null&&o.mostPopularFileType.length))return;let i=F5(o,r);return r.filter(a=>(i.get(a)||0)>0).sort(ohe.bind(null,i))}function ohe(t,e,n){let r=t.get(n)||0,o=t.get(e)||0;return r-o}async function qF(t,e,n,r,o){let{index:i,predefinedDefinitionsLearnMoreLink:s,telemetry:a}=t,c={iconPath:new Lt.ThemeIcon("info"),tooltip:it.l10n.t("Open Documentation")},l=t.quickPick.onDidTriggerItemButton(p=>{let h=p.item.template.documentationURL;Lt.env.openExternal(Lt.Uri.parse(h))}),u=(async()=>{let p=await r,h=n;p!=null&&p.template&&n.indexOf(p.template)===-1&&(h=[p.template,...n]);let g=it.l10n.t("Suggested by GitHub Copilot"),v=h.map(w=>{let y;if(w.owner){let D=(w==null?void 0:w.owner)==="devcontainers"?"$(verified)":"";y=`${((w==null?void 0:w.owner)==="microsoft"&&w.id.includes("microsoft/vscode-dev-containers")?it.l10n.t("community"):w==null?void 0:w.owner)||it.l10n.t("Unknown Publisher")} ${D}`}let S=w===(p==null?void 0:p.template);return{label:S?`$(sparkle) ${w.name}`:w.name,picked:n.indexOf(w)!==-1,detail:w==null?void 0:w.description,description:S?y?`${y} ${g}`:g:y,buttons:[c],template:w}}).sort((w,y)=>w===y?0:w.template===(p==null?void 0:p.template)?-1:y.template===(p==null?void 0:p.template)?1:w.label.localeCompare(y.label));return[...e,...s?[XF]:[],...v]})(),f=p=>{let h=p.trim();if(/^\S+(\/\S+){2,}$/.test(h))return{label:it.l10n.t("Use '{0}' as template...",h),detail:it.l10n.t("Apply this custom template instead of one of the listed templates."),templateId:h}},m=it.l10n.t("Select a container configuration template or enter a custom template id"),d=await wo(t.quickPick,u,m,void 0,void 0,void 0,f);if(l.dispose(),!d){Ko(a,"canceled");return}if(d.type==="help"){Ko(a,"help"),Lt.env.openExternal(s);return}if(d.type==="showAll"){let p=((i==null?void 0:i.collections.map(h=>h.templates).flat())||[]).filter(h=>!rg.includes(h.id));return qF(t,[],p,r,o)}if(d.template)return sm(t,d.template,r.then(p=>{var v,C;if(!p)return;let h=((i==null?void 0:i.collections.map(w=>w.features).flat())||[]).filter(w=>!w.deprecated),g=new Set([...p.features,...p.template&&((v=Zy[p.template.id])==null?void 0:v.map(w=>h.find(y=>y.id===w)).filter(w=>!!w))||[]]);return(((C=Zy[d.template.id])==null?void 0:C.map(w=>h.find(y=>y.id===w)).filter(w=>!!w))||[]).forEach(w=>g.delete(w)),{template:p.template,features:Array.from(g)}}),o);if(d.templateId)return sm(t,{id:d.templateId,name:d.templateId},r,o)}async function VF(t,e,n){if(!e.version){let r=await ihe(t,e.id);r&&(e={...r,id:e.id})}return{id:e.id,options:{},features:[],omitPaths:[],metadata:{template:e,features:[],copilotSuggestion:n}}}async function ihe(t,e){let{output:n}=t;n.write(`Attempting metadata fetch for Template '${e}' from remote manifest`,3);let r=await W5(t);try{return await ri(r,["templates","metadata",e,"--log-level",Qr(jy())])}catch{n.write(`Metadata for '${e}' not cached on manifest. Some features will be unavailable.`,1),n.write(`Ask the Template owner to republish '${e}' to populate the data`,1);return}}async function sm(t,e,n,r){let o=await VF(t,e,await n),i={...o.metadata.template};if(t.skipOptions)return o;if(!i.options){let u=await JF(t,o,[],n,r);return u?u==="back"?r():u:void 0}let s=i.options,a=[],c=[];for(let u in s){let f=s[u];f.name=u,f.type==="boolean"?a.push(f):f.type==="string"&&c.push(f)}let l=await ahe(t,c,o,async()=>"back",(u,f)=>V5(t,a,i.name,u,n,f));if(l==="back")return r();if(l)return l}async function she(t,e,n,r){var o;if((o=e.optionalPaths)!=null&&o.length){let i=e.optionalPaths.map(l=>({label:l,picked:!1})),s=it.l10n.t("Optional Files/Directories"),a=it.l10n.t("Include the following optional files/directories"),c=await wo(t.quickPick,i,a,s,!0,!0);if(c==="back")return r();c&&(n.omitPaths=i.filter(l=>!c.includes(l)).map(l=>l.label))}return n}async function ahe(t,e,n,r,o){let i=e.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0?a=s.enum:s.default&&(a=[s.default]);let c=s.default,l=a.map(f=>({label:f,description:f===c?it.l10n.t("(default)"):void 0,value:f})),u=l.findIndex(f=>f.value===c);return u!==-1&&l.unshift(...l.splice(u,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,enum:"enum"in s,items:l}});return async function s(a,c,l){if(!a.length)return o(c,l);let u=a[0],f=u.enum?void 0:p=>{if(!(!p||u.items.some(h=>h.value===p)))return{label:it.l10n.t("Use: {0}",p),value:p,description:it.l10n.t("(custom)")}},m=await wo(t.quickPick,u.items,u.placeholder,void 0,void 0,!0,f);if(!m)return;if(m==="back")return l();let d={...c.options};return d[u.name]=m.value,c.options={...d},s(a.slice(1),c,()=>s(a,c,l))}(i,n,r)}async function V5(t,e,n,r,o,i){let s=r,a=e.map(u=>{let f=u.default==="true";return{label:u.description||u.name,picked:f,name:u.name,default:f}}),c=a.length?await wo(t.quickPick,a,it.l10n.t("Select the options for the '{0}' dev container",n),void 0,!0,!0):[];if(!c)return r;if(c==="back")return i();for(let u of a){let f=c.indexOf(u)!==-1,m={...r.options};m[u.name]=f.toString(),r.options={...m}}let l=await JF(t,r,[],o,()=>e.length>0?V5(t,e,n,s,o,i):i());if(l)return l==="back"?i():l}async function JF(t,e,n,r,o){let{quickPick:i,telemetry:s,output:a,index:c,askForTrust:l}=t,u=c==null?void 0:c.collections.reduce((h,g)=>h.concat(g.features),[]).filter(h=>!h.deprecated);if(!(u!=null&&u.length))return e;let m=await tg({quickPick:i,askForTrust:l,telemetry:s,output:a},u,n,[],r,!0,!0);if(!m)return;if(m==="back")return o();let d=[],p=[];for(let h in m)if(m[h]){let g=u.find(v=>v.id===h);if(g){p.push(g);let v=g.majorVersion||"latest",C={id:`${h}:${v}`,options:m[h]};d.push(C)}}return e.features=d,e.metadata.features=p,await she(t,e.metadata.template,e,()=>JF(t,e,p,r,o))}function K5(t){return{provideCompletionItems(e,n,r){let o=GO(e.getText(),e.offsetAt(n)),i=e.getWordRangeAtPosition(n)||new fe.Range(n,n);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=$e(e.getText());return s.configFilePath=e.uri,che(s,i)}if(o.path[0]==="features"){let s=$e(e.getText());s.configFilePath=e.uri;try{return lhe(t,s,o,i)}catch(a){console.error(a)}}return[]}}}function che(t,e){var r,o;let n=((t==null?void 0:t.extensions)||[]).concat(((o=(r=t==null?void 0:t.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(n)){let i=fe.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||n.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new fe.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=fe.CompletionItemKind.Value,a.insertText=c,a.range=e,a.filterText=c,a})}}async function lhe(t,e,n,r){var i;let o=e&&e.features||{};if(typeof o=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e={...e,configFilePath:e.configFilePath.with({scheme:Ke.scheme,authority:""})};let c=fe.env.remoteName&&fe.env.remoteName!=="test"?"linux":process.platform,l=((i=(fe.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||ye.file(process.cwd());t={...t,fileHost:await ba(c,l)}}let s=await ju(t.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat().filter(c=>!c.deprecated))||[];if(n.path.length===2)if(n.isAtPropertyKey){let c=a.filter(l=>!(l.id in o));if(c.length)return c.map(l=>{let u=new fe.CompletionItem(l.id),f=`"${l.id}": `;return u.kind=fe.CompletionItemKind.Property,u.insertText=f,u.range=r,u.filterText=f,u})}else{let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=k5(l),f=u&&(l.options||{})[u]||{type:"boolean",description:zt.l10n.t("Set to true to install.")},m=(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(d=>`"${d}"`):["true","false"]).map(d=>({label:d,text:d}));return m.push({label:"{}",text:new fe.SnippetString(`{
	$1
}$0`)}),m.map(({label:d,text:p},h)=>{let g=new fe.CompletionItem(d);return g.kind=fe.CompletionItemKind.Value,g.insertText=p,g.range=r,g.sortText=`${h}_${d}`,g})}}else if(n.path.length===3){let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=l.options||{};if(n.isAtPropertyKey)return Object.keys(u).filter(f=>!(f in(o[c]||{}))).map(f=>{let m=new fe.CompletionItem(f),d=`"${f}": `;return m.kind=fe.CompletionItemKind.Property,m.insertText=d,m.range=r,m.filterText=d,m.detail=u[f].description,m});{let f=n.path[2],m=u[f];if(m)return(m.type==="string"?("enum"in m&&m.enum||"proposals"in m&&m.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map((p,h)=>{let g=new fe.CompletionItem(p),v=p;return g.kind=fe.CompletionItemKind.Value,g.insertText=v,g.range=r,g.filterText=v,g.sortText=`${h}_${p}`,g})}}}}}async function J5(t){let e=await QF(t);if((e==null?void 0:e.scheme)===Ke.scheme){let n=_e(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(n)}e&&await fe.window.showTextDocument(fe.Uri.parse(e.toString()))}async function QF(t){let e=await t.findDevContainerFiles();if(!e.length){let r=zt.l10n.t("Add Files...");await fe.window.showInformationMessage(zt.l10n.t("No container configuration file found."),{modal:!0},r)===r&&await ig(t)&&(e=await t.findDevContainerFiles())}let n=await Ou(e);return n!=="cancelled"?n:void 0}async function X5(t,e){var r,o,i,s,a,c,l;let n=await QF(t);if(n){let u=cr(t.fileHost);n.scheme==="file"&&!await yr(n.fsPath)?await Ui(ls,n,[],ic):(n.scheme==="file"||n.scheme==="vscode-remote")&&(u=new Hy);let f=await u.readDocument(n);if(f){let m=!/\.?devcontainer\.json/.test(sg.default.posix.basename(n.path)),d=$e(f),p=!m&&(((o=(r=d.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||!d.extensions),h=(p?(s=(i=d.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:d.extensions)||[],g=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if((d.extensions||[]).concat(((c=(a=d.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(e)===-1){h.push(e);let v,C=Wy(f);p?(l=d.customizations)!=null&&l.vscode?v=Pn(f,["customizations","vscode","extensions"],h,{formattingOptions:C}):d.customizations?v=Pn(f,["customizations","vscode"],{extensions:h},{formattingOptions:C}):v=Pn(f,["customizations"],{vscode:{extensions:h}},{formattingOptions:C}):v=Pn(f,["extensions"],h,{formattingOptions:C}),await u.applyEdits(n,v,f),await fe.window.showInformationMessage(zt.l10n.t("Extension has been added to the {0}.",g))}else await fe.window.showInformationMessage(zt.l10n.t("Extension is already included in the {0}.",g))}}}async function Z5(t,e){let n=await fe.commands.executeCommand("remote.tunnel.label",e);if(n===void 0)return;let r=n.label,o=n.port,i=await QF(t);if(i){let s=cr(t.fileHost);i.scheme==="file"&&!await yr(i.fsPath)?await Ui(ls,i,[],ic):(i.scheme==="file"||i.scheme==="vscode-remote")&&(s=new Hy);let a=await s.readDocument(i);if(a){let l=$e(a).portsAttributes??{},u=l[`${o}`]??{},f=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if(l&&u&&u.label===r)await fe.window.showInformationMessage(zt.l10n.t("Port attributes are already included in the {0}.",f));else{u.label=r,l[`${o}`]=u;let m=Wy(a),d=Pn(a,["portsAttributes"],l,{formattingOptions:m});await s.applyEdits(i,d,a),await fe.window.showInformationMessage(zt.l10n.t("Port attributes have been added to the {0}.",f))}}}}function Q5(t,e){let n=fe.languages.createDiagnosticCollection("devcontainer"),r=fe.window.activeTextEditor;r&&ZF(r.document,n,e.output),t.subscriptions.push(fe.workspace.onDidChangeTextDocument(async o=>{ZF(o.document,n,e.output)})),t.subscriptions.push(fe.workspace.onDidOpenTextDocument(async o=>{ZF(o,n,e.output)})),t.subscriptions.push(fe.workspace.onDidCreateFiles(async o=>{await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(sg.default.posix.basename(i.path))).map(i=>fe.workspace.openTextDocument(i)))})),t.subscriptions.push(fe.workspace.onDidDeleteFiles(o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.toString())&&n.delete(s)}))})),t.subscriptions.push(fe.workspace.onDidRenameFiles(async o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.oldUri.toString())&&n.delete(s)})),await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(sg.default.posix.basename(i.newUri.path))).map(i=>fe.workspace.openTextDocument(i.newUri)))})),(async()=>{let o=await Pa().catch(i=>[]);await Promise.all(o.map(i=>fe.workspace.openTextDocument(i)))})().catch(o=>{e.output.write(`Error opening dev container configurations: ${(o==null?void 0:o.stack)||(o==null?void 0:o.message)||String(o)}`)}),t.subscriptions.push(n)}function e8(t,e,n){let r=async(s,a,c)=>{let l=sg.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(l)){let u=zu(s.getText());if(!u)return;if((_C(u)||{}).features){let m=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),d=fhe(m,e.output,await n());if(d)return{contents:[d],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},o=fe.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:r}),i=fe.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:r});return t.subscriptions.push(o),t.subscriptions.push(i),[o,i]}function ZF(t,e,n){let r=sg.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(r)){let o=zu(t.getText());if(!o)return;let i=[...dhe(t,o,n),...mhe(o,t)];e.set(t.uri,i)}}function uhe(t,e){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!t)return{type:void 0,tooltip:zt.l10n.t("Empty feature id")};let r={};if(!t.includes("/")&&!t.includes("\\")&&n.test(t)){let s=["fish","homebrew"].indexOf(t)>-1;return{...r,type:"local-cache",isLegacy:!0,tooltip:s?zt.l10n.t("Legacy feature not supported. Please check https://containers.dev/features for replacements."):void 0,code:s?{target:fe.Uri.parse("https://containers.dev/features"),value:"legacy-feature"}:void 0,level:fe.DiagnosticSeverity.Error}}if(t.startsWith("http://"))return{...r,type:void 0,tooltip:zt.l10n.t("Direct tarball references must be served over HTTPS."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("https://"))try{return fe.Uri.parse(t,!0).scheme==="https"?{...r,type:"direct-tarball",level:void 0}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse scheme of URI")}}catch{return{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Invalid URI")}}if(t.startsWith("/"))return{...r,type:void 0,tooltip:zt.l10n.t("Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("./")||t.startsWith("../"))return{...r,type:"file-path"};if(t.split("/").length===3&&t.length>=5&&!t.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(t)?{...r,type:"github-repo",isLegacy:!0,level:fe.DiagnosticSeverity.Warning}:{...r,type:void 0,tooltip:zt.l10n.t("GitHub release feature id contains invalid characters"),level:fe.DiagnosticSeverity.Error};let i=t.split("/");return t.includes(".")&&i.length>1&&i[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(t)?i[1]==="devcontainers-contrib"?{...r,type:"oci",level:fe.DiagnosticSeverity.Warning,tooltip:zt.l10n.t("Replace the reference to the discontinued `devcontainers-contrib` with `devcontainers-extra`")}:{...r,type:"oci"}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("OCI Feature id contains invalid characters")}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse feature identifier.")}}function fhe(t,e,n){var i;if(!n){e.write("No index found.",5);return}let o=(n==null?void 0:n.collections.map(s=>s.features).flat()).find(s=>t===s.id||t.startsWith(`${s.id}:`));if(o){let s=`${o.name}
`,a=o.description?`
${o.description}
`:"",c=o.documentationURL?`
${o.documentationURL}
`:"",l="";if(o.majorVersion){let u=t.split(":");if(u.length===2){let f=u[1];if(f&&f!=="latest")try{let m=(i=z5.parse(f,{loose:!0}))==null?void 0:i.major,d=Number.parseInt(o.majorVersion),p=`
${zt.l10n.t("New major version '{0}' published.",d)}
`;if(m&&m<d)l=p;else{let h=Number.parseInt(f);h!==void 0&&h<d&&(l=p)}}catch{}}}return new fe.MarkdownString(`${s}${a}${c}${l}`)}}function dhe(t,e,n){var i;let r=Qi(e,["features"]),o=[];for(let s of(r==null?void 0:r.children)||[])if(s.type==="property"){let a=(i=s.children)==null?void 0:i[0].value,c=uhe(a,n);if(c.hint){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.hint,fe.DiagnosticSeverity.Hint);o.push(f)}if(c.level!==void 0&&c.tooltip){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.tooltip,c.level);f.code=c.code||{target:fe.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"},o.push(f)}}return o}function mhe(t,e){return["extensions","settings","devPort"].filter(n=>Qi(t,[n])&&Qi(t,["vscode",n])).map(n=>{var s,a;let r=(((a=(s=Qi(t,[n]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=e.positionAt(r.offset),i=e.positionAt(r.offset+r.length);return new fe.Diagnostic(new fe.Range(o,i),zt.l10n.t('Legacy "{0}" property when "{0}" property under "vscode" is also present.',n),fe.DiagnosticSeverity.Warning)})}var ag=Y(require("vscode")),eO=require("vscode");async function t8(t,e){let n=await phe(t);if(!n)return t.output.write("Failed to find configuration.  Cannot configure container features.",5),!1;let r=await hhe(t,n,(e==null?void 0:e.preInstalledInBaseImageFeatureIds)||[]);if(!r)return!1;let o=await t.fileHost.toCommonURI(r);return o&&ag.window.showTextDocument(ag.Uri.parse(o.toString())),!!o}async function phe(t){let e=await t.findDevContainerFiles();if(e.length){let n=await Ou(e);if(!n||n==="cancelled")return;let r=n.scheme==="file"?ba(process.platform,Af(n)):t.fileHost,o=r.path.dirname(_e(n,r.platform)),i=r.path.basename(o)===".devcontainer"?r.path.dirname(o):o,s=It(r.path,i),a=await e0(r,s,n);if(a)return{fileHost:r,workspace:s,config:a}}else{let n=eO.l10n.t("Add Files...");await ag.window.showInformationMessage(eO.l10n.t("No container configuration file found."),{modal:!0},n)===n&&await ig(t)}}async function hhe(t,e,n){var d;let{fileHost:r,workspace:o,config:i}=e,s=ag.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await t.telemetry,output:t.output},l=(await ju(t.output)).collections.reduce((p,h)=>p.concat(h.features),[]).filter(p=>!p.deprecated),u=l.filter(p=>n.includes(p.id)),f=[];if(i.object.features&&Object.entries(i.object.features).length>0){let p=Object.keys(i.object.features);f=l.filter(h=>p.some(g=>g.split(":")[0]===h.id))}let m=await tg(a,l,f,u,Promise.resolve(void 0),!0,!1);if(m)try{let p=i.text,h=i.text,g=Wy(i.text);for(let v of l){let C=[],w=v.majorVersion?`${v.id}:${v.majorVersion}`:v.id,y=["features",w];if(!m[v.id]&&((d=i.object.features)!=null&&d[w]))C=C.concat(Pn(h,y,void 0,{formattingOptions:g}));else if(m[v.id]){let D=m[v.id];C=C.concat(Pn(h,y,D,{formattingOptions:g}))}C.length&&(h=xo(h,C))}return p!==h&&await cr(r,r).applyEdits(i.uri,[{content:h,offset:0,length:i.text.length}],i.text),s.dispose(),_e(i.uri,r.platform)}catch(p){t.output.write(`Error in selecting dev container features: ${p}`,5),console.log("Error in selecting dev container features: ",p),s.dispose();return}}var bt=Y(require("vscode")),r8=Y(require("crypto")),t0=Y(require("path")),am=require("vscode");var n8={features:{}};function o8(t,e){let n=new Set,r=Promise.resolve(n8),o,a=e.codespaces?"codespaces.editDevContainerJSON":"remote-containers.editDevContainerJSON";t.subscriptions.push(bt.commands.registerCommand(a,async u=>u()),bt.languages.registerCodeLensProvider([{pattern:"**/devcontainer.json"},{pattern:"**/.devcontainer.json"}],{async provideCodeLenses(u,f){var p;let m=Object.keys(((p=$e(u.getText()))==null?void 0:p.features)||{}).sort();m.some(h=>!n.has(h))&&(n=new Set(m),r=c(u,m));let d=await r;if(!f.isCancellationRequested)return l(u,d)}}));async function c(u,f){o||(o=await whe(t,e));let m=u.uri;if(m.scheme!=="file"){let d=o.path.join(await o.tmpdir(),`dev-container-tmp-${r8.randomUUID()}`);await o.mkdirp(d);let p=o.path.join(d,".devcontainer.json");await o.writeFile(p,Buffer.from(JSON.stringify({features:f.reduce((v,C)=>(v[C]={},v),{})})));let h=t0.posix.basename(m.path)===".devcontainer.json",g=m.with({path:t0.posix.join(t0.posix.dirname(m.path),h?".devcontainer-lock.json":"devcontainer-lock.json")});try{let v=await bt.workspace.fs.readFile(g),C=o.path.join(d,".devcontainer-lock.json");await o.writeFile(C,Buffer.from(v))}catch(v){if((v==null?void 0:v.code)!=="FileNotFound")throw v}m=bt.Uri.file(p)}try{return yhe(t,o,o.cwd,m,e.output)}catch(d){return e.output.write(`Error fetching version info: ${(d==null?void 0:d.message)||d}`),n8}}function l(u,f){let m=zu(u.getText());if(!m)return;let d=Qi(m,["features"]);if(!(d!=null&&d.children)||d.type!=="object")return;let p=[];for(let h of d.children)if(h.type==="property"&&h.children){let S=function(x,A){return async()=>{let F=g.value.substring(0,C.length)+x;n.add(F),A&&!f.features[F]&&(f.features[F]=A);let k=bt.window.activeTextEditor;await(k==null?void 0:k.edit(E=>{E.replace(new bt.Range(k.document.positionAt(w),k.document.positionAt(w+y)),x)}))}},D=function(){return async()=>{let x={title:am.l10n.t("Remove")};if(await bt.window.showInformationMessage(am.l10n.t("The feature was not found either because it is no longer available or because of insufficient permissions to access it."),{modal:!0,detail:am.l10n.t("If this is permanent you may want to remove it from your configuration.")},x)!==x)return;let F=bt.window.activeTextEditor;await(F==null?void 0:F.edit(k=>{let E=h.parent,_=E.children,T=_.indexOf(h),I=_[T+1];if(I)k.delete(new bt.Range(F.document.positionAt(h.offset),F.document.positionAt(I.offset)));else{let b=_[T-1];b?k.delete(new bt.Range(F.document.positionAt(b.offset+b.length),F.document.positionAt(h.offset+h.length))):k.delete(new bt.Range(F.document.positionAt(E.offset+1),F.document.positionAt(h.offset+h.length)))}}))}},g=h.children[0],v=f.features[g.value],C=vhe(g.value),w=g.offset+1+C.length,y=g.length-2-C.length;if(v!=null&&v.wanted&&v.current!==v.wanted){let x=new bt.CodeLens(new bt.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:am.l10n.t("Update to {0}",v.wanted),command:a,arguments:[S(`:${v.wanted}`,{current:v.wanted,wanted:v.wanted,latest:v.latest})]});p.push(x)}if(v!=null&&v.latest&&v.current!==v.latest){let x=new bt.CodeLens(new bt.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:am.l10n.t("Update to latest {0}",v.latest),command:a,arguments:[S(`:${v.latest}`)]});p.push(x)}if(v&&!v.latest){let x=new bt.CodeLens(new bt.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:am.l10n.t("Not found..."),command:a,arguments:[D()]});p.push(x)}}return p}}var ghe=/[:@][^/]*$/;function vhe(t){let e=ghe.exec(t);return e?t.substring(0,e.index):t}async function whe(t,e){let n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await io(),o=process.cwd();return Oo(void 0,void 0,o,s=>Rf(s,bt.env.appRoot),n,t.extensionPath,r,(await e.telemetry).product,e.output,void 0,void 0)}async function yhe(t,e,n,r,o){let i={cliHost:e,dockerPath:"",dockerComposePath:"",extensionPath:t.extensionPath,appRoot:bt.env.appRoot,output:o,package:await sr(t.extensionPath)};return await ri(i,["outdated","--workspace-folder",n,...r?["--config",_e(r,e.platform)]:[],"--output-format","json","--log-level",Qr(jy()),"--log-format","json",...o.dimensions?["--terminal-columns",String(o.dimensions.columns),"--terminal-rows",String(o.dimensions.rows)]:[]])}var Y5=hn.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),q5=hn.Uri.parse("https://aka.ms/vscode-dev-containers");function s8(t,e){let{output:n}=e;n.write("Internal initialization of dev container support package...");let r,o=()=>r||(r=ju(e.output));return{async openConfiguration(){return J5(e)},async createConfiguration(i){return ig(e,i)},async addExtensionToConfiguration(i){return X5(e,i)},async addPortLabelToConfiguration(i){return Z5(e,i)},async configureContainerFeatures(i){return t8(e,i)},createCompletionItemProvider(){return K5(e)},startCodeLensProvider(){o8(t,e)},startHoverProvider(){e8(t,e,o)},startDiagnosticsCollection(){Q5(t,e)}}}async function G5(){let t=hn.workspace.workspaceFile,e=hn.workspace.workspaceFolders,n;if(t){if(t.scheme==="untitled"){await FI();return}n=t}else if(e&&e.length)if(e.length>1){let r=await hn.window.showWorkspaceFolderPick({placeHolder:Kt.l10n.t("Select a folder to create a container configuration for")});r&&(n=r.uri)}else n=e[0].uri;return n}function wo(t,e,n,r,o,i,s){if(t.value="",t.title=r||t.title||Kt.l10n.t("Add Dev Container Configuration Files"),t.placeholder=n,t.canSelectMany=!!o,Array.isArray(e))if(t.items=e,o)t.selectedItems=e.filter(m=>m.picked);else{let m=e.find(d=>d.picked);m&&(t.activeItems=[m])}t.buttons=i?Array.isArray(i)?i:[hn.QuickInputButtons.Back]:[];let a=[],c=t.items,l=c.filter(m=>m.isAlreadyInstalledViaBaseImage===!0),u={kind:hn.QuickPickItemKind.Separator,label:Kt.l10n.t("pre-installed features")};l.length&&(t.items=t.items.slice(0,c.length-l.length).concat(u).concat(t.items.slice(c.length-l.length)));let f=new Promise((m,d)=>{if(Array.isArray(e)||(t.busy=!0,e.then(p=>{if(t.busy=!1,t.items=p,o)t.selectedItems=p.filter(h=>h.picked);else{let h=p.find(g=>g.picked);h&&(t.activeItems=[h])}},p=>{t.busy=!1,d(p)})),a.push(t.onDidAccept(()=>{let p=o?t.selectedItems.slice():t.selectedItems[0];m(Array.isArray(i)?{pick:p,button:"ok"}:p),a.forEach(h=>h.dispose())})),a.push(t.onDidChangeSelection(p=>{if(!o)return;let h=l.filter(g=>!t.selectedItems.includes(g));h.length&&(t.selectedItems=t.selectedItems.concat(h))})),t.buttons.length&&a.push(t.onDidTriggerButton(p=>{let h=o?t.selectedItems.slice():t.activeItems[0];m(i===!0?"back":{pick:h,button:p}),a.forEach(g=>g.dispose())})),a.push(t.onDidHide(()=>{a.forEach(p=>p.dispose()),t.dispose(),m(void 0)})),s){let p;a.push(t.onDidChangeValue(h=>{let g=s(h);if(g||p){let v=t.items.filter(C=>C!==p);g&&v.push(g),p=g,t.items=v}}))}});return t.show(),f}var XF={label:Kt.l10n.t("Learn More"),description:Kt.l10n.t("Documentation on predefined container templates"),alwaysShow:!0,type:"help"};async function n0(t,e,n,r){return zF(t,e,n,r)}async function og(t,e,n,r,o,i){var F;let{telemetry:s,existingFilesLearnMoreLink:a,index:c}=t,u=(o!=="userData"&&await((F=t.findDevContainerFiles)==null?void 0:F.call(t,"userData"))||[]).reduce((k,E)=>k&&k.uri.path.length<E.uri.path.length?k:E,void 0),f=(u==null?void 0:u.uri.scheme)==="file"?[{iconPath:new hn.ThemeIcon("go-to-file"),tooltip:Kt.l10n.t("Open File")}]:[],m=u?{label:Kt.l10n.t("Copy existing configuration to workspace"),detail:Kt.l10n.t("Copy the configuration from your user data folder to the workspace folder"),type:"userDataConfig",buttons:f}:void 0,d=c==null?void 0:c.collections.find(k=>k.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),p=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),h=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),g=await e.readDir(n.rootFolderPath),v=p?g.filter(k=>/(docker.*)?compose.*\.ya?ml$/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],C=h?g.filter(k=>/dockerfile/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],w=C.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:i8(e,k),dockerfile:E,dockerfilePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerfile"}}),y=v.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:i8(e,k),dockerComposeFile:E,dockerComposePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerComposeFile"}}),S=m||C.length>0||v.length>0,D={label:Kt.l10n.t("From a predefined container configuration template..."),detail:Kt.l10n.t("Use a base configuration from the container template registry"),alwaysShow:!0,type:"predefined"},x=t.quickPick.onDidTriggerItemButton(async()=>{await hn.commands.executeCommand("vscode.open",u.uri),t.quickPick.hide()}),A=S?await wo(t.quickPick,[D,...m?[m]:[],...w,...y,...a?[XF]:[]],Kt.l10n.t("How would you like to create your container configuration?")):D;if(x.dispose(),!A){Ko(s,"canceled");return}if(A.type==="help"){Ko(s,"help"),hn.env.openExternal(a);return}if(A.type==="userDataConfig")return Che(e,n,u);if(i||(i=e&&n&&await H5()?jF(t,e,n).then(k=>{if(k.type!=="success")return;let E=((c==null?void 0:c.collections.map(T=>T.templates).flat())||[]).filter(T=>!rg.includes(T.id)),_=((c==null?void 0:c.collections.map(T=>T.features).flat())||[]).filter(T=>!T.deprecated);return{template:E.find(T=>T.id===k.template),features:(k.features||[]).map(T=>_.find(I=>I.id===T)).filter(T=>!!T)}}):Promise.resolve(void 0)),A.type==="predefined")return j5(t,e,n,r,o,i,()=>og(t,e,n,r,o,i));if(A.type==="dockerComposeFile")return She(t,e,r,o,A.dockerComposePath,p,i,()=>og(t,e,n,r,o,i));if(A.type==="dockerfile")return Ehe(t,e,r,o,A.dockerfilePath,h,i,()=>og(t,e,n,r,o,i))}function i8(t,e){let n=hn.workspace.workspaceFolders||[];if(n.length<2)return;let r=n.find(o=>t.platform==="win32"?e.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):e.startsWith(o.uri.fsPath));return r&&r.name}async function Che(t,e,n){let r=Kt.l10n.t("Skip"),o=n.fileHost,i=_e(n.uri,o.platform),s;if(o.path.basename(i)===".devcontainer.json")s=o.path.dirname(i);else for(let d=i;o.path.basename(d);d=o.path.dirname(d))if(o.path.basename(d)===".devcontainer"){s=o.path.dirname(d);break}if(!s)throw new Error(`Unexpected user config path: ${i}`);let a=o.readDirWithTypes||o.readDir,c=await a(s);for(;c.length;){let d=c.shift();if(d===UI)continue;let p=typeof d=="string"?d:d[0],h=o.path.join(s,p);if(typeof d=="string"?await o.isFile(h):(d[1]&1)!==0){let v=o.path.sep===t.path.sep?p:p.replaceAll(o.path.sep,t.path.sep),C=t.path.join(e.configFolderPath,v);if(await t.isFile(C)){let y=await hn.window.showInformationMessage(Kt.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},r,Kt.l10n.t("Overwrite"));if(!y)return;if(y===r)continue}await t.mkdirp(t.path.dirname(C));let w=await o.readFile(h);await t.writeFile(C,w)}else(typeof d=="string"?await o.isFolder(h):(d[1]&2)!==0)&&c.push(...(await a(h)).map(C=>typeof C=="string"?o.path.join(p,C):[o.path.join(p,C[0]),C[1]]))}let l=Kt.l10n.t("Delete");await hn.window.showInformationMessage(Kt.l10n.t("Delete the configuration from the user data folder?"),{modal:!0},Kt.l10n.t("Keep"),l)===l&&await XK(o,s);let f=o.path.relative(s,i),m=o.path.sep===t.path.sep?f:f.replaceAll(o.path.sep,t.path.sep);return t.path.join(e.configFolderPath,m)}async function Ehe(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=await sm(t,i,s,async()=>{});if(!l){Ko(c,"canceled");return}if(l==="back")return a();let u=await ng(t,e,n,r,l,(f,m)=>{if(!Vv(e.path,f))return m;let d=e.path.sep!==ka.sep?f.replace(ka.sep===ka.win32.sep?/\\/g:/\//g,e.path.sep):f,p=e.path.resolve(n,d),h=e.path.relative(e.path.dirname(p),o),g=e.platform==="win32"?h.replace(/\\/g,"/"):h,v=m.toString(),C="dockerFile"in $e(v)?["dockerFile"]:["build","dockerfile"],w=Pn(v,C,g,{formattingOptions:{}}),y=xo(v,w);return Buffer.from(y)});return u&&Ko(c,"dockerFile"),u}async function She(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=(await e.readFile(o)).toString(),u=Wv(l);if(!u){await hn.window.showErrorMessage(Kt.l10n.t("Invalid docker-compose file '{0}'",o),{modal:!0});return}let f=u.version,m=Object.keys(u&&u.services||{}),d=m.length<2?m[0]||"":await wo(t.quickPick,m.map(v=>({label:v,type:"service"})),Kt.l10n.t("Select a service"),void 0,void 0,!0);if(d==="back")return a();if(d===void 0){Ko(c,"canceled");return}let p=typeof d=="string"?d:d.label,h=await sm(t,i,s,async()=>{});if(!h)return;if(h==="back")return a();let g=await ng(t,e,n,r,h,(v,C)=>{if(Vv(e.path,v)){let w=e.path.sep!==ka.sep?v.replace(ka.sep===ka.win32.sep?/\\/g:/\//g,e.path.sep):v,y=e.path.resolve(n,w),S=e.path.relative(e.path.dirname(y),o),D=e.platform==="win32"?S.replace(/\\/g,"/"):S,x=C.toString(),A=$e(x).dockerComposeFile,F=Array.isArray(A)?A.slice(1):[],k=[D,...F],E=Pn(x,["dockerComposeFile"],k,{formattingOptions:{}}),_=xo(x,E),T=Pn(_,["service"],p,{formattingOptions:{}}),I=xo(_,T);return Buffer.from(I)}if(/compose.*\.ya?ml$/.test(ka.posix.basename(v))){let w=C.toString(),y=Wv(w);y.version&&f&&y.version!==f&&(w=w.replace(new RegExp(`^(version:.*)(${Tf(y.version)})`,"m"),`$1${f}`));let S=Object.keys(y&&y.services||{});return S.length&&(w=w.replace(new RegExp(`\\b${S[0]}\\b`),p)),Buffer.from(w)}return C});return g&&Ko(c,"dockerComposeFile"),g}function Ko(t,e,n,r){var i;let o={outcome:e};if(n){o.definitionName=Ju(n.metadata.template.id);let s=n.metadata.copilotSuggestion,a=(i=s==null?void 0:s.template)==null?void 0:i.id;a&&(o.copilotSuggested=Ju(a)),o.features=n.metadata.features.map(l=>Ju(l.id)).join(",");let c=s==null?void 0:s.features.map(l=>Ju(l.id)).join(",");c&&(o.copilotFeatures=c),a&&(o.copilotUsed="true")}r&&(o.targetLocation=r),t.sendTelemetryEvent("createConfiguration",o)}async function e0(t,e,n){if(n||(n=await Lf(t,e.configFolderPath)),!n)return;let r=await cr(t,t).readDocument(n);if(!r)return;let o=$e(r);return{uri:n,text:r,object:o}}async function a8(t,e,n,r,o,i,s){let a=ao(n);if(un(a)&&!await Ue.workspace.requestWorkspaceTrust({message:Ky}))return Sr(a.hostPath)?(await Ue.window.showInformationMessage(Nr.l10n.t("The WSL folder is currently not trusted."),{modal:!0,detail:Nr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen in WSL.")}),await Ue.commands.executeCommand("remote-containers.reopenInWSL")):(await Ue.window.showInformationMessage(Nr.l10n.t("The local folder is currently not trusted."),{modal:!0,detail:Nr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen locally.")}),await Ue.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let c=so(a);if(c&&!await Jy(t,a.repositoryPath))return await Ue.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let l=Hf(a);return{...await xhe(a,t,i,s,e,n,r,o),isTrusted:c||l||void 0}}async function xhe(t,e,n,r,o,i,s,a){let{log:c,logFilePath:l}=n,u="hostPath"in t&&Sr(t.hostPath)&&!!Ue.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&Ue.commands.executeCommand("setContext","canReopenInWSL",!0);let f=t.settings,m="localDocker"in t&&t.localDocker,d=bl(t.parentAuthority)||Pl(f)&&!m,p=d&&(!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));p&&Ue.commands.executeCommand("setContext","canReopenInSSH",!0);let h=lc(t.parentAuthority)&&!!Ue.extensions.getExtension("ms-vscode.remote-server");h&&Ue.commands.executeCommand("setContext","canReopenInTunnel",!0);let g=!d&&!lc(t.parentAuthority);g&&Ue.commands.executeCommand("setContext","canReopenLocally",!0);let v;return Ue.window.withProgress({location:Ue.ProgressLocation.Notification,title:Xh,cancellable:!1},async C=>{if(t.parentAuthority&&!s.execServer)throw new Error(`Parent authority found without ExecServer: ${i}`);let w=Ra(),y=Ml(e.extensionPath,nm,c),{cliHost:S,originalCwd:D}=await Dhe(s.execServer,t,w,e.extensionPath,await io(),y,o.product,c),x={...S.type==="local"?await y:void 0,...await Bf(S,t.settings)},A={...S.env,...x},F=await Jh({authority:i,extensionContext:e,sessionStart:n.sessionStart,progress:C,cliHost:S,env:A,cwd:S.cwd,wslSettings:w,isLocalContainer:kp(t.parentAuthority,x),telemetry:o,onDidInput:n.onDidInput,output:c,logFilePath:l,allowSystemConfigChange:!0,postCreate:r}),k={async createConfiguration(E,_){return n0({fileHost:_,userDataFolderForConfigurations:un(t)?await Gc(e,S):void 0,telemetry:o,output:c,openConfigurationCommandId:tm,showLogCommandId:wt},It(tC.posix,E))},async showError(E,..._){return await Ue.window.showErrorMessage(E,{modal:!0},..._)}};v={common:F,parsedAuthority:t,dockerCLI:ks(),dockerComposePath:Ta(),dockerComposeCLI:ms({exec:F.cliHost.exec,env:{...x,...lr(x)},output:F.output},ks(),Ta()),dockerSocketPath:qI(),dockerEnv:x,workspaceMountConsistencyDefault:jI(),gpuAvailability:await VI(S,o.product,c),cacheMount:YI()?"volume":"none",configurationTracking:WI(e.workspaceState),removeOnStartup:await p5(e,i),buildNoCache:await g5(e,i),onRemoveOnShutdownChanged:a,userRepositoryConfigurationPaths:zy(),originalCwd:D,configProvider:k,development:e.extensionMode===Ue.ExtensionMode.Development,watch:async(E,_)=>{let T=Ue.workspace.createFileSystemWatcher(new Ue.RelativePattern(E,"*"));return T.onDidChange(_),T.onDidCreate(_),T.onDidDelete(_),T},ensureNoDisallowedFeatures:(E,_,T)=>Ip(E,e.globalState,_,T),useExperimentalLockfile:zI()},await Xx(v);try{return await _k(v)}catch(E){return _he(v,E)}}).then(C=>(a(async w=>{await h5(e,w&&C.dockerContainerId||!1),await Gy(e,w==="rebuildNoCache"?i:!1)}),qc(o,tO(t),"success",n.sessionStart,v==null?void 0:v.common,C.config,C.configLocationType,C.properties),C),C=>{var k;let w=C instanceof Se?C:new Se({description:Nr.l10n.t("An error occurred setting up the container."),originalError:C});so(t)&&(w.volumeName=t.volumeName,w.repositoryPath=t.repositoryPath,w.folderPath=t.folder),qc(o,tO(t),"failure",n.sessionStart,v==null?void 0:v.common,w.config,void 0,w.containerProperties,w);let y="onTheSide",S=(k=w.data)==null?void 0:k.fileWithError;!S&&(v!=null&&v.parsedAuthority)&&un(v.parsedAuthority)&&v.parsedAuthority.configFile&&(S=_e(v.parsedAuthority.configFile,v.common.cliHost.platform));let D=S&&(v==null?void 0:v.common.cliHost.path.basename(S))||"devcontainer.json",x=un(t)?[{id:"openFileWithErrorLocally",title:Nr.l10n.t("Edit {0} Locally",D),isLastAction:!0,applicable:async(E,_)=>g&&!(_&&u),async execute(){let E=v==null?void 0:v.common.cliHost,_=S?E.type==="wsl"?await E.toCommonURI(S):ye.file(S):void 0;await Kh(e,t.hostPath,_,l,y);let T=Ue.Uri.file(t.hostPath);await Ue.commands.executeCommand("vscode.openFolder",T)}},{id:"openFileWithErrorinWSL",title:Nr.l10n.t("Edit {0} in WSL",D),isLastAction:!0,applicable:async()=>u,async execute(){let E=Ue.Uri.parse((await mp(t.hostPath,c)).toString()),_=S?Tn(S.startsWith("/")?"linux":"win32",E,S):void 0;await Kh(e,E.path,_,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}},{id:"openFileWithErrorinSSH",title:Nr.l10n.t("Edit {0} in SSH",D),isLastAction:!0,applicable:async()=>p,async execute(){let E=t.settings,_=Pl(E)?Nv(E.host,t.hostPath):Gl(t.parentAuthority,t.hostPath),T=Ue.Uri.parse(_.toString()),I=S?Tn(S.startsWith("/")?"linux":"win32",T,S):void 0;await Kh(e,T.path,I,l,y),await Ue.commands.executeCommand("vscode.openFolder",T)}},{id:"openFileWithErrorinTunnel",title:Nr.l10n.t("Edit {0} in Tunnel",D),isLastAction:!0,applicable:async()=>h,async execute(){let E=Ue.Uri.parse(Gl(t.parentAuthority,t.hostPath).toString()),_=S?Tn(S.startsWith("/")?"linux":"win32",E,S):void 0;await Kh(e,E.path,_,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}}]:[],A=so(t)?t.inspectVolume?[Bu]:[{id:"reopenInRecoveryContainer",title:Nr.l10n.t("Edit {0} in Recovery Container",D),isLastAction:!0,applicable:(E,_)=>!0,execute:async E=>{await Kh(e,t.repositoryPath,S?ye.file(S).with({scheme:"vscode-remote"}):void 0,l,y);let _=si(E.repositoryPath),T=await Fo(v),I=Hk(_,E.volumeName,T);await Ue.commands.executeCommand("remote-containers.inspectVolume",I,E.repositoryPath,E.folderPath)}},Bu,{id:"openRepository",title:Nr.l10n.t("Open Repository"),isLastAction:!1,applicable:(E,_)=>!_,async execute(){Ue.env.openExternal(Ue.Uri.parse(t.repositoryPath))}}]:[],F=nw(t)?[Bu]:[];return w.actions=[...eg,im,b5,...x,...A,...F,Qh,om],Ihe(w),Wu(w,tO(t),o,!0,n.log)})}async function _he(t,e){let{common:n}=t,{output:r}=n,o=((e==null?void 0:e.originalError)&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();if(n.localWaylandSocket&&o.includes(`path does not exist: ${n.localWaylandSocket}`.toLowerCase())){n.localWaylandSocket=void 0;let i=await _k(t);return(async()=>{let s=ss("mountWaylandSocket");for(await Bt(3e3);Ue.workspace.getConfiguration().get(s,!0);){try{await Ue.workspace.getConfiguration().update(s,!1,Ue.ConfigurationTarget.Global)}catch{}await Bt(3e3)}r.write("Wayland socket mount disabled in user settings.")})().catch(s=>{r.write(ot(s&&(s.stack||s.message)||String(s)))}),i}throw e}async function Dhe(t,e,n,r,o,i,s,a){let{settings:c}=e,l=c&&"host"in c&&c.host||void 0;if(un(e)){let u=It(tC,e.hostPath),f=u.rootFolderPath,m=await Oo(t?{server:t,authority:e.parentAuthority}:void 0,l,u.rootFolderPath,Hn,n,r,o,s,a,Ns,{sshAskpassEnv:i,settings:zh(),localDocker:e.localDocker});return m.cwd!==u.rootFolderPath&&(u=It(m.path,u.isWorkspaceFile?m.path.join(m.cwd,tC.basename(e.hostPath)):m.cwd)),a.write(`Setting up container for folder or workspace: ${u.workspaceOrFolderPath}\r
`),Jx(a,e),e.localDocker&&a.write(`Local Docker: ${e.localDocker}\r
`),{cliHost:m,originalCwd:f}}else{let u=await Oo(t?{server:t,authority:e.parentAuthority}:void 0,l,void 0,Hn,n,r,o,s,a,Ns,{sshAskpassEnv:i,settings:zh()});return{cliHost:u,originalCwd:await u.homedir()}}}function tO(t){return un(t)?"config":so(t)?t.inspectVolume?"volume":"repository":"volume"}function Ihe(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description=Nr.l10n.t("The drive of the workspace folder is not shared. Share it in the Docker settings first."):e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description=Nr.l10n.t("A port the container is setup to bind to is already in use. See the Dev Containers terminal for details."):e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description=Nr.l10n.t("A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running."):e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description=Nr.l10n.t("The base image references the obsolete Debian 8 update repository."),t.actions.push({id:"learnMore",title:Nr.l10n.t("Learn More"),isLastAction:!1,applicable:(n,r)=>r,async execute(){Ue.env.openExternal(Ue.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var La=Y(require("vscode")),cg=require("vscode");var r0=Y(Or());var l8=require("util");var Na=Y(require("path")),u8=Y(require("crypto"));async function f8(t,e,n,r){var p,h;let{dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,common:a}=t,{cliHost:c,extensionPath:l,appRoot:u,postCreate:f,output:m}=a,d;try{let{commit:g}=a.product;if(!g)throw new Se({description:r0.t("Cannot attach without commit id for the remote extension host.")});let v=r?n.configFilePath:void 0;if((v==null?void 0:v.scheme)==="file"&&c.type!=="local"){let R=c.path.join(await c.tmpdir(),`devcontainer-config-${u8.randomUUID()}.json`);await c.writeFile(R,await st(v.fsPath)),v=ye.from({scheme:Ke.scheme,path:R})}let C={...a.env,...lr(a.env)},w={cliHost:c,dockerPath:o,dockerComposePath:s,env:C,extensionPath:l,appRoot:u,package:a.package,postCreate:f,output:m},y=a.postCreate.output.dimensions||m.dimensions,S=await ri(w,["set-up","--container-id",e.Id,...c.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",Qr(a.getLogLevel()),"--log-format","json",...v?["--config",_e(v,c.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...y?["--terminal-columns",String(y.columns),"--terminal-rows",String(y.rows)]:[],"--include-configuration","--include-merged-configuration"]);if((S==null?void 0:S.outcome)!=="success")throw new Se({description:r0.t("devcontainer command failed: {0}",JSON.stringify(S))});S.configuration.configFilePath=S.mergedConfiguration.configFilePath=S.configuration.configFilePath&&ye.revive(S.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme});let D=S.mergedConfiguration,x=D.remoteUser;d=await _p(t,e.Id,D.workspaceFolder,x);let A={cliHost:c,dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,env:C,output:f.output},F=((h=(((p=D.customizations)==null?void 0:p.vscode)||[]).slice().reverse().find(R=>typeof R.devPort=="number"))==null?void 0:h.devPort)||Ll,{hostOrContainerPort:k,hostPortServer:E,connectionToken:_,remoteEnv:T,serverDownloaded:I}=await Al(a,d,n,D,F,Dp(t,A,d,void 0,void 0,e.Id,!1,v,void 0)),b=cr(a.cliHost,d.shellServer);if(Phe(a,d,b,n.configFilePath),The(a,d,b,n.configFilePath),E){let R=async()=>{await(0,l8.promisify)(E.close.bind(E))()};a.shutdowns.push(R)}return{params:a,properties:d,config:n,resolvedAuthority:{host:sc,port:k,connectionToken:_,extensionHostEnv:T},tunnelInformation:a.isLocalContainer?xp(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:I}}catch(g){let v=g instanceof Se?g:new Se({description:r0.t("An error occurred attaching to the container."),originalError:g});throw e&&(v.manageContainer=!1,v.params=t.common,v.containerId=e.Id,v.dockerParams=t),d&&(v.containerProperties=d),v.config=n,v}}function Phe(t,e,n,r){e.installFolder&&d8(t,e,n,r).catch(console.error)}async function d8(t,e,n,r){try{await rc(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],HY(e),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await bhe(t,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return d8(t,e,n,r)}async function bhe(t,e,n,r){let o=await BY(t,e);await fk(r,async()=>{var s,a;let i=await o0(t.cliHost,n,r,e.remoteWorkspaceFolder);if(!khe(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=Pn(i.text,["extensions"],o,{formattingOptions:{}});await Ui(n,r,c,i.text)}})}function The(t,e,n,r){m8(t,e,n,r).catch(console.error)}async function m8(t,e,n,r){try{let o=vx(e),i=Na.posix.dirname(o),s=Na.posix.basename(o);await rc(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Rhe(t.cliHost,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return m8(t,e,n,r)}async function Rhe(t,e,n,r){let{stdout:o}=await e.shellServer.exec(`cat ${vx(e)}`),i=$e(o)||{};await fk(r,async()=>{var a,c;let s=await o0(t,n,r,e.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let l=Pn(s.text,["settings"],i,{formattingOptions:{}});await Ui(n,r,l,s.text)}})}function khe(t,e){let n=new Set(t),r=new Set(e);return n.size===r.size&&t.every(o=>r.has(o))}async function p8(t,e){let n=s0(t,e),r=await c8(n);return r||(n=v8(t,e.Config.Image),r=await c8(n)),r}async function h8(t,e,n,r,o){let i=ye.file(s0(n,r)),s=await o0(t,e,i,o);return s.exists||(i=ye.file(v8(n,r.Config.Image)),s=await o0(t,e,i,o)),s}function i0(t){return Na.join(t,"nameConfigs")}function s0(t,e){return Na.join(i0(t),`${y8(uc(e))}.json`)}async function g8(t){try{let e=i0(t);return(await Xc(e)).filter(r=>r.endsWith(".json")).map(r=>({name:C8(r.substr(0,r.length-5)),uri:ye.file(Na.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function a0(t){return Na.join(t,"imageConfigs")}function v8(t,e){return Na.join(a0(t),`${y8(e)}.json`)}async function w8(t){try{let e=a0(t);return(await Xc(e)).filter(r=>r.endsWith(".json")).map(r=>({image:C8(r.substr(0,r.length-5)),uri:ye.file(Na.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function y8(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function C8(t){return t.replace(/%([0-9a-f]{2})/g,(e,n)=>String.fromCharCode(parseInt(n,16)))}async function c8(t){if(!await yr(t))return;let e=await st(t),n=$e(e.toString())||{},r=qv(n);return r.configFilePath=ye.file(t),r}async function o0(t,e,n,r){let o=await e.readDocument(n),i=o||ic,s=$e(i)||{},a=qv(s),c=cx({platform:t.platform,configFile:n,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:r},a);return c.configFilePath=n,{exists:!!o,text:i,config:c}}async function E8(t,e,n,r,o,i){return await Mu(t)?{...await Nhe(t,e,n,r,o,i),isTrusted:!0}:(await La.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Nhe(t,e,n,r,o,i){let s,a;return La.window.withProgress({location:La.ProgressLocation.Notification,title:Xh,cancellable:!1},async c=>{var l,u;try{let f=Wf(n);if(f.parentAuthority&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let{settings:m}=f,d="containerName"in f?f.containerName:f.containerId;o.log.write(`Setting up container: ${d}\r
`),Jx(o.log,f);let p=m&&"host"in m&&m.host||void 0,h=Ra(),g=Ml(t.extensionPath,nm,o.log),v=await Oo(r.execServer?{server:r.execServer,authority:f.parentAuthority}:void 0,p,f.cwd,Hn,h,t.extensionPath,await io(),e.product,o.log,Ns,{sshAskpassEnv:g,settings:zh()}),C=ks(),w={...v.type==="local"?await g:void 0,...await Bf(v,m)},y=ms({exec:v.exec,env:{...w,...lr(w)},output:o.log},ks(),Ta()),S={...v.env,...w},D=await ii({cliHost:v,dockerCLI:C,dockerComposeCLI:y,dockerComposePath:Ta(),env:S,output:o.log},"containerName"in f?f.containerName:f.containerId);if(!D)throw new Se({description:cg.l10n.t("Cannot attach to the container with name/id {0}, it no longer exists.",d),data:{reload:!1,attach:!0}});let x=(u=(l=(La.workspace.workspaceFolders||[void 0])[0])==null?void 0:l.uri)==null?void 0:u.path,A=await h8(v,ls,t.globalStoragePath,D,x);if(x&&A.config.workspaceFolder!==x){let _=Pn(A.text,["workspaceFolder"],x,{formattingOptions:{}});await Ui(ls,A.config.configFilePath,_,A.text)}s={common:await Jh({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:v,env:S,cwd:f.cwd||await v.homedir(),wslSettings:h,isLocalContainer:kp(f.parentAuthority,w),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:f,dockerCLI:C,dockerComposePath:Ta(),dockerComposeCLI:y,dockerSocketPath:qI(),dockerEnv:w,workspaceMountConsistencyDefault:jI(),gpuAvailability:await VI(v,e.product,o.log),cacheMount:YI()?"volume":"none",configurationTracking:WI(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===La.ExtensionMode.Development,ensureNoDisallowedFeatures:(_,T,I)=>Ip(_,t.globalState,T,I),useExperimentalLockfile:zI()},await Xx(s);let F=bp(f.parentAuthority,m),k=uc(D),E=cg.l10n.t("Container {0} ({1}){2}",D.Config.Image,k,F);if(s.common.setWorkspaceName(E),D.State.Status!=="running")throw new Se({description:cg.l10n.t("Cannot attach to the container {0} ({1}){2}, it is not running.",D.Config.Image,k,F),params:s.common,containerId:D.Id,dockerParams:s,data:{reload:!1,start:!0}});return await f8(s,D,A.config,A.exists)}catch(f){let m=f instanceof Se?f:new Se({description:cg.l10n.t("An error occurred attaching to the container."),originalError:f});throw m.actions=[T5,R5,...eg,im,Bu,Qh,om],m}}).then(c=>(qc(e,"attach","success",o.sessionStart,s==null?void 0:s.common,a,void 0,c.properties),c),c=>{let l=c instanceof Se?c:new Se({description:cg.l10n.t("An error occurred attaching to the container."),originalError:c});return qc(e,"attach","failure",o.sessionStart,s==null?void 0:s.common,a,void 0,l.containerProperties,l),Wu(l,"attach",e,!0,o.log)})}var ct=Y(require("vscode")),We=require("vscode");var rn=Y(require("vscode")),Aa=require("vscode"),x8=Y(require("path")),cm=Y(require("os")),nC=Y(require("fs")),_8=Y(require("child_process")),D8=Y(require("crypto")),I8=Y(LC());async function l0(t){Fhe()?await new nO().downloadAndInstallDocker(t):P8()?await new rO().downloadAndInstallDocker(t):await rn.env.openExternal(rn.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var c0=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let r=Aa.l10n.t("Downloading Docker installer..."),o=Aa.l10n.t("The Docker Desktop installation is started. Complete the installation and then start Docker Desktop."),i;try{i=await rn.window.withProgress({location:rn.ProgressLocation.Notification,title:r},async()=>this.downloadInstaller())}catch(a){let c=Aa.l10n.t("Downloading the Docker Desktop installer failed. Do you want to manually download and install?"),l=Aa.l10n.t("Download");throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(i);rn.window.showInformationMessage(o);try{await this.install(i,s,e)}catch(a){let c=Aa.l10n.t("Docker Desktop installation failed. ({0})",String(a==null?void 0:a.message)),l=Aa.l10n.t("Install Instruction");throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let n=!0;if(await new oO(e).isDockerInstalledRealTimeCheck()){let r=Aa.l10n.t("Docker Desktop is already installed. Would you like to reinstall?"),o=Aa.l10n.t("Reinstall");n=await rn.window.showInformationMessage(r,{modal:!0},o)!==void 0}return n}async downloadInstaller(){let e=`${Ahe()}.${this.fileExtension}`;return await Uhe(this.downloadUrl,e),e}handleError(e,n,r){rn.window.showErrorMessage(e,{title:n}).then(o=>{o&&rn.env.openExternal(rn.Uri.parse(r))})}},nO=class extends c0{downloadUrl="https://aka.ms/download-docker-windows-vscode";fileExtension="exe";getInstallCommand(e){return`"${e}"`}async install(e,n,r){try{r.write(`Executing command ${n}`),await b8(n,r)}finally{try{await nC.promises.stat(e),await nC.promises.unlink(e)}catch{}}}},rO=class extends c0{downloadUrl=`https://aka.ms/download-docker-mac${process.arch==="arm64"?"-arm64":""}-vscode`;fileExtension="dmg";getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let n=Aa.l10n.t("Docker Install"),r=this.getInstallCommand(e);await Ohe(r,n,{addDockerEnv:!1})}},Lhe=0;function Ahe(){return x8.join(cm.tmpdir(),`${rn.env.sessionId}-${Lhe++}.tmp`)}function Fhe(){return cm.platform()==="win32"}function P8(){return cm.platform()==="darwin"}async function Ohe(t,e,n){var a,c;let r;n=n??{},n.addDockerEnv&&(r={});let o=new rn.Task({type:"shell"},n.workspaceFolder??rn.TaskScope.Workspace,e,"Docker",new rn.ShellExecution(t,{cwd:n.cwd||((c=(a=n.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||cm.homedir(),env:r}),[]);n.alwaysRunNew&&(o.definition.idRandomizer=D8.randomUUID()),n.focus&&(o.presentationOptions={focus:!0});let i=await rn.tasks.executeTask(o);return new Promise((l,u)=>{let f=rn.tasks.onDidEndTaskProcess(m=>{m.execution===i&&(f.dispose(),m.exitCode&&n.rejectOnError&&u(m.exitCode),l())})})}var oO=class{constructor(e){this.output=e;this.isDockerInstalledLazy=new sO(async()=>{let n=await this.isDockerInstalledRealTimeCheck();return n&&this.isDockerInstalledLazy.cacheForever(),n},this.maxCacheTime)}maxCacheTime=3e4;isDockerInstalledLazy;async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{let e=await ti("docker");return await b8(`${e} -v`,this.output),!0}catch{return!1}}};async function Uhe(t,e){await new Promise((n,r)=>{let o=nC.createWriteStream(e);I8.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){r(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",r),s.pipe(o),s.on("end",n)}).on("error",r)})}var S8=10*1024;async function b8(t,e,n,r){let o=Buffer.alloc(n&&n.maxBuffer||S8),i=Buffer.alloc(n&&n.maxBuffer||S8);return await $he(t,e,n,r,o,r,i),{stdout:iO(o),stderr:iO(i)}}async function $he(t,e,n,r,o,i,s,a){return await new Promise((c,l)=>{let u,f=0,m=0;n=n||{},n.shell=!0,Mhe(n,e);let d=_8.spawn(t,n);d.on("error",p=>(u&&(u.dispose(),u=void 0),l(p))),d.on("close",(p,h)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(p){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${p}`;s&&(g+=`
Error: ${iO(s)}`);let v=new Error(g);return v.code=p,v.signal=h,v.stdErrHandled=i!==null,l(v)}return c()}),n!=null&&n.stdin&&(d.stdin.write(n.stdin),d.stdin.end()),(r||o)&&d.stdout.on("data",p=>{let h=p.toString();r&&r(h,d),o&&(f+=o.write(h,f))}),(i||s)&&d.stderr.on("data",p=>{let h=p.toString();i&&i(h,d),s&&(m+=s.write(h,m))}),a&&(u=a.onCancellationRequested(()=>{d.kill()}))})}function Mhe(t,e){var n;P8()&&(/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((n=t==null?void 0:t.env)==null?void 0:n.PATH)||process.env.PATH||"")||(t=t??{},t.env=t.env??{...process.env},e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`))}function iO(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var sO=class{constructor(e,n){this.valueFactory=e;this._valueLifetime=n}_isValueCreated=!1;_value;_valuePromise;get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let n=await this._valuePromise;if(e&&(this._value=n,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let r=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(r)},this._valueLifetime)}return n}};var T8=Y(require("os")),lg=Y(require("crypto")),R8=Y(require("net")),k8=Y(require("path")),Jt=Y(require("vscode")),on=require("vscode");var N8=require("string_decoder");var L8="done",u0="devcontainers";async function d0(t,e,n,r){return Jt.commands.executeCommand(wt),Jt.window.withProgress({location:Jt.ProgressLocation.Notification,title:"Installing Docker in WSL"},async o=>{let i={},s={};try{await Hhe(t,e,n,o,i,s)}catch(a){i.outcome="error",i.errorMessage=a==null?void 0:a.message,e.write(`Failed with error: ${(a==null?void 0:a.message)||a}`)}finally{r.sendTelemetryEvent("installDockerInWSL",i,s)}return i.outcome===L8})}async function A8(t){if(process.platform!=="win32")return!1;let e=O8();if(t.write(`Windows build number: ${e}`),e<rC)return t.write(`WSL version 2 is required to run Docker and that is only available since Windows build ${rC}.`),!1;let n=await Vr(process.cwd(),Hn,t);return!await f0(n,e,t)&&e<F8?(t.write(`WSL is not installed and can only be installed automatically since Windows build ${rC}.`),!1):!0}async function Hhe(t,e,n,r,o,i){let s=O8();if(e.write(`Windows build number: ${s}`),s<rC)return o.outcome="wsl2NotAvailableForWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL version 2 is required to run Docker and that is only available since Windows build {0}.",rC),{modal:!0});let a=await Vr(process.cwd(),Hn,e);if(r.report({message:on.l10n.t("Checking if WSL is installed.")}),!await f0(a,s,e)){if(s<F8)return o.outcome="wslInstallerNotAvailableWithWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL is not installed. Please install WSL manually and retry."),{modal:!0});if(r.report({message:on.l10n.t("Installing WSL.")}),await Whe(a,t.extensionPath,e,n))return o.outcome="rebootRequiredAfterWSLInstall",Jt.window.showInformationMessage(on.l10n.t("Please reboot your machine to finalize the WSL setup."),{modal:!0});if(!await f0(a,s,e)&&(await new Promise(x=>setTimeout(x,3e3)),!await f0(a,s,e)))return o.outcome="wslNotFoundAfterInstall",Jt.window.showInformationMessage(on.l10n.t("WSL not found after install."),{modal:!0})}r.report({message:on.l10n.t("Checking WSL version.")}),o.wslVersion=await jhe(a,e),r.report({message:on.l10n.t("Listing installed WSL distributions.")});let l=await aO(a,e);if(!l.length){if(r.report({message:on.l10n.t("Installing WSL distribution.")}),await Yhe(a,e,n))return o.outcome="featureMissingDuringDistroInstall",Jt.window.showInformationMessage(on.l10n.t("A required feature is missing. Please reboot your machine to finalize the WSL setup if you haven't done so yet."),{modal:!0});if(l=await aO(a,e),!l.length&&(await new Promise(S=>setTimeout(S,3e3)),l=await aO(a,e),!l.length))return o.outcome="noDistroAfterInstall",Jt.window.showInformationMessage(on.l10n.t("No WSL distro found after install."),{modal:!0})}i.wslDistros=l.length;let u=l.find(y=>y.isDefault);if(!u&&l.length===1&&(u=l[0]),!u)return o.outcome="noDefaultDistro",Jt.window.showInformationMessage(on.l10n.t("No default WSL distro found."),{modal:!0});if(o.isDefaultDistro=String(u.isDefault),u.version!=="2")return o.outcome="defaultDistroNotVersion2",Jt.window.showInformationMessage(on.l10n.t("Default distro is not using WSL version 2."),{modal:!0});r.report({message:on.l10n.t("Reading distribution information.")});let f=Pf("wsl",["-u","root","-e"],void 0),m=await Wt(f,e,void 0,"linux","Host"),{stdout:d}=await m.exec("cat /etc/os-release || cat /usr/lib/os-release || true"),p=qhe(d);if(o.distro=p.ID,p.ID!=="debian"&&p.ID!=="ubuntu")return o.outcome="distroNotSupported",Jt.window.showInformationMessage(p.NAME?on.l10n.t("Unsupported WSL distribution: {0}",p.NAME):on.l10n.t("Unsupported WSL distribution."),{modal:!0});let h=Pf("wsl",["-e"],void 0),g=await Wt(h,e,void 0,"linux","Host"),v=await Dl(g);if(v==="root"){try{await m.exec(`id ${u0}`)}catch{await m.exec(`useradd --create-home --shell /usr/bin/bash --user-group --groups adm,dialout,cdrom,floppy,sudo,audio,dip,video,plugdev,netdev --password '${lg.randomUUID()}' ${u0}`)}if(await m.exec(`cat >>/etc/wsl.conf <<'wslConf'
[user]
default=${u0}
wslConf
`),await ee({exec:a.exec,cmd:"wsl",args:["--terminate",u.name],output:e,print:"continuous"}),m=await Wt(f,e,void 0,"linux","Host"),g=await Wt(h,e,void 0,"linux","Host"),await Dl(g)==="root")return o.outcome="failedToSwitchUser",Jt.window.showInformationMessage(on.l10n.t("Default user in WSL is root, requiring a regular user."),{modal:!0})}let C=await cO(g,"docker")||await cO(m,"docker")||await cO(m,"dockerd");if(C){await m.exec(`usermod -aG docker ${v}`).catch(()=>{});let y=on.l10n.t("Reinstall");if(await Jt.window.showInformationMessage(on.l10n.t("Docker is already installed in WSL."),{modal:!0,detail:on.l10n.t("Path: {0}",C)},y)!==y){o.outcome="dockerAlreadyInstalled";return}}r.report({message:on.l10n.t("Installing Docker.")}),await m.exec("export DEBIAN_FRONTEND=noninteractive"),await m.exec("apt update && apt -y install --no-install-recommends apt-transport-https ca-certificates curl gnupg2"),await m.exec(`curl -fsSL https://download.docker.com/linux/${p.ID}/gpg | tee /etc/apt/trusted.gpg.d/docker.asc`),await m.exec(`echo "deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${p.ID} ${p.VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list`),await m.exec("apt update && apt -y install --no-install-recommends docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin"),await m.exec(`usermod -aG docker ${v}`),r.report({message:on.l10n.t("Updating Settings.")});let w=Jt.workspace.getConfiguration();await w.update(ss("executeInWSL"),!0,Jt.ConfigurationTarget.Global),await w.update(ss("executeInWSLDistro"),u.isDefault?void 0:u.name,Jt.ConfigurationTarget.Global),o.outcome=L8}var rC=18917,F8=20262;function O8(){let t=T8.release(),e=process.platform==="win32"&&t&&/(\d+)\.(\d+)\.(\d+)/g.exec(t);return e&&e.length===4?parseInt(e[3]):0}async function f0(t,e,n){if(t.platform!=="win32")return!1;if(e>=22e3)try{return await ee({exec:t.exec,cmd:"wsl",args:["--status"],output:n,print:"continuous"}),!0}catch{return n.write("WSL feature installed: false (wsl --status failed)"),!1}else{let r=Bhe(t);if(r){let o=await t.isFile(r);return n.write(`WSL feature installed: ${o} (dll path: ${r})`),o}return n.write("WSL feature installed: false (no dll path)"),!1}}function Bhe(t){let e=t.env.SystemRoot;if(e){let n=t.env.PROCESSOR_ARCHITEW6432;return t.path.join(e,n?"Sysnative":"System32","lxss","LxssManager.dll")}}async function Whe(t,e,n,r){let{wrappedOutput:o,wrappedInput:i}=U8(n,r);try{let s=t.path.join(await t.tmpdir(),`wsl-install-${lg.randomUUID()}.js`);await t.writeFile(s,await st(k8.join(e,"dist/extension/runAsMain.js")));let a=`\\\\.\\pipe\\wsl-install-${lg.randomUUID()}-sock`,c=t.path.join(await t.tmpdir(),`wsl-install-${lg.randomUUID()}.bat`),l=Gv(t),u=await mk({cliHost:t,env:{RUN_AS_CMD:await ti("wsl"),RUN_AS_ARGS:JSON.stringify(["--install"]),...n.dimensions?{RUN_AS_COLS:String(n.dimensions.columns),RUN_AS_ROWS:String(n.dimensions.rows)}:{},RUN_AS_SOCKET:a,ELECTRON_RUN_AS_NODE:"1"},appRoot:Jt.env.appRoot},l.cmd)||{},f=`@echo off

${Object.keys(u).map(h=>`set ${h}=${u[h]}`).join(`
`)}
"${l.cmd}" ${l.args.map(h=>`"${h}"`).join(" ")} "${s}"
`;await t.writeFile(c,Buffer.from(f.replaceAll(/\r?\n/g,`\r
`)));let m="",d=new R8.Server(h=>{d.close();let g=new N8.StringDecoder;h.on("data",v=>{let C=g.write(v);o.raw(C),m+=C}),i.event(v=>h.write(v))});return d.listen(a),await Ni({ptyExec:t.ptyExec,cmd:"powershell.exe",args:["Start-Process","-FilePath",`'${c}'`,"-Verb","RunAs","-WindowStyle","Hidden","-Wait"],env:ro(),output:o,onDidInput:i.event}),m.replace(Os,"").replaceAll(/\s/g,"").indexOf("untilthesystemisrebooted")!==-1}finally{i.dispose()}}async function jhe(t,e){try{let{stdout:n}=await ee({exec:t.exec,cmd:"wsl",args:["--version"],output:e,print:"continuous"});return n.toString("utf16le").match(/^.*$/m)[0]}catch{return"unknown"}}async function aO(t,e){try{let{stdout:n}=await ee({exec:t.exec,cmd:"wsl",args:["-l","-v"],output:e,print:"continuous"});return Vhe(n.toString("utf16le"))}catch{return[]}}function Vhe(t){let e=/\r\n/.test(t)?`\r
`:`
`,n=t.split(e),r=/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/,o=[];for(let i=1;i<n.length;i++){let s=r.exec(n[i]);if(s!=null&&s.groups){let a=s.groups.name,c=s.groups.version,l=i===1;o.push({name:a,isDefault:l,version:c})}}return o}async function Yhe(t,e,n){await ee({exec:t.exec,cmd:"wsl",args:["--set-default-version","2"],output:e,print:"continuous"});let{wrappedOutput:r,wrappedInput:o}=U8(e,n);try{let{cmdOutput:i}=await Ni({ptyExec:t.ptyExec,cmd:"wsl",args:["--install","-d","Ubuntu"],output:r,onDidInput:o.event});return i.replace(Os,"").replaceAll(/\s/g,"").indexOf("0x80370114")!==-1}finally{o.dispose()}}function U8(t,e){let n=e(a=>r.fire(a)),r=new Fs(n),o="",i=lg.randomUUID();return{wrappedOutput:sn({...t,get dimensions(){return t.dimensions},event:a=>{if(t.event(a),a.type==="text"||a.type==="raw"){o+=a.text;let c=o.replace(Os,"");/Enter new UNIX username:\s*$/.test(c)?r.fire(`${u0}\r`):/(New|Retype new) password:\s*$/.test(c)?r.fire(`${i}\r`):/any key to continue\.*\s*$/.test(c)?r.fire("\r"):/Installation successful!/.test(c)&&r.fire("exit\r")}}}),wrappedInput:r}}function qhe(t){return t.split(`
`).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substring(0,r)]=n.substring(r+1)),e},{})}async function cO(t,e){try{let{stdout:n}=await t.exec(`command -v ${e}`);return n.trim()}catch{return}}var Ghe={reopenInContainer:We.l10n.t("Do you want to continue with reopening the folder in a container?"),openInContainer:We.l10n.t("Do you want to continue with opening a folder in a container?"),cloneInVolume:We.l10n.t("Do you want to continue with cloning a repository in a Docker volume?"),attachToContainer:We.l10n.t("Do you want to continue with attaching to a container?"),checkoutPRInVolume:We.l10n.t("Do you want to continue with checking out a pull-request in a Docker volume?"),createDevContainer:We.l10n.t("Do you want to continue with creating a Dev Container?"),inspectVolume:We.l10n.t("Do you want to continue with inspecting a Docker volume?"),trySample:We.l10n.t("Do you want to continue with trying a sample Dev Container?")},zhe=`[${We.l10n.t("Starting Docker (show log)")}](command:${wt} "${We.l10n.t("Show details in terminal")}")`;async function Zr(t,e,n,r,o,i){var f;let s=await tt(t,e,i),a=(f=(ct.workspace.workspaceFolders||[])[0])==null?void 0:f.uri;a&&(a.scheme==="file"&&Sr(a.fsPath)||pp(a))&&(s=await tt(t,s.output,a));let c=iC(s,r),l=await Promise.race([c,new Promise(m=>setTimeout(()=>m("timeoutOrCanceled"),2e3))]);if(l==="timeoutOrCanceled"&&(l=await ct.window.withProgress({location:ct.ProgressLocation.Notification,title:zhe,cancellable:!0},async(m,d)=>Promise.race([c,new Promise(p=>{let h=d.onCancellationRequested(()=>{h.dispose(),p("timeoutOrCanceled")})})])),l==="timeoutOrCanceled"))return!1;let u=await c;if(u==="permission")return await ct.window.showErrorMessage(We.l10n.t("Current user does not have permission to run 'docker'."),{modal:!0,detail:We.l10n.t("Try adding the user to the 'docker' group.")},We.l10n.t("Documentation"))&&ct.env.openExternal(ct.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(u==="ssh")return await ct.window.showErrorMessage(We.l10n.t("Cannot connect to Docker daemon using 'ssh'."),{modal:!0,detail:We.l10n.t("Make sure public/private keys are set up for connecting without keyboard interaction.")},We.l10n.t("Show Log"))&&ct.commands.executeCommand(wt),!1;if(u==="daemon")return await ct.window.showErrorMessage(We.l10n.t("Docker returned an error."),{modal:!0,detail:We.l10n.t("Make sure the Docker daemon is running.")},We.l10n.t("Show Log"))&&ct.commands.executeCommand(wt),!1;if(u==="cwd")return await ct.window.showErrorMessage(We.l10n.t("Workspace folder does not exist.",s.cliHost.cwd),{modal:!0,detail:s.cliHost.cwd},We.l10n.t("Show Log"))&&ct.commands.executeCommand(wt),!1;if(u==="command"&&(s.cliHost.type==="local"||s.cliHost.type==="wsl")&&await A8(s.output)){let m=We.l10n.t("Install");if(await ct.window.showInformationMessage(We.l10n.t("Dev Containers require Docker to run."),{modal:!0,detail:We.l10n.t("Do you want to install Docker in WSL?")},m)===m){if(Vu(r,"installInWSL","install"),await d0(t,s.output,n,r)){let h=We.l10n.t("Continue");return await ct.window.showInformationMessage(We.l10n.t("Docker has been installed. {0}",Ghe[o]),h)===h?(Vu(r,"continueAfterInstall","continue"),!0):(Vu(r,"continueAfterInstall","cancel"),!1)}return!1}return Vu(r,"installInWSL","cancel"),!1}if(!u||u==="command"){if(s.cliHost.type==="wsl")await ct.window.showErrorMessage(We.l10n.t("Docker Desktop WSL 2 backend required."),{modal:!0},We.l10n.t("Read more on docker.com"))&&ct.env.openExternal(ct.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let m=We.l10n.t("Install"),d=We.l10n.t("License"),p=We.l10n.t("Ignore"),h=[],g=[];u==="command"&&s.dockerCLI!=="docker"&&g.push(We.l10n.t("Command not found: '{0}'.",s.dockerCLI)),s.cliHost.type==="local"&&(h.push(m,d),g.push(We.l10n.t("Check the license for details."))),u===!1&&h.push(p);let v=g.join(" "),C=s.cliHost.type==="remote"?We.l10n.t("Docker version 17.12.0 or later required on remote host."):We.l10n.t("Docker version 17.12.0 or later required."),w=await ct.window.showErrorMessage(C,{modal:!0,detail:v},...h);if(w===m)return l0(s.output).then(console.error),Vu(r,"dockerDesktop","install"),!1;if(w===d)return ct.env.openExternal(ct.Uri.parse("https://aka.ms/docker-subscription-service-agreement")),Vu(r,"dockerDesktop","license"),!1;if(w===p)return Vu(r,"dockerDesktop","ignore"),!0;Vu(r,"dockerDesktop","cancel")}return!1}return u==="wsl1"?(await ct.window.showErrorMessage(We.l10n.t("WSL 2 distro required."),{modal:!0,detail:We.l10n.t("The WSL distro is running with WSL 1.")},We.l10n.t("Read more on docker.com"))&&ct.env.openExternal(ct.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}function Vu(t,e,n){t.sendTelemetryEvent("dockerVersionUserChoice",{dialog:e,choice:n})}async function iC(t,e,n=!0){var a,c,l,u;let r;try{r=(await jk(t,Hn,n,"version","--format","{{json .}}")).stdout.toString()}catch(f){console.error(f);let m=f&&(f.stderr?f.stderr.toString():f.message)||"";oC(e,"error",void 0,m);let d=m.toLowerCase();return d.indexOf("permission denied")!==-1?d.indexOf("ssh")!==-1?"ssh":"permission":d.indexOf("enoent")!==-1||d.indexOf("not found")!==-1||d.indexOf("notfound")!==-1?await t.cliHost.isFolder(t.cliHost.cwd)?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):"cwd":t.cliHost.type==="wsl"&&((l=(c=(a=f==null?void 0:f.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let o;try{let f=$e(r);o=(u=f==null?void 0:f.Server)==null?void 0:u.ApiVersion}catch{}let i=o&&tx(o);if(!i&&r.toLowerCase().indexOf("error during connect")!==-1)return oC(e,"error",void 0,r),"daemon";if(!i)return oC(e,"unparsed",r),!0;let s=!nx(i,[1,35]);return!s&&await Qq(t)?(oC(e,"podman",r),!0):(oC(e,s?"success":"failure",r),s)}function oC(t,e,n,r){let o={outcome:e};n&&(o.version=n),r&&(o.errorMessage=r),t.sendTelemetryEvent("dockerVersion",o)}async function $8(t){try{let e=Mi(t,await t.dockerComposeCLI());return await Jv({...e,print:!0},"version","--short"),!0}catch(e){return(e==null?void 0:e.code)==="ENOENT"?await ct.window.showErrorMessage(We.l10n.t("Docker Compose required"),{modal:!0,detail:t.dockerComposePath!=="docker-compose"?We.l10n.t("Command not found: '{0}'.",t.dockerComposePath):void 0},We.l10n.t("Documentation"))&&ct.env.openExternal(ct.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")):await ct.window.showErrorMessage(We.l10n.t("Docker Compose returned an error."),{modal:!0},We.l10n.t("Show Log"))&&ct.commands.executeCommand(wt),!1}}var ug=Y(require("vscode"));var m0=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,n){let r=[],o=zu(e.getText());if(!o)return r;let i=_C(o)||{};return i.configFilePath=e.uri,Ao(i)&&this._linksForDockerfile(r,i,o,e),"dockerComposeFile"in i&&await this._linksForDockerCompose(r,i,o,e),r}_tryAddDocumentLinkToBucket(e,n,r,o,i){let s=e.positionAt(n),a=e.positionAt(r);s.compareTo(a)!==0&&i.push(new ug.DocumentLink(new ug.Range(s,a),o))}_linksForDockerfile(e,n,r,o){let i=Qi(r,["build","dockerfile"])||Qi(r,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,Ff(this.fileHost,n),e)}async _linksForDockerCompose(e,n,r,o){let s=(await $l(this.fileHost,n)).map(c=>ug.Uri.file(c).path),a=Qi(r,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),e)}};var X=Y(require("vscode")),Ae=require("vscode"),mg=Y(require("path"));var fg=require("vscode"),M8=Y(require("path"));function p0(t){let e=Yl(t);if(e)return`${M8.basename(e)}`;{let n=Xv(t);if(n)return n;let r=cc(t);if(r)return Mk(r);let o=jl(t);return o?o.volumeName:t.Config.Image}}function h0(t,e=!1){let n=uc(t);return e?`${n} (${lO(t)})`:n}function lO(t){let e="",n=t.State.Status,r=new Date(t.State.StartedAt),o=new Date(t.State.FinishedAt);if(r.getFullYear()>1&&o.getFullYear()>1){let i=new Date,s=new Date(r>o?t.State.StartedAt:t.State.FinishedAt);e=` ${dO(i,s)}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+e}function g0(t){let e=t.Name;if(t.Labels&&dg(t)){let r=w0(t);r&&r.gitUrlInfo.repository!=="unknown"&&(e=r.gitUrlInfo.fullRepositoryName)}return e}function v0(t){let e="";if(t.Labels&&dg(t)){let r=w0(t);if(r&&r.gitUrlInfo.repository!=="unknown"){let o=uO(t),i=fO(t);i?e=`#${i}`:o&&(e=`${o}`)}}return e}function dg(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}function uO(t){let e=t.Labels;if(e&&dg(t)&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}function fO(t){let e=t.Labels;if(e&&dg(t)&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}function w0(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true"){let r=e["vsch.local.repository"];return si(r)}}}var H8=1e3,B8=H8*60,W8=B8*60,j8=W8*24,Khe=j8*365;function dO(t,e){let n,r=t.getTime()-e.getTime();return(n=Math.round(r/Khe))>0?n===1?"1 year":fg.l10n.t("{0} years",n):(n=Math.round(r/j8))>0?n===1?"1 day":fg.l10n.t("{0} days",n):(n=Math.round(r/W8))>0?n===1?"1 hour":fg.l10n.t("{0} hours",n):(n=Math.round(r/B8))>0?n===1?"1 minute":fg.l10n.t("{0} minutes",n):(n=Math.round(r/H8),n===1?"1 second":fg.l10n.t("{0} seconds",n))}var sC=Y(require("vscode")),aC=require("vscode");async function V8(t){let e=(await Promise.all([ew,tw,Tp,Pp,Bx].map(async o=>{let{stdout:i}=await Qe(t,"ps","-a","-q","--filter","status=exited","--filter",`label=${o}`);return i.toString().split(/\r?\n/).filter(s=>!!s)}))).flat(),n;if(e.length){let i=(await fs(t,e)).map(a=>({label:p0(a),description:h0(a,!0),container:a}));i.sort((a,c)=>a.label.localeCompare(c.label));let s=await sC.window.showQuickPick(i,{canPickMany:!0,placeHolder:aC.l10n.t("Select stopped dev containers to delete")});if(!s)return;s.length&&(n=new Set(await Bl(t)),await Qe(t,"rm",...s.map(a=>a.container.Id)))}let r=await q8(t,n);(!e.length||r==="none")&&await sC.window.showInformationMessage(aC.l10n.t("There are no stopped dev containers or unused dev volumes to delete."),{modal:!0})}async function Y8(t){await q8(t)==="none"&&await sC.window.showInformationMessage(aC.l10n.t("There are no unused dev volumes to delete."),{modal:!0})}async function q8(t,e){let n=[...new Set([...e?(await Bl(t)).filter(r=>!e.has(r)&&r!=="vscode"):[],...await Bl(t,[Uk]),...await Bl(t,[Gx])])];if(n.length){let o=(await Of(t,n)).map(s=>({label:g0(s),description:v0(s),volume:s}));o.sort((s,a)=>s.label.localeCompare(a.label));let i=await sC.window.showQuickPick(o,{canPickMany:!0,placeHolder:aC.l10n.t("Select unused dev volumes to delete")});if(!i)return"cancel";i.length&&await Qe(t,"volume","rm",...i.map(s=>s.volume.Name))}return n.length?"done":"none"}var G8=Ae.l10n.t("Stop Container"),z8=Ae.l10n.t("Reopen Folder locally"),K8=Ae.l10n.t("Close Workspace");var vr=class{static isGroupItem(e){return!!e&&e.type==="Group"}static isContainerItem(e){return!!e&&e.type==="Container"}static isFolderItem(e){return!!e&&e.type==="Folder"}};var y0=class extends vr{constructor(n,r){super();this.label=n;this.groupType=r}type="Group";async asTreeItem(n,r,o,i){return new X.TreeItem(this.label,X.TreeItemCollapsibleState.Expanded)}},pg=class extends vr{constructor(n,r=[],o,i=!1){super();this.container=n;this.folders=r;this.parent=o;this.isDevContainer=i}type="Container";async asTreeItem(n,r,o,i){let s=new X.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=h0(this.container);let a=this.getContextBase();s.iconPath=E0(r,Qhe),s.contextValue="exited"+a;let c=!1;return o&&this.container.Id===o.Id?(s.iconPath=E0(r,Zhe),s.contextValue="active"+a,c=!0):n&&await this.setTreeItemIconAndContext(n,a,s),s.tooltip=this.getHover(c,s.iconPath instanceof X.ThemeIcon?s.iconPath:new X.ThemeIcon("vm"),s.label),this.folders.length===1&&this.isDevContainer&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?X.TreeItemCollapsibleState.Expanded:X.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(n,r,o){switch(this.container.State.Status){case"created":{o.iconPath=new X.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"paused":{o.iconPath=new X.ThemeIcon("vm-outline"),o.contextValue="running"+r;break}case"restarting":{o.iconPath=new X.ThemeIcon("vm-outline"),o.contextValue="exited"+r;break}case"exited":{o.iconPath=new X.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"running":{o.iconPath=new X.ThemeIcon("vm-running"),o.contextValue="running"+r;break}}}getTimeElapsed(n){return n?lO(n):""}getContainerLabel(){return p0(this.container)}getHover(n,r,o){let i=new X.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${o} (${uc(this.container)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=zx(this.container);return s&&i.appendMarkdown(`$(file-symlink-directory) ${s}  
`),n?i.appendMarkdown(Ae.l10n.t("$(remote) Connected")):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}_repository;_alreadyCheckedRepository=!1;get repository(){if(!this._alreadyCheckedRepository){let n=cc(this.container);n&&(this._repository=si(n)),this._alreadyCheckedRepository=!0}return this._repository}inspect(n){return oi(n,this.container.Id)}},zc=class extends vr{constructor(n,r,o){super();this.container=n;this.folder=r;this.isDevContainer=o}type="Folder";async asTreeItem(n,r,o,i){let s=new X.TreeItem(mg.basename(this.folder.path),X.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=E0(r,tge),s.contextValue="attachedFolder",this.isDevContainer&&!cc(this.container)&&!jl(this.container)&&(s.contextValue="devFolder"),o&&this.container.Id===o.Id&&i===this.folder.path&&(s.iconPath=E0(r,ege),s.tooltip=Ae.l10n.t("Active Folder {0}",String(s.label)),s.contextValue=`active${s.contextValue}`),s}};function Jhe(t,e,n,r){if(!(!X.env.remoteName||X.env.remoteName!=="attached-container"&&X.env.remoteName!=="dev-container"))return J8(t,e,n,r)}function J8(t,e,n,r){X.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new vO(t,e,r,e.output),i=X.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},t.subscriptions.push(n.onDidChangeActiveContainer(s=>o.refresh(s))),o}function Xhe(t,e){let n=[G8];return t&&t.Id===e.Id&&X.workspace.workspaceFolders&&X.workspace.workspaceFolders.length>0&&(n.push(K8),X.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&n.push(z8)),n}var mO=class{constructor(e,n){this.dockerParams=e;this.containerId=n}writeEmitter=new X.EventEmitter;onDidWrite=this.writeEmitter.event;destroyables=[];open(){let{cliHost:e,env:n,output:r}=this.dockerParams;e.exec({cmd:ks(),args:["logs","-f",this.containerId],env:n,output:r}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},C0=class{constructor(e,n,r,o,i,s){this.targetsTreeData=e;this.detailsTreeData=n;this.devVolumesTreeData=r;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(X.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(X.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(X.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(X.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(X.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(X.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(X.commands.registerCommand("remote-containers.attachToContainerInCurrentWindow",this.commandAttachToContainerInCurrentWindow,this)),e.push(X.commands.registerCommand("remote-containers.attachToContainerInNewWindow",this.commandAttachToContainerInNewWindow,this)),e.push(X.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(X.commands.registerCommand("remote-containers.openInformationAboutMountPerformance",this.openInformationAboutMountPerformance,this)),e.push(X.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(X.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(X.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(X.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(X.commands.registerCommand("remote-containers.openFolderInContainerInCurrentWindow",n=>this.commandStartAndOpenFolder(n,{forceReuseWindow:!0}),this)),e.push(X.commands.registerCommand("remote-containers.openFolderInContainerInNewWindow",n=>this.commandStartAndOpenFolder(n,{forceNewWindow:!0}),this)),e.push(X.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!vr.isContainerItem(e))return;let n=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?Ae.l10n.t("Stop active container? This will disconnect your current window."):Ae.l10n.t("Stop {0}?",e.getContainerLabel()),r=await X.window.showWarningMessage(n,{modal:!0},...Xhe(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(r){case G8:{await UF(this.dockerParams,e.container),e.container=await oi(this.dockerParams,e.container.Id);break}case K8:{await X.commands.executeCommand("workbench.action.closeFolder");break}case z8:{await X.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!vr.isContainerItem(e))return;let n=await ii(this.dockerParams,e.container.Id);if(!n)return;let r=Ae.l10n.t("Remove"),o=await X.window.showWarningMessage(Ae.l10n.t("Remove this container?"),{modal:!0,detail:Ae.l10n.t("This action is not reversible and deletes the container permanently.")},r);await this.targetsTreeData.withProgress(e.parent,async()=>{o===r&&(await UF(this.dockerParams,e.container),await m5(this.dockerParams,n.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let n=zx(e);if(n||(n=b3(e)),n){let r=await Nx(this.dockerParams,n);if((await Bl(this.dockerParams)).indexOf(n)>=0){let s;r!=null&&r.Labels&&r.Labels["vsch.local.repository.unique"]==="true"?s=Ae.l10n.t("The container is using a volume with a cloned repository."):s=Ae.l10n.t("This is the last container using '{0}'.",n);let a=Ae.l10n.t("Remove");await X.window.showInformationMessage(s,{modal:!0,detail:Ae.l10n.t("Do you want to remove the volume and the data it contains?")},a)===a&&await $F(this.dockerParams,n)}}}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){vr.isContainerItem(e)&&await this.targetsTreeData.withProgress(e,async()=>{await KI(this.dockerParams,e.container),e.container=await oi(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){vr.isFolderItem(e)&&(await X.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){vr.isContainerItem(e)&&(this.detailsTreeData||(this.detailsTreeData=J8(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e,n){let r,o;vr.isFolderItem(e)?(o=e,r=e.container):pg.isContainerItem(e)&&(o=e.folders[0],r=e.container),r&&(o&&Wf(o.folder.authority)?(await KI(this.dockerParams,r),await cC(this.dockerParams,r,this.context,!!(n!=null&&n.forceNewWindow),o.folder.path)):await X.commands.executeCommand("remote-containers.openFolder",o,n))}async commandAttachToContainerInCurrentWindow(e){return this.attachToContainerInternal(e,!1)}async commandAttachToContainerInNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,n){let r;vr.isContainerItem(e)?r=e.container:this.detailsTreeData&&(r=this.detailsTreeData.container),r&&(await KI(this.dockerParams,r),await cC(this.dockerParams,r,this.context,n))}async commandInspectDockerResource(e){let n;(vr.isContainerItem(e)||Kc.isImageItem(e)||Kc.isVolume(e)||Kc.isDevVolume(e))&&(n=await e.inspect(this.dockerParams)),n&&X.window.showTextDocument(await X.workspace.openTextDocument({language:"json",content:JSON.stringify(n,null,"	")}))}async openInformationAboutMountPerformance(){await X.env.openExternal(X.Uri.parse("https://aka.ms/vscode-remote/containers/open-repo"))}async commandInspectInBasicDevContainer(e){Kc.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){Kc.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){Kc.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}static async commandNewContainer(){var r;let e=[...(r=X.workspace.workspaceFolders)!=null&&r.length?[{label:Ae.l10n.t("Open Current Folder in Container"),command:"remote-containers.reopenInContainer"}]:[],{label:Ae.l10n.t("Open Folder in Container..."),command:"remote-containers.openFolder"},{label:Ae.l10n.t("Open Workspace in Container..."),command:"remote-containers.openWorkspace"},{label:Ae.l10n.t("New Dev Container..."),command:"remote-containers.createDevContainer"},{label:Ae.l10n.t("Clone Repository in Container Volume..."),command:"remote-containers.openRepositoryInVolume"},{label:Ae.l10n.t("Clone GitHub Pull Request in Container Volume..."),command:"remote-containers.openPullRequestInVolume"},{label:Ae.l10n.t("Try a Sample..."),command:"remote-containers.trySample"}],n=await X.window.showQuickPick(e,{placeHolder:Ae.l10n.t("Select an action to create a dev container")});if(n)return X.commands.executeCommand(n.command)}async commandShowContainerLog(e){if(!vr.isContainerItem(e))return;let n=new mO(this.dockerParams,e.container.Id);X.window.createTerminal({name:e.container.Config.Image,pty:n}).show()}};function X8(t,e,n,r){X.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new pO(t,e,s,n,r),i=X.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,t.subscriptions.push(X.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0)))),t.subscriptions.push(X.commands.registerCommand("remote-containers.newContainer",C0.commandNewContainer)),t.subscriptions.push(X.commands.registerCommand("remote-containers.pruneVolumes",async()=>{let a=await o.getDockerParams(!0);a&&await Y8(a)}));function s(a){let c=Jhe(t,a,o,n),l=new yO(t,n,r),u=X.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let f=new C0(o,c,l,a,t,n);t.subscriptions.push(...f.registerCommands()),t.subscriptions.push(LF(t,n.product)(async()=>{o.refresh(void 0),l.refresh(void 0);let m=await tt(t,r);c&&c.updateDockerParameters(m),f.updateDockerParameters(m)}))}}var pO=class{constructor(e,n,r,o,i){this.context=e;this.resolverResults=n;this.onFirstReveal=r;this.telemetry=o;this.output=i}_onDidChangeTreeData=new X.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_onDidChangeActiveContainer=new X.EventEmitter;onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;dockerParams;refreshDockerParams=!1;needsSSHCredentials=!1;passiveSSHAskpassEnv;eventsProcess;setTreeMessage=()=>{};_currentContainer;currentFolder;devContainers=[];attachContainers=[];otherContainers=[];recentAttachEntries=new Map;recentAttachDevContainerEntries=new Map;recentDevComposeEntries=new Map;containerItems=new Map;action=Promise.resolve();set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Ml(this.context.extensionPath,async n=>(this.needsSSHCredentials=!0,nm(n,!1)),this.output));try{this.dockerParams=await tt(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1);let n=OF();await iC(this.dockerParams,this.telemetry,n)!==!0&&(this.dockerParams=void 0)}catch(n){if(!this.needsSSHCredentials)throw n}}return this.dockerParams}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;let r="exec_create: /root/.vscode-server";if(n.Action==="die"||n.Action==="destroy"||n.Action==="create")this._onDidChangeTreeData.fire();else if(!n.Action.startsWith("exec_create")&&n.Actor&&n.Actor.ID&&this.containerItems.has(n.Actor.ID)){let o=this.containerItems.get(n.Actor.ID);this.dockerParams&&o?(async()=>(o.container=await oi(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)))():this._onDidChangeTreeData.fire(o);return}else if(n.Action.startsWith(r)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Ax(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}needsDockerStartOrInstallContext=void 0;async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await X.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await X.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}hasContainersContext=void 0;async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let n=X.workspace.workspaceFolders&&X.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await X.commands.executeCommand("setContext",n,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let n=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&n.push(new y0(Ae.l10n.t("Dev Containers"),0)),this.otherContainers.length>0&&n.push(new y0(Ae.l10n.t("Other Containers"),2)),n}async getChildDevContainer(e,n){let r=await this.getWorkspaceFolderFromContainer(e),o=r?[new zc(e,r,!0)]:[],i=Yl(e);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new zc(e,a,!1))):i&&this.recentAttachEntries.has(e.Id)?o.push(...this.recentAttachEntries.get(e.Id).map(a=>new zc(e,a,!1))):(i=cc(e))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new zc(e,a,!1))):(i=bk(jl(e)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new zc(e,a,!1))):i===void 0&&this.recentDevComposeEntries.has(e.Id)&&o.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new zc(e,a,!1)));let s=new pg(e,o,n,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){let n;if(e.groupType===0){let r=this.devContainers.map(async o=>this.getChildDevContainer(o,e));r.push(...this.attachContainers.map(async o=>{let i=new pg(o,this.recentAttachEntries.get(o.Id).map(s=>new zc(o,s,!1)),e);return this.setContainerItems(i),i})),n=await Promise.all(r)}else n=this.otherContainers.map(r=>{let o=new pg(r,[],e);return this.setContainerItems(o),o});return n.sort((r,o)=>r.getContainerLabel().localeCompare(o.getContainerLabel()))}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let n=await Hl(this.dockerParams,!0);if(await this.setHasContainersContext(n.length>0),n.length===0)return[];let r=await fs(this.dockerParams,n);return this.getChildGroups(r)}else{if(vr.isGroupItem(e))return this.getChildContainers(e);if(vr.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=X.workspace.workspaceFolders,n;if(this.dockerParams){if(e&&e.length>0){let r=this.resolverResults.get(e[0].uri.authority);r&&r.dockerContainerId&&(n=await ii(this.dockerParams,r.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let r=[...this.resolverResults.values()][0].dockerContainerId;r&&(n=await ii(this.dockerParams,r))}}n!==this._currentContainer&&(this._currentContainer=n)}addContainerToMap(e){if(Yl(e)){this.devContainers.push(e);return}else if(cc(e)){this.devContainers.push(e);return}else if(jl(e)){this.devContainers.push(e);return}else if(Xv(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(n=>{this.addContainerToMap(n)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e,n){let{cliHost:r,dockerCLI:o,dockerComposePath:i}=this.dockerParams,s=It(r.path,e),a=n?ye.from({scheme:Ke.scheme,path:n}):await l3(r,s,zy(),Hn),c={cliHost:r,dockerPath:o,dockerComposePath:i,appRoot:X.env.appRoot,extensionPath:this.context.extensionPath,package:await sr(this.context.extensionPath),output:this.output},l=a&&await Zh(c,s.rootFolderPath,a);if(l){let u=ur(this.dockerParams.env);return X.Uri.parse(iw(r.authority,e,l.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(e){let n=Yl(e);if(n){let r=P3(e);return this.getWorkspaceFolderFromHostWorkspace(n,r)}else{let r=cc(e),o=zx(e),i=T3(e),s=this.dockerParams;if(r){let c=ur(s.env);return X.Uri.parse(Hi(s.cliHost.authority,r,o,i,!1,c,void 0))}let a=jl(e);if(a){let c=ur(s.env);return X.Uri.parse(Hi(s.cliHost.authority,void 0,a.volumeName,a.folder,!1,c,void 0))}}}async getWorkspaceFolderFromHostPath(e){let n=this.dockerParams.cliHost,r=await $3(n,e,this.output),o=M3(n,r,e),i=ur(this.dockerParams.env);return X.Uri.parse(iw(n.authority,e,o,i),!0)}getWorkspaceFolderFromRepository(e,n,r){let o=this.dockerParams,i=ur(o.env);return X.Uri.parse(Hi(o.cliHost.authority,e,n,r,!1,i,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(e,n){let r=this.dockerParams,o=ur(r.env);return X.Uri.parse(Hi(r.cliHost.authority,void 0,e,n,!1,o,void 0),!0)}async findComposeTargetContainer(e,n){var r;return(r=n.find(o=>Yl(o)===e))==null?void 0:r.Id}trySetEntryWithAttachAuthority(e,n,r){let o;if("containerName"in n){let i=r.find(s=>s.Name===n.containerName);i&&(o=i.Id)}else o=n.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(e):this.recentAttachEntries.set(o,[e]))}async trySetEntryWithDevAuthority(e,n,r,o){let i=n.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(n.hostPath),o[i]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(n.hostPath)?this.recentAttachDevContainerEntries.get(n.hostPath).push(e):this.recentAttachDevContainerEntries.set(n.hostPath,[e]);let a=await this.findComposeTargetContainer(n.hostPath,r);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,n){this.getWorkspaceFolderFromRepository(n.repositoryPath,n.volumeName,n.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(n.repositoryPath)?this.recentAttachDevContainerEntries.get(n.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(n.repositoryPath,[e]))}trySetEntryWithDevContainerInVolumeAuthority(e,n){if(this.getWorkspaceFolderFromDevContainerInVolume(n.volumeName,n.folder).path!==e.path){let o=bk(n);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(e):this.recentAttachDevContainerEntries.set(o,[e])}}trySetEntryWithVolumeAuthority(e,n){let r=n.volumeName;r&&(this.recentAttachEntries.has(r)?this.recentAttachEntries.get(r).push(e):this.recentAttachEntries.set(r,[e]))}async trySetEntry(e,n,r){if(!e||!e.folderUri&&!e.workspace.configPath)return;let o=e.folderUri??e.workspace.configPath,i=Wf(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,n);else{let s=ao(o.authority);s&&(un(s)?await this.trySetEntryWithDevAuthority(o,s,n,r):so(s)?this.trySetEntryWithRepoAuthority(o,s):Hf(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let n=await X.commands.executeCommand("_workbench.getRecentlyOpened");if(n&&n.workspaces){let r={};for(let o of n.workspaces)await this.trySetEntry(o,e,r)}}withProgress(e,n){return this.action=this.action.then(()=>n()),this.refresh(e)}};var Kc=class{constructor(e){this.label=e}detail;context;command;type="Default";static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type==="Image"}static isVolume(e){return!!e&&e.type==="Volume"}static isDevVolume(e){return!!e&&e.type==="DevVolume"}},hO=class{constructor(e){this.detail=e}type="Image";context="image";label=Ae.l10n.t("Image");inspect(e){return Zq(e,this.detail)}},gO=class{constructor(e,n,r){this.label=e;this.detail=n;this.volumeDetails=r}type="Volume";context="volume";async inspect(e){return Nx(e,this.volumeDetails)}},vO=class{constructor(e,n,r,o){this.context=e;this.dockerParams=n;this.telemetry=r;this.output=o}_onDidChangeTreeData=new X.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_container;setTreeTitle=()=>{};updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let n=new X.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?X.TreeItemCollapsibleState.Expanded:X.TreeItemCollapsibleState.None);return n.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(n.description=e.detail,n.tooltip+=` ${n.description}`),n.contextValue=e.context,n.command=e.command,n}async getAttributes(e,n,r){let o=[];n&&o.push({label:Ae.l10n.t("Workspace"),detail:n});let i=cc(e.container);i&&o.push({label:Ae.l10n.t("Repository"),detail:i});let s=jl(e.container);return s&&(o.push({label:Ae.l10n.t("Volume"),detail:s.volumeName}),o.push({label:Ae.l10n.t("Folder"),detail:s.folder})),o.push({label:Ae.l10n.t("Name"),detail:e.container.Name}),o.push(new hO(e.container.Config.Image)),r&&o.push({label:Ae.l10n.t("Configuration"),detail:r,command:{title:Ae.l10n.t("Open Dev Container File"),command:"remote-containers.openDevContainerFile",arguments:[r]},context:"devContainer"}),o}async getMounts(e){let n=[];return e&&e.Mounts.forEach(r=>{if(r.Type==="volume"){let o=r.Name,i=new gO(Ae.l10n.t("Volume"),o,o),s={label:Ae.l10n.t("Destination"),detail:r.Destination};n.push({label:Ae.l10n.t("Volume mount"),detail:[i,s]})}else if(r.Type==="bind"){let o={label:Ae.l10n.t("Source"),detail:r.Source},i={label:Ae.l10n.t("Destination"),detail:r.Destination},s=this.dockerParams&&["win32","darwin"].includes(this.dockerParams.cliHost.platform)?[{label:Ae.l10n.t("I/O performance"),detail:Ae.l10n.t("reduced by bridging OSes"),context:"mountPerformanceInfo",command:{command:"remote-containers.openInformationAboutMountPerformance"}}]:[];n.push({label:Ae.l10n.t("Bind mount"),detail:[o,i,...s]})}}),n}async getChildrenFromRoot(e){let n=[],r=Yl(e.container),o=(e.container.Config.Labels||{})[$f];n.push({label:Ae.l10n.t("Attributes"),detail:await this.getAttributes(e,r,o),type:"Title"});let i;this.dockerParams&&(i=await oi(this.dockerParams,e.container.Id));let s=await this.getMounts(i);return s.length>0&&n.push({label:Ae.l10n.t("Mounts"),detail:s,type:"Title"}),n}async testContainer(){let e=!0;try{(this.dockerParams?await oi(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle(Ae.l10n.t("Details (Containers)"))),e}async getChildren(e){if(this._container===void 0)return[];let n=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),n=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&n.push(...e.detail),n}async refresh(e){this.dockerParams=await tt(this.context,this.output),await iC(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},wO=class extends Kc{type="DevVolume";volumeDetails;createdAt;constructor(e){super(e.Name),this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),n=new X.TreeItem(e,X.TreeItemCollapsibleState.None);return n.iconPath=this.iconPath,n.description=this.getDescription(),this.isUniqueVolume()?n.contextValue="uniqueDevVolume":n.contextValue="devVolume",n}isUniqueVolume(){return dg(this.volumeDetails)}getLabel(){return g0(this.volumeDetails)}getDescription(){return v0(this.volumeDetails)}getBranchName(){return uO(this.volumeDetails)}getPullRequestId(){return fO(this.volumeDetails)}getRepository(){return w0(this.volumeDetails)}get iconPath(){return new X.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let r=new Date,o=new Date(this.volumeDetails.CreatedAt);e=Ae.l10n.t("{0} ago",dO(r,o))}return this.createdAt=e,e}async inspect(e){return Nx(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await X.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await X.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await Bl(e)).indexOf(this.volumeDetails.Name)>=0)){await X.window.showInformationMessage(Ae.l10n.t("Volume '{0}' is in use and cannot be removed.",this.volumeDetails.Name),{modal:!0});return}let o=Ae.l10n.t("Remove");await X.window.showInformationMessage(Ae.l10n.t("Are you sure you want to remove volume '{0}'?",this.volumeDetails.Name),{modal:!0},o)===o&&await $F(e,this.volumeDetails.Name)}},yO=class{constructor(e,n,r){this.context=e;this.telemetry=n;this.output=r}dockerParams;_onDidChangeTreeData=new X.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;eventsProcess;async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){if(!this.dockerParams){this.dockerParams=await tt(this.context,this.output,void 0,void 0);let e=OF();await iC(this.dockerParams,this.telemetry,e)!==!0&&(this.dockerParams=void 0)}return this.dockerParams}async setHasVolumesContext(e){await X.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let n=await tt(this.context,this.output),r=await Fo(n),o=await Of(n,r),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new wO(a))}async resolveTreeItem(e,n){let r=await tt(this.context,this.output),o=await this.getAssociatedContainers(r,n),i=n.getLabel(),s=n.getRepository(),a=n.getBranchName(),c=n.getPullRequestId(),l=n.getTimeElapsed();return o.length>0?e.tooltip=this.renderMarkdown(i,s,a,c,l,o.join(", ")):e.tooltip=this.renderMarkdown(i,s,a,c,l,Ae.l10n.t("None")),e}async getAssociatedContainers(e,n){let r=[],o=await Hl(e,!0),i=await fs(e,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===n.volumeDetails.Name&&r.push(uc(s));return r}renderMarkdown(e,n,r,o,i,s){let a=new X.MarkdownString(void 0,!0);if(n){let c=n.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=n.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=n.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),r&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${r}](${l}/tree/${r})
`):a.appendMarkdown(`$(git-compare) ${r}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${l}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;(n.Action==="die"||n.Action==="destroy"||n.Action==="create"||n.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Ax(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},Zhe="vm-active",Qhe="vm-default",ege="folder-active",tge="folder";function E0(t,e){let n=`${e}.svg`;return{light:X.Uri.file(t.asAbsolutePath(mg.join("resources","light",n))),dark:X.Uri.file(t.asAbsolutePath(mg.join("resources","dark",n))),highContrast:X.Uri.file(t.asAbsolutePath(mg.join("resources","highContrast",n)))}}var RO=require("util");var Zn=Y(require("vscode")),Fa=require("vscode");async function Z8(t,e,n,r={},o={}){let i=await gx({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:e,remotePtyExec:n,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:s,connectionToken:a,remoteEnv:c,serverDownloaded:l}=await Al(t,i,r,o);return{params:t,properties:i,config:void 0,resolvedAuthority:{host:sc,port:s,connectionToken:a,extensionHostEnv:c},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function CO(t,e,n){var r,o;try{if(!await Mu(t))return;let{cliHost:i,env:s,output:a}=e,c;if(!(n!=null&&n.name)){let p=(await ee({exec:i.exec,cmd:"kubectl",args:["get","pods","-o","json"],env:s,output:a})).stdout.toString(),h=JSON.parse(p).items;if(!h.length){await Zn.window.showInformationMessage(Fa.l10n.t("No pods found."),{modal:!0},Fa.l10n.t("Show Log"))&&Zn.commands.executeCommand(wt);return}if(c=(r=await Zn.window.showQuickPick(h.map(g=>({label:g.metadata.name,description:g.metadata.namespace,pod:g})),{placeHolder:Fa.l10n.t("Select pod")}))==null?void 0:r.pod,!c)return}if(!c){let d=["get","pod",n.name,"-o","json"];n.namespace&&d.push("--namespace",n.namespace);let h=(await ee({exec:i.exec,cmd:"kubectl",args:d,env:s,output:a})).stdout.toString();c=JSON.parse(h)}let l=c.spec.containers||[];if(!l.length){await Zn.window.showInformationMessage(Fa.l10n.t("No containers found."),{modal:!0},Fa.l10n.t("Show Log"))&&Zn.commands.executeCommand(wt);return}let u=l.length>1?(o=await Zn.window.showQuickPick(l.map(d=>({label:d.name,description:d.image,container:d})),{placeHolder:Fa.l10n.t("Select container")}))==null?void 0:o.container:l[0];if(!u)return;let f=(await ee({exec:i.exec,cmd:"kubectl",args:["config","current-context"],env:s,output:a})).stdout.toString().trim(),m={remoteAuthority:ige(Zn.env.remoteAuthority,{context:f,podname:c.metadata.name,namespace:c.metadata.namespace,name:u.name,image:u.image})};t.extensionMode===Zn.ExtensionMode.Development&&(m.reuseWindow=!0),await Zn.commands.executeCommand("vscode.newWindow",m)}catch(i){e.output.write((i==null?void 0:i.stack)||(i==null?void 0:i.message)||String(i)),Zn.commands.executeCommand(wt),await Zn.window.showErrorMessage(Fa.l10n.t("Error while attaching to Kubernetes container."),{detail:i==null?void 0:i.message,modal:!0})}}async function Q8(t,e,n,r,o,i){return await Mu(t)?{...await nge(t,e,n,r,o,i),isTrusted:!0}:(await Zn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function nge(t,e,n,r,o,i){let s;return Zn.window.withProgress({location:Zn.ProgressLocation.Notification,title:Xh,cancellable:!1},async a=>{try{let c=sge(n);if(!c)throw new Error(`Invalid authority: ${n}`);let{options:l,parentAuthority:u}=c;if(u&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let f=process.cwd(),m=Ra(),d=await Oo(r.execServer?{server:r.execServer,authority:u}:void 0,void 0,f,Hn,m,t.extensionPath,await io(),e.product,o.log,Ns);s=await Jh({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:a,cliHost:d,env:d.env,cwd:f,wslSettings:m,isLocalContainer:kp(u,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${l.name} in ${l.podname} (${l.image})`);let p=rge(d.exec,l),h=oge(d.ptyExec,l);return await Z8(s,p,h)}catch(c){let l=c instanceof Se?c:new Se({description:Fa.l10n.t("An error occurred attaching to the container."),originalError:c});throw l.actions=[...eg,im,Bu,Qh,om],l}}).then(a=>(qc(e,"k8s-container","success",o.sessionStart,s,void 0,void 0,a.properties),a),a=>{let c=a instanceof Se?a:new Se({description:Fa.l10n.t("An error occurred attaching to the container."),originalError:a});return qc(e,"k8s-container","failure",o.sessionStart,s,void 0,void 0,c.containerProperties,c),Wu(c,"k8s-container",e,!0,o.log)})}function rge(t,e){return async function(n){return t(e9(e,n))}}function oge(t,e){return async function(n){return t(e9(e,n))}}function e9(t,e){let n=["exec","-it",t.podname];if(t.context&&n.push("--context",t.context),t.namespace&&n.push("--namespace",t.namespace),n.push("--container",t.name,"--"),e.cwd&&n.push("/bin/sh","-c",'cd "$1" && shift && "$@"',"--",e.cwd),e.env){let r=Object.keys(e.env);if(r.length){n.push("env");for(let o of r)n.push(`${o}=${e.env[o]}`)}}return n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"kubectl",args:n,output:e.output}}function ige(t,e){return t=sw(t),`k8s-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function sge(t){let e=Np(t);if((e==null?void 0:e.name)!=="k8s-container")return;try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{}let n=e.config.split("+").reduce((r,o)=>{let i=o.indexOf("=");return i!==-1&&(r[o.substring(0,i)]=decodeURIComponent(o.substring(i+1))),r},{});return{parentAuthority:e.parentAuthority,options:n}}var _t=Y(require("vscode")),At=require("vscode"),um=Y(require("fs")),hg=Y(require("os")),lm=Y(require("path")),S0=require("child_process"),gg=require("util");function x0(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function t9(t,e){let n=t.globalStorageUri,r=ko.joinPath(n,"cli-bin");await _t.workspace.fs.createDirectory(r);let o="";try{o=(await _t.workspace.fs.readFile(ko.joinPath(r,"vscode-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}o!==process.execPath&&(await _t.workspace.fs.writeFile(ko.joinPath(r,"vscode-app-root"),Buffer.from(_t.env.appRoot,"utf-8")),await _t.workspace.fs.writeFile(ko.joinPath(r,"vscode-quality"),Buffer.from(e.quality??"","utf-8")),await _t.workspace.fs.writeFile(ko.joinPath(r,"vscode-machine-id"),Buffer.from(_t.env.machineId,"utf-8")),await _t.workspace.fs.writeFile(ko.joinPath(r,"vscode-path"),Buffer.from(process.execPath,"utf-8")));let i="";try{i=(await _t.workspace.fs.readFile(ko.joinPath(r,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}if(i===t.extensionPath)return;let s=ko.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),a=x0(e),c=`devcontainer${a}`,l=[{source:"devcontainer",destination:c},{source:"devcontainer.cmd",destination:`devcontainer${a}.cmd`}];for(let u of l)await _t.workspace.fs.copy(ko.joinPath(s,u.source),ko.joinPath(r,u.destination),{overwrite:!0});process.platform!=="win32"&&await um.promises.chmod(ko.joinPath(r,c).fsPath,493),await _t.workspace.fs.writeFile(ko.joinPath(r,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function age(t,e){let n=x0(e),r="";try{let o=await ti("powershell.exe");if(r=(await(0,gg.promisify)(S0.exec)(`"${o}" -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`,{env:ro(process.env)})).stdout.toString().trim(),r.indexOf(t)>=0)return await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already in your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)}),!0;let s=At.l10n.t("Add"),a=At.l10n.t("Copy CLI Path");switch(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be added to your PATH"),{modal:!0},s,a)){case s:let l=(0,gg.promisify)(S0.exec)(`"${o}"  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${r};${t}', 'User')`,{env:ro(process.env)}),u=_t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been added to your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});await Promise.all([l,u]);break;case a:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});break}return!0}catch{return!1}}async function cge(t,e){let r=(process.env.PATH??"").split(":"),o=[lm.join(hg.homedir(),"bin"),lm.join(hg.homedir(),".local/bin")],i="/usr/local/bin";hg.platform()==="darwin"&&o.push(i);let s=(0,gg.promisify)(um.stat);for(let a of o){if(r.findIndex(p=>p===a)<0)continue;try{await s(a)}catch{continue}let c=x0(e),l=lm.join(a,`devcontainer${c}`);try{let p=await s(l);return console.log(p),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let u=At.l10n.t("Create"),f=At.l10n.t("Copy CLI Path"),m=await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be in your PATH"),{detail:At.l10n.t("Create a symlink in {0}?",a),modal:!0},u,f),d=lm.join(t,`devcontainer${c}`);switch(m){case u:if(a===i){if(!await lge(d,l))break}else await(0,gg.promisify)(um.symlink)(d,l);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break;case f:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break}return!0}return!1}async function lge(t,e){try{return await um.promises.symlink(t,e),!0}catch(n){if(n.code!=="EACCES"&&n.code!=="ENOENT")throw n;let r=At.l10n.t("OK");if(await _t.window.showInformationMessage(At.l10n.t("This will now prompt with 'osascript' for Administrator privileges to install the shell command."),{modal:!0},r)===r){let s=`"${await ti("osascript")}" -e "do shell script \\"mkdir -p ${lm.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,gg.promisify)(S0.exec)(s),!0}return!1}}async function n9(t,e){let n=t.globalStorageUri,r=ko.joinPath(n,"cli-bin").fsPath;switch(hg.platform()){case"win32":if(await age(r,e))return;break;case"darwin":case"linux":if(await cge(r,e))return;break}let o=At.l10n.t("Copy CLI Path");if(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be included your PATH"),{modal:!0},o)===o){await _t.env.clipboard.writeText(r);let s=x0(e);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${s}`)})}}var yo=Y(require("vscode")),Lr=require("vscode"),EO=Y(require("path"));var uge=Lr.l10n.t("Select Dev Container Configuration"),fge=Lr.l10n.t('[Creating Dev Container (show log)](command:remote-containers.revealLogTerminal "Show details in terminal")'),r9="alpine:3.16.3";async function o9(t,e,n){let r=await dge(t,e,n);if(!r)return;let{volumeAndFolderName:o}=r,i=ur(e.env),s=yo.Uri.parse(Hi(e.cliHost.authority,void 0,o,o,!1,i,void 0));await Hu({uri:s,type:"folder",label:Lr.l10n.t("{0} [Dev Container]",o)}),await yo.commands.executeCommand("vscode.openFolder",s)}async function dge(t,e,n){let{output:r}=e,o=Qe(e,"pull",r9),i=await KF({telemetry:n,output:r,openConfigurationCommandId:tm,showLogCommandId:wt},uge,!0);i.askForTrust=!0;let s=await Fo(e),a=async()=>{i.skipOptions=!0;let f=await QI(i,void 0,void 0,Promise.resolve(void 0));if(f==="back"||!f)return;let m=f.metadata.template;if(WF.indexOf(m.owner)===-1){let d=`@${m.owner}`,p={label:Lr.l10n.t("Trust {0}",d),description:Lr.l10n.t("from GitHub"),buttons:[{iconPath:new yo.ThemeIcon("info"),tooltip:Lr.l10n.t("Open Documentation")}]},h={label:Lr.l10n.t("Back")},g={label:Lr.l10n.t("Cancel")},v=i.quickPick.onDidTriggerItemButton(()=>{yo.env.openExternal(yo.Uri.parse(m.documentationURL))}),C=await wo(i.quickPick,[p,h,g],Lr.l10n.t("The {0} is from the {1} GitHub owner/organization.",m.name,d),void 0,void 0,!0);if(v.dispose(),!C||C===g)return;if(C==="back"||C===h)return a()}return i9(i,f,s,mge(f.id,s),a)},c=await a();if(!c){i.quickPick.dispose();return}let{selectedTemplate:l,volumeName:u}=c;return yo.window.withProgress({location:yo.ProgressLocation.Notification,title:fge,cancellable:!1},async()=>{let f;try{await Sp(e,u,[`${Gx}=true`]),await o;let{stdout:m}=await Qe(e,...pge(u,Mf()));f=m.toString().trim();let d=EO.posix.join(Mf(),u),p=ds(e,f,"root"),h=await zs(e,f,"root",Hn),g=no("container",d,{},p,h,()=>{throw new Error("not implemented")},"node",r);await g.mkdirp(d);let v=It(EO.posix,d),C=await GF(i,g,v.configFolderPath,"workspace",l);return i.quickPick.hide(),C?{volumeAndFolderName:u}:void 0}finally{if(f)try{await $i(e,f)}catch{}}})}function mge(t,e){let n,r=(/([^/:]+)(:[^/:]+)?$/.exec(t)||[])[1]||"devcontainer",o=0;do n=`${r}${o++?`-${o}`:""}`;while(e.indexOf(n)!==-1);return n}async function i9(t,e,n,r,o){let{quickPick:i}=t;i.placeholder=Lr.l10n.t("Dev container name"),i.selectedItems=[],i.value=r,i.buttons=[yo.QuickInputButtons.Back];let s={label:Lr.l10n.t("Additional Options..."),alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:Lr.l10n.t("Create Dev Container"),description:i.value,alwaysShow:!0},s]}function l(d){a=!0,i.items=[{label:d,alwaysShow:!0}]}c();let u=[],f=await new Promise(d=>{u=[i.onDidAccept(()=>{i.value?a||d({volumeName:i.value,options:i.selectedItems[0]===s}):l(Lr.l10n.t("The name cannot be empty."))}),i.onDidHide(()=>d(void 0)),i.onDidChangeValue(p=>{n.indexOf(p)!==-1?l(Lr.l10n.t("A Docker volume with this name already exists.")):p&&!/^[a-zA-Z0-9]/.test(p)?l(Lr.l10n.t("Only alphanumeric characters are allowed as the first character.")):p&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(p)?l(Lr.l10n.t("Only alphanumeric characters, periods, underscores and hyphens are allowed.")):c()}),i.onDidTriggerButton(()=>d("back"))]});if(u.forEach(d=>d.dispose()),!f)return;if(f==="back")return o();let{volumeName:m}=f;if(f.options){let p=await(async()=>{t.skipOptions=!1;let h=await sm(t,e.metadata.template,Promise.resolve(void 0),async()=>{let g=await i9(t,e,n,m,o);if(g)return m=g.volumeName,g.selectedTemplate});if(!(h==="back"||!h))return h})();if(!p)return;e=p}return i.busy=!0,i.enabled=!1,{volumeName:m,selectedTemplate:e}}function pge(t,e){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,r9,"sleep","infinity"]}var _0=Y(require("crypto")),a9=require("path"),c9=Y(require("vscode")),SO=typeof __non_webpack_require__<"u"?__non_webpack_require__:require,hge=["You may install and use any number of copies of the software only with Microsoft Visual Studio,","Visual Studio for Mac, Visual Studio Code, Azure DevOps, Team Foundation Server, and successor Microsoft products","and services (collectively, the \u201CVisual Studio Products and Services\u201D) to develop and test your applications.","The software is licensed, not sold. This agreement only gives you some rights to use the software. Microsoft reserves all other rights.","You may not:","work around any technical limitations in the software that only allow you to use it in certain ways;","reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software,","except and to the extent required by third party licensing terms governing use of certain open source components that may be included in the software;","remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;","use the software in any way that is against the law or to create or propagate malware; or","share, publish, distribute, or lease the software (except for any distributable code, subject to the terms above),","provide the software as a stand-alone offering for others to use, or transfer the software or this agreement to any third party."].join(" "),gge="aes-192-cbc",l9="SEE  LICENSE.txt",vge=_0.scryptSync(hge,l9,24),wge=Buffer.from(l9);var u9={DevContainersOnlyLicensedForMicrosoftVSCode(){var t;return s9(((t=SO.main)==null?void 0:t.paths.map(e=>e+lC("f70715b752c50649525efc24a1d133eb")))??[])||s9([a9.posix.join(c9.env.appRoot,lC("9e4708daf438152c7e63cf9f3b24d92c"))])}};function s9(t){try{let e=SO.resolve(lC("bdf000de72c4f5f5d7cff4fa6dd90b95"),{paths:t}),n=SO(e);return!(!n[lC("0fd50b75eeecb3b44b3932921442f72c")]||!n[lC("80c3ae7905cba507debf9b326fc386ab")])}catch{return!1}}function lC(t){let e=_0.createDecipheriv(gge,vge,wge),n=e.update(t,"hex","utf8");return n+=e.final("utf8"),n}U.l10n.bundle&&h9.config({contents:U.l10n.bundle});var DO=class{constructor(e,n,r){this.context=e;this.output=n;this.telemetry=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let n=v9.parse(e.query);if(!n.url){U.window.showErrorMessage(re.l10n.t("Failed to handle the URI '{0}' expected a 'url' query parameter.",e.toString()),{modal:!0});return}let r;if(Array.isArray(n.url)?r=n.url[0]:r=n.url,!await Zr(this.context,this.output.log,this.output.onDidInput,this.telemetry,"cloneInVolume"))return;let o=await tt(this.context,this.output.log);if(await tR(o.cliHost,r,o.cliHost.type==="local"?await BI(this.output.log):{},this.output.log)===!1){U.commands.executeCommand(wt),await U.window.showErrorMessage(re.l10n.t("Cannot access the repository '{0}'.",r),{modal:!0});return}await U.commands.executeCommand(MI,n.url)}};async function Cge(t){var k;S5();let e=new Date;E5(t);let n,r=new Promise(E=>n=E);I5(r);let o=await sr(t.extensionPath),i=await xv(U.env.appRoot);x5(t,i);let s=C5(t,o,i),a=await D5(o,i),c=new Yy(t.logPath,e,a);if(t.subscriptions.push(U.commands.registerCommand(wt,()=>c.show())),!u9.DevContainersOnlyLicensedForMicrosoftVSCode()){c.log.write("The Dev Containers extension is supported only in Microsoft versions of VS Code");return}let{channel:l,postCreate:u}=y5(c.log,e);t.subscriptions.push(U.commands.registerCommand(NF,()=>l.show()));let f,m=new Promise(E=>f=E);t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:HI(c,u,gr.results,n,f,async(E,_,T,I)=>a8(t,s,E,_,gr.onRemoveOnShutdownChanged,T,I)),async getCanonicalURI(E){let _=ao(E.authority);if(_&&un(_)){let{hostPath:T,settings:I}=_;return Sr(T)?mp(T,c.log):Pl(I)?Nv(I.host,T):bl(_.parentAuthority)?T.startsWith("/")?Gl(_.parentAuthority,T):E:lc(_.parentAuthority)?T.startsWith("/")?Gl(_.parentAuthority,T):E:U.Uri.file(T)}return E}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:HI(c,u,gr.results,n,f,async(E,_,T,I)=>E8(t,s,E,_,T,I))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:HI(c,u,gr.results,n,f,async(E,_,T,I)=>Q8(t,s,E,_,T,I))}),U.window.registerUriHandler(new DO(t,c,s)));let d=async(E,_,T)=>{if(!await Zr(t,c.log,c.onDidInput,s,"openInContainer"))return;let I=await tt(t,c.log),b;if(vr.isFolderItem(E)?b=E.folder:b=E,b.scheme==="vscode-remote"&&b.authority.startsWith("dev-container+"))return U.commands.executeCommand("vscode.openFolder",b,T||{});{let R=It(I.cliHost.path,_e(b,I.cliHost.platform));return uC(t,R,I,c.onDidInput,s,_,T)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(E,_)=>E?d(E,!1,_):xO(t,!0,s,!1,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(E,_)=>E?d(E,!1,_):xO(t,!1,s,!1,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand(i5,async E=>vg(t,s,c.log,c.onDidInput,E))),t.subscriptions.push(U.commands.registerCommand(MI,async E=>vg(t,s,c.log,c.onDidInput,E,ai))),t.subscriptions.push(U.commands.registerCommand(a5,async()=>{var L,N,B;let _=(await((L=U.extensions.getExtension("vscode.git"))==null?void 0:L.activate())).getAPI(1);if(_.repositories.length===0)return;let T=_.repositories.reduce((W,z)=>{let V=z.state.remotes.find(q=>{var ce,Be;return q.name===((Be=(ce=z.state.HEAD)==null?void 0:ce.upstream)==null?void 0:Be.remote)});return V!=null&&V.pushUrl&&W.push({repository:z,label:V.pushUrl}),W},[]),I=T[0];if(T.length>1){let W=await U.window.showQuickPick(T,{canPickMany:!1,placeHolder:re.l10n.t("Choose which repository to clone")});if(W===void 0)return;I=W}let b=I.label,R=(B=(N=I.repository.state.HEAD)==null?void 0:N.upstream)==null?void 0:B.name;return vg(t,s,c.log,c.onDidInput,{url:b,branch:R},ai)})),t.subscriptions.push(U.commands.registerCommand(s5,async()=>{var R;let E=U.workspace.workspaceFolders;if(!E)return;let _=E[0].uri;if(E.length>1){let L=await U.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:re.l10n.t("Choose a repository to clone in a Container Volume")});_=L==null?void 0:L[0]}let T,I;try{let L=await U.commands.executeCommand("remoteHub.api.getRepositoryContext",_);if(!L)throw new Error("Unable to get active repository context.");T=L.name,I=L.ref}catch{let B=await(await((R=U.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:R.activate())).getMetadata(_);if(!B)throw new Error("Unable to get active repository context.");T=`${B.repo.owner}/${B.repo.name}`,I=(await B.getRevision()).name}let b=`https://github.com/${T}`;return I&&(b=`${b}/tree/${I}`),vg(t,s,c.log,c.onDidInput,b,ai)})),t.subscriptions.push(U.commands.registerCommand(c5,async E=>Nge(t,s,c.log,c.onDidInput,E,ai))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(E,_,T)=>E9(t,E,_,T,s,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async E=>Lge(t,E,s,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async E=>vg(t,s,c.log,c.onDidInput,void 0,E))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>p(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>p(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>p("rebuildNoCache")));let p=async E=>{if(!await U.workspace.requestWorkspaceTrust({message:Ky})||!await Zr(t,c.log,c.onDidInput,s,"reopenInContainer"))return;let T=await tt(t,c.log),I=U.workspace.workspaceFile;if(I&&I.scheme==="untitled"){await FI();return}let b=U.workspace.workspaceFolders;if(!I&&b&&b.length){let L=b.length>1?await U.window.showWorkspaceFolderPick({placeHolder:re.l10n.t("Pick a folder to reopen in a container.")}):b[0];L&&(I=L.uri)}let R=AF(I);if(R){await fC(t,R.repositoryPath,R.volumeName,R.folder,T);return}if(I){let L;if(T.cliHost.type==="wsl"&&I.scheme==="file"){let B=_e(I,process.platform),W=If(B)||GI()||await kv(T.output)||(()=>{throw new Error("No default WSL distro found.")})();L=await Il(W,B,T.output)}else L=_e(I,T.cliHost.platform);let N=It(T.cliHost.path,L);await uC(t,N,T,c.onDidInput,s,E,{forceReuseWindow:!0})}else return xO(t,!0,s,E,c.log,c.onDidInput)};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=ao(_.authority);if(T&&un(T)){let I=U.Uri.file(T.hostPath),b={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",I,b)}else U.window.showInformationMessage(re.l10n.t("'Reopen Locally' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=ao(_.authority);if(T&&un(T)&&Sr(T.hostPath)){let I=U.Uri.parse((await mp(T.hostPath,c.log)).toString()),b={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",I,b)}else U.window.showInformationMessage(re.l10n.t("'Reopen in WSL' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=ao(_.authority),I=T==null?void 0:T.settings;if(T&&un(T)&&(bl(T.parentAuthority)||Pl(I))){let b=Pl(I)?Nv(I.host,T.hostPath):Gl(T.parentAuthority,T.hostPath),R={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",U.Uri.parse(b.toString()),R)}else U.window.showInformationMessage(re.l10n.t("'Reopen in SSH' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInTunnel",async()=>{let E=U.workspace.workspaceFolders,_=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(_&&_.scheme==="vscode-remote"){let T=ao(_.authority);if(T&&un(T)&&lc(T.parentAuthority)){let I=U.Uri.parse(Gl(T.parentAuthority,T.hostPath).toString()),b={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",I,b)}else U.window.showInformationMessage(re.l10n.t("'Reopen in Tunnel' not possible in current context."))}}));let h=async E=>{var R;if(!await Mu(t))return;let _,T=typeof E=="string"?E:(R=E==null?void 0:E.containerDesc)==null?void 0:R.Id;if(T){if(!await Zr(t,c.log,c.onDidInput,s,"attachToContainer"))return;let L=await tt(t,c.log);_=await oi(L,T)}else{let L=Zr(t,c.log,c.onDidInput,s,"attachToContainer");if(_=await Bge(t,c.log,L),!_)return}let I=await tt(t,c.log),b=t.extensionMode===U.ExtensionMode.Development;cC(I,_,t,!b)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",h)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",h)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainer",async E=>CO(t,await tt(t,c.log),E))),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async E=>CO(t,await tt(t,c.log),E)));let g=async E=>{var T;if(!await Zr(t,c.log,c.onDidInput,s,"checkoutPRInVolume"))return;let _=(T=E==null?void 0:E.pullRequestModel)==null?void 0:T.html_url;vg(t,s,c.log,c.onDidInput,_,ai)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",g)),t.subscriptions.push(U.commands.registerCommand("remote-containers.switchContainer",async()=>{var I;if(gr.results.size){let b=[...gr.results.values()].filter(L=>L.dockerParams)[0],R=(I=b==null?void 0:b.dockerParams)==null?void 0:I.parsedAuthority;if(R&&so(R)&&!R.inspectVolume){let L=no("container","/",{},b.properties.remoteExec,b.properties.remotePtyExec,()=>{throw new Error("not implemented")},void 0,b.params.output),N=await Pa().then(q=>q.map(ce=>({type:"workspace",uri:ce,fileHost:L}))),B=await Ou(N,b.configWorkspaceURI);if(!B||B==="cancelled")return;let W=ye.from({scheme:Ke.scheme,path:B.path}),z=U.Uri.parse(Hi(R.parentAuthority,R.repositoryPath,R.volumeName,R.folder,!1,R.settings,R.cloneInfo,W).toString()),V=R.volumeName;V===ai&&(V=re.l10n.t("a unique volume")),await Hu({uri:z,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",R.folder,V)}),await U.commands.executeCommand("vscode.openFolder",z);return}}let E=await tt(t,c.log),_=It(E.cliHost.path,E.cliHost.cwd);if((await y9(E.cliHost,_,await Gc(t,E.cliHost))).length<2){await U.window.showInformationMessage(re.l10n.t("No other Dev Container configurations found in folder. Did you mean to open another folder in a container?"),{modal:!0},re.l10n.t("Open Folder in Container..."))&&U.commands.executeCommand("remote-containers.openFolder");return}await uC(t,_,E,c.onDidInput,s,!1)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let E=$u();if(E){let _=await tt(t,c.log);await fC(t,E.repositoryPath,E.volumeName,E.folder,_,!0);return}return await Promise.all(gr.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let E=$u();if(E){let _=await tt(t,c.log);await fC(t,E.repositoryPath,E.volumeName,E.folder,_,"rebuildNoCache");return}return await Promise.all(gr.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let v=u5(),C=((k=(U.workspace.workspaceFolders||[])[0])==null?void 0:k.uri)||ye.file(process.cwd()),w=v.then(E=>ba(E,C)),y,S=()=>y||(y=tt(t,c.log).then(E=>E.cliHost)),D,x=()=>D||(D=(async()=>{let E=await w,_=await S(),T=U.env.remoteName==="dev-container"&&U.env.remoteAuthority&&ao(U.env.remoteAuthority),b=!T||un(T)?await Gc(t,_):void 0;return c.log.write("Initializing configuration support..."),s8(t,{fileHost:E,userDataFolderForConfigurations:b,findDevContainerFiles:async R=>JI(_,It(E.path,_e(C,E.platform)),b,R),telemetry:s,output:c.log,openConfigurationCommandId:tm,showLogCommandId:wt})})());async function A(){var E;return(E=U.workspace.workspaceFolders)!=null&&E.length?!0:(await U.window.showInformationMessage(re.l10n.t("Open a folder to create the configuration files in first."),{modal:!0},re.l10n.t("Open Folder"))&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder"),!1)}t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{await A()&&await D0(t,await S(),await x(),s,c.log,c.onDidInput)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFileWithCopilot",async()=>{await A()&&await D0(t,await S(),await x(),s,c.log,c.onDidInput,{picker:"copilot"})})),t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainer",async()=>{if(!await Zr(t,c.log,c.onDidInput,s,"createDevContainer"))return;let E=await tt(t,c.log);await o9(t,E,s)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(E,_)=>{let T,I=await tt(t,c.log),b;if(typeof E=="string"?T=[{type:"unknown",uri:ye.file(E),fileHost:ba(process.platform,ye.file(lt.dirname(E)))}]:(b=await JI(I.cliHost,It(I.cliHost.path,I.cliHost.cwd),await Gc(t,I.cliHost)),T=(await Promise.all(b.map(R=>R.uri.scheme==="file"||R.uri.scheme==="vscode-remote"?R:I.cliHost.toCommonURI(_e(R.uri,I.cliHost.platform)).then(L=>L&&{type:R.type,uri:L})))).filter(R=>!!R)),T.length){let R=await Ou(T);if(!R||R==="cancelled")return;let L=$u();if(L){let N=w5(L.folder);for(let B of N){try{await U.workspace.openTextDocument(U.Uri.parse(B.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse(B.toString()),_);return}return}if(R){if(R.scheme==="file"&&await yr(R.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(R.toString()),_);if(R.scheme==="file"&&gr.results.size)return await Ui(ls,R,[],ic),await U.commands.executeCommand("vscode.open",U.Uri.parse(R.toString()),_);if(R.scheme==="vscode-remote")return await U.commands.executeCommand("vscode.open",U.Uri.parse(R.toString()),_);if(E===void 0)return await D0(t,await S(),await x(),s,c.log,c.onDidInput)}}else if(E===void 0&&!(b!=null&&b.length))return await D0(t,await S(),await x(),s,c.log,c.onDidInput)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:E,dockerParams:_}=[...gr.results.values()][0];if(!E||!_)return U.window.showInformationMessage(re.l10n.t("Named configurations are only available for Docker containers."),{modal:!0});let T=await oi(_,E),I=s0(t.globalStoragePath,T),b=U.Uri.file(I);return await yr(I)?U.commands.executeCommand("vscode.open",b):(await Ui(ls,b,[],ic),U.commands.executeCommand("vscode.open",b))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let E=[...(await g8(t.globalStoragePath)).map(T=>({label:T.name,...T})).sort((T,I)=>T.label.localeCompare(I.label)),...(await w8(t.globalStoragePath)).map(T=>({label:T.image,...T})).sort((T,I)=>T.label.localeCompare(I.label))],_=await U.window.showQuickPick(E.length?E:[{label:re.l10n.t("No configuration found.")}],{placeHolder:re.l10n.t("Choose a configuration file")});if(_&&"uri"in _)return U.commands.executeCommand("vscode.open",U.Uri.parse(_.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${m9()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>{let E={extensionId:m9(),issueBody:re.l10n.t("For bug reports please include the complete log output. (In the VS Code window: `F1` > `Dev Containers: Show Container Log`.)")};return U.commands.executeCommand("vscode.openIssueReporter",E)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),w.then(E=>{t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new m0(E)))}),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",()=>zge(t,c,s))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>Kge(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>Jge(t,"remoteContainers",c.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>Vge(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Sge(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>l0(c.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDockerInWSL",()=>d0(t,c.log,c.onDidInput,s))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cleanUpDevContainers",async()=>V8(await tt(t,c.log)))),X8(t,gr.results,s,c.log),t9(t,i).catch(E=>{c.log.write(`Error ensuring user CLI is configured: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)}),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>n9(t,i))),t.subscriptions.push(U.commands.registerCommand("remote-containers.testConnection",async()=>{await U.commands.executeCommand(wt);let E=[...gr.results.values()][0];if(!E){c.log.write("Not connected.");return}let{params:_,properties:T}=E;await rx(_,T)})),(async()=>{XI()&&await m;let E=U.env.remoteName,_=!E||["dev-container","attached-container","wsl","ssh-remote","tunnel","exec","k8s-container"].indexOf(E)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[],T=await x();t.subscriptions.push(U.languages.registerCompletionItemProvider([..._,{pattern:lt.join(a0(t.globalStoragePath),"*.json")},{pattern:lt.join(i0(t.globalStoragePath),"*.json")}],T.createCompletionItemProvider())),E!=="codespaces"&&(T.startCodeLensProvider(),T.startHoverProvider(),T.startDiagnosticsCollection()),await v5(t)||await S9(t,await S(),s,c.log,c.onDidInput)})().catch(console.error),xge(t),t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",async E=>(await x()).addExtensionToConfiguration(E)),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>(await x()).configureContainerFeatures()),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",async E=>(await x()).addPortLabelToConfiguration(E))),$u()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),await f5()}var d9="showRecoveryContainerNotification",w9="showReopenInContainerNotificationReset",Ege=5e3;function Sge(t){return t.globalState.update(w9,Date.now())}async function xge(t){setTimeout(async()=>{let e=t.globalState.get(w9);if(TO(t.globalState.get(d9),e))return;if($u()){let r=re.l10n.t("This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry."),o=re.l10n.t("Reopen in Container"),i=re.l10n.t("Don't Show Again"),s=await U.window.showInformationMessage(r,o,i);s===o?U.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await t.globalState.update(d9,Date.now())}},Ege)}async function _ge(){await Promise.all([...gr.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(n){console.error(n)}}))))}function m9(){let{name:t,publisher:e}=f9();return`${e}.${t}`}async function xO(t,e,n,r,o,i){var m;if(!await Zr(t,o,i,n,"openInContainer"))return;let s=await tt(t,o),a,c=U.workspace.workspaceFolders;if(c&&c[0]){let d=c[0].uri;if(d.scheme==="vscode-remote"){let p=ao(d.authority);if(p&&un(p)){let h=It(s.cliHost.path,p.hostPath);a=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote|tunnel)\+/.test(d.authority)&&(a=d)}else d.scheme==="file"&&(a=d)}a||((m=U.env.remoteName)!=null&&m.match(/^(wsl|ssh-remote|tunnel)$/)?a=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await s.cliHost.homedir()}):a=U.Uri.file(g9.homedir()));let l=e?{defaultUri:a,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:re.l10n.t("Open")}:{defaultUri:a,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{[re.l10n.t("Code Workspace")]:["code-workspace"]},openLabel:re.l10n.t("Open")},u=await U.window.showOpenDialog(l),f=u&&u[0];if(f){let d=e?f:f.with({path:lt.posix.dirname(f.path)}),p=await tt(t,s.output,d,FF()==="always"),h;f.scheme==="file"&&p.cliHost.type==="wsl"?h=e?p.cliHost.cwd:p.cliHost.path.join(p.cliHost.cwd,lt.posix.basename(f.path)):h=_e(f,p.cliHost.platform);let g=It(p.cliHost.path,h);await uC(t,g,p,i,n,r)}}async function uC(t,e,n,r,o,i,s){try{await Dge(t,e,n,r,o,i,s)}catch(a){await Wu(a,"ui",o,!1,n.output)}}async function Dge(t,e,n,r,o,i,s){var A;let{cliHost:a}=n;if(Sr(e.rootFolderPath)){if(!await Zr(t,n.output,r,o,"openInContainer",e.rootFolderPath))return;n=await tt(t,n.output,e.rootFolderPath),a=n.cliHost,e=It(a.path,e.isWorkspaceFile?a.path.join(a.cwd,lt.basename(e.workspaceOrFolderPath)):a.cwd)}let c=await yS(a,e);if(c){let F=re.l10n.t("Continue");if(await U.window.showInformationMessage(re.l10n.t("The workspace could fail to open in a container: {0}",c),{modal:!0},F)!==F)return}let l=await bge(t,a,e);if(l==="cancelled")return;let u=l&&(l.scheme==="file"?await st(l.fsPath):await a.readFile(_e(l,a.platform))).toString(),f=!!(u&&((A=$e(u))!=null&&A.initializeCommand)),{dockerCLI:m,dockerComposePath:d}=n,p={cliHost:a,dockerPath:m,dockerComposePath:d,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await sr(t.extensionPath),output:n.output},h=l&&await(f?Zh(p,e.rootFolderPath,l):await BF(p,e.rootFolderPath,l)||Zh(p,e.rootFolderPath,l));if(h==="canceled")return;if(!h&&l){let F=_e(l,a.platform),k=await a.toCommonURI(F);k&&U.window.showTextDocument(U.Uri.parse(k.toString()));let E=re.l10n.t("Show Log");await U.window.showErrorMessage(re.l10n.t("Failed to read Dev Container configuration '{0}' file.",a.path.relative(e.configFolderPath,F)),{modal:!0},E)===E&&U.commands.executeCommand(wt);return}let g=h&&!Px(h.configuration);if(!h||g){let F=await n0({fileHost:a,userDataFolderForConfigurations:await Gc(t,a),telemetry:o,output:n.output,openConfigurationCommandId:tm,showLogCommandId:wt},e,void 0,h==null?void 0:h.configuration.configFilePath);if(!F||(l=ye.file(F).with({scheme:Ke.scheme}),h=await BF(p,e.rootFolderPath,l),!h||h==="canceled"))return}if(!await _5(t,n,h.configuration)||!await Rge(n,"mergedConfiguration"in h?h.mergedConfiguration:h.configuration))return;let v=h.configuration,C=h.workspace.workspaceFolder,w=a.type==="wsl"?(await a.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,y=(l==null?void 0:l.scheme)===Ke.scheme&&a.type==="wsl"&&!Sr(w)&&await a.toCommonURI(_e(l,a.platform))||l;if(Ao(v)){let F=Ff(a,v);if(!v.initializeCommand&&!await cr(a).readDocument(F))return dC(re.l10n.t('"{0}" does not exist.',F.fsPath),a,v.configFilePath);if(v.workspaceFolder&&!lt.posix.isAbsolute(v.workspaceFolder))return dC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),a,v.configFilePath)}else if(!("image"in v))if("dockerComposeFile"in v){let F=a.type==="wsl"?e.isWorkspaceFile?lt.dirname(w):w:e.rootFolderPath;if(!await $8(n)||!await Wge(F,y,n,v))return}else{let F=v.configFilePath;return dC(re.l10n.t('Configuration "{0}" not valid.',a.path.relative(e.rootFolderPath,_e(F,a.platform))),a,F)}e.isWorkspaceFile&&(C=lt.posix.join(C,a.path.basename(e.workspaceOrFolderPath)));let S=ur(n.env),D=(a.type==="local"||a.type==="wsl")&&Pl(S),x=U.Uri.parse(iw(U.env.remoteAuthority,w,C,S,D,y));await Hu({uri:x,type:e.isWorkspaceFile?"workspace":"folder",label:re.l10n.t("{0} [Dev Container]",`${By(a.platform,e.workspaceOrFolderPath,await a.homedir())}${bp(U.env.remoteAuthority,S)}`)}),await MF(t,i?x.authority:!1),await Gy(t,i==="rebuildNoCache"?x.authority:!1),await U.commands.executeCommand("vscode.openFolder",x,s||{})}async function y9(t,e,n){let r=await Tge(t,e.rootFolderPath),i=(r==null?void 0:r.scheme)==="file"&&process.platform==="win32"&&Sr(r.fsPath)&&!U.workspace.getConfiguration("security").get("allowedUNCHosts",[]).includes(r.authority)?Pge(t,e):Ige(r,t,e);return(await Promise.all([i.then(s=>s.map(a=>({type:"workspace",uri:a,fileHost:t}))),HF(t,e).then(s=>s.map(a=>({type:"repositoryConfig",uri:a,fileHost:ba(process.platform,a.with({path:lt.posix.dirname(a.path)}))}))),n?OI(t,e,n).then(s=>s.map(a=>({type:"userData",uri:a,fileHost:t}))):[]])).flat()}async function Ige(t,e,n){return Promise.all((await Pa(t)).map(async o=>{if(!t){let i=lt.posix.relative(U.workspace.workspaceFolders[0].uri.path,o.path),s=e.platform==="win32"?"/"+n.rootFolderPath.replace(/\\/g,"/"):n.rootFolderPath;return ye.from({scheme:Ke.scheme,path:lt.posix.join(s,i)})}if(o.scheme===oo.scheme)return ye.from({scheme:Ke.scheme,path:o.path});if(e.type==="wsl"&&o.scheme==="file"){let i=lt.relative(t.fsPath,o.fsPath),s=lt.posix.resolve(n.rootFolderPath,i.replace(/\\/g,"/"));return ye.from({scheme:Ke.scheme,path:s})}return o}))}async function Pge(t,e){let n=t.path.join(e.rootFolderPath,".devcontainer"),r=[...Ul(t.path,e.rootFolderPath),...(await t.readDirWithTypes(n)).filter(([,o])=>(o&2)!==0).map(([o])=>t.path.join(n,o,"devcontainer.json"))];return(await Promise.all(r.map(o=>t.isFile(o).then(i=>i?ye.from({scheme:Ke.scheme,path:o}):void 0)))).filter(Boolean)}async function bge(t,e,n){let r=await y9(e,n,await Gc(t,e)),o;if(U.env.remoteAuthority){let i=ao(U.env.remoteAuthority);i&&un(i)&&(o=i.configFile)}return Ou(r,o)}function Tge(t,e){switch(t.type){case"local":return ye.file(e);case"wsl":return U.env.remoteName==="wsl"?ye.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:e}):t.toCommonURI(e);case"remote":return U.env.remoteName==="ssh-remote"||U.env.remoteName==="tunnel"?Tn(t.platform,ye.from({scheme:"vscode-remote",authority:U.env.remoteAuthority}),e):void 0;default:return}}async function Rge(t,{hostRequirements:e}){var r,o;let n=e&&kge(e);if(n&&(n.cpus||n.memory||n.gpu&&n.gpu!=="optional")){let i=await Qe(t,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&n.cpus&&n.cpus>s.NCPU,c=s.MemTotal&&n.memory&&n.memory>s.MemTotal,l=((o=(r=s.Runtimes)==null?void 0:r.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let u=[];s.NCPU&&u.push(re.l10n.t("CPUs {0}",s.NCPU.toLocaleString())),s.MemTotal&&u.push(re.l10n.t("RAM {0}",_O(s.MemTotal))),l&&u.push(re.l10n.t("GPU"));let f=[];n.cpus&&f.push(re.l10n.t("CPUs {0}",n.cpus.toLocaleString())),n.memory&&f.push(re.l10n.t("RAM {0}",_O(n.memory))),n.storage&&f.push(re.l10n.t("disk {0}",_O(n.storage))),n.gpu&&n.gpu!=="optional"&&f.push(re.l10n.t("GPU"));let m=re.l10n.t(`Docker daemon: {0}
devcontainer.json: {1}`,u.join(", "),f.join(", "));if(!await U.window.showInformationMessage(re.l10n.t("Not all host requirements in devcontainer.json are met by the Docker daemon."),{modal:!0,detail:m},re.l10n.t("Continue")))return!1}}return!0}function kge(t){return{cpus:t.cpus||0,memory:p9(t.memory||"0"),storage:p9(t.storage||"0"),gpu:t.gpu}}function p9(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,n,r]=e,o=parseInt(n,10),i=r&&{t:2**40,g:2**30,m:2**20,k:2**10}[r[0]]||1;return o*i}return 0}function _O(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),n=t/Math.pow(2,10*e),r=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(n),1)))),1),o=Math.round(n*r)/r,i=[" bytes","kb","mb","gb","tb"][e];return`${o.toLocaleString()}${i}`}async function vg(t,e,n,r,o,i){if(!await Jy(t))return;let s=null;if(!await Zr(t,n,r,e,"cloneInVolume"))return;let a=await tt(t,n);if(typeof o=="string")s=o;else{let c;if(o!==void 0?c=o:c=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:l=>re.l10n.t("Clone a repository from {0} in a Container Volume",l.name),urlLabel:re.l10n.t("Clone git repository from URL"),branch:!0}),c){s=(typeof c=="string"?c:c.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let l=Js(s);if(await tR(a.cliHost,l.repositoryUrl,a.cliHost.type==="local"?await BI(a.output):{},a.output)===!1){U.commands.executeCommand(wt),await U.window.showInformationMessage(re.l10n.t("Cannot access the repository '{0}'.",l.repositoryUrl),{modal:!0});return}typeof c!="string"&&c.branch&&(s=`${s}/tree/${c.branch}`)}}s&&await C9(t,a,s,i)}async function C9(t,e,n,r){if(r||(r=await Fge(e)),r){let o=kO(n);r!==ai&&(o=await Uge(n)),o&&await fC(t,n,r,o,e)}}async function Nge(t,e,n,r,o,i){if(!await Jy(t))return;let s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await Zr(t,n,r,e,"checkoutPRInVolume"))return;let a=await tt(t,n),c={placeHolder:re.l10n.t("e.g. https://github.com/microsoft/vscode/pull/123"),prompt:re.l10n.t("Enter a GitHub pull request url"),validateInput:f=>s.test(f)?void 0:re.l10n.t("Invalid pull request url")},l;if(o?l=o:l=await U.window.showInputBox(c),!l)return;let u=Js(l);if(u.repository==="unknown"||!u.pullRequestId){await U.window.showInformationMessage(re.l10n.t("Invalid pull request URL '{0}'.",l),{modal:!0});return}await C9(t,a,l,i)}async function E9(t,e,n,r,o,i,s){if(!await Zr(t,i,s,o,"inspectVolume"))return;let a=await tt(t,i);e||(e=await Age(a)),e&&(n&&r?await Hge(e,n,r,a):await Mge(e,a))}async function Lge(t,e,n,r,o){await Zr(t,r,o,n,"inspectVolume")&&await E9(t,e==null?void 0:e.volumeName,void 0,void 0,n,r,o)}var mC=class{get detail(){return""}},IO=class extends mC{get label(){return re.l10n.t("$(plus) Create a new volume...")}get description(){return""}get volumeName(){return""}get detail(){return re.l10n.t("Use this volume to store several cloned repositories.")}get alwaysShow(){return!0}},PO=class extends mC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}},bO=class extends mC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}};async function Age(t){let e=await Fo(t),r=(await Of(t,e)).map(a=>new bO(a)),o=re.l10n.t("Select the volume to inspect with Visual Studio Code"),i=U.window.createQuickPick();i.items=r,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function Fge(t){let e=await Fo(t,["vsch.local.repository.unique=false"]),r=(await Of(t,e)).map(u=>new PO(u)),o=new IO,i=[o,...r],s=re.l10n.t("Select the volume for the cloned repository"),a=U.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===o?l=await Oge(t):l=c.volumeName,l}async function Oge(t){let e="",n="vsc-remote-containers",r=await Fo(t);r.find(s=>s===n)||(e=n);let o={prompt:re.l10n.t("Enter the volume name."),value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?re.l10n.t("Volume names should be at least two characters and the first character must be alphanumeric."):re.l10n.t("Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric.")},i=await U.window.showInputBox(o);return i?r.find(s=>s===i)?(await U.window.showErrorMessage(re.l10n.t("Volume already exists"),{modal:!0}),null):i:null}async function Uge(t){let e={prompt:re.l10n.t("Enter the target folder name."),value:kO(t),ignoreFocusOut:!0},n=await U.window.showInputBox(e);return n||null}function kO(t){return si(t).repositoryName}async function $ge(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function fC(t,e,n,r,o,i=!1){let s=ur(o.env),a=qx(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof rw){U.window.showErrorMessage(u.description);return}let f=await $ge();try{c=await a.parseUrl(f)}catch{U.window.showErrorMessage(re.l10n.t("Cannot access '{0}'.",e),{modal:!0});return}}let l=U.Uri.parse(Hi(o.cliHost.authority,e,n,r,!1,s,c));n===ai&&(n=re.l10n.t("a unique volume")),await Hu({uri:l,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",r,n)}),await MF(t,i?l.authority:!1),await Gy(t,i==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function Mge(t,e){let n=ur(e.env),r=U.Uri.parse(Hi(e.cliHost.authority,void 0,t,void 0,!0,n,void 0));await Hu({uri:r,type:"folder",label:re.l10n.t("Volume {0} [Dev Container]",t)}),await U.commands.executeCommand("vscode.openFolder",r)}async function Hge(t,e,n,r){let o=ur(r.env),i=U.Uri.parse(Hi(r.cliHost.authority,e,t,n,!0,o,void 0));await Hu({uri:i,type:"folder",label:re.l10n.t("{0} in {1} [Inspect Dev Container]",n,t)}),await U.commands.executeCommand("vscode.openFolder",i)}async function cC(t,e,n,r,o){var c;if(!await Mu(n))return;let i,s=t.cliHost;if(s.type==="wsl"){let l=await s.toCommonURI(s.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let a=O3(t.cliHost.authority,e.Name,ur(t.env),i);if(o=o||((c=await p8(n.globalStoragePath,e))==null?void 0:c.workspaceFolder),o){let l=U.Uri.parse(`vscode-remote://${a}${o}`),u={};r?u.forceNewWindow=!0:u.forceReuseWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:a};r||(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function Bge(t,e,n){let r=!0,o=(async()=>{if(!await n)throw new Error("cancel");r=!1;let i=await tt(t,e),s=await Hl(i),a=await fs(i,s),c=[];if(a.forEach(l=>{l.State.Status==="running"&&c.push({label:l.Name,description:`${l.Config.Image} ${l.Id}`,containerInfo:l})}),c.length===0)throw U.window.showErrorMessage(re.l10n.t("There are no running containers to attach to."),{modal:!0}),new Error("cancel");return c.sort((l,u)=>l.label.localeCompare(u.label))})();try{let i={placeHolder:re.l10n.t("Select the container to attach VS Code")},s=await U.window.showQuickPick(o,i);if(!s&&r){if(!await n)throw new Error("cancel");s=await U.window.showQuickPick(o,i)}return s?s.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Wge(t,e,n,r){if(!r.workspaceFolder)return dC(re.l10n.t("Workspace folder not specified in devcontainer.json."),n.cliHost,r.configFilePath),!1;if(!lt.posix.isAbsolute(r.workspaceFolder))return dC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),n.cliHost,r.configFilePath),!1;if(r.initializeCommand)return!0;let o=await $l(n.cliHost,r,n.cliHost.env,n.cliHost.cwd),i=Dk(t,{buildCLIHost:n.cliHost,configFile:e});return!(await Wl(n,i)&&!await jge(n.cliHost,o))}async function jge(t,e){let n=[];for(let r=0;r<e.length;r++)await t.isFile(e[r])||n.push(e[r]);return n.length>0?(U.window.showErrorMessage(re.l10n.t("The following referenced docker compose files do not exist: {0}",n.join(", ")),{modal:!0}),!1):!0}async function dC(t,e,n){if(await U.window.showErrorMessage(t,{modal:!0},re.l10n.t("Open devcontainer.json"))){let o=_e(n,e.platform),i=await e.toCommonURI(o);i&&U.window.showTextDocument(U.Uri.parse(i.toString()))}}async function D0(t,e,n,r,o,i,s){await n.createConfiguration(s)&&await S9(t,e,r,o,i)}async function S9(t,e,n,r,o){if([void 0,"wsl","ssh-remote","tunnel"].indexOf(U.env.remoteName)===-1)return;let i=U.workspace.workspaceFile,s=U.workspace.workspaceFolders,a=i||s&&s.length&&s[0].uri||void 0;if(a&&a.scheme!=="vscode-vfs"){let c;if(e.type==="wsl"&&a.scheme==="file"){let m=_e(a,process.platform),d=If(m)||GI()||await kv(r)||(()=>{throw new Error("No default WSL distro found.")})();c=await Il(d,m,r)}else c=_e(a,e.platform);let l=It(e.path,c),f=(await JI(e,l,await Gc(t,e))).sort((m,d)=>{if(m.type!==d.type)return m.type.localeCompare(d.type);let p=lt.posix.dirname(m.uri.path),h=lt.posix.dirname(d.uri.path);return p.localeCompare(h)})[0];f&&(await qy(e,r)).canConnectToContainer&&await Yge(t,f,l,e,n,r,o)}}var I0="showReopenInContainerNotification",x9="showReopenInContainerNotificationReset";function Vge(t){return t.globalState.update(x9,Date.now())}async function Yge(t,e,n,r,o,i,s){let a=t.globalState.get(x9);if(TO(t.globalState.get(I0),a)||TO(t.workspaceState.get(I0),a))return;let c=f3(r,n,e.uri),l,u="";if(r.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(r.platform==="win32"&&Sr(n.rootFolderPath))&&U.env.remoteName!=="ssh-remote"){let w=await tt(t,i);if(l=await ij(w.cliHost,n,w.output),l&&c){let y=await Ev(w.cliHost,n.rootFolderPath,w.output);y&&await aj(w.cliHost,n,w.cliHost.path.relative(y,_e(e.uri,w.cliHost.platform)),w.output)||(l=void 0)}if(l){let{cliHost:y,dockerCLI:S,dockerComposePath:D}=w,x={cliHost:y,dockerPath:S,dockerComposePath:D,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await sr(t.extensionPath),output:i},A=await Zh(x,n.rootFolderPath,e.uri);(!A||!Ao(A.configuration)&&!("image"in A.configuration))&&(l=void 0)}l&&(u=re.l10n.t(" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo)."))}U.env.remoteName==="wsl"&&n.rootFolderPath.match(/^\/mnt\/[a-z]\//)&&(u=re.l10n.t(" This workspace is on the Windows file system (/mnt/). For best performance, we recommend moving the workspace to the Linux file system (~/home)."));let f;c?n.isWorkspaceFile?f=re.l10n.t("Workspace contains a Dev Container configuration file."):f=re.l10n.t("Folder contains a Dev Container configuration file."):f=re.l10n.t("There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.");let m=re.l10n.t("Reopen in Container"),d=re.l10n.t("Clone in Volume"),p=re.l10n.t("Don't Show Again..."),h=n.isWorkspaceFile?re.l10n.t("{0} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u):re.l10n.t("{0} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u),g=l?[m,d,p]:[m,p];qge(o,e.type);let v=await U.window.showInformationMessage(h,...g);if(Gge(o,v===m?"reopen":v===d?"openRepository":v===p?"dontShowAgain":"cancel",e.type),v===m){if(!await U.workspace.requestWorkspaceTrust({message:Ky})||!await Zr(t,i,s,o,"reopenInContainer"))return;let y=await tt(t,i);if(y.cliHost.type==="wsl"&&r.platform==="win32"){let{cwd:S}=await NR(n.workspaceOrFolderPath,Ra(),i);n=It(y.cliHost.path,S)}await uC(t,n,y,s,o,!1,{forceReuseWindow:!0})}else if(v===d){let w=await tt(t,i),y=await sj(w.cliHost,n,w.output),S=re.l10n.t("OK"),D=re.l10n.t("Cancel");(!y||S===await U.window.showInformationMessage(re.l10n.t("Local changes not pushed to the Git remote will not be available in the Docker volume."),S,D))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:re.l10n.t("Clone in Volume")},async(x,A)=>{x.report({message:re.l10n.t("Follow the prompts at the top of the window.")}),await U.commands.executeCommand(MI,l)})}else if(v===p){let w=n.isWorkspaceFile?re.l10n.t("Any Workspace"):re.l10n.t("Any Folder"),y=n.isWorkspaceFile?re.l10n.t("Current Workspace"):re.l10n.t("Current Folder"),S=n.isWorkspaceFile?re.l10n.t("Don't show again for the current workspace or for any workspace?"):re.l10n.t("Don't show again for the current folder or for any folder?"),D=await U.window.showInformationMessage(S,w,y);D===w?await t.globalState.update(I0,Date.now()):D===y&&await t.workspaceState.update(I0,Date.now())}}function qge(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function Gge(t,e,n){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:n})}function TO(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function zge(t,e,n){if(!await Zr(t,e.log,e.onDidInput,n,"trySample"))return;let r=await tt(t,e.log),o=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],i={placeHolder:re.l10n.t("Select a sample repository to clone in a container volume")},s=await U.window.showQuickPick(o,i);s&&s.detail&&await fC(t,s.detail,ai,kO(s.detail),r)}async function Kge(t){let e=await Promise.all((await _9(t)).map(async r=>{let o=await(0,RO.promisify)(b0.stat)(r.path),i=r.time;return{label:r.prefix,description:`${wg(i.getFullYear())}-${wg(i.getMonth()+1)}-${wg(i.getDate())} ${wg(i.getHours())}:${wg(i.getMinutes())}:${wg(i.getSeconds())} - ${o.size} bytes`,path:r.path}}));e.length||e.push({label:re.l10n.t("No log files found.")});let n=await U.window.showQuickPick(e,{placeHolder:re.l10n.t("Choose a log file")});n&&n.path&&await U.window.showTextDocument(U.Uri.file(n.path))}function wg(t,e=2){return t.toString().padStart(e,"0")}async function Jge(t,e,n){let r=(await _9(t)).find(o=>o.name.startsWith(e)&&o.path!==n);r?await U.window.showTextDocument(U.Uri.file(r.path)):await U.window.showInformationMessage(re.l10n.t("No previous log file found."),{modal:!0})}async function _9(t){let e=[],n=lt.basename(t.logPath),r=lt.dirname(lt.dirname(lt.dirname(t.logPath))),o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;o.test(lt.basename(r))&&(r=lt.dirname(r));for(let i of(await P0(r)).sort().reverse()){let s=o.exec(i);if(s){let a=lt.join(r,i);for(let c of await P0(a)){let l=lt.join(a,c),u=c.startsWith("window");for(let f of u?await P0(l):[c]){let m=lt.join(u?l:a,f),d=lt.join(m,n);for(let p of(await P0(d)).sort()){let h=lt.join(d,p),g=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(p),v=g?new Date(`${g[1]}-${g[2]}-${g[3]}T${g[4]}:${g[5]}:${g[6]}.${g[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);e.push({name:p,path:h,time:v,prefix:g?p.substr(0,g.index-1):p.substr(0,p.length-4)})}}}}}return e.sort((i,s)=>i.time>s.time?-1:i.time<s.time?1:i.path.localeCompare(s.path)),e}async function P0(t){try{return await(0,RO.promisify)(b0.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! Bundled license information:

@nevware21/ts-utils/dist/es5/mod/ts-utils.js:
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@nevware21/ts-async/dist/es5/mod/ts-async.js:
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=extension.js.map
