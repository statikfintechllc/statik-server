"use strict";var ea=Object.create;var st=Object.defineProperty;var ta=Object.getOwnPropertyDescriptor;var na=Object.getOwnPropertyNames;var sa=Object.getPrototypeOf,ia=Object.prototype.hasOwnProperty;var w=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),ra=(n,e)=>{for(var t in e)st(n,t,{get:e[t],enumerable:!0})},nt=(n,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of na(e))!ia.call(n,i)&&i!==t&&st(n,i,{get:()=>e[i],enumerable:!(s=ta(e,i))||s.enumerable});return n},ns=(n,e,t)=>(nt(n,e,"default"),t&&nt(t,e,"default")),W=(n,e,t)=>(t=n!=null?ea(sa(n)):{},nt(e||!n||!n.__esModule?st(t,"default",{value:n,enumerable:!0}):t,n)),oa=n=>nt(st({},"__esModule",{value:!0}),n);var cs=w((Jh,os)=>{"use strict";var ae=require("constants"),ca=process.cwd,rt=null,aa=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return rt||(rt=ca.call(process)),rt};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Gt=process.chdir,process.chdir=function(n){rt=null,Gt.call(process,n)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Gt));var Gt;os.exports=la;function la(n){ae.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(n),n.lutimes||t(n),n.chown=r(n.chown),n.fchown=r(n.fchown),n.lchown=r(n.lchown),n.chmod=s(n.chmod),n.fchmod=s(n.fchmod),n.lchmod=s(n.lchmod),n.chownSync=o(n.chownSync),n.fchownSync=o(n.fchownSync),n.lchownSync=o(n.lchownSync),n.chmodSync=i(n.chmodSync),n.fchmodSync=i(n.fchmodSync),n.lchmodSync=i(n.lchmodSync),n.stat=c(n.stat),n.fstat=c(n.fstat),n.lstat=c(n.lstat),n.statSync=a(n.statSync),n.fstatSync=a(n.fstatSync),n.lstatSync=a(n.lstatSync),n.chmod&&!n.lchmod&&(n.lchmod=function(u,f,h){h&&process.nextTick(h)},n.lchmodSync=function(){}),n.chown&&!n.lchown&&(n.lchown=function(u,f,h,d){d&&process.nextTick(d)},n.lchownSync=function(){}),aa==="win32"&&(n.rename=typeof n.rename!="function"?n.rename:function(u){function f(h,d,g){var p=Date.now(),m=0;u(h,d,function y(x){if(x&&(x.code==="EACCES"||x.code==="EPERM"||x.code==="EBUSY")&&Date.now()-p<6e4){setTimeout(function(){n.stat(d,function(E,T){E&&E.code==="ENOENT"?u(h,d,y):g(x)})},m),m<100&&(m+=10);return}g&&g(x)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(n.rename)),n.read=typeof n.read!="function"?n.read:function(u){function f(h,d,g,p,m,y){var x;if(y&&typeof y=="function"){var E=0;x=function(T,H,N){if(T&&T.code==="EAGAIN"&&E<10)return E++,u.call(n,h,d,g,p,m,x);y.apply(this,arguments)}}return u.call(n,h,d,g,p,m,x)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(n.read),n.readSync=typeof n.readSync!="function"?n.readSync:function(u){return function(f,h,d,g,p){for(var m=0;;)try{return u.call(n,f,h,d,g,p)}catch(y){if(y.code==="EAGAIN"&&m<10){m++;continue}throw y}}}(n.readSync);function e(u){u.lchmod=function(f,h,d){u.open(f,ae.O_WRONLY|ae.O_SYMLINK,h,function(g,p){if(g){d&&d(g);return}u.fchmod(p,h,function(m){u.close(p,function(y){d&&d(m||y)})})})},u.lchmodSync=function(f,h){var d=u.openSync(f,ae.O_WRONLY|ae.O_SYMLINK,h),g=!0,p;try{p=u.fchmodSync(d,h),g=!1}finally{if(g)try{u.closeSync(d)}catch{}else u.closeSync(d)}return p}}function t(u){ae.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,h,d,g){u.open(f,ae.O_SYMLINK,function(p,m){if(p){g&&g(p);return}u.futimes(m,h,d,function(y){u.close(m,function(x){g&&g(y||x)})})})},u.lutimesSync=function(f,h,d){var g=u.openSync(f,ae.O_SYMLINK),p,m=!0;try{p=u.futimesSync(g,h,d),m=!1}finally{if(m)try{u.closeSync(g)}catch{}else u.closeSync(g)}return p}):u.futimes&&(u.lutimes=function(f,h,d,g){g&&process.nextTick(g)},u.lutimesSync=function(){})}function s(u){return u&&function(f,h,d){return u.call(n,f,h,function(g){l(g)&&(g=null),d&&d.apply(this,arguments)})}}function i(u){return u&&function(f,h){try{return u.call(n,f,h)}catch(d){if(!l(d))throw d}}}function r(u){return u&&function(f,h,d,g){return u.call(n,f,h,d,function(p){l(p)&&(p=null),g&&g.apply(this,arguments)})}}function o(u){return u&&function(f,h,d){try{return u.call(n,f,h,d)}catch(g){if(!l(g))throw g}}}function c(u){return u&&function(f,h,d){typeof h=="function"&&(d=h,h=null);function g(p,m){m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),d&&d.apply(this,arguments)}return h?u.call(n,f,h,g):u.call(n,f,g)}}function a(u){return u&&function(f,h){var d=h?u.call(n,f,h):u.call(n,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(u){if(!u||u.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var us=w((zh,ls)=>{"use strict";var as=require("stream").Stream;ls.exports=ua;function ua(n){return{ReadStream:e,WriteStream:t};function e(s,i){if(!(this instanceof e))return new e(s,i);as.call(this);var r=this;this.path=s,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),c=0,a=o.length;c<a;c++){var l=o[c];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){r._read()});return}n.open(this.path,this.flags,this.mode,function(u,f){if(u){r.emit("error",u),r.readable=!1;return}r.fd=f,r.emit("open",f),r._read()})}function t(s,i){if(!(this instanceof t))return new t(s,i);as.call(this),this.path=s,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var r=Object.keys(i),o=0,c=r.length;o<c;o++){var a=r[o];this[a]=i[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=n.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var hs=w((Gh,fs)=>{"use strict";fs.exports=ha;var fa=Object.getPrototypeOf||function(n){return n.__proto__};function ha(n){if(n===null||typeof n!="object")return n;if(n instanceof Object)var e={__proto__:fa(n)};else var e=Object.create(null);return Object.getOwnPropertyNames(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}});var ms=w((Yh,Kt)=>{"use strict";var I=require("fs"),da=cs(),pa=us(),ga=hs(),ot=require("util"),J,at;typeof Symbol=="function"&&typeof Symbol.for=="function"?(J=Symbol.for("graceful-fs.queue"),at=Symbol.for("graceful-fs.previous")):(J="___graceful-fs.queue",at="___graceful-fs.previous");function ma(){}function gs(n,e){Object.defineProperty(n,J,{get:function(){return e}})}var de=ma;ot.debuglog?de=ot.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(de=function(){var n=ot.format.apply(ot,arguments);n="GFS4: "+n.split(/\n/).join(`
GFS4: `),console.error(n)});I[J]||(ds=global[J]||[],gs(I,ds),I.close=function(n){function e(t,s){return n.call(I,t,function(i){i||ps(),typeof s=="function"&&s.apply(this,arguments)})}return Object.defineProperty(e,at,{value:n}),e}(I.close),I.closeSync=function(n){function e(t){n.apply(I,arguments),ps()}return Object.defineProperty(e,at,{value:n}),e}(I.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){de(I[J]),require("assert").equal(I[J].length,0)}));var ds;global[J]||gs(global,I[J]);Kt.exports=Yt(ga(I));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!I.__patched&&(Kt.exports=Yt(I),I.__patched=!0);function Yt(n){da(n),n.gracefulify=Yt,n.createReadStream=H,n.createWriteStream=N;var e=n.readFile;n.readFile=t;function t(b,k,A){return typeof k=="function"&&(A=k,k=null),j(b,k,A);function j(v,P,O,S){return e(v,P,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?xe([j,[v,P,O],R,S||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var s=n.writeFile;n.writeFile=i;function i(b,k,A,j){return typeof A=="function"&&(j=A,A=null),v(b,k,A,j);function v(P,O,S,R,q){return s(P,O,S,function(D){D&&(D.code==="EMFILE"||D.code==="ENFILE")?xe([v,[P,O,S,R],D,q||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}var r=n.appendFile;r&&(n.appendFile=o);function o(b,k,A,j){return typeof A=="function"&&(j=A,A=null),v(b,k,A,j);function v(P,O,S,R,q){return r(P,O,S,function(D){D&&(D.code==="EMFILE"||D.code==="ENFILE")?xe([v,[P,O,S,R],D,q||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}var c=n.copyFile;c&&(n.copyFile=a);function a(b,k,A,j){return typeof A=="function"&&(j=A,A=0),v(b,k,A,j);function v(P,O,S,R,q){return c(P,O,S,function(D){D&&(D.code==="EMFILE"||D.code==="ENFILE")?xe([v,[P,O,S,R],D,q||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}var l=n.readdir;n.readdir=f;var u=/^v[0-5]\./;function f(b,k,A){typeof k=="function"&&(A=k,k=null);var j=u.test(process.version)?function(O,S,R,q){return l(O,v(O,S,R,q))}:function(O,S,R,q){return l(O,S,v(O,S,R,q))};return j(b,k,A);function v(P,O,S,R){return function(q,D){q&&(q.code==="EMFILE"||q.code==="ENFILE")?xe([j,[P,O,S],q,R||Date.now(),Date.now()]):(D&&D.sort&&D.sort(),typeof S=="function"&&S.call(this,q,D))}}}if(process.version.substr(0,4)==="v0.8"){var h=pa(n);y=h.ReadStream,E=h.WriteStream}var d=n.ReadStream;d&&(y.prototype=Object.create(d.prototype),y.prototype.open=x);var g=n.WriteStream;g&&(E.prototype=Object.create(g.prototype),E.prototype.open=T),Object.defineProperty(n,"ReadStream",{get:function(){return y},set:function(b){y=b},enumerable:!0,configurable:!0}),Object.defineProperty(n,"WriteStream",{get:function(){return E},set:function(b){E=b},enumerable:!0,configurable:!0});var p=y;Object.defineProperty(n,"FileReadStream",{get:function(){return p},set:function(b){p=b},enumerable:!0,configurable:!0});var m=E;Object.defineProperty(n,"FileWriteStream",{get:function(){return m},set:function(b){m=b},enumerable:!0,configurable:!0});function y(b,k){return this instanceof y?(d.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}function x(){var b=this;U(b.path,b.flags,b.mode,function(k,A){k?(b.autoClose&&b.destroy(),b.emit("error",k)):(b.fd=A,b.emit("open",A),b.read())})}function E(b,k){return this instanceof E?(g.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function T(){var b=this;U(b.path,b.flags,b.mode,function(k,A){k?(b.destroy(),b.emit("error",k)):(b.fd=A,b.emit("open",A))})}function H(b,k){return new n.ReadStream(b,k)}function N(b,k){return new n.WriteStream(b,k)}var $=n.open;n.open=U;function U(b,k,A,j){return typeof A=="function"&&(j=A,A=null),v(b,k,A,j);function v(P,O,S,R,q){return $(P,O,S,function(D,ts){D&&(D.code==="EMFILE"||D.code==="ENFILE")?xe([v,[P,O,S,R],D,q||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}return n}function xe(n){de("ENQUEUE",n[0].name,n[1]),I[J].push(n),Vt()}var ct;function ps(){for(var n=Date.now(),e=0;e<I[J].length;++e)I[J][e].length>2&&(I[J][e][3]=n,I[J][e][4]=n);Vt()}function Vt(){if(clearTimeout(ct),ct=void 0,I[J].length!==0){var n=I[J].shift(),e=n[0],t=n[1],s=n[2],i=n[3],r=n[4];if(i===void 0)de("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-i>=6e4){de("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,s)}else{var c=Date.now()-r,a=Math.max(r-i,1),l=Math.min(a*1.2,100);c>=l?(de("RETRY",e.name,t),e.apply(null,t.concat([i]))):I[J].push(n)}ct===void 0&&(ct=setTimeout(Vt,0))}}});var bs=w((Kh,Ss)=>{"use strict";var ys=require("process").nextTick,vs=n=>{let e=n.length-1;for(;e>=0;){let t=n.charCodeAt(e);if(t===47||t===92)break;e--}return e<0?"":n.slice(0,e)},lt=(n,e,t)=>{if(n.length===1){n[0](e,t),n.length=0;return}let s;for(let i of n)try{i(e,t)}catch(r){s||(s=r)}if(n.length=0,s)throw s},Qt=class{constructor(e,t,s){this._provider=e,this._syncProvider=t,this._providerContext=s,this._activeAsyncOperations=new Map,this.provide=this._provider?(i,r,o)=>{if(typeof r=="function"&&(o=r,r=void 0),r)return this._provider.call(this._providerContext,i,r,o);if(typeof i!="string"){o(new TypeError("path must be a string"));return}let c=this._activeAsyncOperations.get(i);if(c){c.push(o);return}this._activeAsyncOperations.set(i,c=[o]),e(i,(a,l)=>{this._activeAsyncOperations.delete(i),lt(c,a,l)})}:null,this.provideSync=this._syncProvider?(i,r)=>this._syncProvider.call(this._providerContext,i,r):null}purge(){}purgeParent(){}},pe=0,Le=1,ws=2,Zt=class{constructor(e,t,s,i){this._duration=e,this._provider=t,this._syncProvider=s,this._providerContext=i,this._activeAsyncOperations=new Map,this._data=new Map,this._levels=[];for(let r=0;r<10;r++)this._levels.push(new Set);for(let r=5e3;r<e;r+=500)this._levels.push(new Set);this._currentLevel=0,this._tickInterval=Math.floor(e/this._levels.length),this._mode=pe,this._timeout=void 0,this._nextDecay=void 0,this.provide=t?this.provide.bind(this):null,this.provideSync=s?this.provideSync.bind(this):null}provide(e,t,s){if(typeof t=="function"&&(s=t,t=void 0),typeof e!="string"){s(new TypeError("path must be a string"));return}if(t)return this._provider.call(this._providerContext,e,t,s);this._mode===Le&&this._enterAsyncMode();let i=this._data.get(e);if(i!==void 0)return i.err?ys(s,i.err):ys(s,null,i.result);let r=this._activeAsyncOperations.get(e);if(r!==void 0){r.push(s);return}this._activeAsyncOperations.set(e,r=[s]),this._provider.call(this._providerContext,e,(o,c)=>{this._activeAsyncOperations.delete(e),this._storeResult(e,o,c),this._enterAsyncMode(),lt(r,o,c)})}provideSync(e,t){if(typeof e!="string")throw new TypeError("path must be a string");if(t)return this._syncProvider.call(this._providerContext,e,t);this._mode===Le&&this._runDecays();let s=this._data.get(e);if(s!==void 0){if(s.err)throw s.err;return s.result}let i=this._activeAsyncOperations.get(e);this._activeAsyncOperations.delete(e);let r;try{r=this._syncProvider.call(this._providerContext,e)}catch(o){throw this._storeResult(e,o,void 0),this._enterSyncModeWhenIdle(),i&&lt(i,o,void 0),o}return this._storeResult(e,void 0,r),this._enterSyncModeWhenIdle(),i&&lt(i,void 0,r),r}purge(e){if(e)if(typeof e=="string"){for(let[t,s]of this._data)t.startsWith(e)&&(this._data.delete(t),s.level.delete(t));this._data.size===0&&this._enterIdleMode()}else{for(let[t,s]of this._data)for(let i of e)if(t.startsWith(i)){this._data.delete(t),s.level.delete(t);break}this._data.size===0&&this._enterIdleMode()}else if(this._mode!==pe){this._data.clear();for(let t of this._levels)t.clear();this._enterIdleMode()}}purgeParent(e){if(!e)this.purge();else if(typeof e=="string")this.purge(vs(e));else{let t=new Set;for(let s of e)t.add(vs(s));this.purge(t)}}_storeResult(e,t,s){if(this._data.has(e))return;let i=this._levels[this._currentLevel];this._data.set(e,{err:t,result:s,level:i}),i.add(e)}_decayLevel(){let e=(this._currentLevel+1)%this._levels.length,t=this._levels[e];this._currentLevel=e;for(let s of t)this._data.delete(s);t.clear(),this._data.size===0?this._enterIdleMode():this._nextDecay+=this._tickInterval}_runDecays(){for(;this._nextDecay<=Date.now()&&this._mode!==pe;)this._decayLevel()}_enterAsyncMode(){let e=0;switch(this._mode){case ws:return;case pe:this._nextDecay=Date.now()+this._tickInterval,e=this._tickInterval;break;case Le:if(this._runDecays(),this._mode===pe)return;e=Math.max(0,this._nextDecay-Date.now());break}this._mode=ws;let t=setTimeout(()=>{this._mode=Le,this._runDecays()},e);t.unref&&t.unref(),this._timeout=t}_enterSyncModeWhenIdle(){this._mode===pe&&(this._mode=Le,this._nextDecay=Date.now()+this._tickInterval)}_enterIdleMode(){this._mode=pe,this._nextDecay=void 0,this._timeout&&clearTimeout(this._timeout)}},Ee=(n,e,t,s)=>n>0?new Zt(n,e,t,s):new Qt(e,t,s);Ss.exports=class{constructor(e,t){this.fileSystem=e,this._lstatBackend=Ee(t,this.fileSystem.lstat,this.fileSystem.lstatSync,this.fileSystem);let s=this._lstatBackend.provide;this.lstat=s;let i=this._lstatBackend.provideSync;this.lstatSync=i,this._statBackend=Ee(t,this.fileSystem.stat,this.fileSystem.statSync,this.fileSystem);let r=this._statBackend.provide;this.stat=r;let o=this._statBackend.provideSync;this.statSync=o,this._readdirBackend=Ee(t,this.fileSystem.readdir,this.fileSystem.readdirSync,this.fileSystem);let c=this._readdirBackend.provide;this.readdir=c;let a=this._readdirBackend.provideSync;this.readdirSync=a,this._readFileBackend=Ee(t,this.fileSystem.readFile,this.fileSystem.readFileSync,this.fileSystem);let l=this._readFileBackend.provide;this.readFile=l;let u=this._readFileBackend.provideSync;this.readFileSync=u,this._readJsonBackend=Ee(t,this.fileSystem.readJson||this.readFile&&((p,m)=>{this.readFile(p,(y,x)=>{if(y)return m(y);if(!x||x.length===0)return m(new Error("No file content"));let E;try{E=JSON.parse(x.toString("utf-8"))}catch(T){return m(T)}m(null,E)})}),this.fileSystem.readJsonSync||this.readFileSync&&(p=>{let m=this.readFileSync(p);return JSON.parse(m.toString("utf-8"))}),this.fileSystem);let f=this._readJsonBackend.provide;this.readJson=f;let h=this._readJsonBackend.provideSync;this.readJsonSync=h,this._readlinkBackend=Ee(t,this.fileSystem.readlink,this.fileSystem.readlinkSync,this.fileSystem);let d=this._readlinkBackend.provide;this.readlink=d;let g=this._readlinkBackend.provideSync;this.readlinkSync=g}purge(e){this._statBackend.purge(e),this._lstatBackend.purge(e),this._readdirBackend.purgeParent(e),this._readFileBackend.purge(e),this._readlinkBackend.purge(e),this._readJsonBackend.purge(e)}}});var V=w((Qh,Es)=>{"use strict";var ya=require("util"),va=ya.deprecate(()=>{},"Hook.context is deprecated and will be removed"),_s=function(...n){return this.call=this._createCall("sync"),this.call(...n)},Ps=function(...n){return this.callAsync=this._createCall("async"),this.callAsync(...n)},xs=function(...n){return this.promise=this._createCall("promise"),this.promise(...n)},ut=class{constructor(e=[],t=void 0){this._args=e,this.name=t,this.taps=[],this.interceptors=[],this._call=_s,this.call=_s,this._callAsync=Ps,this.callAsync=Ps,this._promise=xs,this.promise=xs,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(e){throw new Error("Abstract: should be overridden")}_createCall(e){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:e})}_tap(e,t,s){if(typeof t=="string")t={name:t.trim()};else if(typeof t!="object"||t===null)throw new Error("Invalid tap options");if(typeof t.name!="string"||t.name==="")throw new Error("Missing name for tap");typeof t.context<"u"&&va(),t=Object.assign({type:e,fn:s},t),t=this._runRegisterInterceptors(t),this._insert(t)}tap(e,t){this._tap("sync",e,t)}tapAsync(e,t){this._tap("async",e,t)}tapPromise(e,t){this._tap("promise",e,t)}_runRegisterInterceptors(e){for(let t of this.interceptors)if(t.register){let s=t.register(e);s!==void 0&&(e=s)}return e}withOptions(e){let t=s=>Object.assign({},e,typeof s=="string"?{name:s}:s);return{name:this.name,tap:(s,i)=>this.tap(t(s),i),tapAsync:(s,i)=>this.tapAsync(t(s),i),tapPromise:(s,i)=>this.tapPromise(t(s),i),intercept:s=>this.intercept(s),isUsed:()=>this.isUsed(),withOptions:s=>this.withOptions(t(s))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(e){if(this._resetCompilation(),this.interceptors.push(Object.assign({},e)),e.register)for(let t=0;t<this.taps.length;t++)this.taps[t]=e.register(this.taps[t])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(e){this._resetCompilation();let t;typeof e.before=="string"?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));let s=0;typeof e.stage=="number"&&(s=e.stage);let i=this.taps.length;for(;i>0;){i--;let r=this.taps[i];this.taps[i+1]=r;let o=r.stage||0;if(t){if(t.has(r.name)){t.delete(r.name);continue}if(t.size>0)continue}if(!(o>s)){i++;break}}this.taps[i]=e}};Object.setPrototypeOf(ut.prototype,null);Es.exports=ut});var Z=w((Zh,ks)=>{"use strict";var Xt=class{constructor(e){this.config=e,this.options=void 0,this._args=void 0}create(e){this.init(e);let t;switch(this.options.type){case"sync":t=new Function(this.args(),`"use strict";
`+this.header()+this.contentWithInterceptors({onError:o=>`throw ${o};
`,onResult:o=>`return ${o};
`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),`"use strict";
`+this.header()+this.contentWithInterceptors({onError:o=>`_callback(${o});
`,onResult:o=>`_callback(null, ${o});
`,onDone:()=>`_callback();
`}));break;case"promise":let s=!1,i=this.contentWithInterceptors({onError:o=>(s=!0,`_error(${o});
`),onResult:o=>`_resolve(${o});
`,onDone:()=>`_resolve();
`}),r="";r+=`"use strict";
`,r+=this.header(),r+=`return new Promise((function(_resolve, _reject) {
`,s&&(r+=`var _sync = true;
`,r+=`function _error(_err) {
`,r+=`if(_sync)
`,r+=`_resolve(Promise.resolve().then((function() { throw _err; })));
`,r+=`else
`,r+=`_reject(_err);
`,r+=`};
`),r+=i,s&&(r+=`_sync = false;
`),r+=`}));
`,t=new Function(this.args(),r);break}return this.deinit(),t}setup(e,t){e._x=t.taps.map(s=>s.fn)}init(e){this.options=e,this._args=e.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(e){if(this.options.interceptors.length>0){let t=e.onError,s=e.onResult,i=e.onDone,r="";for(let o=0;o<this.options.interceptors.length;o++){let c=this.options.interceptors[o];c.call&&(r+=`${this.getInterceptor(o)}.call(${this.args({before:c.context?"_context":void 0})});
`)}return r+=this.content(Object.assign(e,{onError:t&&(o=>{let c="";for(let a=0;a<this.options.interceptors.length;a++)this.options.interceptors[a].error&&(c+=`${this.getInterceptor(a)}.error(${o});
`);return c+=t(o),c}),onResult:s&&(o=>{let c="";for(let a=0;a<this.options.interceptors.length;a++)this.options.interceptors[a].result&&(c+=`${this.getInterceptor(a)}.result(${o});
`);return c+=s(o),c}),onDone:i&&(()=>{let o="";for(let c=0;c<this.options.interceptors.length;c++)this.options.interceptors[c].done&&(o+=`${this.getInterceptor(c)}.done();
`);return o+=i(),o})})),r}else return this.content(e)}header(){let e="";return this.needContext()?e+=`var _context = {};
`:e+=`var _context;
`,e+=`var _x = this._x;
`,this.options.interceptors.length>0&&(e+=`var _taps = this.taps;
`,e+=`var _interceptors = this.interceptors;
`),e}needContext(){for(let e of this.options.taps)if(e.context)return!0;return!1}callTap(e,{onError:t,onResult:s,onDone:i,rethrowIfPossible:r}){let o="",c=!1;for(let l=0;l<this.options.interceptors.length;l++){let u=this.options.interceptors[l];u.tap&&(c||(o+=`var _tap${e} = ${this.getTap(e)};
`,c=!0),o+=`${this.getInterceptor(l)}.tap(${u.context?"_context, ":""}_tap${e});
`)}o+=`var _fn${e} = ${this.getTapFn(e)};
`;let a=this.options.taps[e];switch(a.type){case"sync":r||(o+=`var _hasError${e} = false;
`,o+=`try {
`),s?o+=`var _result${e} = _fn${e}(${this.args({before:a.context?"_context":void 0})});
`:o+=`_fn${e}(${this.args({before:a.context?"_context":void 0})});
`,r||(o+=`} catch(_err) {
`,o+=`_hasError${e} = true;
`,o+=t("_err"),o+=`}
`,o+=`if(!_hasError${e}) {
`),s&&(o+=s(`_result${e}`)),i&&(o+=i()),r||(o+=`}
`);break;case"async":let l="";s?l+=`(function(_err${e}, _result${e}) {
`:l+=`(function(_err${e}) {
`,l+=`if(_err${e}) {
`,l+=t(`_err${e}`),l+=`} else {
`,s&&(l+=s(`_result${e}`)),i&&(l+=i()),l+=`}
`,l+="})",o+=`_fn${e}(${this.args({before:a.context?"_context":void 0,after:l})});
`;break;case"promise":o+=`var _hasResult${e} = false;
`,o+=`var _promise${e} = _fn${e}(${this.args({before:a.context?"_context":void 0})});
`,o+=`if (!_promise${e} || !_promise${e}.then)
`,o+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${e} + ')');
`,o+=`_promise${e}.then((function(_result${e}) {
`,o+=`_hasResult${e} = true;
`,s&&(o+=s(`_result${e}`)),i&&(o+=i()),o+=`}), function(_err${e}) {
`,o+=`if(_hasResult${e}) throw _err${e};
`,o+=t(`_err${e}`),o+=`});
`;break}return o}callTapsSeries({onError:e,onResult:t,resultReturns:s,onDone:i,doneReturns:r,rethrowIfPossible:o}){if(this.options.taps.length===0)return i();let c=this.options.taps.findIndex(h=>h.type!=="sync"),a=s||r,l="",u=i,f=0;for(let h=this.options.taps.length-1;h>=0;h--){let d=h;u!==i&&(this.options.taps[d].type!=="sync"||f++>20)&&(f=0,l+=`function _next${d}() {
`,l+=u(),l+=`}
`,u=()=>`${a?"return ":""}_next${d}();
`);let p=u,m=x=>x?"":i(),y=this.callTap(d,{onError:x=>e(d,x,p,m),onResult:t&&(x=>t(d,x,p,m)),onDone:!t&&p,rethrowIfPossible:o&&(c<0||d<c)});u=()=>y}return l+=u(),l}callTapsLooping({onError:e,onDone:t,rethrowIfPossible:s}){if(this.options.taps.length===0)return t();let i=this.options.taps.every(o=>o.type==="sync"),r="";i||(r+=`var _looper = (function() {
`,r+=`var _loopAsync = false;
`),r+=`var _loop;
`,r+=`do {
`,r+=`_loop = false;
`;for(let o=0;o<this.options.interceptors.length;o++){let c=this.options.interceptors[o];c.loop&&(r+=`${this.getInterceptor(o)}.loop(${this.args({before:c.context?"_context":void 0})});
`)}return r+=this.callTapsSeries({onError:e,onResult:(o,c,a,l)=>{let u="";return u+=`if(${c} !== undefined) {
`,u+=`_loop = true;
`,i||(u+=`if(_loopAsync) _looper();
`),u+=l(!0),u+=`} else {
`,u+=a(),u+=`}
`,u},onDone:t&&(()=>{let o="";return o+=`if(!_loop) {
`,o+=t(),o+=`}
`,o}),rethrowIfPossible:s&&i}),r+=`} while(_loop);
`,i||(r+=`_loopAsync = true;
`,r+=`});
`,r+=`_looper();
`),r}callTapsParallel({onError:e,onResult:t,onDone:s,rethrowIfPossible:i,onTap:r=(o,c)=>c()}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:e,onResult:t,onDone:s,rethrowIfPossible:i});let o="";o+=`do {
`,o+=`var _counter = ${this.options.taps.length};
`,s&&(o+=`var _done = (function() {
`,o+=s(),o+=`});
`);for(let c=0;c<this.options.taps.length;c++){let a=()=>s?`if(--_counter === 0) _done();
`:"--_counter;",l=u=>u||!s?`_counter = 0;
`:`_counter = 0;
_done();
`;o+=`if(_counter <= 0) break;
`,o+=r(c,()=>this.callTap(c,{onError:u=>{let f="";return f+=`if(_counter > 0) {
`,f+=e(c,u,a,l),f+=`}
`,f},onResult:t&&(u=>{let f="";return f+=`if(_counter > 0) {
`,f+=t(c,u,a,l),f+=`}
`,f}),onDone:!t&&(()=>a()),rethrowIfPossible:i}),a,l)}return o+=`} while(false);
`,o}args({before:e,after:t}={}){let s=this._args;return e&&(s=[e].concat(s)),t&&(s=s.concat(t)),s.length===0?"":s.join(", ")}getTapFn(e){return`_x[${e}]`}getTap(e){return`_taps[${e}]`}getInterceptor(e){return`_interceptors[${e}]`}};ks.exports=Xt});var Fs=w((Xh,Rs)=>{"use strict";var wa=V(),Sa=Z(),en=class extends Sa{content({onError:e,onDone:t,rethrowIfPossible:s}){return this.callTapsSeries({onError:(i,r)=>e(r),onDone:t,rethrowIfPossible:s})}},As=new en,ba=()=>{throw new Error("tapAsync is not supported on a SyncHook")},_a=()=>{throw new Error("tapPromise is not supported on a SyncHook")},Pa=function(n){return As.setup(this,n),As.create(n)};function tn(n=[],e=void 0){let t=new wa(n,e);return t.constructor=tn,t.tapAsync=ba,t.tapPromise=_a,t.compile=Pa,t}tn.prototype=null;Rs.exports=tn});var Os=w((ed,Ts)=>{"use strict";var xa=V(),Ea=Z(),nn=class extends Ea{content({onError:e,onResult:t,resultReturns:s,onDone:i,rethrowIfPossible:r}){return this.callTapsSeries({onError:(o,c)=>e(c),onResult:(o,c,a)=>`if(${c} !== undefined) {
${t(c)};
} else {
${a()}}
`,resultReturns:s,onDone:i,rethrowIfPossible:r})}},Cs=new nn,ka=()=>{throw new Error("tapAsync is not supported on a SyncBailHook")},Aa=()=>{throw new Error("tapPromise is not supported on a SyncBailHook")},Ra=function(n){return Cs.setup(this,n),Cs.create(n)};function sn(n=[],e=void 0){let t=new xa(n,e);return t.constructor=sn,t.tapAsync=ka,t.tapPromise=Aa,t.compile=Ra,t}sn.prototype=null;Ts.exports=sn});var Is=w((td,Ds)=>{"use strict";var Fa=V(),Ca=Z(),rn=class extends Ca{content({onError:e,onResult:t,resultReturns:s,rethrowIfPossible:i}){return this.callTapsSeries({onError:(r,o)=>e(o),onResult:(r,o,c)=>{let a="";return a+=`if(${o} !== undefined) {
`,a+=`${this._args[0]} = ${o};
`,a+=`}
`,a+=c(),a},onDone:()=>t(this._args[0]),doneReturns:s,rethrowIfPossible:i})}},Ms=new rn,Ta=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},Oa=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},Ma=function(n){return Ms.setup(this,n),Ms.create(n)};function on(n=[],e=void 0){if(n.length<1)throw new Error("Waterfall hooks must have at least one argument");let t=new Fa(n,e);return t.constructor=on,t.tapAsync=Ta,t.tapPromise=Oa,t.compile=Ma,t}on.prototype=null;Ds.exports=on});var Ns=w((nd,js)=>{"use strict";var Da=V(),Ia=Z(),cn=class extends Ia{content({onError:e,onDone:t,rethrowIfPossible:s}){return this.callTapsLooping({onError:(i,r)=>e(r),onDone:t,rethrowIfPossible:s})}},$s=new cn,$a=()=>{throw new Error("tapAsync is not supported on a SyncLoopHook")},ja=()=>{throw new Error("tapPromise is not supported on a SyncLoopHook")},Na=function(n){return $s.setup(this,n),$s.create(n)};function an(n=[],e=void 0){let t=new Da(n,e);return t.constructor=an,t.tapAsync=$a,t.tapPromise=ja,t.compile=Na,t}an.prototype=null;js.exports=an});var qs=w((sd,Hs)=>{"use strict";var La=V(),Ha=Z(),ln=class extends Ha{content({onError:e,onDone:t}){return this.callTapsParallel({onError:(s,i,r,o)=>e(i)+o(!0),onDone:t})}},Ls=new ln,qa=function(n){return Ls.setup(this,n),Ls.create(n)};function un(n=[],e=void 0){let t=new La(n,e);return t.constructor=un,t.compile=qa,t._call=void 0,t.call=void 0,t}un.prototype=null;Hs.exports=un});var Us=w((id,Bs)=>{"use strict";var Wa=V(),Ba=Z(),fn=class extends Ba{content({onError:e,onResult:t,onDone:s}){let i="";return i+=`var _results = new Array(${this.options.taps.length});
`,i+=`var _checkDone = function() {
`,i+=`for(var i = 0; i < _results.length; i++) {
`,i+=`var item = _results[i];
`,i+=`if(item === undefined) return false;
`,i+=`if(item.result !== undefined) {
`,i+=t("item.result"),i+=`return true;
`,i+=`}
`,i+=`if(item.error) {
`,i+=e("item.error"),i+=`return true;
`,i+=`}
`,i+=`}
`,i+=`return false;
`,i+=`}
`,i+=this.callTapsParallel({onError:(r,o,c,a)=>{let l="";return l+=`if(${r} < _results.length && ((_results.length = ${r+1}), (_results[${r}] = { error: ${o} }), _checkDone())) {
`,l+=a(!0),l+=`} else {
`,l+=c(),l+=`}
`,l},onResult:(r,o,c,a)=>{let l="";return l+=`if(${r} < _results.length && (${o} !== undefined && (_results.length = ${r+1}), (_results[${r}] = { result: ${o} }), _checkDone())) {
`,l+=a(!0),l+=`} else {
`,l+=c(),l+=`}
`,l},onTap:(r,o,c,a)=>{let l="";return r>0&&(l+=`if(${r} >= _results.length) {
`,l+=c(),l+=`} else {
`),l+=o(),r>0&&(l+=`}
`),l},onDone:s}),i}},Ws=new fn,Ua=function(n){return Ws.setup(this,n),Ws.create(n)};function hn(n=[],e=void 0){let t=new Wa(n,e);return t.constructor=hn,t.compile=Ua,t._call=void 0,t.call=void 0,t}hn.prototype=null;Bs.exports=hn});var Gs=w((rd,zs)=>{"use strict";var Ja=V(),za=Z(),dn=class extends za{content({onError:e,onDone:t}){return this.callTapsSeries({onError:(s,i,r,o)=>e(i)+o(!0),onDone:t})}},Js=new dn,Ga=function(n){return Js.setup(this,n),Js.create(n)};function pn(n=[],e=void 0){let t=new Ja(n,e);return t.constructor=pn,t.compile=Ga,t._call=void 0,t.call=void 0,t}pn.prototype=null;zs.exports=pn});var Ks=w((od,Vs)=>{"use strict";var Ya=V(),Va=Z(),gn=class extends Va{content({onError:e,onResult:t,resultReturns:s,onDone:i}){return this.callTapsSeries({onError:(r,o,c,a)=>e(o)+a(!0),onResult:(r,o,c)=>`if(${o} !== undefined) {
${t(o)}
} else {
${c()}}
`,resultReturns:s,onDone:i})}},Ys=new gn,Ka=function(n){return Ys.setup(this,n),Ys.create(n)};function mn(n=[],e=void 0){let t=new Ya(n,e);return t.constructor=mn,t.compile=Ka,t._call=void 0,t.call=void 0,t}mn.prototype=null;Vs.exports=mn});var Xs=w((cd,Zs)=>{"use strict";var Qa=V(),Za=Z(),yn=class extends Za{content({onError:e,onDone:t}){return this.callTapsLooping({onError:(s,i,r,o)=>e(i)+o(!0),onDone:t})}},Qs=new yn,Xa=function(n){return Qs.setup(this,n),Qs.create(n)};function vn(n=[],e=void 0){let t=new Qa(n,e);return t.constructor=vn,t.compile=Xa,t._call=void 0,t.call=void 0,t}vn.prototype=null;Zs.exports=vn});var ni=w((ad,ti)=>{"use strict";var el=V(),tl=Z(),wn=class extends tl{content({onError:e,onResult:t,onDone:s}){return this.callTapsSeries({onError:(i,r,o,c)=>e(r)+c(!0),onResult:(i,r,o)=>{let c="";return c+=`if(${r} !== undefined) {
`,c+=`${this._args[0]} = ${r};
`,c+=`}
`,c+=o(),c},onDone:()=>t(this._args[0])})}},ei=new wn,nl=function(n){return ei.setup(this,n),ei.create(n)};function Sn(n=[],e=void 0){if(n.length<1)throw new Error("Waterfall hooks must have at least one argument");let t=new el(n,e);return t.constructor=Sn,t.compile=nl,t._call=void 0,t.call=void 0,t}Sn.prototype=null;ti.exports=Sn});var ii=w((ld,si)=>{"use strict";var bn=require("util"),sl=(n,e)=>e,ke=class{constructor(e,t=void 0){this._map=new Map,this.name=t,this._factory=e,this._interceptors=[]}get(e){return this._map.get(e)}for(e){let t=this.get(e);if(t!==void 0)return t;let s=this._factory(e),i=this._interceptors;for(let r=0;r<i.length;r++)s=i[r].factory(e,s);return this._map.set(e,s),s}intercept(e){this._interceptors.push(Object.assign({factory:sl},e))}};ke.prototype.tap=bn.deprecate(function(n,e,t){return this.for(n).tap(e,t)},"HookMap#tap(key,\u2026) is deprecated. Use HookMap#for(key).tap(\u2026) instead.");ke.prototype.tapAsync=bn.deprecate(function(n,e,t){return this.for(n).tapAsync(e,t)},"HookMap#tapAsync(key,\u2026) is deprecated. Use HookMap#for(key).tapAsync(\u2026) instead.");ke.prototype.tapPromise=bn.deprecate(function(n,e,t){return this.for(n).tapPromise(e,t)},"HookMap#tapPromise(key,\u2026) is deprecated. Use HookMap#for(key).tapPromise(\u2026) instead.");si.exports=ke});var oi=w((fd,ri)=>{"use strict";var ud=V(),_n=class n{constructor(e,t=void 0){this.hooks=e,this.name=t}tap(e,t){for(let s of this.hooks)s.tap(e,t)}tapAsync(e,t){for(let s of this.hooks)s.tapAsync(e,t)}tapPromise(e,t){for(let s of this.hooks)s.tapPromise(e,t)}isUsed(){for(let e of this.hooks)if(e.isUsed())return!0;return!1}intercept(e){for(let t of this.hooks)t.intercept(e)}withOptions(e){return new n(this.hooks.map(t=>t.withOptions(e)),this.name)}};ri.exports=_n});var ci=w(Y=>{"use strict";Y.__esModule=!0;Y.SyncHook=Fs();Y.SyncBailHook=Os();Y.SyncWaterfallHook=Is();Y.SyncLoopHook=Ns();Y.AsyncParallelHook=qs();Y.AsyncParallelBailHook=Us();Y.AsyncSeriesHook=Gs();Y.AsyncSeriesBailHook=Ks();Y.AsyncSeriesLoopHook=Xs();Y.AsyncSeriesWaterfallHook=ni();Y.HookMap=ii();Y.MultiHook=oi()});var li=w((dd,ai)=>{"use strict";ai.exports=function(e,t){let s=!1,i;return e.log&&(t?i=r=>{s||(e.log(t),s=!0),e.log("  "+r)}:i=e.log),{log:i,yield:e.yield,fileDependencies:e.fileDependencies,contextDependencies:e.contextDependencies,missingDependencies:e.missingDependencies,stack:e.stack}}});var ft=w((pd,ui)=>{"use strict";var il=/^(#?(?:\0.|[^?#\0])*)(\?(?:\0.|[^#\0])*)?(#.*)?$/;function rl(n){let e=il.exec(n);return e?[e[1].replace(/\0(.)/g,"$1"),e[2]?e[2].replace(/\0(.)/g,"$1"):"",e[3]||""]:null}ui.exports.parseIdentifier=rl});var ye=w(me=>{"use strict";var yi=require("path"),Pn="#".charCodeAt(0),ge="/".charCodeAt(0),ol="\\".charCodeAt(0),fi="A".charCodeAt(0),hi="Z".charCodeAt(0),di="a".charCodeAt(0),pi="z".charCodeAt(0),He=".".charCodeAt(0),gi=":".charCodeAt(0),Ae=yi.posix.normalize,xn=yi.win32.normalize,F=Object.freeze({Empty:0,Normal:1,Relative:2,AbsoluteWin:3,AbsolutePosix:4,Internal:5});me.PathType=F;var Re=n=>{switch(n.length){case 0:return F.Empty;case 1:{switch(n.charCodeAt(0)){case He:return F.Relative;case ge:return F.AbsolutePosix;case Pn:return F.Internal}return F.Normal}case 2:{let s=n.charCodeAt(0);switch(s){case He:{switch(n.charCodeAt(1)){case He:case ge:return F.Relative}return F.Normal}case ge:return F.AbsolutePosix;case Pn:return F.Internal}return n.charCodeAt(1)===gi&&(s>=fi&&s<=hi||s>=di&&s<=pi)?F.AbsoluteWin:F.Normal}}let e=n.charCodeAt(0);switch(e){case He:{switch(n.charCodeAt(1)){case ge:return F.Relative;case He:return n.charCodeAt(2)===ge?F.Relative:F.Normal}return F.Normal}case ge:return F.AbsolutePosix;case Pn:return F.Internal}if(n.charCodeAt(1)===gi){let s=n.charCodeAt(2);if((s===ol||s===ge)&&(e>=fi&&e<=hi||e>=di&&e<=pi))return F.AbsoluteWin}return F.Normal};me.getType=Re;var vi=n=>{switch(Re(n)){case F.Empty:return n;case F.AbsoluteWin:return xn(n);case F.Relative:{let e=Ae(n);return Re(e)===F.Relative?e:`./${e}`}}return Ae(n)};me.normalize=vi;var wi=(n,e)=>{if(!e)return vi(n);let t=Re(e);switch(t){case F.AbsolutePosix:return Ae(e);case F.AbsoluteWin:return xn(e)}switch(Re(n)){case F.Normal:case F.Relative:case F.AbsolutePosix:return Ae(`${n}/${e}`);case F.AbsoluteWin:return xn(`${n}\\${e}`)}switch(t){case F.Empty:return n;case F.Relative:{let s=Ae(n);return Re(s)===F.Relative?s:`./${s}`}}return Ae(n)};me.join=wi;var mi=new Map,cl=(n,e)=>{let t,s=mi.get(n);if(s===void 0)mi.set(n,s=new Map);else if(t=s.get(e),t!==void 0)return t;return t=wi(n,e),s.set(e,t),t};me.cachedJoin=cl;var al=n=>{let e=0,t=n.indexOf("/",1),s=0;for(;t!==-1;){switch(n.slice(e,t)){case"..":{if(s--,s<0)return new Error(`Trying to access out of package scope. Requesting ${n}`);break}case".":break;default:s++;break}e=t+1,t=n.indexOf("/",e)}};me.checkImportsExportsFieldTarget=al});var ki=w((md,Ei)=>{"use strict";var{AsyncSeriesBailHook:Si,AsyncSeriesHook:ll,SyncHook:bi}=ci(),ul=li(),{parseIdentifier:fl}=ft(),{normalize:hl,cachedJoin:dl,getType:_i,PathType:Pi}=ye();function xi(n){return n.replace(/-([a-z])/g,e=>e.slice(1).toUpperCase())}var En=class n{static createStackEntry(e,t){return e.name+": ("+t.path+") "+(t.request||"")+(t.query||"")+(t.fragment||"")+(t.directory?" directory":"")+(t.module?" module":"")}constructor(e,t){this.fileSystem=e,this.options=t,this.hooks={resolveStep:new bi(["hook","request"],"resolveStep"),noResolve:new bi(["request","error"],"noResolve"),resolve:new Si(["request","resolveContext"],"resolve"),result:new ll(["result","resolveContext"],"result")}}ensureHook(e){if(typeof e!="string")return e;if(e=xi(e),/^before/.test(e))return this.ensureHook(e[6].toLowerCase()+e.slice(7)).withOptions({stage:-10});if(/^after/.test(e))return this.ensureHook(e[5].toLowerCase()+e.slice(6)).withOptions({stage:10});let t=this.hooks[e];return t||(this.hooks[e]=new Si(["request","resolveContext"],e),this.hooks[e])}getHook(e){if(typeof e!="string")return e;if(e=xi(e),/^before/.test(e))return this.getHook(e[6].toLowerCase()+e.slice(7)).withOptions({stage:-10});if(/^after/.test(e))return this.getHook(e[5].toLowerCase()+e.slice(6)).withOptions({stage:10});let t=this.hooks[e];if(!t)throw new Error(`Hook ${e} doesn't exist`);return t}resolveSync(e,t,s){let i,r,o=!1;if(this.resolve(e,t,s,{},(c,a)=>{i=c,r=a,o=!0}),!o)throw new Error("Cannot 'resolveSync' because the fileSystem is not sync. Use 'resolve'!");if(i)throw i;if(r===void 0)throw new Error("No result");return r}resolve(e,t,s,i,r){if(!e||typeof e!="object")return r(new Error("context argument is not an object"));if(typeof t!="string")return r(new Error("path argument is not a string"));if(typeof s!="string")return r(new Error("request argument is not a string"));if(!i)return r(new Error("resolveContext argument is not set"));let o={context:e,path:t,request:s},c,a=!1,l;if(typeof i.yield=="function"){let d=i.yield;c=g=>{d(g),a=!0},l=g=>{g&&c(g),r(null)}}let u=`resolve '${s}' in '${t}'`,f=d=>r(null,d.path===!1?!1:`${d.path.replace(/#/g,"\0#")}${d.query?d.query.replace(/#/g,"\0#"):""}${d.fragment||""}`,d),h=d=>{let g=new Error("Can't "+u);return g.details=d.join(`
`),this.hooks.noResolve.call(o,g),r(g)};if(i.log){let d=i.log,g=[];return this.doResolve(this.hooks.resolve,o,u,{log:p=>{d(p),g.push(p)},yield:c,fileDependencies:i.fileDependencies,contextDependencies:i.contextDependencies,missingDependencies:i.missingDependencies,stack:i.stack},(p,m)=>p?r(p):a||m&&c?l(m):m?f(m):h(g))}else return this.doResolve(this.hooks.resolve,o,u,{log:void 0,yield:c,fileDependencies:i.fileDependencies,contextDependencies:i.contextDependencies,missingDependencies:i.missingDependencies,stack:i.stack},(d,g)=>{if(d)return r(d);if(a||g&&c)return l(g);if(g)return f(g);let p=[];return this.doResolve(this.hooks.resolve,o,u,{log:m=>p.push(m),yield:c,stack:i.stack},(m,y)=>m?r(m):a||y&&c?l(y):h(p))})}doResolve(e,t,s,i,r){let o=n.createStackEntry(e,t),c;if(i.stack){if(c=new Set(i.stack),i.stack.has(o)){let a=new Error(`Recursion in resolving
Stack:
  `+Array.from(c).join(`
  `));return a.recursion=!0,i.log&&i.log("abort resolving because of recursion"),r(a)}c.add(o)}else c=new Set([o]);if(this.hooks.resolveStep.call(e,t),e.isUsed()){let a=ul({log:i.log,yield:i.yield,fileDependencies:i.fileDependencies,contextDependencies:i.contextDependencies,missingDependencies:i.missingDependencies,stack:c},s);return e.callAsync(t,a,(l,u)=>{if(l)return r(l);if(u)return r(null,u);r()})}else r()}parse(e){let t={request:"",query:"",fragment:"",module:!1,directory:!1,file:!1,internal:!1},s=fl(e);return s&&([t.request,t.query,t.fragment]=s,t.request.length>0&&(t.internal=this.isPrivate(e),t.module=this.isModule(t.request),t.directory=this.isDirectory(t.request),t.directory&&(t.request=t.request.slice(0,-1)))),t}isModule(e){return _i(e)===Pi.Normal}isPrivate(e){return _i(e)===Pi.Internal}isDirectory(e){return e.endsWith("/")}join(e,t){return dl(e,t)}normalize(e){return hl(e)}};Ei.exports=En});var Ri=w((yd,Ai)=>{"use strict";function pl(n){this.fs=n,this.lstat=void 0,this.lstatSync=void 0;let e=n.lstatSync;e&&(this.lstat=(s,i,r)=>{let o;try{o=e.call(n,s)}catch(c){return(r||i)(c)}(r||i)(null,o)},this.lstatSync=(s,i)=>e.call(n,s,i)),this.stat=(s,i,r)=>{let o;try{o=r?n.statSync(s,i):n.statSync(s)}catch(c){return(r||i)(c)}(r||i)(null,o)},this.statSync=(s,i)=>n.statSync(s,i),this.readdir=(s,i,r)=>{let o;try{o=n.readdirSync(s)}catch(c){return(r||i)(c)}(r||i)(null,o)},this.readdirSync=(s,i)=>n.readdirSync(s,i),this.readFile=(s,i,r)=>{let o;try{o=n.readFileSync(s)}catch(c){return(r||i)(c)}(r||i)(null,o)},this.readFileSync=(s,i)=>n.readFileSync(s,i),this.readlink=(s,i,r)=>{let o;try{o=n.readlinkSync(s)}catch(c){return(r||i)(c)}(r||i)(null,o)},this.readlinkSync=(s,i)=>n.readlinkSync(s,i),this.readJson=void 0,this.readJsonSync=void 0;let t=n.readJsonSync;t&&(this.readJson=(s,i,r)=>{let o;try{o=t.call(n,s)}catch(c){return(r||i)(c)}(r||i)(null,o)},this.readJsonSync=(s,i)=>t.call(n,s,i))}Ai.exports=pl});var se=w((vd,Fi)=>{"use strict";Fi.exports=function(e,t,s){if(e.length===0)return s();let i=0,r=()=>{let o;return t(e[i++],(c,a)=>{if(c||a!==void 0||i>=e.length)return s(c,a);if(o===!1)for(;r(););o=!0},i),o||(o=!1),o};for(;r(););}});var ve=w(ht=>{"use strict";var gl=se();function ml(n,e,t,s,i,r){(function o(){if(s&&s.directory===e)return r(null,s);gl(t,(c,a)=>{let l=n.join(e,c);n.fileSystem.readJson?n.fileSystem.readJson(l,(f,h)=>{if(f)return typeof f.code<"u"?(i.missingDependencies&&i.missingDependencies.add(l),a()):(i.fileDependencies&&i.fileDependencies.add(l),u(f));i.fileDependencies&&i.fileDependencies.add(l),u(null,h)}):n.fileSystem.readFile(l,(f,h)=>{if(f)return i.missingDependencies&&i.missingDependencies.add(l),a();i.fileDependencies&&i.fileDependencies.add(l);let d;if(h)try{d=JSON.parse(h.toString())}catch(g){return u(g)}else return u(new Error("No content in file"));u(null,d)});function u(f,h){if(f)return i.log?i.log(l+" (directory description file): "+f):f.message=l+" (directory description file): "+f,a(f);a(null,{content:h,directory:e,path:l})}},(c,a)=>{if(c)return r(c);if(a)return r(null,a);{let l=Ci(e);return l?(e=l,o()):r()}})})()}function yl(n,e){if(n)if(Array.isArray(e)){let t=n;for(let s=0;s<e.length;s++){if(t===null||typeof t!="object"){t=null;break}t=t[e[s]]}return t}else return n[e]}function Ci(n){if(n==="/")return null;let e=n.lastIndexOf("/"),t=n.lastIndexOf("\\"),s=e<0?t:t<0?e:e<t?t:e;return s<0?null:n.slice(0,s||1)}ht.loadDescriptionFile=ml;ht.getField=yl;ht.cdUp=Ci});var Oi=w((Sd,Ti)=>{"use strict";Ti.exports=function(e,t){if(typeof t.__innerRequest=="string"&&t.__innerRequest_request===t.request&&t.__innerRequest_relativePath===t.relativePath)return t.__innerRequest;let s;return t.request?(s=t.request,/^\.\.?(?:\/|$)/.test(s)&&t.relativePath&&(s=e.join(t.relativePath,s))):s=t.relativePath,t.__innerRequest_request=t.request,t.__innerRequest_relativePath=t.relativePath,t.__innerRequest=s}});var Di=w((_d,Mi)=>{"use strict";var vl=ve(),wl=Oi();Mi.exports=class{constructor(e,t,s){this.source=e,this.field=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("AliasFieldPlugin",(s,i,r)=>{if(!s.descriptionFileData)return r();let o=wl(e,s);if(!o)return r();let c=vl.getField(s.descriptionFileData,this.field);if(c===null||typeof c!="object")return i.log&&i.log("Field '"+this.field+"' doesn't contain a valid alias configuration"),r();let a=Object.prototype.hasOwnProperty.call(c,o)?c[o]:o.startsWith("./")?c[o.slice(2)]:void 0;if(a===o||a===void 0)return r();if(a===!1){let u={...s,path:!1};return typeof i.yield=="function"?(i.yield(u),r(null,null)):r(null,u)}let l={...s,path:s.descriptionFileRoot,request:a,fullySpecified:!1};e.doResolve(t,l,"aliased from description file "+s.descriptionFilePath+" with mapping '"+o+"' to '"+a+"'",i,(u,f)=>{if(u)return r(u);if(f===void 0)return r(null,null);r(null,f)})})}}});var Ni=w((xd,ji)=>{"use strict";var Ii=se(),{PathType:$i,getType:Sl}=ye();ji.exports=class{constructor(e,t,s){this.source=e,this.options=Array.isArray(t)?t:[t],this.target=s}apply(e){let t=e.ensureHook(this.target),s=r=>{let o=Sl(r);return o===$i.AbsolutePosix||o===$i.AbsoluteWin?e.join(r,"_").slice(0,-1):null},i=(r,o)=>{let c=s(o);return c?r.startsWith(c):!1};e.getHook(this.source).tapAsync("AliasPlugin",(r,o,c)=>{let a=r.request||r.path;if(!a)return c();Ii(this.options,(l,u)=>{let f=!1;if(a===l.name||!l.onlyModule&&(r.request?a.startsWith(`${l.name}/`):i(a,l.name))){let h=a.slice(l.name.length),d=(p,m)=>{if(p===!1){let y={...r,path:!1};return typeof o.yield=="function"?(o.yield(y),m(null,null)):m(null,y)}if(a!==p&&!a.startsWith(p+"/")){f=!0;let y=p+h,x={...r,request:y,fullySpecified:!1};return e.doResolve(t,x,"aliased with mapping '"+l.name+"': '"+p+"' to '"+y+"'",o,(E,T)=>E?m(E):T?m(null,T):m())}return m()},g=(p,m)=>p?u(p):m?u(null,m):f?u(null,null):u();return Array.isArray(l.alias)?Ii(l.alias,d,g):d(l.alias,g)}return u()},c)})}}});var Hi=w((kd,Li)=>{"use strict";Li.exports=class{constructor(e,t,s){this.source=e,this.appending=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("AppendPlugin",(s,i,r)=>{let o={...s,path:s.path+this.appending,relativePath:s.relativePath&&s.relativePath+this.appending};e.doResolve(t,o,this.appending,i,r)})}}});var Wi=w((Rd,qi)=>{"use strict";qi.exports=class{constructor(e,t,s,i,r){this.source=e,this.test=t,this.message=s,this.allowAlternatives=i,this.target=r}apply(e){let t=e.ensureHook(this.target),{test:s,message:i,allowAlternatives:r}=this,o=Object.keys(s);e.getHook(this.source).tapAsync("ConditionalPlugin",(c,a,l)=>{for(let u of o)if(c[u]!==s[u])return l();e.doResolve(t,c,i,a,r?l:(u,f)=>{if(u)return l(u);if(f===void 0)return l(null,null);l(null,f)})})}}});var Ji=w((Cd,Ui)=>{"use strict";var Bi=ve();Ui.exports=class{constructor(e,t,s,i){this.source=e,this.filenames=t,this.pathIsFile=s,this.target=i}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("DescriptionFilePlugin",(s,i,r)=>{let o=s.path;if(!o)return r();let c=this.pathIsFile?Bi.cdUp(o):o;if(!c)return r();Bi.loadDescriptionFile(e,c,this.filenames,s.descriptionFilePath?{path:s.descriptionFilePath,content:s.descriptionFileData,directory:s.descriptionFileRoot}:void 0,i,(a,l)=>{if(a)return r(a);if(!l)return i.log&&i.log(`No description file found in ${c} or above`),r();let u="."+o.slice(l.directory.length).replace(/\\/g,"/"),f={...s,descriptionFilePath:l.path,descriptionFileData:l.content,descriptionFileRoot:l.directory,relativePath:u};e.doResolve(t,f,"using description file: "+l.path+" (relative path: "+u+")",i,(h,d)=>{if(h)return r(h);if(d===void 0)return r(null,null);r(null,d)})})})}}});var Gi=w((Od,zi)=>{"use strict";zi.exports=class{constructor(e,t){this.source=e,this.target=t}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("DirectoryExistsPlugin",(s,i,r)=>{let o=e.fileSystem,c=s.path;if(!c)return r();o.stat(c,(a,l)=>{if(a||!l)return i.missingDependencies&&i.missingDependencies.add(c),i.log&&i.log(c+" doesn't exist"),r();if(!l.isDirectory())return i.missingDependencies&&i.missingDependencies.add(c),i.log&&i.log(c+" is not a directory"),r();i.fileDependencies&&i.fileDependencies.add(c),e.doResolve(t,s,`existing directory ${c}`,i,r)})})}}});var Rn=w((Md,An)=>{"use strict";var X="/".charCodeAt(0),dt=".".charCodeAt(0),Ki="#".charCodeAt(0),bl=/\*/g;An.exports.processExportsField=function(e){return Qi(Al(e),t=>t.length===0?".":"./"+t,_l,xl)};An.exports.processImportsField=function(e){return Qi(Rl(e),t=>"#"+t,Pl,El)};function Qi(n,e,t,s){return function(r,o){r=t(r);let c=kl(e(r),n);if(c===null)return[];let[a,l,u,f]=c,h=null;if(kn(a)){if(h=Xi(a,o),h===null)return[]}else h=a;return Zi(l,f,u,h,o,s)}}function _l(n){if(n.charCodeAt(0)!==dt)throw new Error('Request should be relative path and start with "."');if(n.length===1)return"";if(n.charCodeAt(1)!==X)throw new Error('Request should be relative path and start with "./"');if(n.charCodeAt(n.length-1)===X)throw new Error("Only requesting file allowed");return n.slice(2)}function Pl(n){if(n.charCodeAt(0)!==Ki)throw new Error('Request should start with "#"');if(n.length===1)throw new Error("Request should have at least 2 characters");if(n.charCodeAt(1)===X)throw new Error('Request should not start with "#/"');if(n.charCodeAt(n.length-1)===X)throw new Error("Only requesting file allowed");return n.slice(1)}function xl(n,e){if(n.charCodeAt(0)===X||n.charCodeAt(0)===dt&&n.charCodeAt(1)!==X)throw new Error(`Export should be relative path and start with "./", got ${JSON.stringify(n)}.`);if(n.charCodeAt(n.length-1)===X!==e)throw new Error(e?`Expecting folder to folder mapping. ${JSON.stringify(n)} should end with "/"`:`Expecting file to file mapping. ${JSON.stringify(n)} should not end with "/"`)}function El(n,e){if(n.charCodeAt(n.length-1)===X!==e)throw new Error(e?`Expecting folder to folder mapping. ${JSON.stringify(n)} should end with "/"`:`Expecting file to file mapping. ${JSON.stringify(n)} should not end with "/"`)}function Yi(n,e){let t=n.indexOf("*"),s=e.indexOf("*"),i=t===-1?n.length:t+1,r=s===-1?e.length:s+1;return i>r?-1:r>i||t===-1?1:s===-1||n.length>e.length?-1:e.length>n.length?1:0}function kl(n,e){if(Object.prototype.hasOwnProperty.call(e,n)&&!n.includes("*")&&!n.endsWith("/"))return[e[n],"",!1,!1];let t="",s,i=Object.getOwnPropertyNames(e);for(let a=0;a<i.length;a++){let l=i[a],u=l.indexOf("*");if(u!==-1&&n.startsWith(l.slice(0,u))){let f=l.slice(u+1);n.length>=l.length&&n.endsWith(f)&&Yi(t,l)===1&&l.lastIndexOf("*")===u&&(t=l,s=n.slice(u,n.length-f.length))}else l[l.length-1]==="/"&&n.startsWith(l)&&Yi(t,l)===1&&(t=l,s=n.slice(l.length))}if(t==="")return null;let r=e[t],o=t.endsWith("/"),c=t.includes("*");return[r,s,o,c]}function kn(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function Zi(n,e,t,s,i,r){if(s===null)return[];if(typeof s=="string")return[Vi(n,e,t,s,r)];let o=[];for(let c of s){if(typeof c=="string"){o.push(Vi(n,e,t,c,r));continue}let a=Xi(c,i);if(!a)continue;let l=Zi(n,e,t,a,i,r);for(let u of l)o.push(u)}return o}function Vi(n,e,t,s,i){if(n===void 0)return i(s,!1),s;if(t)return i(s,!0),s+n;i(s,!1);let r=s;return e&&(r=r.replace(bl,n.replace(/\$/g,"$$"))),r}function Xi(n,e){let t=[[n,Object.keys(n),0]];e:for(;t.length>0;){let[s,i,r]=t[t.length-1],o=i.length-1;for(let c=r;c<i.length;c++){let a=i[c];if(c!==o){if(a==="default")throw new Error("Default condition should be last one")}else if(a==="default"){let l=s[a];if(kn(l)){let u=l;t[t.length-1][2]=c+1,t.push([u,Object.keys(u),0]);continue e}return l}if(e.has(a)){let l=s[a];if(kn(l)){let u=l;t[t.length-1][2]=c+1,t.push([u,Object.keys(u),0]);continue e}return l}}t.pop()}return null}function Al(n){if(typeof n=="string"||Array.isArray(n))return{".":n};let e=Object.keys(n);for(let t=0;t<e.length;t++){let s=e[t];if(s.charCodeAt(0)!==dt){if(t===0){for(;t<e.length;){let i=e[t].charCodeAt(0);if(i===dt||i===X)throw new Error(`Exports field key should be relative path and start with "." (key: ${JSON.stringify(s)})`);t++}return{".":n}}throw new Error(`Exports field key should be relative path and start with "." (key: ${JSON.stringify(s)})`)}if(s.length!==1&&s.charCodeAt(1)!==X)throw new Error(`Exports field key should be relative path and start with "./" (key: ${JSON.stringify(s)})`)}return n}function Rl(n){let e=Object.keys(n);for(let t=0;t<e.length;t++){let s=e[t];if(s.charCodeAt(0)!==Ki)throw new Error(`Imports field key should start with "#" (key: ${JSON.stringify(s)})`);if(s.length===1)throw new Error(`Imports field key should have at least 2 characters (key: ${JSON.stringify(s)})`);if(s.charCodeAt(1)===X)throw new Error(`Imports field key should not start with "#/" (key: ${JSON.stringify(s)})`)}return n}});var tr=w((Id,er)=>{"use strict";var Fl=require("path"),Cl=ve(),Tl=se(),{processExportsField:Ol}=Rn(),{parseIdentifier:Ml}=ft(),{checkImportsExportsFieldTarget:Dl}=ye();er.exports=class{constructor(e,t,s,i){this.source=e,this.target=i,this.conditionNames=t,this.fieldName=s,this.fieldProcessorCache=new WeakMap}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("ExportsFieldPlugin",(s,i,r)=>{if(!s.descriptionFilePath||s.relativePath!=="."||s.request===void 0)return r();let o=s.query||s.fragment?(s.request==="."?"./":s.request)+s.query+s.fragment:s.request,c=Cl.getField(s.descriptionFileData,this.fieldName);if(!c)return r();if(s.directory)return r(new Error(`Resolving to directories is not possible with the exports field (request was ${o}/)`));let a;try{let l=this.fieldProcessorCache.get(s.descriptionFileData);l===void 0&&(l=Ol(c),this.fieldProcessorCache.set(s.descriptionFileData,l)),a=l(o,this.conditionNames)}catch(l){return i.log&&i.log(`Exports field in ${s.descriptionFilePath} can't be processed: ${l}`),r(l)}if(a.length===0)return r(new Error(`Package path ${o} is not exported from package ${s.descriptionFileRoot} (see exports field in ${s.descriptionFilePath})`));Tl(a,(l,u)=>{let f=Ml(l);if(!f)return u();let[h,d,g]=f,p=Dl(h);if(p)return u(p);let m={...s,request:void 0,path:Fl.join(s.descriptionFileRoot,h),relativePath:h,query:d,fragment:g};e.doResolve(t,m,"using exports field: "+l,i,u)},(l,u)=>r(l,u||null))})}}});var sr=w((jd,nr)=>{"use strict";var Il=se();nr.exports=class{constructor(e,t,s){this.source=e,this.options=t,this.target=s}apply(e){let t=e.ensureHook(this.target),{extension:s,alias:i}=this.options;e.getHook(this.source).tapAsync("ExtensionAliasPlugin",(r,o,c)=>{let a=r.request;if(!a||!a.endsWith(s))return c();let l=typeof i=="string",u=(h,d,g)=>{let p=`${a.slice(0,-s.length)}${h}`;return e.doResolve(t,{...r,request:p,fullySpecified:!0},`aliased from extension alias with mapping '${s}' to '${h}'`,o,(m,y)=>{if(!l&&g)return g!==this.options.alias.length?(o.log&&o.log(`Failed to alias from extension alias with mapping '${s}' to '${h}' for '${p}': ${m}`),d(null,y)):d(m,y);d(m,y)})},f=(h,d)=>h?c(h):d?c(null,d):c(null,null);l?u(i,f):i.length>1?Il(i,u,f):u(i[0],f)})}}});var rr=w((Ld,ir)=>{"use strict";ir.exports=class{constructor(e,t){this.source=e,this.target=t}apply(e){let t=e.ensureHook(this.target),s=e.fileSystem;e.getHook(this.source).tapAsync("FileExistsPlugin",(i,r,o)=>{let c=i.path;if(!c)return o();s.stat(c,(a,l)=>{if(a||!l)return r.missingDependencies&&r.missingDependencies.add(c),r.log&&r.log(c+" doesn't exist"),o();if(!l.isFile())return r.missingDependencies&&r.missingDependencies.add(c),r.log&&r.log(c+" is not a file"),o();r.fileDependencies&&r.fileDependencies.add(c),e.doResolve(t,i,"existing file: "+c,r,o)})})}}});var cr=w((qd,or)=>{"use strict";var $l=require("path"),jl=ve(),Nl=se(),{processImportsField:Ll}=Rn(),{parseIdentifier:Hl}=ft(),{checkImportsExportsFieldTarget:ql}=ye(),Wl=".".charCodeAt(0);or.exports=class{constructor(e,t,s,i,r){this.source=e,this.targetFile=i,this.targetPackage=r,this.conditionNames=t,this.fieldName=s,this.fieldProcessorCache=new WeakMap}apply(e){let t=e.ensureHook(this.targetFile),s=e.ensureHook(this.targetPackage);e.getHook(this.source).tapAsync("ImportsFieldPlugin",(i,r,o)=>{if(!i.descriptionFilePath||i.request===void 0)return o();let c=i.request+i.query+i.fragment,a=jl.getField(i.descriptionFileData,this.fieldName);if(!a)return o();if(i.directory)return o(new Error(`Resolving to directories is not possible with the imports field (request was ${c}/)`));let l;try{let u=this.fieldProcessorCache.get(i.descriptionFileData);u===void 0&&(u=Ll(a),this.fieldProcessorCache.set(i.descriptionFileData,u)),l=u(c,this.conditionNames)}catch(u){return r.log&&r.log(`Imports field in ${i.descriptionFilePath} can't be processed: ${u}`),o(u)}if(l.length===0)return o(new Error(`Package import ${c} is not imported from package ${i.descriptionFileRoot} (see imports field in ${i.descriptionFilePath})`));Nl(l,(u,f)=>{let h=Hl(u);if(!h)return f();let[d,g,p]=h,m=ql(d);if(m)return f(m);switch(d.charCodeAt(0)){case Wl:{let y={...i,request:void 0,path:$l.join(i.descriptionFileRoot,d),relativePath:d,query:g,fragment:p};e.doResolve(t,y,"using imports field: "+u,r,f);break}default:{let y={...i,request:d,relativePath:d,fullySpecified:!0,query:g,fragment:p};e.doResolve(s,y,"using imports field: "+u,r,f)}}},(u,f)=>o(u,f||null))})}}});var lr=w((Bd,ar)=>{"use strict";var Bl="@".charCodeAt(0);ar.exports=class{constructor(e,t){this.source=e,this.target=t}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("JoinRequestPartPlugin",(s,i,r)=>{let o=s.request||"",c=o.indexOf("/",3);c>=0&&o.charCodeAt(2)===Bl&&(c=o.indexOf("/",c+1));let a,l,u;c<0?(a=o,l=".",u=!1):(a=o.slice(0,c),l="."+o.slice(c),u=s.fullySpecified);let f={...s,path:e.join(s.path,a),relativePath:s.relativePath&&e.join(s.relativePath,a),request:l,fullySpecified:u};e.doResolve(t,f,null,i,r)})}}});var fr=w((Jd,ur)=>{"use strict";ur.exports=class{constructor(e,t){this.source=e,this.target=t}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("JoinRequestPlugin",(s,i,r)=>{let o=s.path,c=s.request,a={...s,path:e.join(o,c),relativePath:s.relativePath&&e.join(s.relativePath,c),request:void 0};e.doResolve(t,a,null,i,r)})}}});var pr=w((Gd,dr)=>{"use strict";var Ul=require("path"),Jl=ve(),hr=Symbol("alreadyTriedMainField");dr.exports=class{constructor(e,t,s){this.source=e,this.options=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("MainFieldPlugin",(s,i,r)=>{if(s.path!==s.descriptionFileRoot||s[hr]===s.descriptionFilePath||!s.descriptionFilePath)return r();let o=Ul.basename(s.descriptionFilePath),c=Jl.getField(s.descriptionFileData,this.options.name);if(!c||typeof c!="string"||c==="."||c==="./")return r();this.options.forceRelative&&!/^\.\.?\//.test(c)&&(c="./"+c);let a={...s,request:c,module:!1,directory:c.endsWith("/"),[hr]:s.descriptionFilePath};return e.doResolve(t,a,"use "+c+" from "+this.options.name+" in "+o,i,r)})}}});var pt=w((Yd,Fn)=>{"use strict";Fn.exports=function(e){if(e==="/")return{paths:["/"],segments:[""]};let t=e.split(/(.*?[\\/]+)/),s=[e],i=[t[t.length-1]],r=t[t.length-1];e=e.substring(0,e.length-r.length-1);for(let o=t.length-2;o>2;o-=2)s.push(e),r=t[o],e=e.substring(0,e.length-r.length)||"/",i.push(r.slice(0,-1));return r=t[1],i.push(r),s.push(r),{paths:s,segments:i}};Fn.exports.basename=function(e){let t=e.lastIndexOf("/"),s=e.lastIndexOf("\\"),i=t<0?s:s<0?t:t<s?s:t;return i<0?null:e.slice(i+1)}});var mr=w((Kd,gr)=>{"use strict";var zl=se(),Gl=pt();gr.exports=class{constructor(e,t,s){this.source=e,this.directories=[].concat(t),this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("ModulesInHierarchicalDirectoriesPlugin",(s,i,r)=>{let o=e.fileSystem,c=Gl(s.path).paths.map(a=>this.directories.map(l=>e.join(a,l))).reduce((a,l)=>(a.push.apply(a,l),a),[]);zl(c,(a,l)=>{o.stat(a,(u,f)=>{if(!u&&f&&f.isDirectory()){let h={...s,path:a,request:"./"+s.request,module:!1},d="looking for modules in "+a;return e.doResolve(t,h,d,i,l)}return i.log&&i.log(a+" doesn't exist or is not a directory"),i.missingDependencies&&i.missingDependencies.add(a),l()})},r)})}}});var vr=w((Zd,yr)=>{"use strict";yr.exports=class{constructor(e,t,s){this.source=e,this.path=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("ModulesInRootPlugin",(s,i,r)=>{let o={...s,path:this.path,request:"./"+s.request,module:!1};e.doResolve(t,o,"looking for modules in "+this.path,i,r)})}}});var Sr=w((ep,wr)=>{"use strict";wr.exports=class{constructor(e,t){this.source=e,this.target=t}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("NextPlugin",(s,i,r)=>{e.doResolve(t,s,null,i,r)})}}});var _r=w((np,br)=>{"use strict";br.exports=class{constructor(e,t,s){this.source=e,this.requestOptions=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("ParsePlugin",(s,i,r)=>{let o=e.parse(s.request),c={...s,...o,...this.requestOptions};if(s.query&&!o.query&&(c.query=s.query),s.fragment&&!o.fragment&&(c.fragment=s.fragment),o&&i.log&&(o.module&&i.log("Parsed request is a module"),o.directory&&i.log("Parsed request is a directory")),c.request&&!c.query&&c.fragment){let a=c.fragment.endsWith("/"),l={...c,directory:a,request:c.request+(c.directory?"/":"")+(a?c.fragment.slice(0,-1):c.fragment),fragment:""};e.doResolve(t,l,null,i,(u,f)=>{if(u)return r(u);if(f)return r(null,f);e.doResolve(t,c,null,i,r)});return}e.doResolve(t,c,null,i,r)})}}});var xr=w((ip,Pr)=>{"use strict";Pr.exports=class{constructor(e,t,s){this.source=e,this.pnpApi=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("PnpPlugin",(s,i,r)=>{let o=s.request;if(!o)return r();let c=`${s.path}/`,a=/^(@[^/]+\/)?[^/]+/.exec(o);if(!a)return r();let l=a[0],u=`.${o.slice(l.length)}`,f,h;try{f=this.pnpApi.resolveToUnqualified(l,c,{considerBuiltins:!1}),i.fileDependencies&&(h=this.pnpApi.resolveToUnqualified("pnpapi",c,{considerBuiltins:!1}))}catch(g){if(g.code==="MODULE_NOT_FOUND"&&g.pnpCode==="UNDECLARED_DEPENDENCY"){if(i.log){i.log("request is not managed by the pnpapi");for(let p of g.message.split(`
`).filter(Boolean))i.log(`  ${p}`)}return r()}return r(g)}if(f===l)return r();h&&i.fileDependencies&&i.fileDependencies.add(h);let d={...s,path:f,request:u,ignoreSymlinks:!0,fullySpecified:s.fullySpecified&&u!=="."};e.doResolve(t,d,`resolved by pnp to ${f}`,i,(g,p)=>g?r(g):p?r(null,p):r(null,null))})}}});var kr=w((op,Er)=>{"use strict";var Yl="/".charCodeAt(0),Vl="\\".charCodeAt(0),Kl=(n,e)=>{if(!n.startsWith(e))return!1;if(n.length===e.length)return!0;let t=n.charCodeAt(e.length);return t===Yl||t===Vl};Er.exports=class{constructor(e,t){this.source=e,this.restrictions=t}apply(e){e.getHook(this.source).tapAsync("RestrictionsPlugin",(t,s,i)=>{if(typeof t.path=="string"){let r=t.path;for(let o of this.restrictions)if(typeof o=="string"){if(!Kl(r,o))return s.log&&s.log(`${r} is not inside of the restriction ${o}`),i(null,null)}else if(!o.test(r))return s.log&&s.log(`${r} doesn't match the restriction ${o}`),i(null,null)}i()})}}});var Rr=w((ap,Ar)=>{"use strict";Ar.exports=class{constructor(e){this.source=e}apply(e){this.source.tapAsync("ResultPlugin",(t,s,i)=>{let r={...t};s.log&&s.log("reporting result "+r.path),e.hooks.result.callAsync(r,s,o=>{if(o)return i(o);typeof s.yield=="function"?(s.yield(r),i(null,null)):i(null,r)})})}}});var Cr=w((lp,Fr)=>{"use strict";var Ql=se(),Cn=class{constructor(e,t,s){this.roots=Array.from(t),this.source=e,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("RootsPlugin",(s,i,r)=>{let o=s.request;if(!o||!o.startsWith("/"))return r();Ql(this.roots,(c,a)=>{let l=e.join(c,o.slice(1)),u={...s,path:l,relativePath:s.relativePath&&l};e.doResolve(t,u,`root path ${c}`,i,a)},r)})}};Fr.exports=Cn});var Mr=w((fp,Or)=>{"use strict";var Tr=ve(),Zl="/".charCodeAt(0);Or.exports=class{constructor(e,t,s){this.source=e,this.target=s,this.fieldName=t}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("SelfReferencePlugin",(s,i,r)=>{if(!s.descriptionFilePath)return r();let o=s.request;if(!o||!Tr.getField(s.descriptionFileData,this.fieldName))return r();let a=Tr.getField(s.descriptionFileData,"name");if(typeof a!="string")return r();if(o.startsWith(a)&&(o.length===a.length||o.charCodeAt(a.length)===Zl)){let l=`.${o.slice(a.length)}`,u={...s,request:l,path:s.descriptionFileRoot,relativePath:"."};e.doResolve(t,u,"self reference",i,r)}else return r()})}}});var $r=w((dp,Ir)=>{"use strict";var Xl=se(),eu=pt(),{getType:tu,PathType:Dr}=ye();Ir.exports=class{constructor(e,t){this.source=e,this.target=t}apply(e){let t=e.ensureHook(this.target),s=e.fileSystem;e.getHook(this.source).tapAsync("SymlinkPlugin",(i,r,o)=>{if(i.ignoreSymlinks)return o();let c=eu(i.path),a=c.segments,l=c.paths,u=!1,f=-1;Xl(l,(h,d)=>{f++,r.fileDependencies&&r.fileDependencies.add(h),s.readlink(h,(g,p)=>{if(!g&&p){a[f]=p,u=!0;let m=tu(p.toString());if(m===Dr.AbsoluteWin||m===Dr.AbsolutePosix)return d(null,f)}d()})},(h,d)=>{if(!u)return o();let p=(typeof d=="number"?a.slice(0,d+1):a.slice()).reduceRight((y,x)=>e.join(y,x)),m={...i,path:p};e.doResolve(t,m,"resolved symlink to "+p,r,o)})})}}});var Nr=w((gp,jr)=>{"use strict";jr.exports=class{constructor(e,t,s){this.source=e,this.message=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("TryNextPlugin",(s,i,r)=>{e.doResolve(t,s,this.message,i,r)})}}});var Hr=w((yp,Lr)=>{"use strict";function nu(n,e,t){return JSON.stringify({type:n,context:t?e.context:"",path:e.path,query:e.query,fragment:e.fragment,request:e.request})}Lr.exports=class{constructor(e,t,s,i,r){this.source=e,this.filterPredicate=t,this.withContext=i,this.cache=s,this.target=r}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("UnsafeCachePlugin",(s,i,r)=>{if(!this.filterPredicate(s))return r();let o=typeof i.yield=="function",c=nu(o?"yield":"default",s,this.withContext),a=this.cache[c];if(a){if(o){let h=i.yield;if(Array.isArray(a))for(let d of a)h(d);else h(a);return r(null,null)}return r(null,a)}let l,u,f=[];o&&(l=i.yield,u=h=>{f.push(h)}),e.doResolve(t,s,null,u?{...i,yield:u}:i,(h,d)=>{if(h)return r(h);if(o){d&&f.push(d);for(let g of f)l(g);return this.cache[c]=f,r(null,null)}if(d)return r(null,this.cache[c]=d);r()})})}}});var Wr=w((wp,qr)=>{"use strict";qr.exports=class{constructor(e,t,s){this.source=e,this.filename=t,this.target=s}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("UseFilePlugin",(s,i,r)=>{let o=e.join(s.path,this.filename),c={...s,path:o,relativePath:s.relativePath&&e.join(s.relativePath,this.filename)};e.doResolve(t,c,"using path: "+o,i,r)})}}});var Qr=w(Kr=>{"use strict";var su=require("process").versions,iu=ki(),{getType:ru,PathType:Br}=ye(),ou=Ri(),Ur=Di(),Tn=Ni(),cu=Hi(),Fe=Wi(),qe=Ji(),Jr=Gi(),au=tr(),lu=sr(),uu=rr(),fu=cr(),hu=lr(),gt=fr(),du=pr(),zr=mr(),pu=vr(),ee=Sr(),Gr=_r(),gu=xr(),mu=kr(),yu=Rr(),vu=Cr(),wu=Mr(),Su=$r(),bu=Nr(),_u=Hr(),Yr=Wr();function Pu(n){return n===void 0&&su.pnp?require("pnpapi"):n||null}function Vr(n){return typeof n=="object"&&!Array.isArray(n)&&n!==null?Object.keys(n).map(e=>{let t={name:e,onlyModule:!1,alias:n[e]};return/\$$/.test(e)&&(t.onlyModule=!0,t.name=e.slice(0,-1)),t}):n||[]}function xu(n){let e=new Set(n.mainFields||["main"]),t=[];for(let s of e)typeof s=="string"?t.push({name:[s],forceRelative:!0}):Array.isArray(s)?t.push({name:s,forceRelative:!0}):t.push({name:Array.isArray(s.name)?s.name:[s.name],forceRelative:s.forceRelative});return{alias:Vr(n.alias),fallback:Vr(n.fallback),aliasFields:new Set(n.aliasFields),cachePredicate:n.cachePredicate||function(){return!0},cacheWithContext:typeof n.cacheWithContext<"u"?n.cacheWithContext:!0,exportsFields:new Set(n.exportsFields||["exports"]),importsFields:new Set(n.importsFields||["imports"]),conditionNames:new Set(n.conditionNames),descriptionFiles:Array.from(new Set(n.descriptionFiles||["package.json"])),enforceExtension:n.enforceExtension===void 0?!!(n.extensions&&n.extensions.includes("")):n.enforceExtension,extensions:new Set(n.extensions||[".js",".json",".node"]),extensionAlias:n.extensionAlias?Object.keys(n.extensionAlias).map(s=>({extension:s,alias:n.extensionAlias[s]})):[],fileSystem:n.useSyncFileSystemCalls?new ou(n.fileSystem):n.fileSystem,unsafeCache:n.unsafeCache&&typeof n.unsafeCache!="object"?{}:n.unsafeCache||!1,symlinks:typeof n.symlinks<"u"?n.symlinks:!0,resolver:n.resolver,modules:Eu(Array.isArray(n.modules)?n.modules:n.modules?[n.modules]:["node_modules"],s=>{let i=ru(s);return i===Br.Normal||i===Br.Relative}),mainFields:t,mainFiles:new Set(n.mainFiles||["index"]),plugins:n.plugins||[],pnpApi:Pu(n.pnpApi),roots:new Set(n.roots||void 0),fullySpecified:n.fullySpecified||!1,resolveToContext:n.resolveToContext||!1,preferRelative:n.preferRelative||!1,preferAbsolute:n.preferAbsolute||!1,restrictions:new Set(n.restrictions)}}Kr.createResolver=function(n){let e=xu(n),{alias:t,fallback:s,aliasFields:i,cachePredicate:r,cacheWithContext:o,conditionNames:c,descriptionFiles:a,enforceExtension:l,exportsFields:u,extensionAlias:f,importsFields:h,extensions:d,fileSystem:g,fullySpecified:p,mainFields:m,mainFiles:y,modules:x,plugins:E,pnpApi:T,resolveToContext:H,preferRelative:N,preferAbsolute:$,symlinks:U,unsafeCache:b,resolver:k,restrictions:A,roots:j}=e,v=E.slice(),P=k||new iu(g,e);P.ensureHook("resolve"),P.ensureHook("internalResolve"),P.ensureHook("newInternalResolve"),P.ensureHook("parsedResolve"),P.ensureHook("describedResolve"),P.ensureHook("rawResolve"),P.ensureHook("normalResolve"),P.ensureHook("internal"),P.ensureHook("rawModule"),P.ensureHook("module"),P.ensureHook("resolveAsModule"),P.ensureHook("undescribedResolveInPackage"),P.ensureHook("resolveInPackage"),P.ensureHook("resolveInExistingDirectory"),P.ensureHook("relative"),P.ensureHook("describedRelative"),P.ensureHook("directory"),P.ensureHook("undescribedExistingDirectory"),P.ensureHook("existingDirectory"),P.ensureHook("undescribedRawFile"),P.ensureHook("rawFile"),P.ensureHook("file"),P.ensureHook("finalFile"),P.ensureHook("existingFile"),P.ensureHook("resolved"),P.hooks.newInteralResolve=P.hooks.newInternalResolve;for(let{source:S,resolveOptions:R}of[{source:"resolve",resolveOptions:{fullySpecified:p}},{source:"internal-resolve",resolveOptions:{fullySpecified:!1}}])b?(v.push(new _u(S,r,b,o,`new-${S}`)),v.push(new Gr(`new-${S}`,R,"parsed-resolve"))):v.push(new Gr(S,R,"parsed-resolve"));v.push(new qe("parsed-resolve",a,!1,"described-resolve")),v.push(new ee("after-parsed-resolve","described-resolve")),v.push(new ee("described-resolve","raw-resolve")),s.length>0&&v.push(new Tn("described-resolve",s,"internal-resolve")),t.length>0&&v.push(new Tn("raw-resolve",t,"internal-resolve")),i.forEach(S=>{v.push(new Ur("raw-resolve",S,"internal-resolve"))}),f.forEach(S=>v.push(new lu("raw-resolve",S,"normal-resolve"))),v.push(new ee("raw-resolve","normal-resolve")),N&&v.push(new gt("after-normal-resolve","relative")),v.push(new Fe("after-normal-resolve",{module:!0},"resolve as module",!1,"raw-module")),v.push(new Fe("after-normal-resolve",{internal:!0},"resolve as internal import",!1,"internal")),$&&v.push(new gt("after-normal-resolve","relative")),j.size>0&&v.push(new vu("after-normal-resolve",j,"relative")),!N&&!$&&v.push(new gt("after-normal-resolve","relative")),h.forEach(S=>{v.push(new fu("internal",c,S,"relative","internal-resolve"))}),u.forEach(S=>{v.push(new wu("raw-module",S,"resolve-as-module"))}),x.forEach(S=>{Array.isArray(S)?S.includes("node_modules")&&T?(v.push(new zr("raw-module",S.filter(R=>R!=="node_modules"),"module")),v.push(new gu("raw-module",T,"undescribed-resolve-in-package"))):v.push(new zr("raw-module",S,"module")):v.push(new pu("raw-module",S,"module"))}),v.push(new hu("module","resolve-as-module")),H||v.push(new Fe("resolve-as-module",{directory:!1,request:"."},"single file module",!0,"undescribed-raw-file")),v.push(new Jr("resolve-as-module","undescribed-resolve-in-package")),v.push(new qe("undescribed-resolve-in-package",a,!1,"resolve-in-package")),v.push(new ee("after-undescribed-resolve-in-package","resolve-in-package")),u.forEach(S=>{v.push(new au("resolve-in-package",c,S,"relative"))}),v.push(new ee("resolve-in-package","resolve-in-existing-directory")),v.push(new gt("resolve-in-existing-directory","relative")),v.push(new qe("relative",a,!0,"described-relative")),v.push(new ee("after-relative","described-relative")),H?v.push(new ee("described-relative","directory")):(v.push(new Fe("described-relative",{directory:!1},null,!0,"raw-file")),v.push(new Fe("described-relative",{fullySpecified:!1},"as directory",!0,"directory"))),v.push(new Jr("directory","undescribed-existing-directory")),H?v.push(new ee("undescribed-existing-directory","resolved")):(v.push(new qe("undescribed-existing-directory",a,!1,"existing-directory")),y.forEach(S=>{v.push(new Yr("undescribed-existing-directory",S,"undescribed-raw-file"))}),m.forEach(S=>{v.push(new du("existing-directory",S,"resolve-in-existing-directory"))}),y.forEach(S=>{v.push(new Yr("existing-directory",S,"undescribed-raw-file"))}),v.push(new qe("undescribed-raw-file",a,!0,"raw-file")),v.push(new ee("after-undescribed-raw-file","raw-file")),v.push(new Fe("raw-file",{fullySpecified:!0},null,!1,"file")),l||v.push(new bu("raw-file","no extension","file")),d.forEach(S=>{v.push(new cu("raw-file",S,"file"))}),t.length>0&&v.push(new Tn("file",t,"internal-resolve")),i.forEach(S=>{v.push(new Ur("file",S,"internal-resolve"))}),v.push(new ee("file","final-file")),v.push(new uu("final-file","existing-file")),U&&v.push(new Su("existing-file","existing-file")),v.push(new ee("existing-file","resolved")));let O=P.hooks.resolved;A.size>0&&v.push(new mu(O,A)),v.push(new yu(O));for(let S of v)typeof S=="function"?S.call(P,P):S&&S.apply(P);return P};function Eu(n,e){let t=[],s=new Set(n);for(let i of s)if(e(i)){let r=t.length>0?t[t.length-1]:void 0;Array.isArray(r)?r.push(i):t.push([i])}else t.push(i);return t}});var Xr=w((_p,Zr)=>{"use strict";var ku=pt().basename;Zr.exports=class{constructor(e,t){this.source=e,this.target=t}apply(e){let t=e.ensureHook(this.target);e.getHook(this.source).tapAsync("CloneBasenamePlugin",(s,i,r)=>{let o=s.path,c=ku(o),a=e.join(o,c),l={...s,path:a,relativePath:s.relativePath&&e.join(s.relativePath,c)};e.doResolve(t,l,"using path: "+a,i,r)})}}});var to=w((xp,eo)=>{"use strict";eo.exports=class{constructor(e){this.source=e}apply(e){let t=this.source;e.getHook(this.source).tapAsync("LogInfoPlugin",(s,i,r)=>{if(!i.log)return r();let o=i.log,c="["+t+"] ";s.path&&o(c+"Resolving in directory: "+s.path),s.request&&o(c+"Resolving request: "+s.request),s.module&&o(c+"Request is an module request."),s.directory&&o(c+"Request is a directory request."),s.query&&o(c+"Resolving request query: "+s.query),s.fragment&&o(c+"Resolving request fragment: "+s.fragment),s.descriptionFilePath&&o(c+"Has description data from "+s.descriptionFilePath),s.relativePath&&o(c+"Relative path from description file is: "+s.relativePath),r()})}}});var ro=w((Ep,io)=>{"use strict";var Au=ms(),so=bs(),We=Qr(),mt=new so(Au,4e3),yt={environments:["node+es3+es5+process+native"]},Ru=We.createResolver({conditionNames:["node"],extensions:[".js",".json",".node"],fileSystem:mt}),Fu=(n,e,t,s,i)=>{typeof n=="string"&&(i=s,s=t,t=e,e=n,n=yt),typeof i!="function"&&(i=s),Ru.resolve(n,e,t,s,i)},Cu=We.createResolver({conditionNames:["node"],extensions:[".js",".json",".node"],useSyncFileSystemCalls:!0,fileSystem:mt}),Tu=(n,e,t)=>(typeof n=="string"&&(t=e,e=n,n=yt),Cu.resolveSync(n,e,t));function Ou(n){let e=We.createResolver({fileSystem:mt,...n});return function(t,s,i,r,o){typeof t=="string"&&(o=r,r=i,i=s,s=t,t=yt),typeof o!="function"&&(o=r),e.resolve(t,s,i,r,o)}}function Mu(n){let e=We.createResolver({useSyncFileSystemCalls:!0,fileSystem:mt,...n});return function(t,s,i){return typeof t=="string"&&(i=s,s=t,t=yt),e.resolveSync(t,s,i)}}var no=(n,e)=>{let t=Object.getOwnPropertyDescriptors(e);return Object.defineProperties(n,t),Object.freeze(n)};io.exports=no(Fu,{get sync(){return Tu},create:no(Ou,{get sync(){return Mu}}),ResolverFactory:We,CachedInputFileSystem:so,get CloneBasenamePlugin(){return Xr()},get LogInfoPlugin(){return to()},get forEachBail(){return se()}})});var uo=w((kp,lo)=>{"use strict";lo.exports=co;function co(n,e,t){n instanceof RegExp&&(n=oo(n,t)),e instanceof RegExp&&(e=oo(e,t));var s=ao(n,e,t);return s&&{start:s[0],end:s[1],pre:t.slice(0,s[0]),body:t.slice(s[0]+n.length,s[1]),post:t.slice(s[1]+e.length)}}function oo(n,e){var t=e.match(n);return t?t[0]:null}co.range=ao;function ao(n,e,t){var s,i,r,o,c,a=t.indexOf(n),l=t.indexOf(e,a+1),u=a;if(a>=0&&l>0){if(n===e)return[a,l];for(s=[],r=t.length;u>=0&&!c;)u==a?(s.push(u),a=t.indexOf(n,u+1)):s.length==1?c=[s.pop(),l]:(i=s.pop(),i<r&&(r=i,o=l),l=t.indexOf(e,u+1)),u=a<l&&a>=0?a:l;s.length&&(c=[r,o])}return c}});var wo=w((Ap,vo)=>{"use strict";var fo=uo();vo.exports=$u;var ho="\0SLASH"+Math.random()+"\0",po="\0OPEN"+Math.random()+"\0",Mn="\0CLOSE"+Math.random()+"\0",go="\0COMMA"+Math.random()+"\0",mo="\0PERIOD"+Math.random()+"\0";function On(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function Du(n){return n.split("\\\\").join(ho).split("\\{").join(po).split("\\}").join(Mn).split("\\,").join(go).split("\\.").join(mo)}function Iu(n){return n.split(ho).join("\\").split(po).join("{").split(Mn).join("}").split(go).join(",").split(mo).join(".")}function yo(n){if(!n)return[""];var e=[],t=fo("{","}",n);if(!t)return n.split(",");var s=t.pre,i=t.body,r=t.post,o=s.split(",");o[o.length-1]+="{"+i+"}";var c=yo(r);return r.length&&(o[o.length-1]+=c.shift(),o.push.apply(o,c)),e.push.apply(e,o),e}function $u(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),Be(Du(n),!0).map(Iu)):[]}function ju(n){return"{"+n+"}"}function Nu(n){return/^-?0\d/.test(n)}function Lu(n,e){return n<=e}function Hu(n,e){return n>=e}function Be(n,e){var t=[],s=fo("{","}",n);if(!s)return[n];var i=s.pre,r=s.post.length?Be(s.post,!1):[""];if(/\$$/.test(s.pre))for(var o=0;o<r.length;o++){var c=i+"{"+s.body+"}"+r[o];t.push(c)}else{var a=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),u=a||l,f=s.body.indexOf(",")>=0;if(!u&&!f)return s.post.match(/,.*\}/)?(n=s.pre+"{"+s.body+Mn+s.post,Be(n)):[n];var h;if(u)h=s.body.split(/\.\./);else if(h=yo(s.body),h.length===1&&(h=Be(h[0],!1).map(ju),h.length===1))return r.map(function(k){return s.pre+h[0]+k});var d;if(u){var g=On(h[0]),p=On(h[1]),m=Math.max(h[0].length,h[1].length),y=h.length==3?Math.abs(On(h[2])):1,x=Lu,E=p<g;E&&(y*=-1,x=Hu);var T=h.some(Nu);d=[];for(var H=g;x(H,p);H+=y){var N;if(l)N=String.fromCharCode(H),N==="\\"&&(N="");else if(N=String(H),T){var $=m-N.length;if($>0){var U=new Array($+1).join("0");H<0?N="-"+U+N.slice(1):N=U+N}}d.push(N)}}else{d=[];for(var b=0;b<h.length;b++)d.push.apply(d,Be(h[b],!1))}for(var b=0;b<d.length;b++)for(var o=0;o<r.length;o++){var c=i+d[b]+r[o];(!e||u||c)&&t.push(c)}}return t}});var jo=w(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.IstanbulCoverageContext=Oe.IstanbulMissingCoverageError=void 0;var Do=require("fs"),kf=require("path"),ie=require("vscode"),$o="coverage-final.json",xt=class extends Error{constructor(e,t){super(`Could not read ${$o} in ${e}. Make sure the test was run with "json" coverage enabled: ${t}`)}};Oe.IstanbulMissingCoverageError=xt;var Hn=class{constructor(e){this.defaultOptions={removeCoverageDataAtEndOfRun:!0,booleanCounts:!1},this.loadDetailedCoverage=async(t,s)=>{if(!(s instanceof Et))return[];let i=s.options,r=[],o=[];for(let[c,a]of Object.entries(s.original.branchMap))o.push(Promise.all([Ve(i,s.compiledUri,a.loc),...a.locations.map(l=>l.start.line!==void 0?Ve(i,s.compiledUri,l):Ve(i,s.compiledUri,{start:a.loc.end,end:a.loc.end}))]).then(([l,...u])=>{if(!(!l||u.some(f=>!f))){let f=0,h=[];for(let[d,g]of u.entries()){let p=s.original.b[c][d];f+=p,h.push(new ie.BranchCoverage(Pt(i,p),g,a.type==="if"?d===0?"if":"else":void 0))}r.push(new ie.StatementCoverage(Pt(i,f),l,h))}}));for(let[c,a]of Object.entries(s.original.statementMap))o.push(Ve(i,s.compiledUri,a).then(l=>{l&&r.push(new ie.StatementCoverage(Pt(i,s.original.s[c]),l))}));for(let[c,a]of Object.entries(s.original.fnMap))o.push(Ve(i,s.compiledUri,a.loc).then(l=>{l&&r.push(new ie.DeclarationCoverage(a.name,Pt(i,s.original.f[c]),l))}));return await Promise.all(o),r},Object.assign(this.defaultOptions,e)}async apply(e,t,s){let i;try{i=JSON.parse(await Do.promises.readFile((0,kf.join)(t,$o),"utf-8"))}catch(o){throw new xt(t,o)}let r={...this.defaultOptions,...s};if(r.removeCoverageDataAtEndOfRun){let o=e.onDidDispose(()=>{o.dispose(),Do.promises.rm(t,{recursive:!0}).catch(()=>{})})}return this.applyJson(e,i,r)}async applyJson(e,t,s){let i={...this.defaultOptions,...s};await Promise.all(Object.values(t).map(async r=>{let o=ie.Uri.file(r.path),c=i.mapFileUri?await i.mapFileUri?.(o):o;c&&e.addCoverage(new Et(c,r,o,i))}))}};Oe.IstanbulCoverageContext=Hn;var Ve=async(n,e,t)=>{let[s,i]=await Promise.all([Io(n,e,t.start),Io(n,e,t.end)]);if(s&&i)return new ie.Range(s.range.start,i.range.end);let r=s||i;if(r)return r.range},Io=async(n,e,t)=>{let s=new ie.Position(t.line-1,t.column);return n.mapLocation?.(e,s)||new ie.Location(e,s)},Pt=(n,e)=>n.booleanCounts?e>0:e,Et=class extends ie.FileCoverage{constructor(e,t,s,i){super(e,Ln(t.s),Ln(t.b),Ln(t.f)),this.original=t,this.compiledUri=s,this.options=i}},Ln=n=>{let e=0,t=0;for(let s of Object.values(n))if(s instanceof Array)for(let i of s)e+=i?1:0,t++;else e+=s?1:0,t++;return new ie.TestCoverageCount(e,t)}});var Go=w(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0})});var Vo=w(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.MochaEvent=void 0;var Yo;(function(n){n.Start="start",n.TestStart="testStart",n.Pass="pass",n.Fail="fail",n.End="end",n.SuiteStart="suiteStart"})(Yo||(Tt.MochaEvent=Yo={}))});var Qo=w(re=>{"use strict";var Of=re&&re.__createBinding||(Object.create?function(n,e,t,s){s===void 0&&(s=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,s,i)}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}),Ko=re&&re.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Of(e,n,t)};Object.defineProperty(re,"__esModule",{value:!0});re.defineConfig=void 0;Ko(Go(),re);Ko(Vo(),re);var Mf=n=>n;re.defineConfig=Mf});var Xo=w((xg,Zo)=>{"use strict";Zo.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Un=w((Eg,tc)=>{"use strict";var Ke=Xo(),ec={};for(let n of Object.keys(Ke))ec[Ke[n]]=n;var _={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};tc.exports=_;for(let n of Object.keys(_)){if(!("channels"in _[n]))throw new Error("missing channels property: "+n);if(!("labels"in _[n]))throw new Error("missing channel labels property: "+n);if(_[n].labels.length!==_[n].channels)throw new Error("channel and label counts mismatch: "+n);let{channels:e,labels:t}=_[n];delete _[n].channels,delete _[n].labels,Object.defineProperty(_[n],"channels",{value:e}),Object.defineProperty(_[n],"labels",{value:t})}_.rgb.hsl=function(n){let e=n[0]/255,t=n[1]/255,s=n[2]/255,i=Math.min(e,t,s),r=Math.max(e,t,s),o=r-i,c,a;r===i?c=0:e===r?c=(t-s)/o:t===r?c=2+(s-e)/o:s===r&&(c=4+(e-t)/o),c=Math.min(c*60,360),c<0&&(c+=360);let l=(i+r)/2;return r===i?a=0:l<=.5?a=o/(r+i):a=o/(2-r-i),[c,a*100,l*100]};_.rgb.hsv=function(n){let e,t,s,i,r,o=n[0]/255,c=n[1]/255,a=n[2]/255,l=Math.max(o,c,a),u=l-Math.min(o,c,a),f=function(h){return(l-h)/6/u+1/2};return u===0?(i=0,r=0):(r=u/l,e=f(o),t=f(c),s=f(a),o===l?i=s-t:c===l?i=1/3+e-s:a===l&&(i=2/3+t-e),i<0?i+=1:i>1&&(i-=1)),[i*360,r*100,l*100]};_.rgb.hwb=function(n){let e=n[0],t=n[1],s=n[2],i=_.rgb.hsl(n)[0],r=1/255*Math.min(e,Math.min(t,s));return s=1-1/255*Math.max(e,Math.max(t,s)),[i,r*100,s*100]};_.rgb.cmyk=function(n){let e=n[0]/255,t=n[1]/255,s=n[2]/255,i=Math.min(1-e,1-t,1-s),r=(1-e-i)/(1-i)||0,o=(1-t-i)/(1-i)||0,c=(1-s-i)/(1-i)||0;return[r*100,o*100,c*100,i*100]};function Df(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}_.rgb.keyword=function(n){let e=ec[n];if(e)return e;let t=1/0,s;for(let i of Object.keys(Ke)){let r=Ke[i],o=Df(n,r);o<t&&(t=o,s=i)}return s};_.keyword.rgb=function(n){return Ke[n]};_.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,s=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;let i=e*.4124+t*.3576+s*.1805,r=e*.2126+t*.7152+s*.0722,o=e*.0193+t*.1192+s*.9505;return[i*100,r*100,o*100]};_.rgb.lab=function(n){let e=_.rgb.xyz(n),t=e[0],s=e[1],i=e[2];t/=95.047,s/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let r=116*s-16,o=500*(t-s),c=200*(s-i);return[r,o,c]};_.hsl.rgb=function(n){let e=n[0]/360,t=n[1]/100,s=n[2]/100,i,r,o;if(t===0)return o=s*255,[o,o,o];s<.5?i=s*(1+t):i=s+t-s*t;let c=2*s-i,a=[0,0,0];for(let l=0;l<3;l++)r=e+1/3*-(l-1),r<0&&r++,r>1&&r--,6*r<1?o=c+(i-c)*6*r:2*r<1?o=i:3*r<2?o=c+(i-c)*(2/3-r)*6:o=c,a[l]=o*255;return a};_.hsl.hsv=function(n){let e=n[0],t=n[1]/100,s=n[2]/100,i=t,r=Math.max(s,.01);s*=2,t*=s<=1?s:2-s,i*=r<=1?r:2-r;let o=(s+t)/2,c=s===0?2*i/(r+i):2*t/(s+t);return[e,c*100,o*100]};_.hsv.rgb=function(n){let e=n[0]/60,t=n[1]/100,s=n[2]/100,i=Math.floor(e)%6,r=e-Math.floor(e),o=255*s*(1-t),c=255*s*(1-t*r),a=255*s*(1-t*(1-r));switch(s*=255,i){case 0:return[s,a,o];case 1:return[c,s,o];case 2:return[o,s,a];case 3:return[o,c,s];case 4:return[a,o,s];case 5:return[s,o,c]}};_.hsv.hsl=function(n){let e=n[0],t=n[1]/100,s=n[2]/100,i=Math.max(s,.01),r,o;o=(2-t)*s;let c=(2-t)*i;return r=t*i,r/=c<=1?c:2-c,r=r||0,o/=2,[e,r*100,o*100]};_.hwb.rgb=function(n){let e=n[0]/360,t=n[1]/100,s=n[2]/100,i=t+s,r;i>1&&(t/=i,s/=i);let o=Math.floor(6*e),c=1-s;r=6*e-o,o&1&&(r=1-r);let a=t+r*(c-t),l,u,f;switch(o){default:case 6:case 0:l=c,u=a,f=t;break;case 1:l=a,u=c,f=t;break;case 2:l=t,u=c,f=a;break;case 3:l=t,u=a,f=c;break;case 4:l=a,u=t,f=c;break;case 5:l=c,u=t,f=a;break}return[l*255,u*255,f*255]};_.cmyk.rgb=function(n){let e=n[0]/100,t=n[1]/100,s=n[2]/100,i=n[3]/100,r=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,t*(1-i)+i),c=1-Math.min(1,s*(1-i)+i);return[r*255,o*255,c*255]};_.xyz.rgb=function(n){let e=n[0]/100,t=n[1]/100,s=n[2]/100,i,r,o;return i=e*3.2406+t*-1.5372+s*-.4986,r=e*-.9689+t*1.8758+s*.0415,o=e*.0557+t*-.204+s*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[i*255,r*255,o*255]};_.xyz.lab=function(n){let e=n[0],t=n[1],s=n[2];e/=95.047,t/=100,s/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;let i=116*t-16,r=500*(e-t),o=200*(t-s);return[i,r,o]};_.lab.xyz=function(n){let e=n[0],t=n[1],s=n[2],i,r,o;r=(e+16)/116,i=t/500+r,o=r-s/200;let c=r**3,a=i**3,l=o**3;return r=c>.008856?c:(r-16/116)/7.787,i=a>.008856?a:(i-16/116)/7.787,o=l>.008856?l:(o-16/116)/7.787,i*=95.047,r*=100,o*=108.883,[i,r,o]};_.lab.lch=function(n){let e=n[0],t=n[1],s=n[2],i;i=Math.atan2(s,t)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(t*t+s*s);return[e,o,i]};_.lch.lab=function(n){let e=n[0],t=n[1],i=n[2]/360*2*Math.PI,r=t*Math.cos(i),o=t*Math.sin(i);return[e,r,o]};_.rgb.ansi16=function(n,e=null){let[t,s,i]=n,r=e===null?_.rgb.hsv(n)[2]:e;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(s/255)<<1|Math.round(t/255));return r===2&&(o+=60),o};_.hsv.ansi16=function(n){return _.rgb.ansi16(_.hsv.rgb(n),n[2])};_.rgb.ansi256=function(n){let e=n[0],t=n[1],s=n[2];return e===t&&t===s?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(s/255*5)};_.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let t=(~~(n>50)+1)*.5,s=(e&1)*t*255,i=(e>>1&1)*t*255,r=(e>>2&1)*t*255;return[s,i,r]};_.ansi256.rgb=function(n){if(n>=232){let r=(n-232)*10+8;return[r,r,r]}n-=16;let e,t=Math.floor(n/36)/5*255,s=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,s,i]};_.rgb.hex=function(n){let t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};_.hex.rgb=function(n){let e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(c=>c+c).join(""));let s=parseInt(t,16),i=s>>16&255,r=s>>8&255,o=s&255;return[i,r,o]};_.rgb.hcg=function(n){let e=n[0]/255,t=n[1]/255,s=n[2]/255,i=Math.max(Math.max(e,t),s),r=Math.min(Math.min(e,t),s),o=i-r,c,a;return o<1?c=r/(1-o):c=0,o<=0?a=0:i===e?a=(t-s)/o%6:i===t?a=2+(s-e)/o:a=4+(e-t)/o,a/=6,a%=1,[a*360,o*100,c*100]};_.hsl.hcg=function(n){let e=n[1]/100,t=n[2]/100,s=t<.5?2*e*t:2*e*(1-t),i=0;return s<1&&(i=(t-.5*s)/(1-s)),[n[0],s*100,i*100]};_.hsv.hcg=function(n){let e=n[1]/100,t=n[2]/100,s=e*t,i=0;return s<1&&(i=(t-s)/(1-s)),[n[0],s*100,i*100]};_.hcg.rgb=function(n){let e=n[0]/360,t=n[1]/100,s=n[2]/100;if(t===0)return[s*255,s*255,s*255];let i=[0,0,0],r=e%1*6,o=r%1,c=1-o,a=0;switch(Math.floor(r)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=c,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=c,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=c}return a=(1-t)*s,[(t*i[0]+a)*255,(t*i[1]+a)*255,(t*i[2]+a)*255]};_.hcg.hsv=function(n){let e=n[1]/100,t=n[2]/100,s=e+t*(1-e),i=0;return s>0&&(i=e/s),[n[0],i*100,s*100]};_.hcg.hsl=function(n){let e=n[1]/100,s=n[2]/100*(1-e)+.5*e,i=0;return s>0&&s<.5?i=e/(2*s):s>=.5&&s<1&&(i=e/(2*(1-s))),[n[0],i*100,s*100]};_.hcg.hwb=function(n){let e=n[1]/100,t=n[2]/100,s=e+t*(1-e);return[n[0],(s-e)*100,(1-s)*100]};_.hwb.hcg=function(n){let e=n[1]/100,s=1-n[2]/100,i=s-e,r=0;return i<1&&(r=(s-i)/(1-i)),[n[0],i*100,r*100]};_.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};_.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};_.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};_.gray.hsl=function(n){return[0,0,n[0]]};_.gray.hsv=_.gray.hsl;_.gray.hwb=function(n){return[0,100,n[0]]};_.gray.cmyk=function(n){return[0,0,0,n[0]]};_.gray.lab=function(n){return[n[0],0,0]};_.gray.hex=function(n){let e=Math.round(n[0]/100*255)&255,s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(s.length)+s};_.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]}});var sc=w((kg,nc)=>{"use strict";var Ot=Un();function If(){let n={},e=Object.keys(Ot);for(let t=e.length,s=0;s<t;s++)n[e[s]]={distance:-1,parent:null};return n}function $f(n){let e=If(),t=[n];for(e[n].distance=0;t.length;){let s=t.pop(),i=Object.keys(Ot[s]);for(let r=i.length,o=0;o<r;o++){let c=i[o],a=e[c];a.distance===-1&&(a.distance=e[s].distance+1,a.parent=s,t.unshift(c))}}return e}function jf(n,e){return function(t){return e(n(t))}}function Nf(n,e){let t=[e[n].parent,n],s=Ot[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),s=jf(Ot[e[i].parent][i],s),i=e[i].parent;return s.conversion=t,s}nc.exports=function(n){let e=$f(n),t={},s=Object.keys(e);for(let i=s.length,r=0;r<i;r++){let o=s[r];e[o].parent!==null&&(t[o]=Nf(o,e))}return t}});var rc=w((Ag,ic)=>{"use strict";var Jn=Un(),Lf=sc(),De={},Hf=Object.keys(Jn);function qf(n){let e=function(...t){let s=t[0];return s==null?s:(s.length>1&&(t=s),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function Wf(n){let e=function(...t){let s=t[0];if(s==null)return s;s.length>1&&(t=s);let i=n(t);if(typeof i=="object")for(let r=i.length,o=0;o<r;o++)i[o]=Math.round(i[o]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}Hf.forEach(n=>{De[n]={},Object.defineProperty(De[n],"channels",{value:Jn[n].channels}),Object.defineProperty(De[n],"labels",{value:Jn[n].labels});let e=Lf(n);Object.keys(e).forEach(s=>{let i=e[s];De[n][s]=Wf(i),De[n][s].raw=qf(i)})});ic.exports=De});var fc=w((Rg,uc)=>{"use strict";var oc=(n,e)=>(...t)=>`\x1B[${n(...t)+e}m`,cc=(n,e)=>(...t)=>{let s=n(...t);return`\x1B[${38+e};5;${s}m`},ac=(n,e)=>(...t)=>{let s=n(...t);return`\x1B[${38+e};2;${s[0]};${s[1]};${s[2]}m`},Mt=n=>n,lc=(n,e,t)=>[n,e,t],Ie=(n,e,t)=>{Object.defineProperty(n,e,{get:()=>{let s=t();return Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0}),s},enumerable:!0,configurable:!0})},zn,$e=(n,e,t,s)=>{zn===void 0&&(zn=rc());let i=s?10:0,r={};for(let[o,c]of Object.entries(zn)){let a=o==="ansi16"?"ansi":o;o===e?r[a]=n(t,i):typeof c=="object"&&(r[a]=n(c[e],i))}return r};function Bf(){let n=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[t,s]of Object.entries(e)){for(let[i,r]of Object.entries(s))e[i]={open:`\x1B[${r[0]}m`,close:`\x1B[${r[1]}m`},s[i]=e[i],n.set(r[0],r[1]);Object.defineProperty(e,t,{value:s,enumerable:!1})}return Object.defineProperty(e,"codes",{value:n,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",Ie(e.color,"ansi",()=>$e(oc,"ansi16",Mt,!1)),Ie(e.color,"ansi256",()=>$e(cc,"ansi256",Mt,!1)),Ie(e.color,"ansi16m",()=>$e(ac,"rgb",lc,!1)),Ie(e.bgColor,"ansi",()=>$e(oc,"ansi16",Mt,!0)),Ie(e.bgColor,"ansi256",()=>$e(cc,"ansi256",Mt,!0)),Ie(e.bgColor,"ansi16m",()=>$e(ac,"rgb",lc,!0)),e}Object.defineProperty(uc,"exports",{enumerable:!0,get:Bf})});var gc=w((Fg,pc)=>{"use strict";var{Transform:Uf}=require("stream"),{StringDecoder:Jf}=require("string_decoder"),fe=Symbol("last"),Dt=Symbol("decoder");function zf(n,e,t){let s;if(this.overflow){if(s=this[Dt].write(n).split(this.matcher),s.length===1)return t();s.shift(),this.overflow=!1}else this[fe]+=this[Dt].write(n),s=this[fe].split(this.matcher);this[fe]=s.pop();for(let i=0;i<s.length;i++)try{dc(this,this.mapper(s[i]))}catch(r){return t(r)}if(this.overflow=this[fe].length>this.maxLength,this.overflow&&!this.skipOverflow){t(new Error("maximum buffer reached"));return}t()}function Gf(n){if(this[fe]+=this[Dt].end(),this[fe])try{dc(this,this.mapper(this[fe]))}catch(e){return n(e)}n()}function dc(n,e){e!==void 0&&n.push(e)}function hc(n){return n}function Yf(n,e,t){switch(n=n||/\r?\n/,e=e||hc,t=t||{},arguments.length){case 1:typeof n=="function"?(e=n,n=/\r?\n/):typeof n=="object"&&!(n instanceof RegExp)&&!n[Symbol.split]&&(t=n,n=/\r?\n/);break;case 2:typeof n=="function"?(t=e,e=n,n=/\r?\n/):typeof e=="object"&&(t=e,e=hc)}t=Object.assign({},t),t.autoDestroy=!0,t.transform=zf,t.flush=Gf,t.readableObjectMode=!0;let s=new Uf(t);return s[fe]="",s[Dt]=new Jf("utf8"),s.matcher=n,s.mapper=e,s.maxLength=t.maxLength,s.skipOverflow=t.skipOverflow||!1,s.overflow=!1,s._destroy=function(i,r){this._writableState.errorEmitted=!1,r(i)},s}pc.exports=Yf});var Uc=w(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.dataUriToBuffer=void 0;function Ih(n){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=[];for(let r=0;r<n.length;r+=4){let o=e.indexOf(n.charAt(r)),c=e.indexOf(n.charAt(r+1)),a=n.charAt(r+2)==="="?0:e.indexOf(n.charAt(r+2)),l=n.charAt(r+3)==="="?0:e.indexOf(n.charAt(r+3)),u=o<<2|c>>4,f=(c&15)<<4|a>>2,h=(a&3)<<6|l;t.push(u),n.charAt(r+2)!=="="&&t.push(f),n.charAt(r+3)!=="="&&t.push(h)}let s=new ArrayBuffer(t.length);return new Uint8Array(s).set(t),s}function $h(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let s=0;s<n.length;s++)t[s]=n.charCodeAt(s);return e}function jh(n){if(n=String(n),!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let e=n.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let t=n.substring(5,e).split(";"),s="",i=!1,r=t[0]||"text/plain",o=r;for(let l=1;l<t.length;l++)t[l]==="base64"?i=!0:t[l]&&(o+=`;${t[l]}`,t[l].indexOf("charset=")===0&&(s=t[l].substring(8)));!t[0]&&!s.length&&(o+=";charset=US-ASCII",s="US-ASCII");let c=unescape(n.substring(e+1)),a=i?Ih(c):$h(c);return{type:r,typeFull:o,charset:s,buffer:a}}Wt.dataUriToBuffer=jh});var qh={};ra(qh,{activate:()=>Lh,deactivate:()=>Hh});module.exports=oa(qh);var Ut=W(require("path")),Qc=W(require("timers/promises")),B=W(require("vscode"));var Pe=W(require("vscode")),Jt="extension-test-runner";var he=class{constructor(e,t,s){this.sectionKey=e;this.changeEmitter=new Pe.EventEmitter;this.onDidChange=this.changeEmitter.event;this.changeListener=Pe.workspace.onDidChangeConfiguration(i=>{i.affectsConfiguration(this.key)&&this.setValue(Pe.workspace.getConfiguration(Jt,s).get(e)??t)}),this.setValue(Pe.workspace.getConfiguration(Jt,s).get(e)??t)}get value(){return this._value}get key(){return`${Jt}.${this.sectionKey}`}dispose(){this.changeListener.dispose(),this.changeEmitter.dispose()}setValue(e){this._value=e,this.changeEmitter.fire(this._value)}};var ss="**/.vscode-test.{js,mjs,cjs}",zt="@vscode/test-cli",is={suite:["describe","suite"],test:["it","test"],extractWith:"evaluation"},it="extension-test-runner.showConfigError",rs="extension-test-runner.get-controllers-for-test";var C=W(require("vscode"));var Oo=require("child_process"),jn=W(ro()),xf=W(require("fs"));var Ao=W(wo(),1);var Ue=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var qu={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Je=n=>n.replace(/[[\]\\-]/g,"\\$&"),Wu=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),So=n=>n.join(""),bo=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let s=[],i=[],r=t+1,o=!1,c=!1,a=!1,l=!1,u=t,f="";e:for(;r<n.length;){let p=n.charAt(r);if((p==="!"||p==="^")&&r===t+1){l=!0,r++;continue}if(p==="]"&&o&&!a){u=r+1;break}if(o=!0,p==="\\"&&!a){a=!0,r++;continue}if(p==="["&&!a){for(let[m,[y,x,E]]of Object.entries(qu))if(n.startsWith(m,r)){if(f)return["$.",!1,n.length-t,!0];r+=m.length,E?i.push(y):s.push(y),c=c||x;continue e}}if(a=!1,f){p>f?s.push(Je(f)+"-"+Je(p)):p===f&&s.push(Je(p)),f="",r++;continue}if(n.startsWith("-]",r+1)){s.push(Je(p+"-")),r+=2;continue}if(n.startsWith("-",r+1)){f=p,r+=2;continue}s.push(Je(p)),r++}if(u<r)return["",!1,0,!1];if(!s.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!l){let p=s[0].length===2?s[0].slice(-1):s[0];return[Wu(p),!1,u-t,!1]}let h="["+(l?"^":"")+So(s)+"]",d="["+(l?"":"^")+So(i)+"]";return[s.length&&i.length?"("+h+"|"+d+")":s.length?h:d,c,u-t,!0]};var le=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var Bu=new Set(["!","?","+","*","@"]),_o=n=>Bu.has(n),Uu="(?!(?:^|/)\\.\\.?(?:$|/))",vt="(?!\\.)",Ju=new Set(["[","."]),zu=new Set(["..","."]),Gu=new Set("().*{}+?[]^$\\!"),Yu=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Dn="[^/]",Po=Dn+"*?",xo=Dn+"+?",Ce=class n{type;#n;#s;#i=!1;#e=[];#t;#o;#a;#c=!1;#r;#l;#f=!1;constructor(e,t,s={}){this.type=e,e&&(this.#s=!0),this.#t=t,this.#n=this.#t?this.#t.#n:this,this.#r=this.#n===this?s:this.#n.#r,this.#a=this.#n===this?[]:this.#n.#a,e==="!"&&!this.#n.#c&&this.#a.push(this),this.#o=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#s!==void 0)return this.#s;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#s=!0;return this.#s}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#l=this.#e.map(e=>String(e)).join("")}#d(){if(this!==this.#n)throw new Error("should only call on root");if(this.#c)return this;this.toString(),this.#c=!0;let e;for(;e=this.#a.pop();){if(e.type!=="!")continue;let t=e,s=t.#t;for(;s;){for(let i=t.#o+1;!s.type&&i<s.#e.length;i++)for(let r of e.#e){if(typeof r=="string")throw new Error("string part in extglob AST??");r.copyIn(s.#e[i])}t=s,s=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){let e=this.type===null?this.#e.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#e.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#n||this.#n.#c&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#n===this)return!0;if(!this.#t?.isStart())return!1;if(this.#o===0)return!0;let e=this.#t;for(let t=0;t<this.#o;t++){let s=e.#e[t];if(!(s instanceof n&&s.type==="!"))return!1}return!0}isEnd(){if(this.#n===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let s of this.#e)t.copyIn(s);return t}static#u(e,t,s,i){let r=!1,o=!1,c=-1,a=!1;if(t.type===null){let d=s,g="";for(;d<e.length;){let p=e.charAt(d++);if(r||p==="\\"){r=!r,g+=p;continue}if(o){d===c+1?(p==="^"||p==="!")&&(a=!0):p==="]"&&!(d===c+2&&a)&&(o=!1),g+=p;continue}else if(p==="["){o=!0,c=d,a=!1,g+=p;continue}if(!i.noext&&_o(p)&&e.charAt(d)==="("){t.push(g),g="";let m=new n(p,t);d=n.#u(e,m,d,i),t.push(m);continue}g+=p}return t.push(g),d}let l=s+1,u=new n(null,t),f=[],h="";for(;l<e.length;){let d=e.charAt(l++);if(r||d==="\\"){r=!r,h+=d;continue}if(o){l===c+1?(d==="^"||d==="!")&&(a=!0):d==="]"&&!(l===c+2&&a)&&(o=!1),h+=d;continue}else if(d==="["){o=!0,c=l,a=!1,h+=d;continue}if(_o(d)&&e.charAt(l)==="("){u.push(h),h="";let g=new n(d,u);u.push(g),l=n.#u(e,g,l,i);continue}if(d==="|"){u.push(h),h="",f.push(u),u=new n(null,t);continue}if(d===")")return h===""&&t.#e.length===0&&(t.#f=!0),u.push(h),h="",t.push(...f,u),l;h+=d}return t.type=null,t.#s=void 0,t.#e=[e.substring(s-1)],l}static fromGlob(e,t={}){let s=new n(null,void 0,t);return n.#u(e,s,0,t),s}toMMPattern(){if(this!==this.#n)return this.#n.toMMPattern();let e=this.toString(),[t,s,i,r]=this.toRegExpSource();if(!(i||this.#s||this.#r.nocase&&!this.#r.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return s;let c=(this.#r.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${t}$`,c),{_src:t,_glob:e})}toRegExpSource(e){let t=e??!!this.#r.dot;if(this.#n===this&&this.#d(),!this.type){let a=this.isStart()&&this.isEnd(),l=this.#e.map(d=>{let[g,p,m,y]=typeof d=="string"?n.#p(d,this.#s,a):d.toRegExpSource(e);return this.#s=this.#s||m,this.#i=this.#i||y,g}).join(""),u="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&zu.has(this.#e[0]))){let g=Ju,p=t&&g.has(l.charAt(0))||l.startsWith("\\.")&&g.has(l.charAt(2))||l.startsWith("\\.\\.")&&g.has(l.charAt(4)),m=!t&&!e&&g.has(l.charAt(0));u=p?Uu:m?vt:""}let f="";return this.isEnd()&&this.#n.#c&&this.#t?.type==="!"&&(f="(?:$|\\/)"),[u+l+f,le(l),this.#s=!!this.#s,this.#i]}let s=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",r=this.#h(t);if(this.isStart()&&this.isEnd()&&!r&&this.type!=="!"){let a=this.toString();return this.#e=[a],this.type=null,this.#s=void 0,[a,le(this.toString()),!1,!1]}let o=!s||e||t||!vt?"":this.#h(!0);o===r&&(o=""),o&&(r=`(?:${r})(?:${o})*?`);let c="";if(this.type==="!"&&this.#f)c=(this.isStart()&&!t?vt:"")+xo;else{let a=this.type==="!"?"))"+(this.isStart()&&!t&&!e?vt:"")+Po+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;c=i+r+a}return[c,le(r),this.#s=!!this.#s,this.#i]}#h(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[s,i,r,o]=t.toRegExpSource(e);return this.#i=this.#i||o,s}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#p(e,t,s=!1){let i=!1,r="",o=!1;for(let c=0;c<e.length;c++){let a=e.charAt(c);if(i){i=!1,r+=(Gu.has(a)?"\\":"")+a;continue}if(a==="\\"){c===e.length-1?r+="\\\\":i=!0;continue}if(a==="["){let[l,u,f,h]=bo(e,c);if(f){r+=l,o=o||u,c+=f-1,t=t||h;continue}}if(a==="*"){s&&e==="*"?r+=xo:r+=Po,t=!0;continue}if(a==="?"){r+=Dn,t=!0;continue}r+=Yu(a)}return[r,le(e),!!t,o]}};var In=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var z=(n,e,t={})=>(Ue(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Te(e,t).match(n)),Vu=/^\*+([^+@!?\*\[\(]*)$/,Ku=n=>e=>!e.startsWith(".")&&e.endsWith(n),Qu=n=>e=>e.endsWith(n),Zu=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),Xu=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),ef=/^\*+\.\*+$/,tf=n=>!n.startsWith(".")&&n.includes("."),nf=n=>n!=="."&&n!==".."&&n.includes("."),sf=/^\.\*+$/,rf=n=>n!=="."&&n!==".."&&n.startsWith("."),of=/^\*+$/,cf=n=>n.length!==0&&!n.startsWith("."),af=n=>n.length!==0&&n!=="."&&n!=="..",lf=/^\?+([^+@!?\*\[\(]*)?$/,uf=([n,e=""])=>{let t=Ro([n]);return e?(e=e.toLowerCase(),s=>t(s)&&s.toLowerCase().endsWith(e)):t},ff=([n,e=""])=>{let t=Fo([n]);return e?(e=e.toLowerCase(),s=>t(s)&&s.toLowerCase().endsWith(e)):t},hf=([n,e=""])=>{let t=Fo([n]);return e?s=>t(s)&&s.endsWith(e):t},df=([n,e=""])=>{let t=Ro([n]);return e?s=>t(s)&&s.endsWith(e):t},Ro=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},Fo=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},Co=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Eo={win32:{sep:"\\"},posix:{sep:"/"}},pf=Co==="win32"?Eo.win32.sep:Eo.posix.sep;z.sep=pf;var Q=Symbol("globstar **");z.GLOBSTAR=Q;var gf="[^/]",mf=gf+"*?",yf="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",vf="(?:(?!(?:\\/|^)\\.).)*?",wf=(n,e={})=>t=>z(t,n,e);z.filter=wf;var K=(n,e={})=>Object.assign({},n,e),Sf=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return z;let e=z;return Object.assign((s,i,r={})=>e(s,i,K(n,r)),{Minimatch:class extends e.Minimatch{constructor(i,r={}){super(i,K(n,r))}static defaults(i){return e.defaults(K(n,i)).Minimatch}},AST:class extends e.AST{constructor(i,r,o={}){super(i,r,K(n,o))}static fromGlob(i,r={}){return e.AST.fromGlob(i,K(n,r))}},unescape:(s,i={})=>e.unescape(s,K(n,i)),escape:(s,i={})=>e.escape(s,K(n,i)),filter:(s,i={})=>e.filter(s,K(n,i)),defaults:s=>e.defaults(K(n,s)),makeRe:(s,i={})=>e.makeRe(s,K(n,i)),braceExpand:(s,i={})=>e.braceExpand(s,K(n,i)),match:(s,i,r={})=>e.match(s,i,K(n,r)),sep:e.sep,GLOBSTAR:Q})};z.defaults=Sf;var To=(n,e={})=>(Ue(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:(0,Ao.default)(n));z.braceExpand=To;var bf=(n,e={})=>new Te(n,e).makeRe();z.makeRe=bf;var _f=(n,e,t={})=>{let s=new Te(e,t);return n=n.filter(i=>s.match(i)),s.options.nonull&&!n.length&&n.push(e),n};z.match=_f;var ko=/[?*]|[+@!]\(.*?\)|\[|\]/,Pf=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Te=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){Ue(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Co,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,this.globSet);let s=this.globSet.map(r=>this.slashSplit(r));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let i=this.globParts.map((r,o,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let a=r[0]===""&&r[1]===""&&(r[2]==="?"||!ko.test(r[2]))&&!ko.test(r[3]),l=/^[a-z]:/i.test(r[0]);if(a)return[...r.slice(0,4),...r.slice(4).map(u=>this.parse(u))];if(l)return[r[0],...r.slice(1).map(u=>this.parse(u))]}return r.map(a=>this.parse(a))});if(this.debug(this.pattern,i),this.set=i.filter(r=>r.indexOf(!1)===-1),this.isWindows)for(let r=0;r<this.set.length;r++){let o=this.set[r];o[0]===""&&o[1]===""&&this.globParts[r][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let s=0;s<e.length;s++)for(let i=0;i<e[s].length;i++)e[s][i]==="**"&&(e[s][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let s=-1;for(;(s=t.indexOf("**",s+1))!==-1;){let i=s;for(;t[i+1]==="**";)i++;i!==s&&t.splice(s,i-s)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((s,i)=>{let r=s[s.length-1];return i==="**"&&r==="**"?s:i===".."&&r&&r!==".."&&r!=="."&&r!=="**"?(s.pop(),s):(s.push(i),s)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let r=e[i];i===1&&r===""&&e[0]===""||(r==="."||r==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let s=0;for(;(s=e.indexOf("..",s+1))!==-1;){let i=e[s-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(s-1,2),s-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let s of e){let i=-1;for(;(i=s.indexOf("**",i+1))!==-1;){let o=i;for(;s[o+1]==="**";)o++;o>i&&s.splice(i+1,o-i);let c=s[i+1],a=s[i+2],l=s[i+3];if(c!==".."||!a||a==="."||a===".."||!l||l==="."||l==="..")continue;t=!0,s.splice(i,1);let u=s.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){let c=s[o];o===1&&c===""&&s[0]===""||(c==="."||c==="")&&(t=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(t=!0,s.pop())}let r=0;for(;(r=s.indexOf("..",r+1))!==-1;){let o=s[r-1];if(o&&o!=="."&&o!==".."&&o!=="**"){t=!0;let a=r===1&&s[r+1]==="**"?["."]:[];s.splice(r-1,2,...a),s.length===0&&s.push(""),r-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let s=t+1;s<e.length;s++){let i=this.partsMatch(e[t],e[s],!this.preserveMultipleSlashes);i&&(e[t]=i,e[s]=[])}return e.filter(t=>t.length)}partsMatch(e,t,s=!1){let i=0,r=0,o=[],c="";for(;i<e.length&&r<t.length;)if(e[i]===t[r])o.push(c==="b"?t[r]:e[i]),i++,r++;else if(s&&e[i]==="**"&&t[r]===e[i+1])o.push(e[i]),i++;else if(s&&t[r]==="**"&&e[i]===t[r+1])o.push(t[r]),r++;else if(e[i]==="*"&&t[r]&&(this.options.dot||!t[r].startsWith("."))&&t[r]!=="**"){if(c==="b")return!1;c="a",o.push(e[i]),i++,r++}else if(t[r]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",o.push(t[r]),i++,r++}else return!1;return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,s=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,s++;s&&(this.pattern=e.slice(s)),this.negate=t}matchOne(e,t,s=!1){let i=this.options;if(this.isWindows){let p=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),m=!p&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),y=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),x=!y&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),E=m?3:p?0:void 0,T=x?3:y?0:void 0;if(typeof E=="number"&&typeof T=="number"){let[H,N]=[e[E],t[T]];H.toLowerCase()===N.toLowerCase()&&(t[T]=H,T>E?t=t.slice(T):E>T&&(e=e.slice(E)))}}let{optimizationLevel:r=1}=this.options;r>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,c=0,a=e.length,l=t.length;o<a&&c<l;o++,c++){this.debug("matchOne loop");var u=t[c],f=e[o];if(this.debug(t,u,f),u===!1)return!1;if(u===Q){this.debug("GLOBSTAR",[t,u,f]);var h=o,d=c+1;if(d===l){for(this.debug("** at the end");o<a;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;h<a;){var g=e[h];if(this.debug(`
globstar while`,e,h,t,d,g),this.matchOne(e.slice(h),t.slice(d),s))return this.debug("globstar found match!",h,a,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,h,t,d);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(s&&(this.debug(`
>>> no match, partial?`,e,h,t,d),h===a))}let p;if(typeof u=="string"?(p=f===u,this.debug("string match",u,f,p)):(p=u.test(f),this.debug("pattern match",u,f,p)),!p)return!1}if(o===a&&c===l)return!0;if(o===a)return s;if(c===l)return o===a-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return To(this.pattern,this.options)}parse(e){Ue(e);let t=this.options;if(e==="**")return Q;if(e==="")return"";let s,i=null;(s=e.match(of))?i=t.dot?af:cf:(s=e.match(Vu))?i=(t.nocase?t.dot?Xu:Zu:t.dot?Qu:Ku)(s[1]):(s=e.match(lf))?i=(t.nocase?t.dot?ff:uf:t.dot?hf:df)(s):(s=e.match(ef))?i=t.dot?nf:tf:(s=e.match(sf))&&(i=rf);let r=Ce.fromGlob(e,this.options).toMMPattern();return i?Object.assign(r,{test:i}):r}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,s=t.noglobstar?mf:t.dot?yf:vf,i=new Set(t.nocase?["i"]:[]),r=e.map(a=>{let l=a.map(u=>{if(u instanceof RegExp)for(let f of u.flags.split(""))i.add(f);return typeof u=="string"?Pf(u):u===Q?Q:u._src});return l.forEach((u,f)=>{let h=l[f+1],d=l[f-1];u!==Q||d===Q||(d===void 0?h!==void 0&&h!==Q?l[f+1]="(?:\\/|"+s+"\\/)?"+h:l[f]=s:h===void 0?l[f-1]=d+"(?:\\/|"+s+")?":h!==Q&&(l[f-1]=d+"(?:\\/|\\/"+s+"\\/)"+h,l[f+1]=Q))}),l.filter(u=>u!==Q).join("/")}).join("|"),[o,c]=e.length>1?["(?:",")"]:["",""];r="^"+o+r+c+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let s=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let r=this.set;this.debug(this.pattern,"set",r);let o=i[i.length-1];if(!o)for(let c=i.length-2;!o&&c>=0;c--)o=i[c];for(let c=0;c<r.length;c++){let a=r[c],l=i;if(s.matchBase&&a.length===1&&(l=[o]),this.matchOne(l,a,t))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(e){return z.defaults(e).Minimatch}};z.AST=Ce;z.Minimatch=Te;z.escape=In;z.unescape=le;var G=W(require("path")),Ye=W(require("vscode"));var ue=class{constructor(){this.disposables=[]}add(e){return this.disposables?this.disposables.push(e):e.dispose(),e}dispose(){if(this.disposables){for(let e of this.disposables)e.dispose();this.disposables=void 0}}},wt=class{get value(){return this._value}set value(e){this._value&&this._value.dispose(),this._value=e}clear(){this._value?.dispose(),this._value=void 0}dispose(){this._value&&this._value.dispose()}};var ze=class extends Error{},St=class extends ze{constructor(e){super(`${e.message}. Try running 'npm install @vscode/test-cli', and then 'Refresh Tests'`)}},Ge=class extends ze{constructor(e){super(`Could not read .vscode-test configuration: ${e}`)}},bt=class extends ze{constructor(e){super(`Test process exited with code ${e}`)}};var Ef=jn.default.ResolverFactory.createResolver({fileSystem:new jn.default.CachedInputFileSystem(xf,4e3),conditionNames:["node","require","module"]}),_t=class{constructor(e,t,s){this.uri=e;this.wf=t;this.wrapper=s;this.ds=new ue;this.didDeleteEmitter=this.ds.add(new Ye.EventEmitter);this.didChangeEmitter=this.ds.add(new Ye.EventEmitter);this.onDidDelete=this.didDeleteEmitter.event;this.onDidChange=this.didChangeEmitter.event;let i=this.ds.add(Ye.workspace.createFileSystemWatcher(e.fsPath)),r;this.ds.add(i.onDidChange(()=>{r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,this.readPromise=void 0,this.didChangeEmitter.fire()},300)})),this.ds.add(i.onDidDelete(()=>{this.readPromise=void 0,this.didDeleteEmitter.fire()})),this.ds.add(s.onDidChange(()=>{this.readPromise=void 0,this.didChangeEmitter.fire()}))}read(){return this.readPromise??=this._read()}forget(){this.readPromise=void 0}async spawnCli(e){let t=await this.resolveCli(),s=this.wrapper.value;return await new Promise((i,r)=>{let o=[t,"--config",this.uri.fsPath,...e],c=process.execPath;s instanceof Array?(o=[...s.slice(1),process.execPath,...o],c=s[0]):s&&(o.unshift(process.execPath),c=s);let a=(0,Oo.spawn)(c,o,{cwd:G.dirname(this.uri.fsPath),env:{...process.env,ELECTRON_RUN_AS_NODE:"1"}});a.on("spawn",()=>i(a)),a.on("error",r)})}async captureCliJson(e){let t=await this.spawnCli(e);return await new Promise((s,i)=>{let r=[];t.stdout.on("data",o=>r.push(o)),t.stderr.on("data",o=>r.push(o)),t.on("error",i),t.on("close",o=>{let c=Buffer.concat(r).toString();if(o!==0)return i(new Ge(c));try{s(JSON.parse(c))}catch{i(new Ge(`invalid JSON: ${c}`))}})})}async _read(){let e=await this.captureCliJson(["--list-configuration"]);return new Nn(this.uri,e,this.wf)}async resolveCli(e){return new Promise((t,s)=>Ef.resolve({},this.uri.fsPath,e?`${zt}/${e}`:zt,{},(i,r)=>{i?s(new St(i)):t(e?r:G.join(G.dirname(r),"bin.mjs"))}))}dispose(){this.ds.dispose()}},$n=n=>n.replace(/\\/g,"/"),Mo=n=>!n.platform||n.platform==="desktop",Nn=class{constructor(e,t,s){this.uri=e;this.value=t;this.patterns=t.map(({config:i})=>(typeof i.files=="string"?[i.files]:i.files).map(o=>{if(G.isAbsolute(o))return{glob:!1,value:G.normalize(o)};{let c=G.dirname(this.uri.fsPath);return{glob:!0,value:$n(G.join(c,o)),workspaceFolderRelativeGlob:$n(G.join(G.relative(s.uri.fsPath,c),o))}}}))}roughIncludedFiles(){let e=new Set,t=new Set;for(let s of this.patterns)for(let i of s)i.value.startsWith("!")||(i.glob?e.add(i.workspaceFolderRelativeGlob):t.add(i.value));return{patterns:[...e],files:[...t]}}includesTestFile(e){let t=$n(e.fsPath),s;for(let[i,r]of this.patterns.entries()){let o=!1;for(let{glob:c,value:a}of r){let l=!1;a.startsWith("!")&&(l=!0,a=a.slice(1)),(c?z(t,a):a===G.normalize(t))&&(o=!l)}o&&(s??=[],s.push(i))}return s}};var No=require("crypto"),we=require("fs"),Lo=W(jo()),Ho=require("os"),At=require("path"),qn=W(require("vscode")),Wn=new Lo.IstanbulCoverageContext({booleanCounts:!0}),kt=class{constructor(e){this.configFile=e;this.targetDir=(0,At.join)((0,Ho.tmpdir)(),`ext-coverage-${(0,No.randomUUID)()}`);this.args=["--coverage","--coverage-reporter","json","--coverage-output",this.targetDir];(0,we.mkdirSync)(this.targetDir,{recursive:!0})}async finalize(e){if((0,we.existsSync)(this.targetDir))try{await Wn.apply(e,this.targetDir)}catch(t){qn.window.showWarningMessage(`Error parsing test coverage: ${t}`)}else try{let t=(0,At.resolve)(await this.configFile.resolveCli(),"../../package.json"),{version:s}=JSON.parse(await we.promises.readFile(t,"utf8"));/^0\.0\.[0-4]$/.test(s)&&qn.window.showInformationMessage(`Your @vscode/test-cli version is ${s}. Please update to CLI version 0.0.5 or higher to enable coverage.`,{modal:!0})}catch{}await we.promises.rm(this.targetDir,{recursive:!0,force:!0})}};var qo=require("path"),Wo=require("worker_threads");var Me,Bn,Af=0,Rf=1e4,Bo=n=>{Me??=new Wo.Worker((0,qo.join)(__dirname,"extract","worker.js")),Bn&&clearTimeout(Bn),Bn=setTimeout(()=>{Me?.terminate(),Me=void 0},Rf);let e=Af++;return Me.postMessage({...n,req:e}),new Promise(t=>{let s=i=>{i.req===e&&(Me.removeListener("message",s),t(i))};Me.on("message",s)})};var Uo=n=>{let e;for(let t of n)e=t;return e};var Se=new WeakMap;function*Jo(n,e,t,s){let i=n.path.split("/").slice(0,-1),r=t.path.split("/"),o=e.items;yield{children:o};for(let c=i.length;c<r.length;c++){let a=o.get(r[c]);if(a)o=a.children,yield{children:o,item:a};else if(s){let l=e.createTestItem(r[c],r[c],t.with({path:r.slice(0,c+1).join("/")}));l.tags=s.tags,Se.set(l,c===r.length-1?{type:1,compiledIn:s.compiledFile}:{type:0}),o.add(l),o=l.children,yield{children:o,item:l}}else break}}var Ff=500,Rt=class{constructor(e){this.doSync=e;this.isRunningCall=!1;this.pendingToResolve=[]}scheduleSync(e){return this.isRunningCall||this.doDebounce(),new Promise(t=>{this.pendingToResolve.push({fn:t,arg:e})})}dispose(){this.pendingToResolve.forEach(e=>e.fn()),this.pendingToResolve=[],this.syncTimeout&&clearTimeout(this.syncTimeout)}sync(){this.syncTimeout=void 0,this.isRunningCall=!0;let e=this.pendingToResolve;this.pendingToResolve=[],this.doSync(e[e.length-1].arg).finally(()=>{e.forEach(t=>t.fn()),this.isRunningCall=!1,this.pendingToResolve.length&&this.doDebounce()})}doDebounce(){this.syncTimeout&&clearTimeout(this.syncTimeout),this.syncTimeout=setTimeout(()=>this.sync(),Ff)}};var Ft=C.languages.createDiagnosticCollection("ext-test-duplicates");var Ct=class{constructor(e,t,s,i,r,o){this.ctrl=e;this.wf=t;this.smStore=s;this.runner=r;this.disposable=new ue;this.extractMode=this.disposable.add(new he("extractSettings",is));this.watcher=this.disposable.add(new wt);this.didChangeEmitter=new C.EventEmitter;this.runProfiles=new Map;this.testsInFiles=new Map;this.filesDebounce=new Map;this.onDidChange=this.didChangeEmitter.event;this.disposable.add(e),this.configFile=this.disposable.add(new _t(i,t,o)),this.onDidDelete=this.configFile.onDidDelete;let c=()=>this.scanFiles();this.disposable.add(this.configFile.onDidChange(c)),this.disposable.add(this.extractMode.onDidChange(c)),e.refreshHandler=()=>{this.configFile.forget(),c()},this.scanFiles()}get profiles(){return[...this.runProfiles.values()].flatMap(e=>Object.values(e))}dispose(){this.disposable.dispose()}async syncFile(e,t){let s=this.filesDebounce.get(e.toString());return s||(s=new Rt(i=>this._syncFile(e,i?.()))),s.scheduleSync(t)}async _syncFile(e,t){this.currentConfig||await this.readConfig();let s=this.currentConfig?.includesTestFile(e);if(!s)return;let i=this.testsInFiles.get(e.toString()),r=await Bo({file:e.fsPath,contents:t,skipIfShaMatches:i?.hash,symbols:{extractWith:this.extractMode.value.extractWith,suite:this.extractMode.value.suite,test:this.extractMode.value.test}});if(!r.nodes)return;if(!r.nodes.length){this.deleteFileTests(e.toString());return}let o=i?.sourceMap??this.smStore.maintain(e),c=await o.refresh(t),a=s.map(f=>new C.TestTag(`${f}`)),l=(f,h,d,g)=>{let p=f.children.get(h.name);p||(p=this.ctrl.createTestItem(h.name,h.name,d.uri),p.tags=a,Se.set(p,{type:h.kind===0?2:3}),f.children.add(p)),p.range=new C.Range(d.range.start,g.range.end),p.error=h.error;let m=new Map;for(let y of h.children){let x=m.get(y.name),E=c.originalPositionFor(y.startLine,y.startColumn-1),T=y.endLine!==void 0&&y.endColumn!==void 0?c.originalPositionFor(y.endLine,y.endColumn-1):E;if(x){Tf(E,x);continue}m.set(y.name,l(p,y,E,T))}for(let[y]of p.children)m.has(y)||p.children.delete(y);return p},u=new Map;for(let f of r.nodes){let h=c.originalPositionFor(f.startLine,f.startColumn-1),d=f.endLine!==void 0&&f.endColumn!==void 0?c.originalPositionFor(f.endLine,f.endColumn-1):h,g=Uo(this.getContainingItemsForFile(h.uri,{compiledFile:e,tags:a})).item;Ft.delete(h.uri),u.set(f.name,l(g,f,h,d))}if(i)for(let[f,h]of i.items)u.has(f)||(h.parent?.children??this.ctrl.items).delete(f);this.testsInFiles.set(e.toString(),{items:u,hash:r.hash,sourceMap:o}),this.didChangeEmitter.fire()}deleteFileTests(e){let t=this.testsInFiles.get(e);if(t){this.testsInFiles.delete(e);for(let[s,i]of t.items){Ft.delete(i.uri);let r=this.getContainingItemsForFile(i.uri),o,c;for(let{children:a,item:l}of r)l&&a.size===1?o??={items:c||this.ctrl.items,id:l.id}:o=void 0,c=a;if(!c.get(s))break;o?o.items.delete(o.id):c.delete(s)}this.didChangeEmitter.fire()}}async startWatchingWorkspace(){let e=this.watcher.value=C.workspace.createFileSystemWatcher(new C.RelativePattern(this.wf,"**/*"));e.onDidCreate(t=>this._syncFile(t)),e.onDidChange(t=>this._syncFile(t)),e.onDidDelete(t=>{let s=t.toString();for(let i of this.testsInFiles.keys())(i===s||i[s.length]==="/"&&i.startsWith(s))&&this.deleteFileTests(i)}),await this.scanFiles()}handleScanError(){this.watcher.clear();for(let t of this.testsInFiles.keys())this.deleteFileTests(t);let e=this.errorItem=this.ctrl.createTestItem("error","Extension Test Error");e.error=new C.MarkdownString(`[View details](command:${it}?${encodeURIComponent(JSON.stringify([this.configFile.uri.toString()]))})`),e.error.isTrusted=!0,this.ctrl.items.add(e)}applyRunHandlers(e){let t=this.runProfiles;this.runProfiles=new Map;for(let[s,{config:i}]of e.value.entries()){if(!Mo(i))continue;let r=i.label||`Config #${s+1}`,o=r;for(let d=2;this.runProfiles.has(o);d++)o=`${r} #${d}`;let c=this.tryGetUserDataDir(i.launchArgs||[]),a=this.runner.makeHandler(this.ctrl,this.configFile,s,!1,o,c),l=this.runner.makeHandler(this.ctrl,this.configFile,s,!0,o,c),u=this.runner.makeHandler(this.ctrl,this.configFile,s,!1,o,c,!0),f=t.get(o);if(f){f.run.runHandler=a,f.debug.runHandler=l,f.cover.runHandler=u,this.runProfiles.set(o,f),t.delete(o);continue}let h={run:this.ctrl.createRunProfile(o,C.TestRunProfileKind.Run,a,!0),debug:this.ctrl.createRunProfile(o,C.TestRunProfileKind.Debug,l,!0),cover:this.ctrl.createRunProfile(o,C.TestRunProfileKind.Coverage,u,!0)};h.cover.loadDetailedCoverage=Wn.loadDetailedCoverage;for(let d of Object.values(h))d.tag=new C.TestTag(`${s}`);this.runProfiles.set(o,h)}for(let s of t.values())for(let i of Object.values(s))i.dispose()}tryGetUserDataDir(e){let t="--user-data-dir",s=e.indexOf(t);if(s!==-1)return e[s+1];let i=`${t}=`,r=e.find(o=>o.startsWith(i));return r?r.slice(i.length):void 0}async readConfig(){let e;try{e=await this.configFile.read()}catch{this.handleScanError();return}return e!==this.currentConfig&&(this.applyRunHandlers(e),this.currentConfig=e),e}async scanFiles(){if(this.errorItem&&(this.ctrl.items.delete(this.errorItem.id),this.errorItem=void 0),!this.watcher.value)return this.startWatchingWorkspace();let e=await this.readConfig();if(!e)return;let t=new Set(this.testsInFiles.keys()),s=e.roughIncludedFiles(),i=new Set,r=[],o=a=>{i.has(a.toString())||(r.push(this._syncFile(a)),t.delete(a.toString()),i.add(a.toString()))};s.files.forEach(a=>o(C.Uri.file(a)));let c=s.patterns.map(async a=>{let l=new C.RelativePattern(this.wf,a);for(let u of await C.workspace.findFiles(l))o(u)});await Promise.all(c),await Promise.all(r);for(let a of t)this.deleteFileTests(a);this.testsInFiles.size===0&&this.watcher.clear()}getContainingItemsForFile(e,t){return Jo(this.configFile.uri,this.ctrl,e,t)}},Tf=(n,e)=>{let t=new C.Diagnostic(n.range,"Duplicate tests cannot be run individually and will not be reported correctly by the test framework. Please rename them.",C.DiagnosticSeverity.Warning);t.relatedInformation=[new C.DiagnosticRelatedInformation(new C.Location(e.uri,e.range),"First declared here")],Ft.set(n.uri,Ft.get(n.uri)?.concat([t])||[t])};var te={};ns(te,W(Qo(),1));var ne=W(fc()),yc=require("crypto"),Gn=W(gc()),M=W(require("vscode"));var It=class{constructor(){this.queue=[]}enqueue(e,t){t===void 0?this.queue.push(e):this.queue.push(()=>e instanceof Promise?e.then(t):t(e)),this.queue.length===1&&(this.drained=this.runQueue())}async drain(){await this.drained}runQueue(){for(;this.queue.length;){let e=this.queue[0]();if(e instanceof Promise)return e.finally(()=>(this.queue.shift(),this.runQueue()));this.queue.shift()}}};var $t=class{constructor(e,t,s){this.smStore=e;this.launchConfig=t;this.wrapper=s;this.queues=new Map}makeHandler(e,t,s,i,r,o,c=!1){return async a=>{let l=e.createTestRun(a,r),u=["--label",`${s}`],f;c&&(f=new kt(t),u.push(...f.args));let{args:h,compiledFileTests:d,leafTests:g}=await this.prepareArguments(e,t,s,u,a,l);if(l.token.isCancellationRequested)return;let p=!1,m=!0,y=new It,x=$=>{m&&($=`${ne.default.dim.open}${$}${ne.default.dim.close}`),y.enqueue(()=>l.appendOutput(`${$}\r
`))},E=new M.CancellationTokenSource;l.token.onCancellationRequested(()=>E.cancel());let T={configIndex:s,args:h,config:t,onLine:$=>{let U;try{U=JSON.parse($)}catch{x($);return}switch(U[0]){case te.MochaEvent.Start:m=!1;break;case te.MochaEvent.TestStart:{let{file:b,path:k}=U[1],A=d.lookup(b,k);A&&l.started(A);break}case te.MochaEvent.SuiteStart:{let{path:b}=U[1];b.length>0&&x(`${"  ".repeat(b.length-1)}${ne.default.green.open} \u2713 ${ne.default.green.close}${b[b.length-1]}`);break}case te.MochaEvent.Pass:{p=!0;let{file:b,path:k}=U[1];x(`${"  ".repeat(k.length-1)}${ne.default.green.open} \u2713 ${ne.default.green.close}${k[k.length-1]}`);let A=d.lookup(b,k);A&&(l.passed(A),g.delete(A));break}case te.MochaEvent.Fail:{p=!0;let{err:b,path:k,stack:A,duration:j,expected:v,actual:P,file:O}=U[1],S=d.lookup(O,k);x(`${"  ".repeat(k.length-1)}${ne.default.red.open} x ${k.join(" ")}${ne.default.red.close}`);let R=A||b,q=eh(this.smStore,Zf(R));if(R&&y.enqueue(async()=>l.appendOutput(await q,void 0,S)),!S)return;g.delete(S);let D=P!==v,ts=S.range&&new M.Location(S.uri,new M.Range(S.range.start,new M.Position(S.range.start.line,100))),Zc=th(this.smStore,R,S);y.enqueue(async()=>{let Xc=await Zc,_e;D?(_e=new M.TestMessage(nh(b)),_e.actualOutput=mc(P),_e.expectedOutput=mc(v)):_e=new M.TestMessage(A?await Xf(this.smStore,A):await q),_e.location=Xc??ts,l.failed(S,_e,j)});break}case te.MochaEvent.End:m=!0;break;default:y.enqueue(()=>l.appendOutput(`${$}\r
`))}},token:E.token},H=this.wrapper.value;l.appendOutput(`${ne.default.inverse.open} > ${ne.default.inverse.close} ${H?`${H instanceof Array?H.join(" "):H} `:""}vscode-test ${T.args.join(" ")}\r
`);let N=(this.queues.get(o)||Promise.resolve()).then(async()=>{try{i?await this.runDebug(T):await this.runWithoutDebug(T)}catch($){E.token.isCancellationRequested||x(String($))}});if(this.queues.set(o,N),await N,!E.token.isCancellationRequested)if(p)for(let $ of g)l.skipped($);else{let $=new M.MarkdownString("Test process exited unexpectedly, [view output](command:testing.showMostRecentOutput)");$.isTrusted=!0;for(let U of g)l.errored(U,new M.TestMessage($))}p?await f?.finalize(l):await M.commands.executeCommand("testing.showMostRecentOutput"),await y.drain(),l.end()}}async runDebug({args:e,config:t,onLine:s,token:i,configIndex:r}){let o=(await t.captureCliJson([...e,"--timeout=0","--list-configuration"]))?.[0];if(i.isCancellationRequested||!o||i.isCancellationRequested)return;let c=new ue;return new Promise((a,l)=>{let u=(0,yc.randomUUID)(),f=new Set,h=this.launchConfig.value||{};Promise.resolve(M.debug.startDebugging(t.wf,{...h,type:"extensionHost",request:"launch",name:o.config.label||`Extension Test Config #${r+1}`,args:[`--extensionTestsPath=${o.extensionTestsPath}`,`--extensionDevelopmentPath=${o.extensionDevelopmentPath}`,...h.args||[],...o.config.launchArgs||[]],env:{...o.env,...h.env},__extensionSessionKey:u})).catch(l),c.add(i.onCancellationRequested(()=>{for(let p of f)p?.parentSession||M.debug.stopDebugging(p);a()}));let d=!1;c.add(M.debug.onDidTerminateDebugSession(p=>{f.delete(p),d&&f.size===0&&a()}));let g="";c.add(M.debug.registerDebugAdapterTrackerFactory("*",{createDebugAdapterTracker(p){if(!(p.configuration.__extensionSessionKey!==u&&!f.has(p.parentSession)))return d=!0,f.add(p),{onDidSendMessage({type:m,event:y,body:x}){m==="event"&&y==="output"&&x.output&&x.category!=="telemetry"&&(g+=x.output);let E=g.indexOf(`
`);for(;E!==-1;)s(g.substring(0,E)),g=g.substring(E+1),E=g.indexOf(`
`)}}}}))}).finally(()=>c.dispose())}async runWithoutDebug({args:e,config:t,onLine:s,token:i}){let r=await t.spawnCli(e);return i.isCancellationRequested?r.kill():(i.onCancellationRequested(()=>r.kill()),r.stderr.pipe((0,Gn.default)()).on("data",s),r.stdout.pipe((0,Gn.default)()).on("data",s),new Promise((o,c)=>{r.on("error",c),r.on("exit",a=>{a===0?o():c(new bt(a))})}))}async prepareArguments(e,t,s,i,r,o){let c=String(s),a=await t.resolveCli("fullJsonStream"),l=[...i,"--reporter",a],u=new Set(r.exclude),f=new Set,h=r.include?.slice()??[...e.items].map(([,p])=>p),d=[],g=new Yn;for(let p of h){let m=Se.get(p);if(!(!m||u.has(p))){if(m.type===0){for(let[,y]of p.children)h.push(y);continue}if(p.tags.some(y=>y.id===c)){(m.type===3||m.type===2)&&d.push(Qf(Vf(p))+(m.type===3?"$":" ")),Kf(p,y=>{f.add(y),o.enqueued(y)});for(let y=p;y;y=y.parent){let x=Se.get(y);if(x?.type===1){g.push(x.compiledIn.fsPath,y);break}}}}}if(!r.include||!u.size)for(let p of g.value.keys())l.push("--run",p);return d.length&&l.push("--grep",`/^(${d.join("|")})/`),{args:l,compiledFileTests:g,leafTests:f}}},Yn=class{constructor(){this.value=new Map}lookup(e,t){if(e){let s=this.value.get(e);return s&&this.getPathInTestItems(s,t)}else for(let s of this.value.values()){let i=this.getPathInTestItems(s,t);if(i)return i}}getPathInTestItems(e,t){for(let s of e){let i=s;for(let r=0;r<t.length&&i;r++)i=i.children.get(t[r]);if(i!==void 0)return i}}push(e,t){let s=this.value.get(e);s||this.value.set(e,s=new Set),s.add(t)}},Vf=n=>{let e=n.label;for(;n.parent&&Se.get(n.parent)?.type===2;)n=n.parent,e=`${n.label} ${e}`;return e},Kf=(n,e)=>{let t=[n];for(;t.length;){let s=t.shift();if(s.children.size>0)for(let[,i]of s.children)t.push(i);else e(s)}},Qf=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Zf=n=>n.replace(/(?<!\r)\n/gm,`\r
`),Qe=/(file:\/{3}.+):([0-9]+):([0-9]+)/g;async function Xf(n,e){Qe.lastIndex=0;let t=await Promise.all([...e.matchAll(Qe)].map(async s=>{let i=await Vn(n,s);if(i)return{from:s[0],to:i?.uri.with({fragment:`L${i.range.start.line+1}:${i.range.start.character+1}`})}}));for(let s of t)s&&(e=e.replace(s.from,s.to.toString(!0)));return e}async function eh(n,e){let t=[],s=0;for(let r of e.matchAll(Qe)){let o=Vn(n,r),c=r.index||0,a=c+r[0].length;c>s&&t.push(e.substring(s,c)),t.push(o.then(l=>l?`${l.uri}:${l.range.start.line+1}:${l.range.start.character+1}`:r[0])),s=a}return s<e.length&&t.push(e.substring(s)),(await Promise.all(t)).join("")}async function th(n,e,t){return Qe.lastIndex=0,new Promise(s=>{let i=[...e.matchAll(Qe)],r=i.length;if(r===0)return s(void 0);let o;for(let[c,a]of i.entries())Vn(n,a).catch(()=>{}).then(l=>{if(l){let u=0;t.uri&&t.uri.toString()===l.uri.toString()&&(u=1,t.range&&t.range.contains(l?.range)&&(u=2)),(!o||u>o.score||u===o.score&&c<o.i)&&(o={location:l,i:c,score:u})}--r||s(o?.location)})})}async function Vn(n,e){let[,t,s,i]=e,r=t.startsWith("file:")?M.Uri.parse(t):M.Uri.file(t),o=n.maintain(r),a=(await(o.value||o.refresh()))?.originalPositionFor(Number(s),Number(i))||new M.Location(r,new M.Position(Number(s),Number(i)));return setTimeout(()=>o.dispose(),5e3),a}var mc=n=>typeof n=="object"?JSON.stringify(n,null,2):String(n),nh=n=>{let e=n.split(`
`),t=e.findIndex(s=>s.includes("+ actual"));return t===-1?n:(e.splice(t,1,"```diff"),e.push("```"),new M.MarkdownString(e.join(`
`)))};var Kc=require("fs");var Sc=",".charCodeAt(0),sh=";".charCodeAt(0),vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bc=new Uint8Array(64),_c=new Uint8Array(128);for(let n=0;n<vc.length;n++){let e=vc.charCodeAt(n);bc[n]=e,_c[e]=n}var Kn=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(n){return Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString()}}:{decode(n){let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e}};function Pc(n){let e=new Int32Array(5),t=[],s=0;do{let i=ih(n,s),r=[],o=!0,c=0;e[0]=0;for(let a=s;a<i;a++){let l;a=Ze(n,a,e,0);let u=e[0];u<c&&(o=!1),c=u,wc(n,a,i)?(a=Ze(n,a,e,1),a=Ze(n,a,e,2),a=Ze(n,a,e,3),wc(n,a,i)?(a=Ze(n,a,e,4),l=[u,e[1],e[2],e[3],e[4]]):l=[u,e[1],e[2],e[3]]):l=[u],r.push(l)}o||rh(r),t.push(r),s=i+1}while(s<=n.length);return t}function ih(n,e){let t=n.indexOf(";",e);return t===-1?n.length:t}function Ze(n,e,t,s){let i=0,r=0,o=0;do{let a=n.charCodeAt(e++);o=_c[a],i|=(o&31)<<r,r+=5}while(o&32);let c=i&1;return i>>>=1,c&&(i=-2147483648|-i),t[s]+=i,e}function wc(n,e,t){return e>=t?!1:n.charCodeAt(e)!==Sc}function rh(n){n.sort(oh)}function oh(n,e){return n[0]-e[0]}function xc(n){let e=new Int32Array(5),t=1024*16,s=t-36,i=new Uint8Array(t),r=i.subarray(0,s),o=0,c="";for(let a=0;a<n.length;a++){let l=n[a];if(a>0&&(o===t&&(c+=Kn.decode(i),o=0),i[o++]=sh),l.length!==0){e[0]=0;for(let u=0;u<l.length;u++){let f=l[u];o>s&&(c+=Kn.decode(r),i.copyWithin(0,s,o),o-=s),u>0&&(i[o++]=Sc),o=Xe(i,o,e,f,0),f.length!==1&&(o=Xe(i,o,e,f,1),o=Xe(i,o,e,f,2),o=Xe(i,o,e,f,3),f.length!==4&&(o=Xe(i,o,e,f,4)))}}}return c+Kn.decode(i.subarray(0,o))}function Xe(n,e,t,s,i){let r=s[i],o=r-t[i];t[i]=r,o=o<0?-o<<1|1:o<<1;do{let c=o&31;o>>>=5,o>0&&(c|=32),n[e++]=bc[c]}while(o>0);return e}var ch=/^[\w+.-]+:\/\//,ah=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,lh=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i,L;(function(n){n[n.Empty=1]="Empty",n[n.Hash=2]="Hash",n[n.Query=3]="Query",n[n.RelativePath=4]="RelativePath",n[n.AbsolutePath=5]="AbsolutePath",n[n.SchemeRelative=6]="SchemeRelative",n[n.Absolute=7]="Absolute"})(L||(L={}));function uh(n){return ch.test(n)}function fh(n){return n.startsWith("//")}function Ac(n){return n.startsWith("/")}function hh(n){return n.startsWith("file:")}function Ec(n){return/^[.?#]/.test(n)}function jt(n){let e=ah.exec(n);return Rc(e[1],e[2]||"",e[3],e[4]||"",e[5]||"/",e[6]||"",e[7]||"")}function dh(n){let e=lh.exec(n),t=e[2];return Rc("file:","",e[1]||"","",Ac(t)?t:"/"+t,e[3]||"",e[4]||"")}function Rc(n,e,t,s,i,r,o){return{scheme:n,user:e,host:t,port:s,path:i,query:r,hash:o,type:L.Absolute}}function kc(n){if(fh(n)){let t=jt("http:"+n);return t.scheme="",t.type=L.SchemeRelative,t}if(Ac(n)){let t=jt("http://foo.com"+n);return t.scheme="",t.host="",t.type=L.AbsolutePath,t}if(hh(n))return dh(n);if(uh(n))return jt(n);let e=jt("http://foo.com/"+n);return e.scheme="",e.host="",e.type=n?n.startsWith("?")?L.Query:n.startsWith("#")?L.Hash:L.RelativePath:L.Empty,e}function ph(n){if(n.endsWith("/.."))return n;let e=n.lastIndexOf("/");return n.slice(0,e+1)}function gh(n,e){Fc(e,e.type),n.path==="/"?n.path=e.path:n.path=ph(e.path)+n.path}function Fc(n,e){let t=e<=L.RelativePath,s=n.path.split("/"),i=1,r=0,o=!1;for(let a=1;a<s.length;a++){let l=s[a];if(!l){o=!0;continue}if(o=!1,l!=="."){if(l===".."){r?(o=!0,r--,i--):t&&(s[i++]=l);continue}s[i++]=l,r++}}let c="";for(let a=1;a<i;a++)c+="/"+s[a];(!c||o&&!c.endsWith("/.."))&&(c+="/"),n.path=c}function Cc(n,e){if(!n&&!e)return"";let t=kc(n),s=t.type;if(e&&s!==L.Absolute){let r=kc(e),o=r.type;switch(s){case L.Empty:t.hash=r.hash;case L.Hash:t.query=r.query;case L.Query:case L.RelativePath:gh(t,r);case L.AbsolutePath:t.user=r.user,t.host=r.host,t.port=r.port;case L.SchemeRelative:t.scheme=r.scheme}o>s&&(s=o)}Fc(t,s);let i=t.query+t.hash;switch(s){case L.Hash:case L.Query:return i;case L.RelativePath:{let r=t.path.slice(1);return r?Ec(e||n)&&!Ec(r)?"./"+r+i:r+i:i||"."}case L.AbsolutePath:return t.path+i;default:return t.scheme+"//"+t.user+t.host+t.port+t.path+i}}function Tc(n,e){return e&&!e.endsWith("/")&&(e+="/"),Cc(n,e)}function mh(n){if(!n)return"";let e=n.lastIndexOf("/");return n.slice(0,e+1)}var oe=0,$c=1,jc=2,Nc=3,yh=4,Lc=1,Hc=2;function vh(n,e){let t=Oc(n,0);if(t===n.length)return n;e||(n=n.slice());for(let s=t;s<n.length;s=Oc(n,s+1))n[s]=Sh(n[s],e);return n}function Oc(n,e){for(let t=e;t<n.length;t++)if(!wh(n[t]))return t;return n.length}function wh(n){for(let e=1;e<n.length;e++)if(n[e][oe]<n[e-1][oe])return!1;return!0}function Sh(n,e){return e||(n=n.slice()),n.sort(bh)}function bh(n,e){return n[oe]-e[oe]}var be=!1;function _h(n,e,t,s){for(;t<=s;){let i=t+(s-t>>1),r=n[i][oe]-e;if(r===0)return be=!0,i;r<0?t=i+1:s=i-1}return be=!1,t-1}function Zn(n,e,t){for(let s=t+1;s<n.length&&n[s][oe]===e;t=s++);return t}function qc(n,e,t){for(let s=t-1;s>=0&&n[s][oe]===e;t=s--);return t}function Wc(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function Bc(n,e,t,s){let{lastKey:i,lastNeedle:r,lastIndex:o}=t,c=0,a=n.length-1;if(s===i){if(e===r)return be=o!==-1&&n[o][oe]===e,o;e>=r?c=o===-1?0:o:a=o}return t.lastKey=s,t.lastNeedle=e,t.lastIndex=_h(n,e,c,a)}function Ph(n,e){let t=e.map(Eh);for(let s=0;s<n.length;s++){let i=n[s];for(let r=0;r<i.length;r++){let o=i[r];if(o.length===1)continue;let c=o[$c],a=o[jc],l=o[Nc],u=t[c],f=u[a]||(u[a]=[]),h=e[c],d=Zn(f,l,Bc(f,l,h,a));xh(f,h.lastIndex=d+1,[l,s,o[oe]])}}return t}function xh(n,e,t){for(let s=n.length;s>e;s--)n[s]=n[s-1];n[e]=t}function Eh(){return{__proto__:null}}var Mc="`line` must be greater than 0 (lines start at line 1)",Dc="`column` must be greater than or equal to 0 (columns start at column 0)",qt=-1,Lt=1,Ic,je,kh,Xn,Ah,Rh,Fh,Ch,Th,Oh,Mh,Ne=class{constructor(e,t){let s=typeof e=="string";if(!s&&e._decodedMemo)return e;let i=s?JSON.parse(e):e,{version:r,file:o,names:c,sourceRoot:a,sources:l,sourcesContent:u}=i;this.version=r,this.file=o,this.names=c,this.sourceRoot=a,this.sources=l,this.sourcesContent=u;let f=Tc(a||"",mh(t));this.resolvedSources=l.map(d=>Tc(d||"",f));let{mappings:h}=i;typeof h=="string"?(this._encoded=h,this._decoded=void 0):(this._encoded=void 0,this._decoded=vh(h,s)),this._decodedMemo=Wc(),this._bySources=void 0,this._bySourceMemos=void 0}};(()=>{Ic=e=>{var t;return(t=e._encoded)!==null&&t!==void 0?t:e._encoded=xc(e._decoded)},je=e=>e._decoded||(e._decoded=Pc(e._encoded)),kh=(e,t,s)=>{let i=je(e);if(t>=i.length)return null;let r=i[t],o=Ht(r,e._decodedMemo,t,s,Lt);return o===-1?null:r[o]},Xn=(e,{line:t,column:s,bias:i})=>{if(t--,t<0)throw new Error(Mc);if(s<0)throw new Error(Dc);let r=je(e);if(t>=r.length)return Nt(null,null,null,null);let o=r[t],c=Ht(o,e._decodedMemo,t,s,i||Lt);if(c===-1)return Nt(null,null,null,null);let a=o[c];if(a.length===1)return Nt(null,null,null,null);let{names:l,resolvedSources:u}=e;return Nt(u[a[$c]],a[jc]+1,a[Nc],a.length===5?l[a[yh]]:null)},Rh=(e,{source:t,line:s,column:i,bias:r})=>n(e,t,s,i,r||qt,!0),Ah=(e,{source:t,line:s,column:i,bias:r})=>n(e,t,s,i,r||Lt,!1),Fh=(e,t)=>{let s=je(e),{names:i,resolvedSources:r}=e;for(let o=0;o<s.length;o++){let c=s[o];for(let a=0;a<c.length;a++){let l=c[a],u=o+1,f=l[0],h=null,d=null,g=null,p=null;l.length!==1&&(h=r[l[1]],d=l[2]+1,g=l[3]),l.length===5&&(p=i[l[4]]),t({generatedLine:u,generatedColumn:f,source:h,originalLine:d,originalColumn:g,name:p})}}},Ch=(e,t)=>{let{sources:s,resolvedSources:i,sourcesContent:r}=e;if(r==null)return null;let o=s.indexOf(t);return o===-1&&(o=i.indexOf(t)),o===-1?null:r[o]},Th=(e,t)=>{let s=new Ne(Qn(e,[]),t);return s._decoded=e.mappings,s},Oh=e=>Qn(e,je(e)),Mh=e=>Qn(e,Ic(e));function n(e,t,s,i,r,o){if(s--,s<0)throw new Error(Mc);if(i<0)throw new Error(Dc);let{sources:c,resolvedSources:a}=e,l=c.indexOf(t);if(l===-1&&(l=a.indexOf(t)),l===-1)return o?[]:et(null,null);let f=(e._bySources||(e._bySources=Ph(je(e),e._bySourceMemos=c.map(Wc))))[l][s];if(f==null)return o?[]:et(null,null);let h=e._bySourceMemos[l];if(o)return Dh(f,h,s,i,r);let d=Ht(f,h,s,i,r);if(d===-1)return et(null,null);let g=f[d];return et(g[Lc]+1,g[Hc])}})();function Qn(n,e){return{version:n.version,file:n.file,names:n.names,sourceRoot:n.sourceRoot,sources:n.sources,sourcesContent:n.sourcesContent,mappings:e}}function Nt(n,e,t,s){return{source:n,line:e,column:t,name:s}}function et(n,e){return{line:n,column:e}}function Ht(n,e,t,s,i){let r=Bc(n,s,e,t);return be?r=(i===qt?Zn:qc)(n,s,r):i===qt&&r++,r===-1||r===n.length?-1:r}function Dh(n,e,t,s,i){let r=Ht(n,e,t,s,Lt);if(!be&&i===qt&&r++,r===-1||r===n.length)return[];let o=be?s:n[r][oe];be||(r=qc(n,o,r));let c=Zn(n,o,r),a=[];for(;r<=c;r++){let l=n[r];a.push(et(l[Lc]+1,l[Hc]))}return a}var zc=W(Uc()),Gc=W(require("fs/promises")),Yc=require("url"),ce=W(require("vscode")),es="//# sourceMappingURL=",tt=n=>({originalPositionFor(e,t){return new ce.Location(n,new ce.Position(e-1,t))}}),Jc=(n,e)=>({originalPositionFor(t,s){let{source:i,line:r,column:o}=Xn(e,{line:t,column:s});return i?new ce.Location(ce.Uri.parse(i),new ce.Position(r-1,o)):new ce.Location(n,new ce.Position(t-1,s))}}),Vc=(n,e)=>{let t=e.lastIndexOf(es);if(t===-1)return tt(n);let s=e.indexOf(`
`,t+es.length);s===-1&&(s=e.length);let i=e.slice(t+es.length,s).trim();return Nh(n,i)},Nh=(n,e)=>{let t=n.toString();if(e.startsWith("data:")){let i=(0,zc.dataUriToBuffer)(e),r=new TextDecoder;return Jc(n,new Ne(r.decode(i.buffer),t))}let s=(0,Yc.fileURLToPath)(new URL(e,t).toString());try{return Gc.readFile(s,"utf8").then(i=>Jc(n,new Ne(i,t))).catch(()=>tt(n))}catch{return tt(n)}};var Bt=class{constructor(){this.maps=new Map}maintain(e){let t=this.maps,s=e.toString(),i=t.get(s);return i||(i={rc:0},t.set(s,i)),i.rc++,{compiledUri:e,get value(){return i.accessor},async refresh(r){let o=Kc.promises.readFile(e.fsPath,"utf8")||Promise.resolve(r);return i.accessor=o.then(c=>Vc(e,c),()=>tt(e))},dispose(){--i.rc===0&&t.delete(s)}}}};function Lh(n){let e=new Bt,t=new he("wrapper",void 0),s=new $t(e,new he("debugOptions",{}),t),i=[],r=0,o=async()=>{if(r===1&&(r=2),r!==0)return;r=1,i.forEach(h=>h.dispose()),i=[];let u=B.workspace.workspaceFolders??[];await Promise.all(u.map(async h=>{let d=await B.workspace.findFiles(new B.RelativePattern(h,ss));for(let g of d){let p=Ut.relative(h.uri.fsPath,Ut.dirname(g.fsPath)),m=B.tests.createTestController(g.toString(),p?u.length>1?`Extension (${h.name}: ${p})`:`Extension (${p})`:"VS Code Extension");i.push(new Ct(m,h,e,g,s,t))}}));let f=r;r=0,f===2&&o()},c=async u=>{let f=await B.workspace.openTextDocument({content:u});await B.window.showTextDocument(f)},a=async u=>{let f=B.Uri.parse(u),h=i.find(d=>d.configFile.uri.toString()===f.toString());try{await h?.configFile.read()}catch(d){await c(String(d));return}B.window.showInformationMessage("No configuration error detected")},l=(async()=>{for(let u=0;u<10&&(await o(),!(i.length>0));u++)await Qc.setTimeout(1e3)})();n.subscriptions.push(t,B.workspace.onDidChangeWorkspaceFolders(o),B.commands.registerCommand(it,a),B.commands.registerCommand(rs,()=>l.then(()=>i)),new B.Disposable(()=>i.forEach(u=>u.dispose())))}function Hh(){}0&&(module.exports={activate,deactivate});
